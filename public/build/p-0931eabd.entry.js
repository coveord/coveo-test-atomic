import{r as e,h as t}from"./p-00525453.js";
/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r=Object.create;var n=Object.defineProperty;var i=Object.getOwnPropertyDescriptor;var o=Object.getOwnPropertyNames;var a=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var s=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var c=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):e)((function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}));var l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var d=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of o(t))!u.call(e,s)&&s!==r&&n(e,s,{get:()=>t[s],enumerable:!(a=i(t,s))||a.enumerable});return e};var f=(e,t,i)=>(i=e!=null?r(a(e)):{},d(t||!e||!e.__esModule?n(i,"default",{value:e,enumerable:!0}):i,e));var h=(e,t,r)=>s(e,typeof t!="symbol"?t+"":t,r);var p=l(((e,t)=>{t.exports=fetch}));var y=l((e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function n(e){var n=t(t({},r),e);return n.numOfAttempts<1&&(n.numOfAttempts=1),n}e.getSanitizedOptions=n}));var v=l((e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(e){var t=Math.random()*e;return Math.round(t)}e.fullJitter=t}));var m=l((e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(e){return e}e.noJitter=t}));var g=l((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=v(),r=m();function n(e){switch(e.jitter){case"full":return t.fullJitter;case"none":default:return r.noJitter}}e.JitterFactory=n}));var w=l((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=g(),r=function(){function e(e){this.options=e,this.attempt=0}return e.prototype.apply=function(){var e=this;return new Promise((function(t){return setTimeout(t,e.jitteredDelay)}))},e.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var e=t.JitterFactory(this.options);return e(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var e=this.options.startingDelay,t=this.options.timeMultiple,r=this.numOfDelayedAttempts,n=e*Math.pow(t,r);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();e.Delay=r}));var b=l((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r=e&&e.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function u(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?r(e.value):i(e.value).then(a,u)}s((n=n.apply(e,t||[])).next())}))},n=e&&e.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(e){return function(t){return s([e,t])}}function s(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var i=w(),o=function(e){t(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.apply=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]}))}))},Object.defineProperty(i.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),i}(i.Delay);e.SkipFirstDelay=o}));var S=l((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=w(),n=function(e){t(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(r.Delay);e.AlwaysDelay=n}));var k=l((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=b(),r=S();function n(e,t){var r=i(e);return r.setAttemptNumber(t),r}e.DelayFactory=n;function i(e){return e.delayFirstAttempt?new r.AlwaysDelay(e):new t.SkipFirstDelay(e)}}));var O=l((e=>{var t=e&&e.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function u(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?r(e.value):i(e.value).then(a,u)}s((n=n.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(e){return function(t){return s([e,t])}}function s(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var n=y(),i=k();function o(e,i){return i===void 0&&(i={}),t(this,void 0,void 0,(function(){var t,o;return r(this,(function(r){switch(r.label){case 0:return t=n.getSanitizedOptions(i),o=new a(e,t),[4,o.execute()];case 1:return[2,r.sent()]}}))}))}e.backOff=o;var a=function(){function e(e,t){this.request=e,this.options=t,this.attemptNumber=0}return e.prototype.execute=function(){return t(this,void 0,void 0,(function(){var e,t;return r(this,(function(r){switch(r.label){case 0:if(this.attemptLimitReached)return[3,7];r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return r.sent(),[4,this.request()];case 3:return[2,r.sent()];case 4:return e=r.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(t=r.sent(),!t||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}}))}))},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return t(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:return e=i.DelayFactory(this.options,this.attemptNumber),[4,e.apply()];case 1:return t.sent(),[2]}}))}))},e}()}));var I=l(((e,t)=>{function r(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(e=`${e}`,e=e.replace(/[ \t\n\f\r]/g,""),e.length%4===0&&(e=e.replace(/==?$/,"")),e.length%4===1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,n=0;for(let o=0;o<e.length;o++)r<<=6,r|=i(e[o]),n+=6,n===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,t+=String.fromCharCode(r)):n===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function i(e){let t=n.indexOf(e);return t<0?void 0:t}t.exports=r}));var j=l(((e,t)=>{function r(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(t)>>2,n[1]=(e.charCodeAt(t)&3)<<4,e.length>t+1&&(n[1]|=e.charCodeAt(t+1)>>4,n[2]=(e.charCodeAt(t+1)&15)<<2),e.length>t+2&&(n[2]|=e.charCodeAt(t+2)>>6,n[3]=e.charCodeAt(t+2)&63);for(let e=0;e<n.length;e++)typeof n[e]>"u"?r+="=":r+=i(n[e])}return r}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function i(e){if(e>=0&&e<64)return n[e]}t.exports=r}));var T=l(((e,t)=>{var r=I(),n=j();t.exports={atob:r,btoa:n}}));var A=l(((e,t)=>{var r=typeof self<"u"?self:typeof window<"u"?window:void 0;if(!r)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!r.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');t.exports.AbortController=r.AbortController}));var R=l(((e,t)=>{var r=/(^|; )Coveo-Pendragon=([^;]*)/;t.exports=()=>r.exec(document.cookie)?.pop()||null}));var q=l(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=n()})(e,(function(){var e=1e3,t=6e4,r=36e5,n="millisecond",i="second",o="minute",a="hour",u="day",s="week",c="month",l="quarter",d="year",f="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},m=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},g={s:m,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+m(n,2,"0")+":"+m(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,c),o=r-i<0,a=t.clone().add(n+(o?-1:1),c);return+(-(n+(r-i)/(o?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:s,d:u,D:f,h:a,m:o,s:i,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return e===void 0}},w="en",b={};b[w]=v;var S="$isDayjsObject",k=function(e){return e instanceof T||!(!e||!e[S])},O=function e(t,r,n){var i;if(!t)return w;if(typeof t=="string"){var o=t.toLowerCase();b[o]&&(i=o),r&&(b[o]=r,i=o);var a=t.split("-");if(!i&&a.length>1)return e(a[0])}else{var u=t.name;b[u]=t,i=u}return!n&&i&&(w=i),i||!n&&w},I=function(e,t){if(k(e))return e.clone();var r=typeof t=="object"?t:{};return r.date=e,r.args=arguments,new T(r)},j=g;j.l=O,j.i=k,j.w=function(e,t){return I(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function v(e){this.$L=O(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[S]=!0}var m=v.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(t===null)return new Date(NaN);if(j.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var n=t.match(p);if(n){var i=n[2]-1||0,o=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(t)}(e),this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return j},m.isValid=function(){return this.$d.toString()!==h},m.isSame=function(e,t){var r=I(e);return this.startOf(t)<=r&&r<=this.endOf(t)},m.isAfter=function(e,t){return I(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<I(e)},m.$g=function(e,t,r){return j.u(e)?this[t]:this.set(r,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var r=this,n=!!j.u(t)||t,l=j.p(e),h=function(e,t){var i=j.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?i:i.endOf(u)},p=function(e,t){return j.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},y=this.$W,v=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(l){case d:return n?h(1,0):h(31,11);case c:return n?h(1,v):h(0,v+1);case s:var w=this.$locale().weekStart||0,b=(y<w?y+7:y)-w;return h(n?m-b:m+(6-b),v);case u:case f:return p(g+"Hours",0);case a:return p(g+"Minutes",1);case o:return p(g+"Seconds",2);case i:return p(g+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var r,s=j.p(e),l="set"+(this.$u?"UTC":""),h=(r={},r[u]=l+"Date",r[f]=l+"Date",r[c]=l+"Month",r[d]=l+"FullYear",r[a]=l+"Hours",r[o]=l+"Minutes",r[i]=l+"Seconds",r[n]=l+"Milliseconds",r)[s],p=s===u?this.$D+(t-this.$W):t;if(s===c||s===d){var y=this.clone().set(f,1);y.$d[h](p),y.init(),this.$d=y.set(f,Math.min(this.$D,y.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[j.p(e)]()},m.add=function(n,l){var f,h=this;n=Number(n);var p=j.p(l),y=function(e){var t=I(h);return j.w(t.date(t.date()+Math.round(e*n)),h)};if(p===c)return this.set(c,this.$M+n);if(p===d)return this.set(d,this.$y+n);if(p===u)return y(1);if(p===s)return y(7);var v=(f={},f[o]=t,f[a]=r,f[i]=e,f)[p]||1,m=this.$d.getTime()+n*v;return j.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=j.z(this),o=this.$H,a=this.$m,u=this.$M,s=r.weekdays,c=r.months,l=r.meridiem,d=function(e,r,i,o){return e&&(e[r]||e(t,n))||i[r].slice(0,o)},f=function(e){return j.s(o%12||12,e,"0")},p=l||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(y,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return j.s(t.$y,4,"0");case"M":return u+1;case"MM":return j.s(u+1,2,"0");case"MMM":return d(r.monthsShort,u,c,3);case"MMMM":return d(c,u);case"D":return t.$D;case"DD":return j.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,s,2);case"ddd":return d(r.weekdaysShort,t.$W,s,3);case"dddd":return s[t.$W];case"H":return String(o);case"HH":return j.s(o,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return p(o,a,!0);case"A":return p(o,a,!1);case"m":return String(a);case"mm":return j.s(a,2,"0");case"s":return String(t.$s);case"ss":return j.s(t.$s,2,"0");case"SSS":return j.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,f,h){var p,y=this,v=j.p(f),m=I(n),g=(m.utcOffset()-this.utcOffset())*t,w=this-m,b=function(){return j.m(y,m)};switch(v){case d:p=b()/12;break;case c:p=b();break;case l:p=b()/3;break;case s:p=(w-g)/6048e5;break;case u:p=(w-g)/864e5;break;case a:p=w/r;break;case o:p=w/t;break;case i:p=w/e;break;default:p=w}return h?p:j.a(p)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return b[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=O(e,t,!0);return n&&(r.$L=n),r},m.clone=function(){return j.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},v}(),A=T.prototype;return I.prototype=A,[["$ms",n],["$s",i],["$m",o],["$H",a],["$W",u],["$M",c],["$y",d],["$D",f]].forEach((function(e){A[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),I.extend=function(e,t){return e.$i||(e(t,T,I),e.$i=!0),I},I.locale=O,I.isDayjs=k,I.unix=function(e){return I(1e3*e)},I.en=b[w],I.Ls=b,I.p={},I}))}));var C=l(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_timezone=n()})(e,(function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,i){var o,a=function(e,r,n){n===void 0&&(n={});var i=new Date(e),o=function(e,r){r===void 0&&(r={});var n=r.timeZoneName||"short",i=e+"|"+n,o=t[i];return o||(o=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:n}),t[i]=o),o}(r,n);return o.formatToParts(i)},u=function(t,r){for(var n=a(t,r),o=[],u=0;u<n.length;u+=1){var s=n[u],c=s.type,l=s.value,d=e[c];d>=0&&(o[d]=parseInt(l,10))}var f=o[3],h=f===24?0:f,p=o[0]+"-"+o[1]+"-"+o[2]+" "+h+":"+o[4]+":"+o[5]+":000",y=+t;return(i.utc(p).valueOf()-(y-=y%1e3))/6e4},s=n.prototype;s.tz=function(e,t){e===void 0&&(e=o);var r=this.utcOffset(),n=this.toDate(),a=n.toLocaleString("en-US",{timeZone:e}),u=Math.round((n-new Date(a))/1e3/60),s=i(a,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(n.getTimezoneOffset()/15)-u,!0);if(t){var c=s.utcOffset();s=s.add(r-c,"minute")}return s.$x.$timezone=e,s},s.offsetName=function(e){var t=this.$x.$timezone||i.tz.guess(),r=a(this.valueOf(),t,{timeZoneName:e}).find((function(e){return e.type.toLowerCase()==="timezonename"}));return r&&r.value};var c=s.startOf;s.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return c.call(this,e,t);var r=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(r,e,t).tz(this.$x.$timezone,!0)},i.tz=function(e,t,r){var n=r&&t,a=r||t||o,s=u(+i(),a);if(typeof e!="string")return i(e).tz(a);var c=function(e,t,r){var n=e-60*t*1e3,i=u(n,r);if(t===i)return[n,t];var o=u(n-=60*(i-t)*1e3,r);return i===o?[n,i]:[e-60*Math.min(i,o)*1e3,Math.max(i,o)]}(i.utc(e,n).valueOf(),s,a),l=c[0],d=c[1],f=i(l).utcOffset(d);return f.$x.$timezone=a,f},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(e){o=e}}}))}));var D=l(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_utc=n()})(e,(function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,i,o){var a=i.prototype;o.utc=function(e){var t={date:e,utc:!0,args:arguments};return new i(t)},a.utc=function(t){var r=o(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},a.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var u=a.parse;a.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),u.call(this,e)};var s=a.init;a.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else s.call(this)};var c=a.utcOffset;a.utcOffset=function(n,i){var o=this.$utils().u;if(o(n))return this.$u?0:o(this.$offset)?c.call(this):this.$offset;if(typeof n=="string"&&(n=function(e){e===void 0&&(e="");var n=e.match(t);if(!n)return null;var i=(""+n[0]).match(r)||["-",0,0],o=i[0],a=60*+i[1]+ +i[2];return a===0?0:o==="+"?a:-a}(n),n===null))return this;var a=Math.abs(n)<=16?60*n:n,u=this;if(i)return u.$offset=a,u.$u=n===0,u;if(n!==0){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(u=this.local().add(a+s,e)).$offset=a,u.$x.$localOffset=s}else u=this.utc();return u};var l=a.format;a.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},a.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var d=a.toDate;a.toDate=function(e){return e==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=a.diff;a.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),i=o(e).local();return f.call(n,i,t,r)}}}))}));var E=l(((e,t)=>{function r(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}t.exports=n;function n(e,t,n){var i=n&&n.stringify||r,o=1;if(typeof e=="object"&&e!==null){var a=t.length+o;if(a===1)return e;var u=new Array(a);u[0]=i(e);for(var s=1;s<a;s++)u[s]=i(t[s]);return u.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var l="",d=1-o,f=-1,h=e&&e.length||0,p=0;p<h;){if(e.charCodeAt(p)===37&&p+1<h){switch(f=f>-1?f:0,e.charCodeAt(p+1)){case 100:case 102:if(d>=c||t[d]==null)break;f<p&&(l+=e.slice(f,p)),l+=Number(t[d]),f=p+2,p++;break;case 105:if(d>=c||t[d]==null)break;f<p&&(l+=e.slice(f,p)),l+=Math.floor(Number(t[d])),f=p+2,p++;break;case 79:case 111:case 106:if(d>=c||t[d]===void 0)break;f<p&&(l+=e.slice(f,p));var y=typeof t[d];if(y==="string"){l+="'"+t[d]+"'",f=p+2,p++;break}if(y==="function"){l+=t[d].name||"<anonymous>",f=p+2,p++;break}l+=i(t[d]),f=p+2,p++;break;case 115:if(d>=c)break;f<p&&(l+=e.slice(f,p)),l+=String(t[d]),f=p+2,p++;break;case 37:f<p&&(l+=e.slice(f,p)),l+="%",f=p+2,p++,d--;break}++d}++p}return f===-1?e:(f<h&&(l+=e.slice(f)),l)}}));var x=l(((e,t)=>{var r=E();t.exports=f;var n=x().console||{},i={mapHttpRequest:j,mapHttpResponse:j,wrapRequestSerializer:T,wrapResponseSerializer:T,wrapErrorSerializer:T,req:j,res:j,err:O,errWithCause:O};function o(e,t){return e==="silent"?1/0:t.levels.values[e]}var a=Symbol("pino.logFuncs"),u=Symbol("pino.hierarchy"),s={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function c(e,t){let r={logger:t,parent:e[u]};t[u]=r}function l(e,t,r){let i={};t.forEach((e=>{i[e]=r[e]?r[e]:n[e]||n[s[e]||"log"]||A})),e[a]=i}function d(e,t){return Array.isArray(e)?e.filter((function(e){return e!=="!stdSerializers.err"})):e===!0?Object.keys(t):!1}function f(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let i=e.serializers||{},a=d(e.browser.serialize,i),u=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(u=!1);let s=Object.keys(e.customLevels||{}),f=["error","fatal","warn","info","debug","trace"].concat(s);typeof r=="function"&&f.forEach((function(e){r[e]=r})),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let p=e.level||"info",y=Object.create(r);y.log||(y.log=A),l(y,f,r),c({},y),Object.defineProperty(y,"levelVal",{get:g}),Object.defineProperty(y,"level",{get:w,set:S});let m={transmit:t,serialize:a,asObject:e.browser.asObject,formatters:e.browser.formatters,levels:f,timestamp:I(e)};y.levels=h(e),y.level=p,y.setMaxListeners=y.getMaxListeners=y.emit=y.addListener=y.on=y.prependListener=y.once=y.prependOnceListener=y.removeListener=y.removeAllListeners=y.listeners=y.listenerCount=y.eventNames=y.write=y.flush=A,y.serializers=i,y._serialize=a,y._stdErrSerialize=u,y.child=O,t&&(y._logEvent=k());function g(){return o(this.level,this)}function w(){return this._level}function S(e){if(e!=="silent"&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,v(this,m,y,"error"),v(this,m,y,"fatal"),v(this,m,y,"warn"),v(this,m,y,"info"),v(this,m,y,"debug"),v(this,m,y,"trace"),s.forEach((e=>{v(this,m,y,e)}))}function O(r,n){if(!r)throw new Error("missing bindings for child Pino");n=n||{},a&&r.serializers&&(n.serializers=r.serializers);let o=n.serializers;if(a&&o){var u=Object.assign({},i,o),s=e.browser.serialize===!0?Object.keys(u):a;delete r.serializers,b([r],s,u,this._stdErrSerialize)}function l(e){this._childLevel=(e._childLevel|0)+1,this.bindings=r,u&&(this.serializers=u,this._serialize=s),t&&(this._logEvent=k([].concat(e._logEvent.bindings,r)))}l.prototype=this;let d=new l(this);return c(this,d),d.level=this.level,d}return y}function h(e){let t=e.customLevels||{},r=Object.assign({},f.levels.values,t),n=Object.assign({},f.levels.labels,p(t));return{values:r,labels:n}}function p(e){let t={};return Object.keys(e).forEach((function(r){t[e[r]]=r})),t}f.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};f.stdSerializers=i;f.stdTimeFunctions=Object.assign({},{nullTime:R,epochTime:q,unixTime:C,isoTime:D});function y(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[u];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function v(e,t,r,n){if(Object.defineProperty(e,n,{value:o(e.level,r)>o(n,r)?A:r[a][n],writable:!0,enumerable:!0,configurable:!0}),!t.transmit&&e[n]===A)return;e[n]=g(e,t,r,n);let i=y(e);i.length!==0&&(e[n]=m(i,e[n]))}function m(e,t){return function(){return t.apply(this,[...e,...arguments])}}function g(e,t,r,i){return function(a){return function(){let u=t.timestamp(),s=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var l=0;l<s.length;l++)s[l]=arguments[l];if(t.serialize&&!t.asObject&&b(s,this._serialize,this.serializers,this._stdErrSerialize),t.asObject||t.formatters?a.call(c,w(this,i,s,u,t.formatters)):a.apply(c,s),t.transmit){let n=t.transmit.level||e._level,a=r.levels.values[n],c=r.levels.values[i];if(c<a)return;S(this,{ts:u,methodLevel:i,methodValue:c,transmitLevel:n,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:o(e._level,r)},s)}}}(e[a][i])}function w(e,t,n,i,o={}){let{level:a=(()=>e.levels.values[t]),log:u=(e=>e)}=o;e._serialize&&b(n,e._serialize,e.serializers,e._stdErrSerialize);let s=n.slice(),c=s[0],l={};i&&(l.time=i),l.level=a(t,e.levels.values[t]);let d=(e._childLevel|0)+1;if(d<1&&(d=1),c!==null&&typeof c=="object"){for(;d--&&typeof s[0]=="object";)Object.assign(l,s.shift());c=s.length?r(s.shift(),s):void 0}else typeof c=="string"&&(c=r(s.shift(),s));return c!==void 0&&(l.msg=c),u(l)}function b(e,t,r,n){for(let i in e)if(n&&e[i]instanceof Error)e[i]=f.stdSerializers.err(e[i]);else if(typeof e[i]=="object"&&!Array.isArray(e[i]))for(let n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function S(e,t,r){let n=t.send,i=t.ts,o=t.methodLevel,a=t.methodValue,u=t.val,s=e._logEvent.bindings;b(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return s.indexOf(e)===-1})),e._logEvent.level.label=o,e._logEvent.level.value=a,n(o,e._logEvent,u),e._logEvent=k(s)}function k(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function O(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function I(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?R:q}function j(){return{}}function T(e){return e}function A(){}function R(){return!1}function q(){return Date.now()}function C(){return Math.round(Date.now()/1e3)}function D(){return new Date(Date.now()).toISOString()}function x(){function e(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}t.exports.default=f;t.exports.pino=f}));var U=()=>global.crypto,_=()=>{typeof window<"u"||(U()||(global.crypto=c("crypto")),!U().getRandomValues&&U().webcrypto&&(global.crypto.getRandomValues=U().webcrypto.getRandomValues.bind(U().webcrypto)))};function M(e,t){let r=`\n  The following properties are invalid:\n\n    ${e.join(`\n\t`)}\n  \n  ${t}\n  `;return new P(r)}var P=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},$=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let e in this.definition){let t=this.definition[e].validate(r[e]);t&&n.push(`${e}: ${t}`)}if(n.length)throw M(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},F=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&z(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function N(e){return e===void 0}function Q(e){return e===null}function z(e){return N(e)||Q(e)}var L=class{constructor(e={}){this.config=e,this.value=new F(e)}validate(e){let t=this.value.validate(e);return t||(H(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function H(e){return N(e)||V(e)}function V(e){return typeof e=="number"&&!isNaN(e)}var B=class{constructor(e={}){this.value=new F(e)}validate(e){let t=this.value.validate(e);return t||(K(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function K(e){return N(e)||G(e)}function G(e){return typeof e=="boolean"}var Y=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,J=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new F(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:i}=this.config,o=this.value.validate(e);return o||(N(e)?null:W(e)?!t&&!e.length?"value is an empty string.":r&&!Y.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:i&&!i.includes(e)?`value should be one of: ${i.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function W(e){return Object.prototype.toString.call(e)==="[object String]"}var Z=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(N(e))return this.config.options.required?"value is required and is currently undefined":null;if(!X(e))return"value is not an object";for(let[t,r]of Object.entries(this.config.values))if(r.required&&z(e[t]))return`value does not contain ${t}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let i=e[r],o=n.validate(i);o!==null&&(t+=" "+o)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function X(e){return e!==void 0&&typeof e=="object"}var ee=class{constructor(e={}){this.config=e,this.value=new F(this.config)}validate(e){if(!z(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(z(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let t="";return e.forEach((r=>{this.config.each.required&&z(r)&&(t=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(r,this.config.each);n!==null&&(t+=" "+n)})),t===""?null:t}return null}validatePrimitiveValue(e,t){return G(e)||W(e)||V(e)||X(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function te(e){return Array.isArray(e)}var re=class{constructor(e){this.config=e,this.value=new F(e)}validate(e){let t=this.value.validate(e);return t!==null?t:N(e)||Object.values(this.config.enum).find((t=>t===e))?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var ne=e=>e;function ie(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function oe(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:ie(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:ie(),extendedResults:{}}}function ae(e){let{url:t,accessToken:r,organizationId:n,authentication:i,...o}=e;return o}var ue=e=>{let{response:t}=e;return t.body?se(e):ce(t)},se=e=>de(e)?fe(e):le(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},ce=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function le(e){return e.body.statusCode!==void 0}function de(e){return e.body.exception!==void 0}var fe=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});var he=f(p()),pe=f(O());var ye=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},ve=class extends Error{constructor(e,t){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=t??0}};f(T());var me=new Set(["1",1,"yes",!0]);function ge(){if(typeof navigator>"u"||typeof window>"u")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some((e=>me.has(e)))}function we(e){let t={};for(let[r,n]of e)t[r]=n;return t}function be(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function Se(e){let t=[];for(let r in e){let n=encodeURIComponent(r),i=encodeURIComponent(e[r]);t.push(`${n}=${i}`)}return t.join("&")}function ke(e){return typeof e!="object"||!e?!1:Object.values(e).every(Oe)}function Oe(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function Ie(e){return e===429}var je=class e{static async call(t){let r=Ce(t),{logger:n}=t,i=await e.preprocessRequest(r,t);n.info(i,"Platform request");let{url:o,...a}=i,u=async()=>{let e=await(0,he.default)(o,a);if(Ie(e.status))throw e;return e};try{let e=await(0,pe.backOff)(u,{retry:e=>{let t=e&&Ie(e.status);return t&&n.info("Platform retrying request"),t}});switch(e.status){case 419:case 401:throw n.info("Platform renewing token"),new ye;case 404:throw new ve(o,e.status);default:return n.info({response:e,requestInfo:i},"Platform response"),e}}catch(e){return e.message==="Failed to fetch"?new ve(o):e}}static async preprocessRequest(e,t){let{origin:r,preprocessRequest:n,logger:i,requestMetadata:o}=t,{signal:a,...u}=e,s=be(u);try{let t=await n(e,r,o);return{...e,...t}}catch(e){i.error(e,"Platform request preprocessing failed. Returning default request options.")}return s}};function Te(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,n=!t||!t.region||t.region==="us"?"":`-${t.region}`;return`https://${e}${r}${n}.cloud.coveo.com`}function Ae(e,t="prod"){let r=t==="prod"?"":t,n=`https://${e}.org${r}.coveo.com`,i=`https://${e}.analytics.org${r}.coveo.com`,o=`${n}/rest/search/v2`,a=`https://${e}.admin.org${r}.coveo.com`;return{platform:n,analytics:i,search:o,admin:a}}function Re(e){return e?.multiRegionSubDomain?`https://${e.multiRegionSubDomain}.org.coveo.com`:Te("platform",e)}function qe(e){return Te("analytics",e)}function Ce(e){let{url:t,method:r,requestParams:n,contentType:i,accessToken:o,signal:a}=e,u=e.method==="POST"||e.method==="PUT",s=De(n,i);return{url:t,method:r,headers:{"Content-Type":i,Authorization:`Bearer ${o}`,...e.headers},...u&&{body:s},signal:a}}function De(e,t){return t==="application/x-www-form-urlencoded"?ke(e)?Se(e):"":JSON.stringify(e)}function Ee(){if(typeof window>"u"){let{AbortController:e}=A();return new e}return typeof AbortController>"u"?null:new AbortController}var xe=class{constructor(){this.currentAbortController=null}async enqueue(e,t){let r=this.currentAbortController,n=this.currentAbortController=Ee();r&&(t.warnOnAbort&&t.logger.warn("Cancelling current pending search query"),r.abort());try{return await e(n?.signal??null)}finally{this.currentAbortController===n&&(this.currentAbortController=null)}}};var Ue=class{constructor(e){this._params={};this._basePath=e}addParam(e,t){this._params={...this.params,[e]:t}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&")}`:this.basePath}},_e=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),Me=(e,t)=>{let r=Pe(e);return r&&r.organizationId===t?r:null},Pe=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return t?.groups?t.groups:null};function $e(e){return((e.headers.get("content-type")||"").split(";").find((e=>e.indexOf("charset=")!==-1))||"").split("=")[1]||"UTF-8"}var Fe=(e,t,r,n)=>{let i=new Ue(`${e.url}${n}`);return i.addParam("organizationId",e.organizationId),e.authentication&&i.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:i.href,origin:"searchApiFetch"}};var Ne=async(e,t)=>{let r=await je.call({...Fe(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:ae(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=$e(r),i=await r.arrayBuffer(),o=new TextDecoder(n).decode(i);return Qe(o)?{success:o}:{error:ue({response:r,body:o})}};function Qe(e){return typeof e=="string"}function ze(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function Le(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function He(e,t){if(t&&e.name==="AbortError")return{error:Le(e)};if(e instanceof ve)return{error:ze(e)};throw e}var Ve=class{constructor(e){this.options=e;this.apiCallsQueues={unknown:new xe,mainSearch:new xe,facetValues:new xe,foldingCollection:new xe,instantResults:new xe}}async plan(e){let t=await je.call({...Fe(e,"POST","application/json","/plan"),requestParams:ae(e),requestMetadata:{method:"plan"},...this.options});if(t instanceof Error)return He(t);let r=await t.json();return Je(r)?{success:r}:{error:ue({response:t,body:r})}}async querySuggest(e){let t=await je.call({...Fe(e,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:ae(e),...this.options});if(t instanceof Error)return He(t);let r=await t.json(),n={response:t,body:r};return Ye(r)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:ue(n)}}async search(e,t){let r=t?.origin??"unknown",n=await this.apiCallsQueues[r].enqueue((r=>je.call({...Fe(e,"POST","application/json",""),requestParams:ae(e),requestMetadata:{method:"search",origin:t?.origin},...this.options,signal:r??void 0})),{logger:this.options.logger,warnOnAbort:!t?.disableAbortWarning});if(n instanceof Error)return He(n,t?.disableAbortWarning);let i=await n.json(),o={response:n,body:i};return Ke(i)?(o.body=Ge(i),{success:(await this.options.postprocessSearchResponseMiddleware(o)).body}):{error:ue(o)}}async facetSearch(e){let t=await je.call({...Fe(e,"POST","application/json","/facet"),requestParams:ae(e),requestMetadata:{method:"facetSearch"},...this.options});if(t instanceof Error)throw t;let r=await t.json(),n={response:t,body:r};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){let t=await je.call({...Fe(e,"POST","application/json",""),requestParams:ae(e),requestMetadata:{method:"recommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();if(Ke(r)){let e={response:t,body:r};return e.body=Ge(r),{success:(await this.options.postprocessSearchResponseMiddleware(e)).body}}return{error:ue({response:t,body:r})}}async html(e){return Ne(e,{...this.options})}async productRecommendations(e){let t=await je.call({...Fe(e,"POST","application/json",""),requestParams:ae(e),requestMetadata:{method:"productRecommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return Ke(r)?{success:r}:{error:ue({response:t,body:r})}}async fieldDescriptions(e){let t=await je.call({...Fe(e,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return We(r)?{success:r}:{error:ue({response:t,body:r})}}};var Be=e=>e.error!==void 0;function Ke(e){return e.results!==void 0}function Ge(e){let t=ie();return z(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function Ye(e){return e.completions!==void 0}function Je(e){return e.preprocessingOutput!==void 0}function We(e){return e.fields!==void 0}var Ze=e=>e,Xe=e=>e,et=e=>e;function tt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var rt=typeof Symbol=="function"&&Symbol.observable||"@@observable",nt=rt,it=()=>Math.random().toString(36).substring(7).split("").join("."),ot={INIT:`@@redux/INIT${it()}`,REPLACE:`@@redux/REPLACE${it()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${it()}`},at=ot;function ut(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function st(e,t,r){if(typeof e!="function")throw new Error(tt(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(tt(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(tt(1));return r(st)(e,t)}let n=e,i=t,o=new Map,a=o,u=0,s=!1;function c(){a===o&&(a=new Map,o.forEach(((e,t)=>{a.set(t,e)})))}function l(){if(s)throw new Error(tt(3));return i}function d(e){if(typeof e!="function")throw new Error(tt(4));if(s)throw new Error(tt(5));let t=!0;c();let r=u++;return a.set(r,e),function(){if(t){if(s)throw new Error(tt(6));t=!1,c(),a.delete(r),o=null}}}function f(e){if(!ut(e))throw new Error(tt(7));if(typeof e.type>"u")throw new Error(tt(8));if(typeof e.type!="string")throw new Error(tt(17));if(s)throw new Error(tt(9));try{s=!0,i=n(i,e)}finally{s=!1}return(o=a).forEach((e=>{e()})),e}function h(e){if(typeof e!="function")throw new Error(tt(10));n=e,f({type:at.REPLACE})}function p(){let e=d;return{subscribe(t){if(typeof t!="object"||t===null)throw new Error(tt(11));function r(){let e=t;e.next&&e.next(l())}return r(),{unsubscribe:e(r)}},[nt](){return this}}}return f({type:at.INIT}),{dispatch:f,subscribe:d,getState:l,replaceReducer:h,[nt]:p}}function ct(e){Object.keys(e).forEach((t=>{let r=e[t];if(typeof r(void 0,{type:at.INIT})>"u")throw new Error(tt(12));if(typeof r(void 0,{type:at.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(tt(13))}))}function lt(e){let t=Object.keys(e),r={};for(let n=0;n<t.length;n++){let i=t[n];typeof e[i]=="function"&&(r[i]=e[i])}let n=Object.keys(r),i;try{ct(r)}catch(e){i=e}return function(e={},t){if(i)throw i;let o=!1,a={};for(let i=0;i<n.length;i++){let u=n[i],s=r[u],c=e[u],l=s(c,t);if(typeof l>"u"){throw new Error(tt(14))}a[u]=l,o=o||l!==c}return o=o||n.length!==Object.keys(e).length,o?a:e}}function dt(...e){return e.length===0?e=>e:e.length===1?e[0]:e.reduce(((e,t)=>(...r)=>e(t(...r))))}function ft(...e){return t=>(r,n)=>{let i=t(r,n),o=()=>{throw new Error(tt(15))},a={getState:i.getState,dispatch:(e,...t)=>o(e,...t)},u=e.map((e=>e(a)));return o=dt(...u)(i.dispatch),{...i,dispatch:o}}}function ht(e){return ut(e)&&"type"in e&&typeof e.type=="string"}var pt=Symbol.for("immer-nothing"),yt=Symbol.for("immer-draftable"),vt=Symbol.for("immer-state");function mt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var gt=Object.getPrototypeOf;function wt(e){return!!e&&!!e[vt]}function bt(e){return e?kt(e)||Array.isArray(e)||!!e[yt]||!!e.constructor?.[yt]||Ct(e)||Dt(e):!1}var St=Object.prototype.constructor.toString();function kt(e){if(!e||typeof e!="object")return!1;let t=gt(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===St}function Ot(e){return wt(e)||mt(15,e),e[vt].base_}function It(e,t){jt(e)===0?Object.entries(e).forEach((([r,n])=>{t(r,n,e)})):e.forEach(((r,n)=>t(n,r,e)))}function jt(e){let t=e[vt];return t?t.type_:Array.isArray(e)?1:Ct(e)?2:Dt(e)?3:0}function Tt(e,t){return jt(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function At(e,t){return jt(e)===2?e.get(t):e[t]}function Rt(e,t,r){let n=jt(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function qt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ct(e){return e instanceof Map}function Dt(e){return e instanceof Set}function Et(e){return e.copy_||e.base_}function xt(e,t){if(Ct(e))return new Map(e);if(Dt(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&kt(e))return gt(e)?{...e}:Object.assign(Object.create(null),e);let r=Object.getOwnPropertyDescriptors(e);delete r[vt];let n=Reflect.ownKeys(r);for(let t=0;t<n.length;t++){let i=n[t],o=r[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(gt(e),r)}function Ut(e,t=!1){return Mt(e)||wt(e)||!bt(e)||(jt(e)>1&&(e.set=e.add=e.clear=e.delete=_t),Object.freeze(e),t&&It(e,((e,t)=>Ut(t,!0)))),e}function _t(){mt(2)}function Mt(e){return Object.isFrozen(e)}var Pt={};function $t(e){let t=Pt[e];return t||mt(0,e),t}function Ft(e,t){Pt[e]||(Pt[e]=t)}var Nt;function Qt(){return Nt}function zt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Lt(e,t){t&&($t("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ht(e){Vt(e),e.drafts_.forEach(Kt),e.drafts_=null}function Vt(e){e===Nt&&(Nt=e.parent_)}function Bt(e){return Nt=zt(Nt,e)}function Kt(e){let t=e[vt];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Gt(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[vt].modified_&&(Ht(t),mt(4)),bt(e)&&(e=Yt(t,e),t.parent_||Wt(t,e)),t.patches_&&$t("Patches").generateReplacementPatches_(r[vt].base_,e,t.patches_,t.inversePatches_)):e=Yt(t,r,[]),Ht(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==pt?e:void 0}function Yt(e,t,r){if(Mt(t))return t;let n=t[vt];if(!n)return It(t,((i,o)=>Jt(e,n,t,i,o,r))),t;if(n.scope_!==e)return t;if(!n.modified_)return Wt(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let t=n.copy_,i=t,o=!1;n.type_===3&&(i=new Set(t),t.clear(),o=!0),It(i,((i,a)=>Jt(e,n,t,i,a,r,o))),Wt(e,t,!1),r&&e.patches_&&$t("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Jt(e,t,r,n,i,o,a){if(wt(i)){let a=o&&t&&t.type_!==3&&!Tt(t.assigned_,n)?o.concat(n):void 0,u=Yt(e,i,a);if(Rt(r,n,u),wt(u))e.canAutoFreeze_=!1;else return}else a&&r.add(i);if(bt(i)&&!Mt(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Yt(e,i),(!t||!t.scope_.parent_)&&Wt(e,i)}}function Wt(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ut(t,r)}function Zt(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Qt(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=Xt;r&&(i=[n],o=er);let{revoke:a,proxy:u}=Proxy.revocable(i,o);return n.draft_=u,n.revoke_=a,u}var Xt={get(e,t){if(t===vt)return e;let r=Et(e);if(!Tt(r,t))return rr(e,r,t);let n=r[t];return e.finalized_||!bt(n)?n:n===tr(e.base_,t)?(or(e),e.copy_[t]=ur(n,e)):n},has(e,t){return t in Et(e)},ownKeys(e){return Reflect.ownKeys(Et(e))},set(e,t,r){let n=nr(Et(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let n=tr(Et(e),t),i=n?.[vt];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(qt(r,n)&&(r!==void 0||Tt(e.base_,t)))return!0;or(e),ir(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return tr(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,or(e),ir(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=Et(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){mt(11)},getPrototypeOf(e){return gt(e.base_)},setPrototypeOf(){mt(12)}},er={};It(Xt,((e,t)=>{er[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}));er.deleteProperty=function(e,t){return er.set.call(this,e,t,void 0)};er.set=function(e,t,r){return Xt.set.call(this,e[0],t,r,e[0])};function tr(e,t){let r=e[vt];return(r?Et(r):e)[t]}function rr(e,t,r){let n=nr(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function nr(e,t){if(!(t in e))return;let r=gt(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=gt(r)}}function ir(e){e.modified_||(e.modified_=!0,e.parent_&&ir(e.parent_))}function or(e){e.copy_||(e.copy_=xt(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ar=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){let r=t;t=e;let n=this;return function(e=r,...i){return n.produce(e,(e=>t.call(this,e,...i)))}}typeof t!="function"&&mt(6),r!==void 0&&typeof r!="function"&&mt(7);let n;if(bt(e)){let i=Bt(this),o=ur(e,void 0),a=!0;try{n=t(o),a=!1}finally{a?Ht(i):Vt(i)}return Lt(i,r),Gt(n,i)}else if(!e||typeof e!="object"){if(n=t(e),n===void 0&&(n=e),n===pt&&(n=void 0),this.autoFreeze_&&Ut(n,!0),r){let t=[],i=[];$t("Patches").generateReplacementPatches_(e,n,t,i),r(t,i)}return n}else mt(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){bt(e)||mt(8),wt(e)&&(e=sr(e));let t=Bt(this),r=ur(e,void 0);return r[vt].isManual_=!0,Vt(t),r}finishDraft(e,t){let r=e&&e[vt];(!r||!r.isManual_)&&mt(9);let{scope_:n}=r;return Lt(n,t),Gt(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));let n=$t("Patches").applyPatches_;return wt(e)?n(e,t):this.produce(e,(e=>n(e,t)))}};function ur(e,t){let r=Ct(e)?$t("MapSet").proxyMap_(e,t):Dt(e)?$t("MapSet").proxySet_(e,t):Zt(e,t);return(t?t.scope_:Qt()).drafts_.push(r),r}function sr(e){return wt(e)||mt(10,e),cr(e)}function cr(e){if(!bt(e)||Mt(e))return e;let t=e[vt],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=xt(e,t.scope_.immer_.useStrictShallowCopy_)}else r=xt(e,!0);return It(r,((e,t)=>{Rt(r,e,cr(t))})),t&&(t.finalized_=!1),r}function lr(){let e="replace",t="add",r="remove";function n(e,t,r,n){switch(e.type_){case 0:case 2:return o(e,t,r,n);case 1:return i(e,t,r,n);case 3:return a(e,t,r,n)}}function i(n,i,o,a){let{base_:u,assigned_:s}=n,c=n.copy_;c.length<u.length&&([u,c]=[c,u],[o,a]=[a,o]);for(let t=0;t<u.length;t++)if(s[t]&&c[t]!==u[t]){let r=i.concat([t]);o.push({op:e,path:r,value:l(c[t])}),a.push({op:e,path:r,value:l(u[t])})}for(let e=u.length;e<c.length;e++){let r=i.concat([e]);o.push({op:t,path:r,value:l(c[e])})}for(let e=c.length-1;u.length<=e;--e){let t=i.concat([e]);a.push({op:r,path:t})}}function o(n,i,o,a){let{base_:u,copy_:s}=n;It(n.assigned_,((n,c)=>{let d=At(u,n),f=At(s,n),h=c?Tt(u,n)?e:t:r;if(d===f&&h===e)return;let p=i.concat(n);o.push(h===r?{op:h,path:p}:{op:h,path:p,value:f}),a.push(h===t?{op:r,path:p}:h===r?{op:t,path:p,value:l(d)}:{op:e,path:p,value:l(d)})}))}function a(e,n,i,o){let{base_:a,copy_:u}=e,s=0;a.forEach((e=>{if(!u.has(e)){let a=n.concat([s]);i.push({op:r,path:a,value:e}),o.unshift({op:t,path:a,value:e})}s++})),s=0,u.forEach((e=>{if(!a.has(e)){let a=n.concat([s]);i.push({op:t,path:a,value:e}),o.unshift({op:r,path:a,value:e})}s++}))}function u(t,r,n,i){n.push({op:e,path:[],value:r===pt?void 0:r}),i.push({op:e,path:[],value:t})}function s(n,i){return i.forEach((i=>{let{path:o,op:a}=i,u=n;for(let e=0;e<o.length-1;e++){let t=jt(u),r=o[e];typeof r!="string"&&typeof r!="number"&&(r=""+r),(t===0||t===1)&&(r==="__proto__"||r==="constructor")&&mt(19),typeof u=="function"&&r==="prototype"&&mt(19),u=At(u,r),typeof u!="object"&&mt(18,o.join("/"))}let s=jt(u),l=c(i.value),d=o[o.length-1];switch(a){case e:switch(s){case 2:return u.set(d,l);case 3:mt(16);default:return u[d]=l}case t:switch(s){case 1:return d==="-"?u.push(l):u.splice(d,0,l);case 2:return u.set(d,l);case 3:return u.add(l);default:return u[d]=l}case r:switch(s){case 1:return u.splice(d,1);case 2:return u.delete(d);case 3:return u.delete(i.value);default:return delete u[d]}default:mt(17,a)}})),n}function c(e){if(!bt(e))return e;if(Array.isArray(e))return e.map(c);if(Ct(e))return new Map(Array.from(e.entries()).map((([e,t])=>[e,c(t)])));if(Dt(e))return new Set(Array.from(e).map(c));let t=Object.create(gt(e));for(let r in e)t[r]=c(e[r]);return Tt(e,yt)&&(t[yt]=e[yt]),t}function l(e){return wt(e)?c(e):e}Ft("Patches",{applyPatches_:s,generatePatches_:n,generateReplacementPatches_:u})}var dr=new ar,fr=dr.produce,hr=dr.produceWithPatches.bind(dr);dr.setAutoFreeze.bind(dr);dr.setUseStrictShallowCopy.bind(dr);var pr=dr.applyPatches.bind(dr);dr.createDraft.bind(dr);dr.finishDraft.bind(dr);function yr(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function vr(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function mr(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>typeof e=="function"))){let r=e.map((e=>typeof e=="function"?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${r}]`)}}var gr=e=>Array.isArray(e)?e:[e];function wr(e){let t=Array.isArray(e[0])?e[0]:e;return mr(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function br(e,t){let r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var Sr=class{constructor(e){this.value=e}deref(){return this.value}},kr=typeof WeakRef<"u"?WeakRef:Sr,Or=0,Ir=1;function jr(){return{s:Or,v:void 0,o:null,p:null}}function Tr(e,t={}){let r=jr(),{resultEqualityCheck:n}=t,i,o=0;function a(){let t=r,{length:a}=arguments;for(let e=0,r=a;e<r;e++){let r=arguments[e];if(typeof r=="function"||typeof r=="object"&&r!==null){let e=t.o;e===null&&(t.o=e=new WeakMap);let n=e.get(r);n===void 0?(t=jr(),e.set(r,t)):t=n}else{let e=t.p;e===null&&(t.p=e=new Map);let n=e.get(r);n===void 0?(t=jr(),e.set(r,t)):t=n}}let u=t,s;if(t.s===Ir?s=t.v:(s=e.apply(null,arguments),o++),u.s=Ir,n){let e=i?.deref?.()??i;e!=null&&n(e,s)&&(s=e,o!==0&&o--),i=typeof s=="object"&&s!==null||typeof s=="function"?new kr(s):s}return u.v=s,s}return a.clearCache=()=>{r=jr(),a.resetResultsCount()},a.resultsCount=()=>o,a.resetResultsCount=()=>{o=0},a}function Ar(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t=0,n=0,i,o={},a=e.pop();typeof a=="object"&&(o=a,a=e.pop()),yr(a,`createSelector expects an output function after the inputs, but received: [${typeof a}]`);let u={...r,...o},{memoize:s,memoizeOptions:c=[],argsMemoize:l=Tr,argsMemoizeOptions:d=[],devModeChecks:f={}}=u,h=gr(c),p=gr(d),y=wr(e),v=s((function(){return t++,a.apply(null,arguments)}),...h),m=l((function(){n++;let e=br(y,arguments);return i=v.apply(null,e),i}),...p);return Object.assign(m,{resultFunc:a,memoizedResultFunc:v,dependencies:y,dependencyRecomputations:()=>n,resetDependencyRecomputations:()=>{n=0},lastResult:()=>i,recomputations:()=>t,resetRecomputations:()=>{t=0},memoize:s,argsMemoize:l})};return Object.assign(n,{withTypes:()=>n}),n}var Rr=Ar(Tr),qr=Object.assign(((e,t=Rr)=>{vr(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map((t=>e[t]));return t(n,((...e)=>e.reduce(((e,t,n)=>(e[r[n]]=t,e)),{})))}),{withTypes:()=>qr});function Cr(e){return({dispatch:t,getState:r})=>n=>i=>typeof i=="function"?i(t,r,e):n(i)}var Dr=Cr(),Er=Cr;var xr=(...e)=>{let t=Ar(...e),r=Object.assign(((...e)=>{let r=t(...e),n=(e,...t)=>r(wt(e)?sr(e):e,...t);return Object.assign(n,r),n}),{withTypes:()=>r});return r};xr(Tr);var Ur=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?dt:dt.apply(null,arguments)},_r=e=>e&&typeof e.match=="function";function Mr(e,t){function r(...r){if(t){let n=t(...r);if(!n)throw new Error(Mn(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:r[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>ht(t)&&t.type===e,r}var Pr=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function $r(e){return bt(e)?fr(e,(()=>{})):e}function Fr(e,t,r){if(e.has(t)){let n=e.get(t);return r.update&&(n=r.update(n,t,e),e.set(t,n)),n}if(!r.insert)throw new Error(Mn(10));let n=r.insert(t,e);return e.set(t,n),n}function Nr(e){return typeof e=="boolean"}var Qr=()=>function(e){let{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=e??{},o=new Pr;return t&&(Nr(t)?o.push(Dr):o.push(Er(t.extraArgument))),o},zr="RTK_autoBatch",Lr=()=>e=>({payload:e,meta:{[zr]:!0}}),Hr=e=>t=>{setTimeout(t,e)},Vr=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Hr(10),Br=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),i=!0,o=!1,a=!1,u=new Set,s=e.type==="tick"?queueMicrotask:e.type==="raf"?Vr:e.type==="callback"?e.queueNotification:Hr(e.timeout),c=()=>{a=!1,o&&(o=!1,u.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){let t=()=>i&&e(),r=n.subscribe(t);return u.add(e),()=>{r(),u.delete(e)}},dispatch(e){try{return i=!e?.meta?.[zr],o=!i,o&&(a||(a=!0,s(c))),n.dispatch(e)}finally{i=!0}}})},Kr=e=>function(t){let{autoBatch:r=!0}=t??{},n=new Pr(e);return r&&n.push(Br(typeof r=="object"?r:void 0)),n},Gr=!0;function Yr(e){let t=Qr(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:o=void 0,enhancers:a=void 0}=e||{},u;if(typeof r=="function")u=r;else if(ut(r))u=lt(r);else throw new Error(Mn(1));let s;if(typeof n=="function"){if(s=n(t),!Gr);}else s=t();let c=dt;i&&(c=Ur({trace:!Gr,...typeof i=="object"&&i}));let l=ft(...s),d=Kr(l);let f=typeof a=="function"?a(d):d();let h=c(...f);return st(u,o,h)}function Jr(e){let t={},r=[],n,i={addCase(e,r){let n=typeof e=="string"?e:e.type;if(!n)throw new Error(Mn(28));if(n in t)throw new Error(Mn(29));return t[n]=r,i},addMatcher(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase(e){return n=e,i}};return e(i),[t,r,n]}function Wr(e){return typeof e=="function"}function Zr(e,t){let[r,n,i]=Jr(t),o;if(Wr(e))o=()=>$r(e());else{let t=$r(e);o=()=>t}function a(e=o(),t){let a=[r[t.type],...n.filter((({matcher:e})=>e(t))).map((({reducer:e})=>e))];return a.filter((e=>!!e)).length===0&&(a=[i]),a.reduce(((e,r)=>{if(r)if(wt(e)){let n=r(e,t);return n===void 0?e:n}else{if(bt(e))return fr(e,(e=>r(e,t)));{let n=r(e,t);if(n===void 0){if(e===null)return e;throw new Error(Mn(9))}return n}}return e}),e)}return a.getInitialState=o,a}var Xr="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",en=(e=21)=>{let t="",r=e;for(;r--;)t+=Xr[Math.random()*64|0];return t},tn=(e,t)=>_r(e)?e.match(t):e(t);function rn(...e){return t=>e.some((e=>tn(e,t)))}function nn(...e){return t=>e.every((e=>tn(e,t)))}function on(e,t){if(!e||!e.meta)return!1;let r=typeof e.meta.requestId=="string",n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function an(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function un(...e){return e.length===0?e=>on(e,["pending"]):an(e)?rn(...e.map((e=>e.pending))):un()(e[0])}function sn(...e){return e.length===0?e=>on(e,["rejected"]):an(e)?rn(...e.map((e=>e.rejected))):sn()(e[0])}function cn(...e){let t=e=>e&&e.meta&&e.meta.rejectedWithValue;return e.length===0?nn(sn(...e),t):an(e)?nn(sn(...e),t):cn()(e[0])}function ln(...e){return e.length===0?e=>on(e,["fulfilled"]):an(e)?rn(...e.map((e=>e.fulfilled))):ln()(e[0])}function dn(...e){return e.length===0?e=>on(e,["pending","fulfilled","rejected"]):an(e)?rn(...e.flatMap((e=>[e.pending,e.rejected,e.fulfilled]))):dn()(e[0])}var fn=["name","message","stack","code"],hn=class{constructor(e,t){h(this,"_type");this.payload=e,this.meta=t}},pn=class{constructor(e,t){h(this,"_type");this.payload=e,this.meta=t}},yn=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of fn)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},vn=(()=>{function e(e,t,r){let n=Mr(e+"/fulfilled",((e,t,r,n)=>({payload:e,meta:{...n||{},arg:r,requestId:t,requestStatus:"fulfilled"}}))),i=Mr(e+"/pending",((e,t,r)=>({payload:void 0,meta:{...r||{},arg:t,requestId:e,requestStatus:"pending"}}))),o=Mr(e+"/rejected",((e,t,n,i,o)=>({payload:i,error:(r&&r.serializeError||yn)(e||"Rejected"),meta:{...o||{},arg:n,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:e?.name==="AbortError",condition:e?.name==="ConditionError"}})));function a(e){return(a,u,s)=>{let c=r?.idGenerator?r.idGenerator(e):en(),l=new AbortController,d,f;function h(e){f=e,l.abort()}let p=async function(){let p;try{let o=r?.condition?.(e,{getState:u,extra:s});if(gn(o)&&(o=await o),o===!1||l.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let y=new Promise(((e,t)=>{d=()=>{t({name:"AbortError",message:f||"Aborted"})},l.signal.addEventListener("abort",d)}));a(i(c,e,r?.getPendingMeta?.({requestId:c,arg:e},{getState:u,extra:s}))),p=await Promise.race([y,Promise.resolve(t(e,{dispatch:a,getState:u,extra:s,requestId:c,signal:l.signal,abort:h,rejectWithValue:(e,t)=>new hn(e,t),fulfillWithValue:(e,t)=>new pn(e,t)})).then((t=>{if(t instanceof hn)throw t;return t instanceof pn?n(t.payload,c,e,t.meta):n(t,c,e)}))])}catch(t){p=t instanceof hn?o(null,c,e,t.payload,t.meta):o(t,c,e)}finally{d&&l.signal.removeEventListener("abort",d)}return r&&!r.dispatchConditionRejection&&o.match(p)&&p.meta.condition||a(p),p}();return Object.assign(p,{abort:h,requestId:c,arg:e,unwrap(){return p.then(mn)}})}}return Object.assign(a,{pending:i,rejected:o,fulfilled:n,settled:rn(o,n),typePrefix:e})}return e.withTypes=()=>e,e})();function mn(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function gn(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var wn=Symbol.for("rtk-slice-createasyncthunk");function bn(e,t){return`${e}/${t}`}function Sn({creators:e}={}){let t=e?.asyncThunk?.[wn];return function(e){let{name:r,reducerPath:n=r}=e;if(!r)throw new Error(Mn(11));let i=(typeof e.reducers=="function"?e.reducers(In()):e.reducers)||{},o=Object.keys(i),a={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(e,t){let r=typeof e=="string"?e:e.type;if(!r)throw new Error(Mn(12));if(r in a.sliceCaseReducersByType)throw new Error(Mn(13));return a.sliceCaseReducersByType[r]=t,u},addMatcher(e,t){return a.sliceMatchers.push({matcher:e,reducer:t}),u},exposeAction(e,t){return a.actionCreators[e]=t,u},exposeCaseReducer(e,t){return a.sliceCaseReducersByName[e]=t,u}};o.forEach((n=>{let o=i[n],a={reducerName:n,type:bn(r,n),createNotation:typeof e.reducers=="function"};Tn(o)?Rn(a,o,u,t):jn(a,o,u)}));function s(){let[t={},r=[],n=void 0]=typeof e.extraReducers=="function"?Jr(e.extraReducers):[e.extraReducers],i={...t,...a.sliceCaseReducersByType};return Zr(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of a.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)}))}let c=e=>e,l=new Map,d;function f(e,t){return d||(d=s()),d(e,t)}function h(){return d||(d=s()),d.getInitialState()}function p(t,r=!1){function n(e){let n=e[t];return typeof n>"u"&&r&&(n=h()),n}function i(t=c){let n=Fr(l,r,{insert:()=>new WeakMap});return Fr(n,t,{insert:()=>{let n={};for(let[i,o]of Object.entries(e.selectors??{}))n[i]=kn(o,t,h,r);return n}})}return{reducerPath:t,getSelectors:i,get selectors(){return i(n)},selectSlice:n}}let y={name:r,reducer:f,actions:a.actionCreators,caseReducers:a.sliceCaseReducersByName,getInitialState:h,...p(n),injectInto(e,{reducerPath:t,...r}={}){let i=t??n;return e.inject({reducerPath:i,reducer:f},r),{...y,...p(i,!0)}}};return y}}function kn(e,t,r,n){function i(i,...o){let a=t(i);return typeof a>"u"&&n&&(a=r()),e(a,...o)}return i.unwrapped=e,i}var On=Sn();function In(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:e}}function jn({type:e,reducerName:t,createNotation:r},n,i){let o,a;if("reducer"in n){if(r&&!An(n))throw new Error(Mn(17));o=n.reducer,a=n.prepare}else o=n;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,a?Mr(e,a):Mr(e))}function Tn(e){return e._reducerDefinitionType==="asyncThunk"}function An(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Rn({type:e,reducerName:t},r,n,i){if(!i)throw new Error(Mn(18));let{payloadCreator:o,fulfilled:a,pending:u,rejected:s,settled:c,options:l}=r,d=i(e,o,l);n.exposeAction(t,d),a&&n.addCase(d.fulfilled,a),u&&n.addCase(d.pending,u),s&&n.addCase(d.rejected,s),c&&n.addMatcher(d.settled,c),n.exposeCaseReducer(t,{fulfilled:a||qn,pending:u||qn,rejected:s||qn,settled:c||qn})}function qn(){}var Cn=(e,t)=>{if(typeof e!="function")throw new Error(Mn(32))};var Dn="listenerMiddleware";var En=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:o}=e;if(t)i=Mr(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(Mn(21));return Cn(o),{predicate:i,type:t,effect:o}},xn=Object.assign((e=>{let{type:t,predicate:r,effect:n}=En(e);return{id:en(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Mn(22))}}}),{withTypes:()=>xn});var Un=Object.assign(Mr(`${Dn}/add`),{withTypes:()=>Un});Mr(`${Dn}/removeAll`);var _n=Object.assign(Mr(`${Dn}/remove`),{withTypes:()=>_n});function Mn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Pn=new J({required:!0,emptyAllowed:!1}),$n=new J({required:!1,emptyAllowed:!1}),Fn=new J({required:!0,emptyAllowed:!0});new J({required:!1,emptyAllowed:!0});new ee({each:Pn,required:!0});var Nn=new J({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),Qn=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),zn=(e,t)=>{if("required"in t)return{payload:new $({value:t}).validate({value:e}).value};let r=new Z({options:{required:!0},values:t}).validate(e);if(r)throw new P(r);return{payload:e}},Ln=(e,t)=>{try{return zn(e,t)}catch(t){return{payload:e,error:Qn(t)}}},Hn=(e,t,r,n)=>{let i=`Check the options of ${n}`;return Vn(e,t,r,i,"Controller initialization error")},Vn=(e,t,r,n,i)=>{try{return t.validate(r,n)}catch(t){throw e.logger.error(t,i),t}};var Bn="2.73.0-pre.a389b402e2",Kn=["@coveo/atomic","@coveo/quantic"];var Gn=()=>$n,Yn=()=>Pn,Jn=Mr("configuration/updateBasicConfiguration",(e=>Ln(e,{accessToken:$n,organizationId:$n,platformUrl:$n}))),Wn=Mr("configuration/updateSearchConfiguration",(e=>Ln(e,{apiBaseUrl:$n,pipeline:new J({required:!1,emptyAllowed:!0}),searchHub:$n,timezone:$n,locale:$n,authenticationProviders:new ee({required:!1,each:Pn})}))),Zn={enabled:new B({default:!0}),originContext:Gn(),originLevel2:Gn(),originLevel3:Gn(),apiBaseUrl:$n,nextApiBaseUrl:$n,runtimeEnvironment:new F,anonymous:new B({default:!1}),deviceId:$n,userDisplayName:$n,documentLocation:$n,trackingId:$n,analyticsMode:new J({constrainTo:["legacy","next"],required:!1,default:"legacy"}),source:new Z({options:{required:!1},values:Kn.reduce(((e,t)=>(e[t]=Nn,e)),{})})},Xn=Mr("configuration/updateAnalyticsConfiguration",(e=>Ln(e,Zn))),ei=Mr("configuration/analytics/disable"),ti=Mr("configuration/analytics/enable"),ri=Mr("configuration/analytics/originlevel2",(e=>Ln(e,{originLevel2:Yn()}))),ni=Mr("configuration/analytics/originlevel3",(e=>Ln(e,{originLevel3:Yn()})));function ii(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function oi(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{s(n.next(e))}catch(e){o(e)}}function u(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?r(e.value):i(e.value).then(a,u)}s((n=n.apply(e,t||[])).next())}))}var ai;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(ai||(ai={}));function ui(){return typeof window<"u"}function si(){return typeof navigator<"u"}function ci(){return typeof document<"u"}function li(){try{return typeof localStorage<"u"}catch{return!1}}function di(){try{return typeof sessionStorage<"u"}catch{return!1}}function fi(){return si()&&navigator.cookieEnabled}var hi=[ai.click,ai.custom,ai.search,ai.view],pi=(e,t)=>hi.indexOf(e)!==-1?Object.assign({language:ci()?document.documentElement.lang:"unknown",userAgent:si()?navigator.userAgent:"unknown"},t):t,yi=class e{static set(e,t,r){var n,i,o,a;r&&(i=new Date,i.setTime(i.getTime()+r)),a=window.location.hostname,a.indexOf(".")===-1?vi(e,t,i):(o=a.split("."),n=o[o.length-2]+"."+o[o.length-1],vi(e,t,i,n))}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var i=r[n];if(i=i.replace(/^\s+/,""),i.lastIndexOf(t,0)===0)return i.substring(t.length,i.length)}return null}static erase(t){e.set(t,"",-1)}};function vi(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function mi(){return li()?localStorage:fi()?new gi:di()?sessionStorage:new bi}var gi=class e{getItem(t){return yi.get(`${e.prefix}${t}`)}removeItem(t){yi.erase(`${e.prefix}${t}`)}setItem(t,r,n){yi.set(`${e.prefix}${t}`,r,n)}};gi.prefix="coveo_";var wi=class{constructor(){this.cookieStorage=new gi}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t,31556926e3)}},bi=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},Si="__coveo.analytics.history",ki=20,Oi=1e3*60,Ii=75,ji=class{constructor(e){this.store=e||mi()}addElement(e){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return oi(this,void 0,void 0,(function*(){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}))}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return oi(this,void 0,void 0,(function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))}))}getHistoryWithInternalTime(){try{let e=this.store.getItem(Si);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return oi(this,void 0,void 0,(function*(){try{let e=yield this.store.getItem(Si);return e?JSON.parse(e):[]}catch{return[]}}))}setHistory(e){try{this.store.setItem(Si,JSON.stringify(e.slice(0,ki)))}catch{}}clear(){try{this.store.removeItem(Si)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort(((e,t)=>(t.internalTime||0)-(e.internalTime||0)))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,Ii)),e}isValidEntry(e){let t=this.getMostRecentElement();return t&&t.value==e.value?(e.internalTime||0)-(t.internalTime||0)>Oi:!0}stripInternalTime(e){return Array.isArray(e)?e.map((e=>{let{name:t,time:r,value:n}=e;return{name:t,time:r,value:n}})):[]}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&typeof n=="string"&&t.toLowerCase()==="query"&&n.trim()===""?{name:t,time:r}:e}stripEmptyQueries(e){return e.map((e=>this.stripEmptyQuery(e)))}},Ti=Object.freeze({__proto__:null,HistoryStore:ji,MAX_NUMBER_OF_HISTORY_ELEMENTS:ki,MAX_VALUE_SIZE:Ii,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:Oi,STORE_KEY:Si,default:ji}),Ai=(e,t)=>oi(void 0,void 0,void 0,(function*(){return e===ai.view?(yield Ri(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t})),Ri=e=>oi(void 0,void 0,void 0,(function*(){let t=new ji,r={name:"PageView",value:e,time:(new Date).toISOString()};yield t.addElementAsync(r)})),qi,Ci=new Uint8Array(16);function Di(){if(!qi&&(qi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!qi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return qi(Ci)}var Ei=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function xi(e){return typeof e=="string"&&Ei.test(e)}var Ui=[];for(let e=0;e<256;++e)Ui.push((e+256).toString(16).slice(1));function _i(e,t=0){return(Ui[e[t+0]]+Ui[e[t+1]]+Ui[e[t+2]]+Ui[e[t+3]]+"-"+Ui[e[t+4]]+Ui[e[t+5]]+"-"+Ui[e[t+6]]+Ui[e[t+7]]+"-"+Ui[e[t+8]]+Ui[e[t+9]]+"-"+Ui[e[t+10]]+Ui[e[t+11]]+Ui[e[t+12]]+Ui[e[t+13]]+Ui[e[t+14]]+Ui[e[t+15]]).toLowerCase()}function Mi(e){if(!xi(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function Pi(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var $i="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Fi="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Ni(e,t,r){function n(e,n,i,o){var a;if(typeof e=="string"&&(e=Pi(e)),typeof n=="string"&&(n=Mi(n)),((a=n)===null||a===void 0?void 0:a.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(n),u.set(e,n.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=u[e];return i}return _i(u)}try{n.name=e}catch{}return n.DNS=$i,n.URL=Fi,n}var Qi=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),zi={randomUUID:Qi};function Li(e,t,r){if(zi.randomUUID&&!t&&!e)return zi.randomUUID();e=e||{};let n=e.random||(e.rng||Di)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return _i(n)}function Hi(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function Vi(e,t){return e<<t|e>>>32-t}function Bi(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,i=Math.ceil(n/16),o=new Array(i);for(let t=0;t<i;++t){let r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[t*64+n*4]<<24|e[t*64+n*4+1]<<16|e[t*64+n*4+2]<<8|e[t*64+n*4+3];o[t]=r}o[i-1][14]=(e.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(e.length-1)*8&4294967295;for(let e=0;e<i;++e){let n=new Uint32Array(80);for(let t=0;t<16;++t)n[t]=o[e][t];for(let e=16;e<80;++e)n[e]=Vi(n[e-3]^n[e-8]^n[e-14]^n[e-16],1);let i=r[0],a=r[1],u=r[2],s=r[3],c=r[4];for(let e=0;e<80;++e){let r=Math.floor(e/20),o=Vi(i,5)+Hi(r,a,u,s)+c+t[r]+n[e]>>>0;c=s,s=u,u=Vi(a,30)>>>0,a=i,i=o}r[0]=r[0]+i>>>0,r[1]=r[1]+a>>>0,r[2]=r[2]+u>>>0,r[3]=r[3]+s>>>0,r[4]=r[4]+c>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var Ki=Ni("v5",80,Bi),Gi=Ki,Yi="2.30.6",Ji={pageview:"pageview",event:"event"},Wi=class e{constructor(e,t){if(!xi(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(t/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(e,t){return!this.expired&&this.matchReferrer(e,t)}matchReferrer(e,t){try{let r=new URL(e);return t.some((e=>new RegExp(e.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(r.host)))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,i]=r;if(n.length!==32||isNaN(parseInt(i)))return null;let o=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return xi(o)?new e(o,Number.parseInt(i)*1e3):null}};Wi.cvo_cid="cvo_cid";Wi.expirationTime=120;var Zi=Object.keys;function Xi(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var eo={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},to=Zi(eo).map((e=>eo[e])),ro=[...to].join("|"),no=new RegExp(`^(${ro}$)`),io={svcAction:"svc_action",svcActionData:"svc_action_data"},oo=e=>no.test(e),ao=[oo],uo={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},so={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},co={action:"pa",list:"pal",listSource:"pls"},lo={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},fo=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],ho={id:"quoteId",affiliation:"quoteAffiliation"},po={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},yo={add:co,bookmark_add:co,bookmark_remove:co,click:co,checkout:co,checkout_option:co,detail:co,impression:co,remove:co,refund:Object.assign(Object.assign({},co),lo),purchase:Object.assign(Object.assign({},co),lo),quickview:co,quote:Object.assign(Object.assign({},co),ho),review:Object.assign(Object.assign({},co),po)},vo=Zi(uo).map((e=>uo[e])),mo=Zi(so).map((e=>so[e])),go=Zi(co).map((e=>co[e])),wo=Zi(lo).map((e=>lo[e])),bo=Zi(po).map((e=>po[e])),So=Zi(ho).map((e=>ho[e])),ko=[...vo,"custom"].join("|"),Oo=[...mo,"custom"].join("|"),Io="(pr[0-9]+)",jo="(il[0-9]+pi[0-9]+)",To=new RegExp(`^${Io}(${ko})$`),Ao=new RegExp(`^(${jo}(${Oo}))|(il[0-9]+nm)$`),Ro=new RegExp(`^(${go.join("|")})$`),qo=new RegExp(`^(${wo.join("|")})$`),Co=new RegExp(`^${Io}custom$`),Do=new RegExp(`^${jo}custom$`),Eo=new RegExp(`^(${[...fo,...bo,...So].join("|")})$`),xo=e=>To.test(e),Uo=e=>Ao.test(e),_o=e=>Ro.test(e),Mo=e=>qo.test(e),Po=e=>Eo.test(e),$o=[Uo,xo,_o,Mo,Po],Fo=[Co,Do],No={anonymizeIp:"aip"},Qo={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},zo={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},Lo=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],Ho=Object.assign(Object.assign(Object.assign(Object.assign({},No),Qo),zo),Lo.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:t})),{})),Vo=Object.assign(Object.assign({},Ho),io),Bo=e=>{let t=!!e.action&&yo[e.action]||{};return Zi(e).reduce(((r,n)=>{let i=t[n]||Vo[n]||n;return Object.assign(Object.assign({},r),{[i]:e[n]})}),{})},Ko=Zi(Vo).map((e=>Vo[e])),Go=e=>Ko.indexOf(e)!==-1,Yo=e=>e==="custom",Jo=e=>[...$o,...ao,Go,Yo].some((t=>t(e))),Wo=e=>Zi(e).reduce(((t,r)=>{let n=Zo(r);return n?Object.assign(Object.assign({},t),Xo(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})}),{}),Zo=e=>{let t;return[...Fo].every((r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t})),t},Xo=(e,t)=>Zi(t).reduce(((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]})),{}),ea=class{constructor(e){this.opts=e}sendEvent(e,t){return oi(this,void 0,void 0,(function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,i=yield this.getQueryParamsForEventType(e),{url:o,payload:a}=yield this.preProcessRequestAsPotentialJSONString(`${r}/analytics/${e}?${i}`,t,n),u=this.encodeForEventType(e,a),s=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(o,s)}))}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,t,r){return oi(this,void 0,void 0,(function*(){let n=e,i=t;if(r){let o=yield r({url:e,body:JSON.stringify(t)},"analyticsBeacon"),{url:a,body:u}=o;n=a||e;try{i=JSON.parse(u)}catch(e){console.error("Unable to process the request body as a JSON string",e)}}return{payload:i,url:n}}))}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeEventToJson(e,t):this.encodeEventToJson(e,t,this.opts.token)}getQueryParamsForEventType(e){return oi(this,void 0,void 0,(function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter((e=>!!e)).join("&")}))}isEventTypeLegacy(e){return[ai.click,ai.custom,ai.search,ai.view].indexOf(e)!==-1}encodeEventToJson(e,t,r){let n=`${e}Event=${encodeURIComponent(JSON.stringify(t))}`;return r&&(n=`access_token=${encodeURIComponent(r)}&${n}`),n}},ta=class{sendEvent(e,t){return oi(this,void 0,void 0,(function*(){return Promise.resolve()}))}deleteHttpCookieVisitorId(){return oi(this,void 0,void 0,(function*(){return Promise.resolve()}))}},ra=window.fetch,na=class{constructor(e){this.opts=e}sendEvent(e,t){return oi(this,void 0,void 0,(function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:i}=this.opts,o=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",a={url:`${r}/analytics/${e}${o}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},u=Object.assign(Object.assign({},a),i?yield i(a,"analyticsFetch"):{}),{url:s}=u,c=ii(u,["url"]),l;try{l=yield ra(s,c)}catch(e){console.error("An error has occured when sending the event.",e);return}if(l.ok){let e=yield l.json();return e.visitorId&&n.setCurrentVisitorId(e.visitorId),e}else{try{l.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,l,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}}))}deleteHttpCookieVisitorId(){return oi(this,void 0,void 0,(function*(){let{baseUrl:e}=this.opts,t=`${e}/analytics/visit`;yield ra(t,{headers:this.getHeaders(),method:"DELETE"})}))}shouldAppendVisitorId(e){return[ai.click,ai.custom,ai.search,ai.view].indexOf(e)!==-1}getVisitorIdParam(){return oi(this,void 0,void 0,(function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""}))}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},ia=class{constructor(e,t){li()&&fi()?this.storage=new wi:li()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new bi),this.client=new na(e),this.beaconClient=new ea(e),window.addEventListener("beforeunload",(()=>{let e=t();for(let{eventType:t,payload:r}of e)this.beaconClient.sendEvent(t,r)}))}getClientDependingOnEventType(e){return e==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},oa=class{constructor(e,t){this.storage=t||new bi,this.client=new na(e)}getClientDependingOnEventType(e){return this.client}},aa=class{constructor(){this.storage=new bi,this.client=new ta}getClientDependingOnEventType(e){return this.client}},ua="xx",sa=e=>e?.startsWith(ua)||!1,ca=`\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please use the "coveo.analytics/react-native" subpackage.\n        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native\n    `;function la(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var da=["1",1,"yes",!0];function fa(){return si()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some((e=>da.indexOf(e)!==-1))}var ha="v15",pa={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function ya(e=pa.default,t=ha,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var va="38824e1f-37f5-42d3-8372-a4b8fa9df946",ma=class{get defaultOptions(){return{endpoint:pa.default,isCustomEndpoint:!1,token:"",version:ha,beforeSendHooks:[],afterSendHooks:[]}}get version(){return Yi}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[Ai,pi].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};fa()?this.runtime=new aa:this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),this.addEventTypeMapping(ai.view,{newEventType:ai.view,addClientIdParameter:!0}),this.addEventTypeMapping(ai.click,{newEventType:ai.click,addClientIdParameter:!0}),this.addEventTypeMapping(ai.custom,{newEventType:ai.custom,addClientIdParameter:!0}),this.addEventTypeMapping(ai.search,{newEventType:ai.search,addClientIdParameter:!0})}initRuntime(e){return ui()&&ci()?new ia(e,(()=>{let e=[...this.bufferedRequests];return this.bufferedRequests=[],e})):(la()&&console.warn(ca),new oa(e))}get storage(){return this.runtime.storage}determineVisitorId(){return oi(this,void 0,void 0,(function*(){try{return ui()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||Li()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),Li()}}))}getCurrentVisitorId(){return oi(this,void 0,void 0,(function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId}))}setCurrentVisitorId(e){return oi(this,void 0,void 0,(function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)}))}setClientId(e,t){return oi(this,void 0,void 0,(function*(){if(xi(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!t)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Gi(e,Gi(t,va)))}}))}getParameters(e,...t){return oi(this,void 0,void 0,(function*(){return yield this.resolveParameters(e,...t)}))}getPayload(e,...t){return oi(this,void 0,void 0,(function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)}))}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(Li()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(fa())return null;try{let t=new URL(e).searchParams.get(Wi.cvo_cid);if(t==null)return null;let r=Wi.fromString(t);return!r||!ci()||!r.validate(document.referrer,this.acceptedLinkReferrers)?null:r.clientId}catch{}return null}resolveParameters(e,...t){return oi(this,void 0,void 0,(function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:i=!1,addClientIdParameter:o=!1}=this.eventTypeMapping[e]||{};return yield[e=>r.length>0?this.parseVariableArgumentsPayload(r,e):e[0],e=>oi(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{visitorId:n?yield this.getCurrentVisitorId():""})})),e=>oi(this,void 0,void 0,(function*(){return o?Object.assign(Object.assign({},e),{clientId:yield this.getCurrentVisitorId()}):e})),e=>i?this.ensureAnonymousUserWhenUsingApiKey(e):e,t=>this.beforeSendHooks.reduce(((t,r)=>oi(this,void 0,void 0,(function*(){let n=yield t;return yield r(e,n)}))),t)].reduce(((e,t)=>oi(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}resolvePayloadForParameters(e,t){return oi(this,void 0,void 0,(function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[e=>this.setTrackingIdIfTrackingIdNotPresent(e),t=>this.removeEmptyPayloadValues(t,e),t=>this.validateParams(t,e),e=>r?Bo(e):e,e=>r?this.removeUnknownParameters(e):e,e=>r?this.processCustomParameters(e):this.mapCustomParametersToCustomData(e)].reduce(((e,t)=>oi(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}makeEvent(e,...t){return oi(this,void 0,void 0,(function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),i=yield this.resolvePayloadForParameters(e,n);return{eventType:r,payload:i,log:t=>oi(this,void 0,void 0,(function*(){return this.bufferedRequests.push({eventType:r,payload:Object.assign(Object.assign({},i),t)}),yield Promise.all(this.afterSendHooks.map((r=>r(e,Object.assign(Object.assign({},n),t))))),yield this.deferExecution(),yield this.sendFromBuffer()}))}}))}sendEvent(e,...t){return oi(this,void 0,void 0,(function*(){return(yield this.makeEvent(e,...t)).log({})}))}deferExecution(){return new Promise((e=>setTimeout(e,0)))}sendFromBuffer(){return oi(this,void 0,void 0,(function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.getClientDependingOnEventType(t).sendEvent(t,r)}}))}clear(){this.storage.removeItem("visitorId"),(new ji).clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return oi(this,void 0,void 0,(function*(){return this.makeEvent(ai.search,e)}))}sendSearchEvent(e){var{searchQueryUid:t}=e,r=ii(e,["searchQueryUid"]);return oi(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(r)).log({searchQueryUid:t})}))}makeClickEvent(e){return oi(this,void 0,void 0,(function*(){return this.makeEvent(ai.click,e)}))}sendClickEvent(e){var{searchQueryUid:t}=e,r=ii(e,["searchQueryUid"]);return oi(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(r)).log({searchQueryUid:t})}))}makeCustomEvent(e){return oi(this,void 0,void 0,(function*(){return this.makeEvent(ai.custom,e)}))}sendCustomEvent(e){var{lastSearchQueryUid:t}=e,r=ii(e,["lastSearchQueryUid"]);return oi(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(r)).log({lastSearchQueryUid:t})}))}makeViewEvent(e){return oi(this,void 0,void 0,(function*(){return this.makeEvent(ai.view,e)}))}sendViewEvent(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeViewEvent(e)).log({})}))}getVisit(){return oi(this,void 0,void 0,(function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e}))}getHealth(){return oi(this,void 0,void 0,(function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()}))}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every((e=>typeof e=="string")))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,i=t.length;n<i;n++){let i=t[n];if(typeof i=="string")r[e[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},r),i)}return r}isKeyAllowedEmpty(e,t){return({[ai.search]:["queryText"]}[e]||[]).indexOf(t)!==-1}removeEmptyPayloadValues(e,t){let r=e=>typeof e<"u"&&e!==null&&e!=="";return Object.keys(e).filter((n=>this.isKeyAllowedEmpty(t,n)||r(e[n]))).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}removeUnknownParameters(e){return Object.keys(e).filter((e=>{if(Jo(e))return!0;console.log(e,"is not processed by coveoua")})).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}processCustomParameters(e){let{custom:t}=e,r=ii(e,["custom"]),n={};t&&Xi(t)&&(n=this.lowercaseKeys(t));let i=Wo(r);return Object.assign(Object.assign({},n),i)}mapCustomParametersToCustomData(e){let{custom:t}=e,r=ii(e,["custom"]);if(t&&Xi(t)){let n=this.lowercaseKeys(t);return Object.assign(Object.assign({},r),{customData:Object.assign(Object.assign({},n),e.customData)})}else return e}lowercaseKeys(e){let t=Object.keys(e),r={};return t.forEach((t=>{r[t.toLowerCase()]=e[t]})),r}validateParams(e,t){let{anonymizeIp:r}=e,n=ii(e,["anonymizeIp"]);return r!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${r}`.toLowerCase())==-1&&(n.anonymizeIp=1),(t==ai.view||t==ai.click||t==ai.search||t==ai.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),t==ai.view&&(n.location=this.limit(n.location,128)),(t=="pageview"||t=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=ii(e,["userId"]);return sa(this.options.token)&&!t?(r.userId="anonymous",r):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:t}=e,r=ii(e,["trackingId"]);return t?e:(r.hasOwnProperty("custom")&&Xi(r.custom)&&(r.custom.hasOwnProperty("context_website")||r.custom.hasOwnProperty("siteName"))&&(r.trackingId=r.custom.context_website||r.custom.siteName),r.hasOwnProperty("customData")&&Xi(r.customData)&&(r.customData.hasOwnProperty("context_website")||r.customData.hasOwnProperty("siteName"))&&(r.trackingId=r.customData.context_website||r.customData.siteName),r)}limit(e,t){return typeof e!="string"?e:e.substring(0,t)}get baseUrl(){return ya(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},ga;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(ga||(ga={}));var wa;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer",e.generatedAnswerFeedbackSubmitV2="generatedAnswerFeedbackSubmitV2"})(wa||(wa={}));var ba={[wa.triggerNotify]:"queryPipelineTriggers",[wa.triggerExecute]:"queryPipelineTriggers",[wa.triggerQuery]:"queryPipelineTriggers",[wa.triggerRedirect]:"queryPipelineTriggers",[wa.queryError]:"errors",[wa.queryErrorBack]:"errors",[wa.queryErrorClear]:"errors",[wa.queryErrorRetry]:"errors",[wa.pagerNext]:"getMoreResults",[wa.pagerPrevious]:"getMoreResults",[wa.pagerNumber]:"getMoreResults",[wa.pagerResize]:"getMoreResults",[wa.pagerScrolling]:"getMoreResults",[wa.facetSearch]:"facet",[wa.facetShowLess]:"facet",[wa.facetShowMore]:"facet",[wa.recommendation]:"recommendation",[wa.likeSmartSnippet]:"smartSnippet",[wa.dislikeSmartSnippet]:"smartSnippet",[wa.expandSmartSnippet]:"smartSnippet",[wa.collapseSmartSnippet]:"smartSnippet",[wa.openSmartSnippetFeedbackModal]:"smartSnippet",[wa.closeSmartSnippetFeedbackModal]:"smartSnippet",[wa.sendSmartSnippetReason]:"smartSnippet",[wa.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[wa.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[wa.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[wa.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[wa.clearRecentQueries]:"recentQueries",[wa.recentResultClick]:"recentlyClickedDocuments",[wa.clearRecentResults]:"recentlyClickedDocuments",[wa.showLessFoldedResults]:"folding",[wa.caseDetach]:"case",[wa.likeGeneratedAnswer]:"generatedAnswer",[wa.dislikeGeneratedAnswer]:"generatedAnswer",[wa.openGeneratedAnswerSource]:"generatedAnswer",[wa.generatedAnswerStreamEnd]:"generatedAnswer",[wa.generatedAnswerSourceHover]:"generatedAnswer",[wa.generatedAnswerCopyToClipboard]:"generatedAnswer",[wa.generatedAnswerHideAnswers]:"generatedAnswer",[wa.generatedAnswerShowAnswers]:"generatedAnswer",[wa.generatedAnswerExpand]:"generatedAnswer",[wa.generatedAnswerCollapse]:"generatedAnswer",[wa.generatedAnswerFeedbackSubmit]:"generatedAnswer",[wa.generatedAnswerFeedbackSubmitV2]:"generatedAnswer",[ga.expandToFullUI]:"interface",[ga.openUserActions]:"User Actions",[ga.showPrecedingSessions]:"User Actions",[ga.showFollowingSessions]:"User Actions",[ga.clickViewedDocument]:"User Actions",[ga.clickPageView]:"User Actions",[ga.createArticle]:"createArticle"},Sa=class{constructor(){this.runtime=new aa,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(ai.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(ai.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(ai.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(ai.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return Yi}};function ka(e){let t="";return e.filter((e=>{let r=e!==t;return t=e,r}))}function Oa(e){return e.map((e=>e.replace(/;/g,"")))}function Ia(e){let t=e.join(";");return t.length<=256?t:Ia(e.slice(1))}var ja=e=>{let t=Oa(e),r=ka(t);return Ia(r)};function Ta(e){let t=typeof e.partialQueries=="string"?e.partialQueries:ja(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:ja(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Aa=class{constructor(e,t){this.opts=e,this.provider=t;let r=e.enableAnalytics===!1||fa();this.coveoAnalyticsClient=r?new Sa:new ma(e)}disable(){this.coveoAnalyticsClient=new Sa}enable(){this.coveoAnalyticsClient=new ma(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(wa.interfaceLoad)}logInterfaceLoad(){return oi(this,void 0,void 0,(function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(wa.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return oi(this,void 0,void 0,(function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendation(){return this.makeCustomEvent(wa.recommendation)}logRecommendation(){return oi(this,void 0,void 0,(function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationOpen(e,t){return this.makeClickEvent(wa.recommendationOpen,e,t)}logRecommendationOpen(e,t){return oi(this,void 0,void 0,(function*(){return(yield this.makeRecommendationOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterClearAll(e){return this.makeSearchEvent(wa.staticFilterClearAll,e)}logStaticFilterClearAll(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterSelect(e){return this.makeSearchEvent(wa.staticFilterSelect,e)}logStaticFilterSelect(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterDeselect(e){return this.makeSearchEvent(wa.staticFilterDeselect,e)}logStaticFilterDeselect(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFetchMoreResults(){return this.makeCustomEvent(wa.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return oi(this,void 0,void 0,(function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})}))}makeInterfaceChange(e){return this.makeSearchEvent(wa.interfaceChange,e)}logInterfaceChange(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanAutomatic(){return this.makeSearchEvent(wa.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return oi(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanClick(){return this.makeSearchEvent(wa.didyoumeanClick)}logDidYouMeanClick(){return oi(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})}))}makeResultsSort(e){return this.makeSearchEvent(wa.resultsSort,e)}logResultsSort(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxSubmit(){return this.makeSearchEvent(wa.searchboxSubmit)}logSearchboxSubmit(){return oi(this,void 0,void 0,(function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxClear(){return this.makeSearchEvent(wa.searchboxClear)}logSearchboxClear(){return oi(this,void 0,void 0,(function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxAsYouType(){return this.makeSearchEvent(wa.searchboxAsYouType)}logSearchboxAsYouType(){return oi(this,void 0,void 0,(function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbFacet(e){return this.makeSearchEvent(wa.breadcrumbFacet,e)}logBreadcrumbFacet(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbResetAll(){return this.makeSearchEvent(wa.breadcrumbResetAll)}logBreadcrumbResetAll(){return oi(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentQuickview(e,t){return this.makeClickEvent(wa.documentQuickview,e,t)}logDocumentQuickview(e,t){return oi(this,void 0,void 0,(function*(){return(yield this.makeDocumentQuickview(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentOpen(e,t){return this.makeClickEvent(wa.documentOpen,e,t)}logDocumentOpen(e,t){return oi(this,void 0,void 0,(function*(){return(yield this.makeDocumentOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxAnalytics(e){return this.makeSearchEvent(wa.omniboxAnalytics,Ta(e))}logOmniboxAnalytics(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxFromLink(e){return this.makeSearchEvent(wa.omniboxFromLink,Ta(e))}logOmniboxFromLink(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchFromLink(){return this.makeSearchEvent(wa.searchFromLink)}logSearchFromLink(){return oi(this,void 0,void 0,(function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerNotify(e){return this.makeCustomEvent(wa.triggerNotify,e)}logTriggerNotify(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerExecute(e){return this.makeCustomEvent(wa.triggerExecute,e)}logTriggerExecute(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerQuery(){return this.makeCustomEvent(wa.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return oi(this,void 0,void 0,(function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})}))}makeUndoTriggerQuery(e){return this.makeSearchEvent(wa.undoTriggerQuery,e)}logUndoTriggerQuery(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerRedirect(e){return this.makeCustomEvent(wa.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerResize(e){return this.makeCustomEvent(wa.pagerResize,e)}logPagerResize(e){return oi(this,void 0,void 0,(function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNumber(e){return this.makeCustomEvent(wa.pagerNumber,e)}logPagerNumber(e){return oi(this,void 0,void 0,(function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNext(e){return this.makeCustomEvent(wa.pagerNext,e)}logPagerNext(e){return oi(this,void 0,void 0,(function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerPrevious(e){return this.makeCustomEvent(wa.pagerPrevious,e)}logPagerPrevious(e){return oi(this,void 0,void 0,(function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerScrolling(){return this.makeCustomEvent(wa.pagerScrolling)}logPagerScrolling(){return oi(this,void 0,void 0,(function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})}))}makeFacetClearAll(e){return this.makeSearchEvent(wa.facetClearAll,e)}logFacetClearAll(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSearch(e){return this.makeSearchEvent(wa.facetSearch,e)}logFacetSearch(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelect(e){return this.makeSearchEvent(wa.facetSelect,e)}logFacetSelect(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetDeselect(e){return this.makeSearchEvent(wa.facetDeselect,e)}logFacetDeselect(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetExclude(e){return this.makeSearchEvent(wa.facetExclude,e)}logFacetExclude(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUnexclude(e){return this.makeSearchEvent(wa.facetUnexclude,e)}logFacetUnexclude(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelectAll(e){return this.makeSearchEvent(wa.facetSelectAll,e)}logFacetSelectAll(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUpdateSort(e){return this.makeSearchEvent(wa.facetUpdateSort,e)}logFacetUpdateSort(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowMore(e){return this.makeCustomEvent(wa.facetShowMore,e)}logFacetShowMore(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowLess(e){return this.makeCustomEvent(wa.facetShowLess,e)}logFacetShowLess(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryError(e){return this.makeCustomEvent(wa.queryError,e)}logQueryError(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorBack(){return oi(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(wa.queryErrorBack);return{description:e.description,log:()=>oi(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(wa.queryErrorBack)}))}}))}logQueryErrorBack(){return oi(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorRetry(){return oi(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(wa.queryErrorRetry);return{description:e.description,log:()=>oi(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(wa.queryErrorRetry)}))}}))}logQueryErrorRetry(){return oi(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorClear(){return oi(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(wa.queryErrorClear);return{description:e.description,log:()=>oi(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(wa.queryErrorClear)}))}}))}logQueryErrorClear(){return oi(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})}))}makeLikeSmartSnippet(){return this.makeCustomEvent(wa.likeSmartSnippet)}logLikeSmartSnippet(){return oi(this,void 0,void 0,(function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeSmartSnippet(){return this.makeCustomEvent(wa.dislikeSmartSnippet)}logDislikeSmartSnippet(){return oi(this,void 0,void 0,(function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippet(){return this.makeCustomEvent(wa.expandSmartSnippet)}logExpandSmartSnippet(){return oi(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippet(){return this.makeCustomEvent(wa.collapseSmartSnippet)}logCollapseSmartSnippet(){return oi(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(wa.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return oi(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(wa.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return oi(this,void 0,void 0,(function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeSmartSnippetFeedbackReason(e,t){return this.makeCustomEvent(wa.sendSmartSnippetReason,{reason:e,details:t})}logSmartSnippetFeedbackReason(e,t){return oi(this,void 0,void 0,(function*(){return(yield this.makeSmartSnippetFeedbackReason(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(wa.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(wa.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(wa.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(wa.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSource(e,t){return this.makeClickEvent(wa.openSmartSnippetSource,e,t)}logOpenSmartSnippetSource(e,t){return oi(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionSource(e,t){return this.makeClickEvent(wa.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}makeCopyToClipboard(e,t){return this.makeClickEvent(wa.copyToClipboard,e,t)}logCopyToClipboard(e,t){return oi(this,void 0,void 0,(function*(){return(yield this.makeCopyToClipboard(e,t)).log({searchUID:this.provider.getSearchUID()})}))}logOpenSmartSnippetSuggestionSource(e,t){return oi(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetInlineLink(e,t){return this.makeClickEvent(wa.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},t)}logOpenSmartSnippetInlineLink(e,t){return oi(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionInlineLink(e,t){return this.makeClickEvent(wa.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logOpenSmartSnippetSuggestionInlineLink(e,t){return oi(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeRecentQueryClick(){return this.makeSearchEvent(wa.recentQueryClick)}logRecentQueryClick(){return oi(this,void 0,void 0,(function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentQueries(){return this.makeCustomEvent(wa.clearRecentQueries)}logClearRecentQueries(){return oi(this,void 0,void 0,(function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})}))}makeRecentResultClick(e,t){return this.makeCustomEvent(wa.recentResultClick,{info:e,identifier:t})}logRecentResultClick(e,t){return oi(this,void 0,void 0,(function*(){return(yield this.makeRecentResultClick(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentResults(){return this.makeCustomEvent(wa.clearRecentResults)}logClearRecentResults(){return oi(this,void 0,void 0,(function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})}))}makeNoResultsBack(){return this.makeSearchEvent(wa.noResultsBack)}logNoResultsBack(){return oi(this,void 0,void 0,(function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreFoldedResults(e,t){return this.makeClickEvent(wa.showMoreFoldedResults,e,t)}logShowMoreFoldedResults(e,t){return oi(this,void 0,void 0,(function*(){return(yield this.makeShowMoreFoldedResults(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessFoldedResults(){return this.makeCustomEvent(wa.showLessFoldedResults)}logShowLessFoldedResults(){return oi(this,void 0,void 0,(function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})}))}makeEventDescription(e,t){var r;return{actionCause:t,customData:(r=e.payload)===null||r===void 0?void 0:r.customData}}makeCustomEvent(e,t,r=ba[e]){return oi(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:e}),o=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(o,e),log:({searchUID:e})=>o.log({lastSearchQueryUid:e})}}))}logCustomEvent(e,t,r=ba[e]){return oi(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}makeCustomEventWithType(e,t,r){return oi(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:t,eventValue:e}),o=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(o,e),log:({searchUID:e})=>o.log({lastSearchQueryUid:e})}}))}logCustomEventWithType(e,t,r){return oi(this,void 0,void 0,(function*(){return(yield this.makeCustomEventWithType(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}logSearchEvent(e,t){return oi(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchEvent(e,t){return oi(this,void 0,void 0,(function*(){let r=yield this.getBaseSearchEventRequest(e,t),n=yield this.coveoAnalyticsClient.makeSearchEvent(r);return{description:this.makeEventDescription(n,e),log:({searchUID:e})=>n.log({searchQueryUid:e})}}))}makeClickEvent(e,t,r,n){return oi(this,void 0,void 0,(function*(){let i=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),o=yield this.coveoAnalyticsClient.makeClickEvent(i);return{description:this.makeEventDescription(o,e),log:({searchUID:e})=>o.log({searchQueryUid:e})}}))}logClickEvent(e,t,r,n){return oi(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(e,t,r,n)).log({searchUID:this.provider.getSearchUID()})}))}getBaseSearchEventRequest(e,t){var r,n;return oi(this,void 0,void 0,(function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},t),(n=(r=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(r)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})}))}getBaseEventRequest(e){return oi(this,void 0,void 0,(function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})}))}getOrigins(){var e,t;return{originContext:(t=(e=this.provider).getOriginContext)===null||t===void 0?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof ma?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",t=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),t&&{splitTestRunVersion:t})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(wa.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(wa.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(wa.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(wa.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(wa.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(wa.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(wa.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerExpand(e){return this.makeCustomEvent(wa.generatedAnswerExpand,e)}logGeneratedAnswerExpand(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerExpand(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerCollapse(e){return this.makeCustomEvent(wa.generatedAnswerCollapse,e)}logGeneratedAnswerCollapse(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerCollapse(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(wa.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerFeedbackSubmitV2(e){return this.makeCustomEvent(wa.generatedAnswerFeedbackSubmitV2,e)}logGeneratedAnswerFeedbackSubmitV2(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerFeedbackSubmitV2(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(wa.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRetryGeneratedAnswer(){return this.makeSearchEvent(wa.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return oi(this,void 0,void 0,(function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(wa.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return oi(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})}))}},Ra=Object.assign({},Ji);Object.keys(Ra).map((e=>Ra[e]));var qa;(function(e){e.click="click",e.flowStart="flowStart"})(qa||(qa={}));var Ca;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(Ca||(Ca={}));var Da;(function(e){e.quit="Quit",e.solved="Solved"})(Da||(Da={}));var Ea=e=>new ma(e).getCurrentVisitorId(),xa=new Ti.HistoryStore,Ua=(e,t)=>typeof t=="function"?(...r)=>{let n=be(r[0]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,_a=(e,t)=>(...r)=>{let n=be(r[1]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics hook. Returning original request."),n}};var Ma=["uri","urihash","documentUri","documentUriHash","permanentid","ec_name","ec_brand","ec_category","ec_item_group_id","ec_price","ec_promo_price","ec_shortdesc","ec_thumbnails","ec_images","ec_in_stock","ec_rating","childResults","totalNumberOfChildResults"];var Pa=()=>({id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0});var $a=()=>"default";var Fa=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},Na=class{constructor(e){this.getState=e;this.state=e()}getLanguage(){return Fa(this.state)}getBaseMetadata(){let{context:e,configuration:t}=this.state,r=e?.contextValues||{},n={};for(let[e,t]of Object.entries(r)){let r=`context_${e}`;n[r]=t}return t.analytics.analyticsMode==="legacy"&&(n.coveoHeadlessVersion=Bn),n}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||$a()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var Qa=class extends Na{constructor(){super(...arguments);this.initialState=Pa()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){return this.getState().productRecommendations?.searchUid||this.initialState.searchUid}mapResultsToAnalyticsDocument(){return this.state.productRecommendations?.recommendations.map((e=>({documentUri:e.documentUri,documentUriHash:e.documentUriHash,permanentid:e.permanentid})))}get responseTime(){return this.state.productRecommendations?.duration||this.initialState.duration}get numberOfResults(){return this.state.productRecommendations?.recommendations.length||this.initialState.recommendations.length}};function za({config:e,environment:t,event:r,listenerManager:n}){let{url:i,token:o,mode:a}=e;a!=="disabled"&&(n.call(r),t.send(i,o,r))}var La=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ha(e){return typeof e=="string"&&La.test(e)}function Va(e){let t="visitorId";return{getClientId:()=>{let r=e.get(),n=r.storage,i=n.getItem(t),o=i&&Ha(i)?i:r.generateUUID();return n.setItem(t,o),o},clear:()=>{e.get().storage.removeItem(t)}}}var Ba="0.7.7";function Ka(e){let{trackingId:t}=e;return{trackingId:t}}function Ga(e){return(e.source||[]).concat([`relay@${Ba}`])}function Ya(e,t,r,n){let{getReferrer:i,getLocation:o,getUserAgent:a}=r,u=Ka(t),s=n.getClientId();return Object.freeze({type:e,config:u,ts:Date.now(),source:Ga(t),clientId:s,userAgent:a(),referrer:i(),location:o()})}function Ja(e,t,r,n,i){return{...t,meta:Ya(e,r,n,i)}}var Wa="*";function Za(){let e=[];function t({type:t,callback:r}){return e.findIndex((e=>e.type===t&&e.callback===r))}function r(e,t){return e.type==="*"||t===e.type}function n(r){return t(r)<0&&e.push(r),()=>u(r.type,r.callback)}function i(t){e.forEach((e=>{if(r(e,t.meta.type))try{e.callback(t)}catch(e){console.error(e)}}))}function o(t){if(t===Wa)e.length=0;else for(let r=e.length-1;r>=0;r--)e[r].type===t&&e.splice(r,1)}function a(r){let n=t(r);n>=0&&e.splice(n,1)}function u(e,t){t?a({type:e,callback:t}):o(e)}return{add:n,call:i,remove:u}}function Xa({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source}})}function eu(e){let t=Xa(e);return{get:()=>t,update:e=>{t=Xa({...t,...e})}}}function tu(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}var ru=nu();function nu(){let e="coveo_",t=e=>{let t=e.split(".").slice(-2);return t.length==2?t.join("."):""};return{getItem(t){let r=`${e}${t}=`,n=document.cookie.split(";");for(let e of n){let t=e.replace(/^\s+/,"");if(t.lastIndexOf(r,0)===0)return t.substring(r.length,t.length)}return null},setItem(r,n,i){let o=t(window.location.hostname),a=`;expires=${new Date((new Date).getTime()+i).toUTCString()}`,u=o?`;domain=${o}`:"";document.cookie=`${e}${r}=${n}${a}${u};path=/;SameSite=Lax`},removeItem(e){this.setItem(e,"",-1)}}}function iu(){return{getItem(e){return ru.getItem(e)||localStorage.getItem(e)},removeItem(e){ru.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),ru.setItem(e,t,31556952e3)}}}function ou(){let e=document.referrer;return e===""?null:e}function au(){return{runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(tu().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>ou(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:iu()}}function uu(){return{getItem(){return null},removeItem(){},setItem(){}}}function su(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:uu()}}function cu(e){return e.get().mode!=="disabled"&&lu()?au():su()}function lu(){try{return typeof window=="object"}catch{return!1}}function du(e){return{get:()=>Object.freeze(cu(e))}}function fu(e){let t=eu(e),r=Za(),n=du(t),i=Va(n);return{emit:(e,o)=>{let a=t.get(),u=n.get(),s=Ja(e,o,a,u,i);return za({config:a,environment:u,event:s,listenerManager:r})},getMeta:e=>Ya(e,t.get(),n.get(),i),on:(e,t)=>r.add({type:e,callback:t}),off:(e,t)=>r.remove(e,t),updateConfig:e=>t.update(e),version:Ba,clearStorage:()=>{i.clear()}}}var hu=Rr((e=>e.source),(e=>[`@coveo/headless@${Bn}`].concat(Object.entries(e).map((([e,t])=>`${e}@${t}`)))));var pu=Rr((e=>e.configuration.accessToken),(e=>e.configuration.analytics),(e=>hu(e.configuration.analytics)),((e,{trackingId:t,nextApiBaseUrl:r,enabled:n},i)=>fu({mode:n?"emit":"disabled",url:r,token:e,trackingId:t,source:i})));function yu(){return{desiredCount:5,numberOfValues:8,set:{}}}function vu(e){let{activeValue:t,ancestryMap:r}=mu(e);return t?gu(t,r):[]}function mu(e){let t=[...e],r=new Map;for(;t.length>0;){let e=t.shift();if(e.state==="selected")return{activeValue:e,ancestryMap:r};if(r)for(let t of e.children)r.set(t,e);t.unshift(...e.children)}return{}}function gu(e,t){let r=[];if(!e)return[];let n=e;do{r.unshift(n),n=t.get(n)}while(n);return r}var wu=(e,t)=>e.categoryFacetSet[t]?.request;var bu=(e,t)=>{let r=wu(e,t);return vu(r?.currentValues??[])};function Su(){return{}}function ku(){return{}}function Ou(){return{}}function Iu(){return{}}function ju(e){return{facetSet:e.facetSet??Iu(),categoryFacetSet:e.categoryFacetSet??Su(),dateFacetSet:e.dateFacetSet??ku(),numericFacetSet:e.numericFacetSet??Ou(),automaticFacetSet:e.automaticFacetSet??yu()}}var Tu=e=>{let t=[];return qu(e).forEach(((r,n)=>{let i=Nu(e,r.facetId),o=Pu(r,n+1);if(Ru(r)){if(!!!bu(e,r.facetId).length)return;t.push({...o,..._u(e,r.facetId),facetType:i,state:"selected"});return}r.currentValues.forEach(((e,n)=>{if(e.state==="idle")return;let a=Du(e,n+1,i),u=Au(r)?xu(e):Eu(e);t.push({...o,...a,...u})}))})),Cu(e).forEach(((e,r)=>{let n=Mu(e,r+1);e.values.forEach(((e,r)=>{if(e.state==="idle")return;let i=Du(e,r+1,"specific"),o=xu(e);t.push({...n,...i,...o})}))})),t},Au=e=>e.type==="specific",Ru=e=>e.type==="hierarchical",qu=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map((e=>e.request)),Cu=e=>[...Object.values(e.automaticFacetSet.set)].map((e=>e.response)),Du=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),Eu=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),xu=e=>({displayValue:e.value,value:e.value}),Uu=(e,t)=>bu(e,t).map((e=>e.value)).join(";"),_u=(e,t)=>{let r=Uu(e,t);return{value:r,valuePosition:1,displayValue:r}},Mu=(e,t)=>({title:$u(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),Pu=(e,t)=>({title:$u(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),$u=(e,t)=>`${e}_${t}`,Fu=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,Nu=(e,t)=>{let r=Fu(e,t);return r?r.type:"specific"};var Qu=()=>({q:"",enableQuerySyntax:!1});var zu=(e=>(e.Ascending="ascending",e.Descending="descending",e))(zu||{}),Lu=(e=>(e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort",e))(Lu||{}),Hu=e=>{if(te(e))return e.map((e=>Hu(e))).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},Vu=()=>({by:"relevancy"});new Z({values:{by:new re({enum:Lu,required:!0}),order:new re({enum:zu}),field:new J}});function Bu(){return Hu(Vu())}var Ku=class e extends Na{constructor(){super(...arguments);this.getFacetRequest=e=>this.state.facetSet?.[e]?.request||this.state.categoryFacetSet?.[e]?.request||this.state.dateFacetSet?.[e]?.request||this.state.numericFacetSet?.[e]?.request||this.state.automaticFacetSet?.set[e]?.response}getFacetState(){return Tu(ju(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||e.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let e=this.getState();return e.search?.searchResponseId||e.search?.response.searchUid||oe().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let t=!!this.getSplitTestRunName(),r=this.state.search?.response.pipeline||this.state.pipeline||e.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){let e=this.getState(),t=super.getBaseMetadata(),r=e.search?.response?.extendedResults?.generativeQuestionAnsweringId;return r&&(t.generativeQuestionAnsweringId=r),t}getFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,facetValue:t,facetTitle:`${r}_${e}`}}getFacetClearAllMetadata(e){let t=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:t,facetTitle:`${t}_${e}`}}getFacetUpdateSortMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,criteria:t,facetTitle:`${r}_${e}`}}getRangeBreadcrumbFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,facetRangeEnd:t.end,facetRangeEndInclusive:t.endInclusive,facetRangeStart:t.start,facetTitle:`${r}_${e}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??Bu()}}getStaticFilterToggleMetadata(e,t){return{...this.getBaseMetadata(),staticFilterId:e,staticFilterValue:t}}getStaticFilterClearAllMetadata(e){return{...this.getBaseMetadata(),staticFilterId:e}}getUndoTriggerQueryMetadata(e){return{...this.getBaseMetadata(),undoneQuery:e}}getCategoryBreadcrumbFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),categoryFacetId:e,categoryFacetField:r,categoryFacetPath:t,categoryFacetTitle:`${r}_${e}`}}getOmniboxAnalyticsMetadata(e,t){let r=this.state.querySuggest&&this.state.querySuggest[e],n=r.completions.map((e=>e.expression)),i=r.partialQueries.length-1,o=r.partialQueries[i]||"",a=r.responseId;return{...this.getBaseMetadata(),suggestionRanking:n.indexOf(t),partialQuery:o,partialQueries:r.partialQueries.length>0?r.partialQueries:"",suggestions:n.length>0?n:"",querySuggestResponseId:a}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(e){return{...this.getBaseMetadata(),...e}}getGeneratedAnswerMetadata(){let e=this.getState(),t={};return e.generatedAnswer?.isVisible!==void 0&&(t.showGeneratedAnswer=e.generatedAnswer.isVisible),t}get resultURIs(){return this.results?.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||Qu().q}get responseTime(){return this.state.search?.duration||oe().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||oe().response.totalCountFiltered}};Ku.fallbackPipelineName="default";var Gu=Ku,Yu=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new Gu(t)})=>{let o=t(),a=o.configuration.accessToken,u=o.configuration.analytics.apiBaseUrl,s=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,l=new Aa({token:a,endpoint:u,runtimeEnvironment:s,preprocessRequest:Ua(e,n),beforeSendHooks:[_a(e,r),(t,r)=>(e.info({...r,type:t,endpoint:u,token:a},"Analytics request"),r)]},i);return c||l.disable(),l};function Ju(e){return Object.assign(e,{instantlyCallable:!0})}function Wu(e,t){let r=t=>Ju(vn(e,t)),n=r((async(e,{getState:r,extra:n})=>{let{analyticsClientMiddleware:i,preprocessRequest:o,logger:a}=n;return await(await t({getState:r,analyticsClientMiddleware:i,preprocessRequest:o,logger:a})).log({state:r(),extra:n})}));return Object.assign(n,{prepare:async({getState:e,analyticsClientMiddleware:n,preprocessRequest:i,logger:o})=>{let{description:a,log:u}=await t({getState:e,analyticsClientMiddleware:n,preprocessRequest:i,logger:o});return{description:a,action:r((async(e,{getState:t,extra:r})=>await u({state:t(),extra:r})))}}}),n}var Zu=(e,t,r)=>{function n(...n){let i=n.length===1?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r};return ts(i)}return n},Xu=e=>e.configuration.analytics.analyticsMode==="legacy",es=e=>e.configuration.analytics.analyticsMode==="next",ts=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:i,analyticsConfigurator:o,providerClass:a})=>(r??(r=e=>new a(e)),Wu(e,(async({getState:e,analyticsClientMiddleware:a,preprocessRequest:u,logger:s})=>{let c=[],l={log:async({state:e})=>{for(let t of c)await t(e)}},d=e(),f=o({getState:e,logger:s,analyticsClientMiddleware:a,preprocessRequest:u,provider:r(e)}),h=await t(f,e());l.description=h?.description,c.push((async e=>{Xu(e)&&await rs(h,r,e,s,f.coveoAnalyticsClient)}));let{emit:p}=pu(d);return c.push((async e=>{if(es(e)&&i&&n){let t=n(e);await os(p,i,t)}})),l})));async function rs(e,t,r,n,i){t((()=>r));let o=await(e?.log({searchUID:t((()=>r)).getSearchUID()}));n.info({client:i,response:o},"Analytics response")}var ns=Zu(Yu,(e=>e),Gu);var is={urihash:new J,sourcetype:new J,permanentid:new J};({uniqueId:Pn,raw:new Z({values:is}),title:Pn,uri:Pn,clickUri:Pn,rankingModifier:new J({required:!1,emptyAllowed:!0})});async function os(e,t,r){await e(t,r)}var as=()=>ns("analytics/productRecommendations/load",(e=>e.makeRecommendationInterfaceLoad()),(e=>new Qa(e)));function us(e){return e&&"childResults"in e&&"totalNumberOfChildResults"in e}var ss=Mr("productrecommendations/setId",(e=>Ln(e,{id:Pn}))),cs=Mr("productrecommendations/setSku",(e=>Ln(e,{skus:new ee({required:!0,min:1,each:$n})}))),ls=Mr("productrecommendations/setBrand",(e=>Ln(e,{brand:new J({required:!0,emptyAllowed:!0})}))),ds=Mr("productrecommendations/setCategory",(e=>Ln(e,{category:new J({required:!0,emptyAllowed:!0})}))),fs=Mr("productrecommendations/setAdditionalFields",(e=>Ln(e,{additionalFields:new ee({required:!0,each:$n})}))),hs=Mr("productrecommendations/setMaxNumberOfRecommendations",(e=>Ln(e,{number:new L({required:!0,max:50,min:1})}))),ps=vn("productRecommendations/get",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let i=t(),o=(new Date).getTime(),a=await n.productRecommendations(await vs(i)),u=(new Date).getTime()-o;if(Be(a))return r(a.error);let s=i.productRecommendations.additionalFields||[];return{recommendations:a.success.results.map((e=>ys(e,{additionalFields:s}))),analyticsAction:as(),searchUid:a.success.searchUid,duration:u}})),ys=(e,{additionalFields:t})=>{let r=e.raw.ec_price,n=e.raw.ec_promo_price,i=e.raw.ec_in_stock,o={documentUri:e.uri,documentUriHash:e.raw.urihash,permanentid:e.raw.permanentid,clickUri:e.clickUri,ec_name:e.raw.ec_name,ec_brand:e.raw.ec_brand,ec_category:e.raw.ec_category,ec_item_group_id:e.raw.ec_item_group_id,ec_price:r,ec_shortdesc:e.raw.ec_shortdesc,ec_thumbnails:e.raw.ec_thumbnails,ec_images:e.raw.ec_images,ec_promo_price:n===void 0||r!==void 0&&n>=r?void 0:n,ec_in_stock:i===void 0?void 0:i.toLowerCase()==="yes"||i.toLowerCase()==="true",ec_rating:e.raw.ec_rating,additionalFields:t.reduce(((t,r)=>({...t,[r]:e.raw[r]})),{}),childResults:[],totalNumberOfChildResults:0};return us(e)&&(o.childResults=e.childResults.map((e=>ys(e,{additionalFields:t}))),o.totalNumberOfChildResults=e.totalNumberOfChildResults),o},vs=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await Ea(e.configuration.analytics)},recommendation:e.productRecommendations.id,numberOfResults:e.productRecommendations.maxNumberOfRecommendations,fieldsToInclude:[...Ma,...e.productRecommendations.additionalFields||[]],mlParameters:{...e.productRecommendations.skus&&e.productRecommendations.skus.length>0&&{itemIds:e.productRecommendations.skus},...e.productRecommendations.filter.brand&&{brandFilter:e.productRecommendations.filter.brand},...e.productRecommendations.filter.category&&{categoryFilter:e.productRecommendations.filter.category}},actionsHistory:e.configuration.analytics.enabled?xa.getHistory():[],...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.searchHub&&{searchHub:e.searchHub}});var ms=Zr(Pa(),(e=>{e.addCase(ss,((e,t)=>{e.id=t.payload.id})).addCase(cs,((e,t)=>{e.skus=t.payload.skus})).addCase(ls,((e,t)=>{e.filter.brand=t.payload.brand})).addCase(ds,((e,t)=>{e.filter.category=t.payload.category})).addCase(hs,((e,t)=>{e.maxNumberOfRecommendations=t.payload.number})).addCase(fs,((e,t)=>{e.additionalFields=t.payload.additionalFields})).addCase(ps.rejected,((e,t)=>{e.error=t.payload?t.payload:null,e.isLoading=!1})).addCase(ps.fulfilled,((e,t)=>{e.error=null,e.searchUid=t.payload.searchUid,e.recommendations=t.payload.recommendations,e.isLoading=!1})).addCase(ps.pending,(e=>{e.isLoading=!0}))}));var gs=Mr("searchHub/set",(e=>Ln(e,new J({required:!0,emptyAllowed:!0}))));var ws=Mr("history/undo"),bs=Mr("history/redo");Mr("history/snapshot");vn("history/back",(async(e,{dispatch:t})=>{t(ws()),await t(Ss())}));vn("history/forward",(async(e,{dispatch:t})=>{t(bs()),await t(Ss())}));var Ss=vn("history/change",(async(e,{getState:t})=>t().history.present));var ks=Zr($a(),(e=>{e.addCase(gs,((e,t)=>t.payload)).addCase(Ss.fulfilled,((e,t)=>t.payload?.searchHub??e)).addCase(Wn,((e,t)=>t.payload.searchHub||e))}));async function Os(e,t){let r=e.getReader(),n;for(;!(n=await r.read()).done;)t(n.value)}function Is(e){let t,r,n,i=!1;return function(o){t===void 0?(t=o,r=0,n=-1):t=Ts(t,o);let a=t.length,u=0;for(;r<a;){i&&(t[r]===10&&(u=++r),i=!1);let o=-1;for(;r<a&&o===-1;++r)switch(t[r]){case 58:n===-1&&(n=r-u);break;case 13:i=!0;case 10:o=r;break}if(o===-1)break;e(t.subarray(u,o),n),u=r,n=-1}u===a?t=void 0:u!==0&&(t=t.subarray(u),r-=u)}}function js(e,t,r){let n=As(),i=new TextDecoder;return function(o,a){if(o.length===0)r?.(n),n=As();else if(a>0){let r=i.decode(o.subarray(0,a)),u=a+(o[a+1]===32?2:1),s=i.decode(o.subarray(u));switch(r){case"data":n.data=n.data?n.data+`\n`+s:s;break;case"event":n.event=s;break;case"id":e(n.id=s);break;case"retry":let r=parseInt(s,10);isNaN(r)||t(n.retry=r);break}}}}function Ts(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function As(){return{data:"",event:"",id:"",retry:void 0}}var Rs=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},qs="text/event-stream",Cs=1e3,Ds="last-event-id";function Es(){}function xs(e,t){var{signal:r,headers:n,onopen:i,onmessage:o,onclose:a,onerror:u,openWhenHidden:s,fetch:c}=t,l=Rs(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise(((t,d)=>{let f=Object.assign({},n);f.accept||(f.accept=qs);let h;function p(){h?.abort(),document.hidden||b()}!s&&Es()&&document.addEventListener("visibilitychange",p);let y=Cs,v=0;function m(){Es()&&document.removeEventListener("visibilitychange",p),clearTimeout(v),h?.abort()}r?.addEventListener("abort",(()=>{m(),t()}));let g=c??g,w=i??Us;async function b(){var r;h=typeof AbortController>"u"?null:new AbortController;try{let r=await g(e,Object.assign(Object.assign({},l),{headers:f,signal:h?.signal}));await w(r),await Os(r.body,Is(js((e=>{e?f[Ds]=e:delete f[Ds]}),(e=>{y=e}),o))),a?.(),m(),t()}catch(e){if(!h?.signal.aborted)try{let t=(r=u?.(e))!==null&&r!==void 0?r:y;clearTimeout(v),v=setTimeout(b,t)}catch(e){m(),d(e)}}}b()}))}function Us(e){let t=e.headers.get("content-type");if(!t?.startsWith(qs))throw new Error(`Expected content-type to be ${qs}, Actual: ${t}`)}Rr(((e,t)=>e.generatedAnswer?.citations?.find((e=>e.id===t))),(e=>e));Rr((e=>e.search?.response?.extendedResults?.generativeQuestionAnsweringId),(e=>e));Rr((e=>e.generatedAnswer?.fieldsToIncludeInCitations),(e=>e));Rr((e=>e.pipeline),(e=>e));Rr((e=>e.query),(e=>e));Rr((e=>e.searchHub),(e=>e));function _s(e){return{status:e,isUninitialized:e==="uninitialized",isLoading:e==="pending",isSuccess:e==="fulfilled",isError:e==="rejected"}}function Ms(e){return new RegExp("(^|:)//").test(e)}var Ps=e=>e.replace(/\/$/,""),$s=e=>e.replace(/^\//,"");function Fs(e,t){if(!e)return t;if(!t)return e;if(Ms(t))return t;let r=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=Ps(e),t=$s(t),`${e}${r}${t}`}var Ns=e=>[].concat(...e);function Qs(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}function zs(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}var Ls=ut;function Hs(e,t){if(e===t||!(Ls(e)&&Ls(t)||Array.isArray(e)&&Array.isArray(t)))return t;let r=Object.keys(t),n=Object.keys(e),i=r.length===n.length,o=Array.isArray(t)?[]:{};for(let n of r)o[n]=Hs(e[n],t[n]),i&&(i=e[n]===o[n]);return i?e:o}var Vs=(...e)=>fetch(...e),Bs=e=>e.status>=200&&e.status<=299,Ks=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function Gs(e){if(!ut(e))return e;let t={...e};for(let[e,r]of Object.entries(t))r===void 0&&delete t[e];return t}function Ys({baseUrl:e,prepareHeaders:t=(e=>e),fetchFn:r=Vs,paramsSerializer:n,isJsonContentType:i=Ks,jsonContentType:o="application/json",jsonReplacer:a,timeout:u,responseHandler:s,validateStatus:c,...l}={}){return typeof fetch>"u"&&r===Vs&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(f,h)=>{let{signal:p,getState:y,extra:v,endpoint:m,forced:g,type:w}=h,b,{url:S,headers:k=new Headers(l.headers),params:O=void 0,responseHandler:I=s??"json",validateStatus:j=c??Bs,timeout:T=u,...A}=typeof f=="string"?{url:f}:f,R={...l,signal:p,...A};k=new Headers(Gs(k)),R.headers=await t(k,{getState:y,extra:v,endpoint:m,forced:g,type:w})||k;let q=e=>typeof e=="object"&&(ut(e)||Array.isArray(e)||typeof e.toJSON=="function");if(!R.headers.has("content-type")&&q(R.body)&&R.headers.set("content-type",o),q(R.body)&&i(R.headers)&&(R.body=JSON.stringify(R.body,a)),O){let e=~S.indexOf("?")?"&":"?",t=n?n(O):new URLSearchParams(Gs(O));S+=e+t}S=Fs(e,S);let C=new Request(S,R);b={request:new Request(S,R)};let D,E=!1,x=T&&setTimeout((()=>{E=!0,h.abort()}),T);try{D=await r(C)}catch(e){return{error:{status:E?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(e)},meta:b}}finally{x&&clearTimeout(x)}let U=D.clone();b.response=U;let _,M="";try{let e;if(await Promise.all([d(D,I).then((e=>_=e),(t=>e=t)),U.text().then((e=>M=e),(()=>{}))]),e)throw e}catch(e){return{error:{status:"PARSING_ERROR",originalStatus:D.status,data:M,error:String(e)},meta:b}}return j(D,_)?{data:_,meta:b}:{error:{status:D.status,data:_},meta:b}};async function d(e,t){if(typeof t=="function")return t(e);if(t==="content-type"&&(t=i(e.headers)?"json":"text"),t==="json"){let t=await e.text();return t.length?JSON.parse(t):null}return e.text()}}var Js=class{constructor(e,t=void 0){this.value=e,this.meta=t}};async function Ws(e=0,t=5){let r=Math.min(e,t),n=~~((Math.random()+.4)*(300<<r));await new Promise((e=>setTimeout((t=>e(t)),n)))}function Zs(e){throw Object.assign(new Js({error:e}),{throwImmediately:!0})}var Xs={},ec=(e,t)=>async(r,n,i)=>{let o=[5,(t||Xs).maxRetries,(i||Xs).maxRetries].filter((e=>e!==void 0)),[a]=o.slice(-1),u={maxRetries:a,backoff:Ws,retryCondition:(e,t,{attempt:r})=>r<=a,...t,...i},s=0;for(;;)try{let t=await e(r,n,i);if(t.error)throw new Js(t);return t}catch(e){if(s++,e.throwImmediately){if(e instanceof Js)return e.value;throw e}if(e instanceof Js&&!u.retryCondition(e.value.error,r,{attempt:s,baseQueryApi:n,extraOptions:i}))return e.value;await u.backoff(s,u.maxRetries)}},tc=Object.assign(ec,{fail:Zs}),rc=Mr("__rtkq/focused"),nc=Mr("__rtkq/unfocused"),ic=Mr("__rtkq/online"),oc=Mr("__rtkq/offline");function ac(e){return e.type==="query"}function uc(e){return e.type==="mutation"}function sc(e,t,r,n,i,o){return cc(e)?e(t,r,n,i).map(lc).map(o):Array.isArray(e)?e.map(lc).map(o):[]}function cc(e){return typeof e=="function"}function lc(e){return typeof e=="string"?{type:e}:e}function dc(e){return e!=null}function fc(e){let t=0;for(let r in e)t++;return t}function hc(e,t){return e.catch(t)}var pc=Symbol("forceQueryFn"),yc=e=>typeof e[pc]=="function";function vc({serializeQueryArgs:e,queryThunk:t,mutationThunk:r,api:n,context:i}){let o=new Map,a=new Map,{unsubscribeQueryResult:u,removeMutationResult:s,updateSubscriptionOptions:c}=n.internalActions;return{buildInitiateQuery:p,buildInitiateMutation:y,getRunningQueryThunk:l,getRunningMutationThunk:d,getRunningQueriesThunk:f,getRunningMutationsThunk:h};function l(t,r){return n=>{let a=i.endpointDefinitions[t],u=e({queryArgs:r,endpointDefinition:a,endpointName:t});return o.get(n)?.[u]}}function d(e,t){return e=>a.get(e)?.[t]}function f(){return e=>Object.values(o.get(e)||{}).filter(dc)}function h(){return e=>Object.values(a.get(e)||{}).filter(dc)}function p(r,i){let a=(s,{subscribe:l=!0,forceRefetch:d,subscriptionOptions:f,[pc]:h,...p}={})=>(y,v)=>{let m=e({queryArgs:s,endpointDefinition:i,endpointName:r}),g=t({...p,type:"query",subscribe:l,forceRefetch:d,subscriptionOptions:f,endpointName:r,originalArgs:s,queryCacheKey:m,[pc]:h}),w=n.endpoints[r].select(s),b=y(g),S=w(v());let{requestId:k,abort:O}=b,I=S.requestId!==k,j=o.get(y)?.[m],T=()=>w(v()),A=Object.assign(h?b.then(T):I&&!j?Promise.resolve(S):Promise.all([j,b]).then(T),{arg:s,requestId:k,subscriptionOptions:f,queryCacheKey:m,abort:O,async unwrap(){let e=await A;if(e.isError)throw e.error;return e.data},refetch:()=>y(a(s,{subscribe:!1,forceRefetch:!0})),unsubscribe(){l&&y(u({queryCacheKey:m,requestId:k}))},updateSubscriptionOptions(e){A.subscriptionOptions=e,y(c({endpointName:r,requestId:k,queryCacheKey:m,options:e}))}});if(!j&&!I&&!h){let e=o.get(y)||{};e[m]=A,o.set(y,e),A.then((()=>{delete e[m],fc(e)||o.delete(y)}))}return A};return a}function y(e){return(t,{track:n=!0,fixedCacheKey:i}={})=>(o,u)=>{let c=r({type:"mutation",endpointName:e,originalArgs:t,track:n,fixedCacheKey:i}),l=o(c);let{requestId:d,abort:f,unwrap:h}=l,p=hc(l.unwrap().then((e=>({data:e}))),(e=>({error:e}))),y=()=>{o(s({requestId:d,fixedCacheKey:i}))},v=Object.assign(p,{arg:l.arg,requestId:d,abort:f,unwrap:h,reset:y}),m=a.get(o)||{};return a.set(o,m),m[d]=v,v.then((()=>{delete m[d],fc(m)||a.delete(o)})),i&&(m[i]=v,v.then((()=>{m[i]===v&&(delete m[i],fc(m)||a.delete(o))}))),v}}}function mc(e){return e}function gc({reducerPath:e,baseQuery:t,context:{endpointDefinitions:r},serializeQueryArgs:n,api:i,assertTagType:o}){let a=(e,t,a,u)=>(s,c)=>{let l=r[e],d=n({queryArgs:t,endpointDefinition:l,endpointName:e});if(s(i.internalActions.queryResultPatched({queryCacheKey:d,patches:a})),!u)return;let f=i.endpoints[e].select(t)(c()),h=sc(l.providesTags,f.data,void 0,t,{},o);s(i.internalActions.updateProvidedBy({queryCacheKey:d,providedTags:h}))},u=(e,t,r,n=!0)=>(o,a)=>{let u=i.endpoints[e].select(t)(a()),s={patches:[],inversePatches:[],undo:()=>o(i.util.patchQueryData(e,t,s.inversePatches,n))};if(u.status==="uninitialized")return s;let c;if("data"in u)if(bt(u.data)){let[e,t,n]=hr(u.data,r);s.patches.push(...t),s.inversePatches.push(...n),c=e}else c=r(u.data),s.patches.push({op:"replace",path:[],value:c}),s.inversePatches.push({op:"replace",path:[],value:u.data});return s.patches.length===0||o(i.util.patchQueryData(e,t,s.patches,n)),s},s=(e,t,r)=>n=>n(i.endpoints[e].initiate(t,{subscribe:!1,forceRefetch:!0,[pc]:()=>({data:r})})),c=async(e,{signal:n,abort:i,rejectWithValue:o,fulfillWithValue:a,dispatch:u,getState:s,extra:c})=>{let d=r[e.endpointName];try{let r=mc,o,f={signal:n,abort:i,dispatch:u,getState:s,extra:c,endpoint:e.endpointName,type:e.type,forced:e.type==="query"?l(e,s()):void 0},h=e.type==="query"?e[pc]:void 0;if(h?o=h():d.query?(o=await t(d.query(e.originalArgs),f,d.extraOptions),d.transformResponse&&(r=d.transformResponse)):o=await d.queryFn(e.originalArgs,f,d.extraOptions,(e=>t(e,f,d.extraOptions))),o.error)throw new Js(o.error,o.meta);return a(await r(o.data,o.meta,e.originalArgs),{fulfilledTimeStamp:Date.now(),baseQueryMeta:o.meta,[zr]:!0})}catch(t){let r=t;if(r instanceof Js){let t=mc;d.query&&d.transformErrorResponse&&(t=d.transformErrorResponse);try{return o(await t(r.value,r.meta,e.originalArgs),{baseQueryMeta:r.meta,[zr]:!0})}catch(e){r=e}}throw console.error(r),r}};function l(t,r){let n=r[e]?.queries?.[t.queryCacheKey],i=r[e]?.config.refetchOnMountOrArgChange,o=n?.fulfilledTimeStamp,a=t.forceRefetch??(t.subscribe&&i);return a?a===!0||(Number(new Date)-Number(o))/1e3>=a:!1}let d=vn(`${e}/executeQuery`,c,{getPendingMeta(){return{startedTimeStamp:Date.now(),[zr]:!0}},condition(t,{getState:n}){let i=n(),o=i[e]?.queries?.[t.queryCacheKey],a=o?.fulfilledTimeStamp,u=t.originalArgs,s=o?.originalArgs,c=r[t.endpointName];return yc(t)?!0:o?.status==="pending"?!1:l(t,i)||ac(c)&&c?.forceRefetch?.({currentArg:u,previousArg:s,endpointState:o,state:i})?!0:!a},dispatchConditionRejection:!0}),f=vn(`${e}/executeMutation`,c,{getPendingMeta(){return{startedTimeStamp:Date.now(),[zr]:!0}}}),h=e=>"force"in e,p=e=>"ifOlderThan"in e,y=(e,t,r)=>(n,o)=>{let a=h(r)&&r.force,u=p(r)&&r.ifOlderThan,s=(r=!0)=>{let n={forceRefetch:r,isPrefetch:!0};return i.endpoints[e].initiate(t,n)},c=i.endpoints[e].select(t)(o());if(a)n(s());else if(u){let e=c?.fulfilledTimeStamp;if(!e){n(s());return}(Number(new Date)-Number(new Date(e)))/1e3>=u&&n(s())}else n(s(!1))};function v(e){return t=>t?.meta?.arg?.endpointName===e}function m(e,t){return{matchPending:nn(un(e),v(t)),matchFulfilled:nn(ln(e),v(t)),matchRejected:nn(sn(e),v(t))}}return{queryThunk:d,mutationThunk:f,prefetch:y,updateQueryData:u,upsertQueryData:s,patchQueryData:a,buildMatchThunkActions:m}}function wc(e,t,r,n){return sc(r[e.meta.arg.endpointName][t],ln(e)?e.payload:void 0,cn(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,n)}function bc(e,t,r){let n=e[t];n&&r(n)}function Sc(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function kc(e,t,r){let n=e[Sc(t)];n&&r(n)}var Oc={};function Ic({reducerPath:e,queryThunk:t,mutationThunk:r,context:{endpointDefinitions:n,apiUid:i,extractRehydrationInfo:o,hasRehydrationInfo:a},assertTagType:u,config:s}){let c=Mr(`${e}/resetApiState`),l=On({name:`${e}/queries`,initialState:Oc,reducers:{removeQueryResult:{reducer(e,{payload:{queryCacheKey:t}}){delete e[t]},prepare:Lr()},queryResultPatched:{reducer(e,{payload:{queryCacheKey:t,patches:r}}){bc(e,t,(e=>{e.data=pr(e.data,r.concat())}))},prepare:Lr()}},extraReducers(e){e.addCase(t.pending,((e,{meta:t,meta:{arg:r}})=>{var n;let i=yc(r);e[n=r.queryCacheKey]??(e[n]={status:"uninitialized",endpointName:r.endpointName}),bc(e,r.queryCacheKey,(e=>{e.status="pending",e.requestId=i&&e.requestId?e.requestId:t.requestId,r.originalArgs!==void 0&&(e.originalArgs=r.originalArgs),e.startedTimeStamp=t.startedTimeStamp}))})).addCase(t.fulfilled,((e,{meta:t,payload:r})=>{bc(e,t.arg.queryCacheKey,(e=>{if(e.requestId!==t.requestId&&!yc(t.arg))return;let{merge:i}=n[t.arg.endpointName];if(e.status="fulfilled",i)if(e.data!==void 0){let{fulfilledTimeStamp:n,arg:o,baseQueryMeta:a,requestId:u}=t,s=fr(e.data,(e=>i(e,r,{arg:o.originalArgs,baseQueryMeta:a,fulfilledTimeStamp:n,requestId:u})));e.data=s}else e.data=r;else e.data=n[t.arg.endpointName].structuralSharing??!0?Hs(wt(e.data)?Ot(e.data):e.data,r):r;delete e.error,e.fulfilledTimeStamp=t.fulfilledTimeStamp}))})).addCase(t.rejected,((e,{meta:{condition:t,arg:r,requestId:n},error:i,payload:o})=>{bc(e,r.queryCacheKey,(e=>{if(!t){if(e.requestId!==n)return;e.status="rejected",e.error=o??i}}))})).addMatcher(a,((e,t)=>{let{queries:r}=o(t);for(let[t,n]of Object.entries(r))(n?.status==="fulfilled"||n?.status==="rejected")&&(e[t]=n)}))}}),d=On({name:`${e}/mutations`,initialState:Oc,reducers:{removeMutationResult:{reducer(e,{payload:t}){let r=Sc(t);r in e&&delete e[r]},prepare:Lr()}},extraReducers(e){e.addCase(r.pending,((e,{meta:t,meta:{requestId:r,arg:n,startedTimeStamp:i}})=>{n.track&&(e[Sc(t)]={requestId:r,status:"pending",endpointName:n.endpointName,startedTimeStamp:i})})).addCase(r.fulfilled,((e,{payload:t,meta:r})=>{r.arg.track&&kc(e,r,(e=>{e.requestId===r.requestId&&(e.status="fulfilled",e.data=t,e.fulfilledTimeStamp=r.fulfilledTimeStamp)}))})).addCase(r.rejected,((e,{payload:t,error:r,meta:n})=>{n.arg.track&&kc(e,n,(e=>{e.requestId===n.requestId&&(e.status="rejected",e.error=t??r)}))})).addMatcher(a,((e,t)=>{let{mutations:r}=o(t);for(let[t,n]of Object.entries(r))(n?.status==="fulfilled"||n?.status==="rejected")&&t!==n?.requestId&&(e[t]=n)}))}}),f=On({name:`${e}/invalidation`,initialState:Oc,reducers:{updateProvidedBy:{reducer(e,t){var r,n;let{queryCacheKey:i,providedTags:o}=t.payload;for(let t of Object.values(e))for(let e of Object.values(t)){let t=e.indexOf(i);t!==-1&&e.splice(t,1)}for(let{type:t,id:a}of o){let o=(r=e[t]??(e[t]={}))[n=a||"__internal_without_id"]??(r[n]=[]);o.includes(i)||o.push(i)}},prepare:Lr()}},extraReducers(e){e.addCase(l.actions.removeQueryResult,((e,{payload:{queryCacheKey:t}})=>{for(let r of Object.values(e))for(let e of Object.values(r)){let r=e.indexOf(t);r!==-1&&e.splice(r,1)}})).addMatcher(a,((e,t)=>{var r,n;let{provided:i}=o(t);for(let[t,o]of Object.entries(i))for(let[i,a]of Object.entries(o)){let o=(r=e[t]??(e[t]={}))[n=i||"__internal_without_id"]??(r[n]=[]);for(let e of a)o.includes(e)||o.push(e)}})).addMatcher(rn(ln(t),cn(t)),((e,t)=>{let r=wc(t,"providesTags",n,u),{queryCacheKey:i}=t.meta.arg;f.caseReducers.updateProvidedBy(e,f.actions.updateProvidedBy({queryCacheKey:i,providedTags:r}))}))}}),h=On({name:`${e}/subscriptions`,initialState:Oc,reducers:{updateSubscriptionOptions(e,t){},unsubscribeQueryResult(e,t){},internal_getRTKQSubscriptions(){}}}),p=On({name:`${e}/internalSubscriptions`,initialState:Oc,reducers:{subscriptionsUpdated:{reducer(e,t){return pr(e,t.payload)},prepare:Lr()}}}),y=On({name:`${e}/config`,initialState:{online:Qs(),focused:zs(),middlewareRegistered:!1,...s},reducers:{middlewareRegistered(e,{payload:t}){e.middlewareRegistered=e.middlewareRegistered==="conflict"||i!==t?"conflict":!0}},extraReducers:e=>{e.addCase(ic,(e=>{e.online=!0})).addCase(oc,(e=>{e.online=!1})).addCase(rc,(e=>{e.focused=!0})).addCase(nc,(e=>{e.focused=!1})).addMatcher(a,(e=>({...e})))}}),v=lt({queries:l.reducer,mutations:d.reducer,provided:f.reducer,subscriptions:p.reducer,config:y.reducer}),m=(e,t)=>v(c.match(t)?void 0:e,t),g={...y.actions,...l.actions,...h.actions,...p.actions,...d.actions,...f.actions,resetApiState:c};return{reducer:m,actions:g}}var jc=Symbol.for("RTKQ/skipToken"),Tc={status:"uninitialized"},Ac=fr(Tc,(()=>{})),Rc=fr(Tc,(()=>{}));function qc({serializeQueryArgs:e,reducerPath:t,createSelector:r}){let n=e=>Ac,i=e=>Rc;return{buildQuerySelector:u,buildMutationSelector:s,selectInvalidatedBy:c,selectCachedArgsForQuery:l};function o(e){return{...e,..._s(e.status)}}function a(e){return e[t]}function u(t,i){return u=>{let s=e({queryArgs:u,endpointDefinition:i,endpointName:t});return r(u===jc?n:e=>a(e)?.queries?.[s]??Ac,o)}}function s(){return e=>{let t;return typeof e=="object"?t=Sc(e)??jc:t=e,r(t===jc?i:e=>a(e)?.mutations?.[t]??Rc,o)}}function c(e,r){let n=e[t],i=new Set;for(let e of r.map(lc)){let t=n.provided[e.type];if(!t)continue;let r=(e.id!==void 0?t[e.id]:Ns(Object.values(t)))??[];for(let e of r)i.add(e)}return Ns(Array.from(i.values()).map((e=>{let t=n.queries[e];return t?[{queryCacheKey:e,endpointName:t.endpointName,originalArgs:t.originalArgs}]:[]})))}function l(e,r){return Object.values(e[t].queries).filter((e=>e?.endpointName===r&&e.status!=="uninitialized")).map((e=>e.originalArgs))}}var Cc=WeakMap?new WeakMap:void 0,Dc=({endpointName:e,queryArgs:t})=>{let r="",n=Cc?.get(t);if(typeof n=="string")r=n;else{let e=JSON.stringify(t,((e,t)=>(t=typeof t=="bigint"?{$bigint:t.toString()}:t,t=ut(t)?Object.keys(t).sort().reduce(((e,r)=>(e[r]=t[r],e)),{}):t,t)));ut(t)&&Cc?.set(t,e),r=e}return`${e}(${r})`};function Ec(...e){return function(t){let r=Tr((e=>t.extractRehydrationInfo?.(e,{reducerPath:t.reducerPath??"api"}))),n={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...t,extractRehydrationInfo:r,serializeQueryArgs(e){let r=Dc;if("serializeQueryArgs"in e.endpointDefinition){let t=e.endpointDefinition.serializeQueryArgs;r=e=>{let r=t(e);return typeof r=="string"?r:Dc({...e,queryArgs:r})}}else t.serializeQueryArgs&&(r=t.serializeQueryArgs);return r(e)},tagTypes:[...t.tagTypes||[]]},i={endpointDefinitions:{},batch(e){e()},apiUid:en(),extractRehydrationInfo:r,hasRehydrationInfo:Tr((e=>r(e)!=null))},o={injectEndpoints:u,enhanceEndpoints({addTagTypes:e,endpoints:t}){if(e)for(let t of e)n.tagTypes.includes(t)||n.tagTypes.push(t);if(t)for(let[e,r]of Object.entries(t))typeof r=="function"?r(i.endpointDefinitions[e]):Object.assign(i.endpointDefinitions[e]||{},r);return o}},a=e.map((e=>e.init(o,n,i)));function u(e){let t=e.endpoints({query:e=>({...e,type:"query"}),mutation:e=>({...e,type:"mutation"})});for(let[r,n]of Object.entries(t)){if(e.overrideExisting!==!0&&r in i.endpointDefinitions){if(e.overrideExisting==="throw")throw new Error(Mn(39));continue}i.endpointDefinitions[r]=n;for(let e of a)e.injectEndpoint(r,n)}return o}return o.injectEndpoints({endpoints:t.endpoints})}}function xc(e){for(let t in e)return!1;return!0}var Uc=2147483647/1e3-1,_c=({reducerPath:e,api:t,queryThunk:r,context:n,internalState:i})=>{let{removeQueryResult:o,unsubscribeQueryResult:a}=t.internalActions,u=rn(a.match,r.fulfilled,r.rejected);function s(e){let t=i.currentSubscriptions[e];return!!t&&!xc(t)}let c={},l=(r,i,o)=>{if(u(r)){let t=i.getState()[e],{queryCacheKey:n}=a.match(r)?r.payload:r.meta.arg;d(n,t.queries[n]?.endpointName,i,t.config)}if(t.util.resetApiState.match(r))for(let[e,t]of Object.entries(c))t&&clearTimeout(t),delete c[e];if(n.hasRehydrationInfo(r)){let t=i.getState()[e],{queries:o}=n.extractRehydrationInfo(r);for(let[e,r]of Object.entries(o))d(e,r?.endpointName,i,t.config)}};function d(e,t,r,i){let a=n.endpointDefinitions[t]?.keepUnusedDataFor??i.keepUnusedDataFor;if(a===1/0)return;let u=Math.max(0,Math.min(a,Uc));if(!s(e)){let t=c[e];t&&clearTimeout(t),c[e]=setTimeout((()=>{s(e)||r.dispatch(o({queryCacheKey:e})),delete c[e]}),u*1e3)}}return l},Mc=({reducerPath:e,context:t,context:{endpointDefinitions:r},mutationThunk:n,queryThunk:i,api:o,assertTagType:a,refetchQuery:u,internalState:s})=>{let{removeQueryResult:c}=o.internalActions,l=rn(ln(n),cn(n)),d=rn(ln(n,i),sn(n,i)),f=[],h=(e,t)=>{l(e)?y(wc(e,"invalidatesTags",r,a),t):d(e)?y([],t):o.util.invalidateTags.match(e)&&y(sc(e.payload,void 0,void 0,void 0,void 0,a),t)};function p(e){for(let t in e.queries)if(e.queries[t]?.status==="pending")return!0;for(let t in e.mutations)if(e.mutations[t]?.status==="pending")return!0;return!1}function y(r,n){let i=n.getState(),a=i[e];if(f.push(...r),a.config.invalidationBehavior==="delayed"&&p(a))return;let l=f;if(f=[],l.length===0)return;let d=o.util.selectInvalidatedBy(i,l);t.batch((()=>{let e=Array.from(d.values());for(let{queryCacheKey:t}of e){let e=a.queries[t],r=s.currentSubscriptions[t]??{};e&&(fc(r)===0?n.dispatch(c({queryCacheKey:t})):e.status!=="uninitialized"&&n.dispatch(u(e,t)))}}))}return h},Pc=({reducerPath:e,queryThunk:t,api:r,refetchQuery:n,internalState:i})=>{let o={},a=(e,n)=>{(r.internalActions.updateSubscriptionOptions.match(e)||r.internalActions.unsubscribeQueryResult.match(e))&&s(e.payload,n),(t.pending.match(e)||t.rejected.match(e)&&e.meta.condition)&&s(e.meta.arg,n),(t.fulfilled.match(e)||t.rejected.match(e)&&!e.meta.condition)&&u(e.meta.arg,n),r.util.resetApiState.match(e)&&l()};function u({queryCacheKey:t},r){let a=r.getState()[e],s=a.queries[t],c=i.currentSubscriptions[t];if(!s||s.status==="uninitialized")return;let{lowestPollingInterval:l,skipPollingIfUnfocused:f}=d(c);if(!Number.isFinite(l))return;let h=o[t];h?.timeout&&(clearTimeout(h.timeout),h.timeout=void 0);let p=Date.now()+l;o[t]={nextPollTimestamp:p,pollingInterval:l,timeout:setTimeout((()=>{(a.config.focused||!f)&&r.dispatch(n(s,t)),u({queryCacheKey:t},r)}),l)}}function s({queryCacheKey:t},r){let n=r.getState()[e].queries[t],a=i.currentSubscriptions[t];if(!n||n.status==="uninitialized")return;let{lowestPollingInterval:s}=d(a);if(!Number.isFinite(s)){c(t);return}let l=o[t],f=Date.now()+s;(!l||f<l.nextPollTimestamp)&&u({queryCacheKey:t},r)}function c(e){let t=o[e];t?.timeout&&clearTimeout(t.timeout),delete o[e]}function l(){for(let e of Object.keys(o))c(e)}function d(e={}){let t=!1,r=Number.POSITIVE_INFINITY;for(let n in e)e[n].pollingInterval&&(r=Math.min(e[n].pollingInterval,r),t=e[n].skipPollingIfUnfocused||t);return{lowestPollingInterval:r,skipPollingIfUnfocused:t}}return a},$c=({reducerPath:e,context:t,api:r,refetchQuery:n,internalState:i})=>{let{removeQueryResult:o}=r.internalActions,a=(e,t)=>{rc.match(e)&&u(t,"refetchOnFocus"),ic.match(e)&&u(t,"refetchOnReconnect")};function u(r,a){let u=r.getState()[e],s=u.queries,c=i.currentSubscriptions;t.batch((()=>{for(let e of Object.keys(c)){let t=s[e],i=c[e];if(!i||!t)continue;(Object.values(i).some((e=>e[a]===!0))||Object.values(i).every((e=>e[a]===void 0))&&u.config[a])&&(fc(i)===0?r.dispatch(o({queryCacheKey:e})):t.status!=="uninitialized"&&r.dispatch(n(t,e)))}}))}return a},Fc=new Error("Promise never resolved before cacheEntryRemoved."),Nc=({api:e,reducerPath:t,context:r,queryThunk:n,mutationThunk:i,internalState:o})=>{let a=dn(n),u=dn(i),s=ln(n,i),c={},l=(r,o,a)=>{let u=d(r);if(n.pending.match(r)){let e=a[t].queries[u],n=o.getState()[t].queries[u];!e&&n&&f(r.meta.arg.endpointName,r.meta.arg.originalArgs,u,o,r.meta.requestId)}else if(i.pending.match(r))o.getState()[t].mutations[u]&&f(r.meta.arg.endpointName,r.meta.arg.originalArgs,u,o,r.meta.requestId);else if(s(r)){let e=c[u];e?.valueResolved&&(e.valueResolved({data:r.payload,meta:r.meta.baseQueryMeta}),delete e.valueResolved)}else if(e.internalActions.removeQueryResult.match(r)||e.internalActions.removeMutationResult.match(r)){let e=c[u];e&&(delete c[u],e.cacheEntryRemoved())}else if(e.util.resetApiState.match(r))for(let[e,t]of Object.entries(c))delete c[e],t.cacheEntryRemoved()};function d(t){return a(t)?t.meta.arg.queryCacheKey:u(t)?t.meta.arg.fixedCacheKey??t.meta.requestId:e.internalActions.removeQueryResult.match(t)?t.payload.queryCacheKey:e.internalActions.removeMutationResult.match(t)?Sc(t.payload):""}function f(t,n,i,o,a){let u=r.endpointDefinitions[t],s=u?.onCacheEntryAdded;if(!s)return;let l={},d=new Promise((e=>{l.cacheEntryRemoved=e})),f=Promise.race([new Promise((e=>{l.valueResolved=e})),d.then((()=>{throw Fc}))]);f.catch((()=>{})),c[i]=l;let h=e.endpoints[t].select(u.type==="query"?n:i),p=o.dispatch(((e,t,r)=>r)),y={...o,getCacheEntry:()=>h(o.getState()),requestId:a,extra:p,updateCachedData:u.type==="query"?r=>o.dispatch(e.util.updateQueryData(t,n,r)):void 0,cacheDataLoaded:f,cacheEntryRemoved:d},v=s(n,y);Promise.resolve(v).catch((e=>{if(e!==Fc)throw e}))}return l},Qc=({api:e,context:t,queryThunk:r,mutationThunk:n})=>{let i=un(r,n),o=sn(r,n),a=ln(r,n),u={};return(r,n)=>{if(i(r)){let{requestId:i,arg:{endpointName:o,originalArgs:a}}=r.meta,s=t.endpointDefinitions[o],c=s?.onQueryStarted;if(c){let t={},r=new Promise(((e,r)=>{t.resolve=e,t.reject=r}));r.catch((()=>{})),u[i]=t;let l=e.endpoints[o].select(s.type==="query"?a:i),d=n.dispatch(((e,t,r)=>r)),f={...n,getCacheEntry:()=>l(n.getState()),requestId:i,extra:d,updateCachedData:s.type==="query"?t=>n.dispatch(e.util.updateQueryData(o,a,t)):void 0,queryFulfilled:r};c(a,f)}}else if(a(r)){let{requestId:e,baseQueryMeta:t}=r.meta;u[e]?.resolve({data:r.payload,meta:t}),delete u[e]}else if(o(r)){let{requestId:e,rejectedWithValue:t,baseQueryMeta:n}=r.meta;u[e]?.reject({error:r.payload??r.error,isUnhandledError:!t,meta:n}),delete u[e]}}},zc=({api:e,context:{apiUid:t},reducerPath:r})=>(r,n)=>{e.util.resetApiState.match(r)&&n.dispatch(e.internalActions.middlewareRegistered(t))},Lc=({api:e,queryThunk:t,internalState:r})=>{let n=`${e.reducerPath}/subscriptions`,i=null,o=null,{updateSubscriptionOptions:a,unsubscribeQueryResult:u}=e.internalActions,s=(r,n)=>{var i,o;if(a.match(n)){let{queryCacheKey:e,requestId:t,options:i}=n.payload;return r?.[e]?.[t]&&(r[e][t]=i),!0}if(u.match(n)){let{queryCacheKey:e,requestId:t}=n.payload;return r[e]&&delete r[e][t],!0}if(e.internalActions.removeQueryResult.match(n))return delete r[n.payload.queryCacheKey],!0;if(t.pending.match(n)){let{meta:{arg:e,requestId:t}}=n,o=r[i=e.queryCacheKey]??(r[i]={});return o[`${t}_running`]={},e.subscribe&&(o[t]=e.subscriptionOptions??o[t]??{}),!0}let s=!1;if(t.fulfilled.match(n)||t.rejected.match(n)){let e=r[n.meta.arg.queryCacheKey]||{},t=`${n.meta.requestId}_running`;s||(s=!!e[t]),delete e[t]}if(t.rejected.match(n)){let{meta:{condition:e,arg:t,requestId:i}}=n;if(e&&t.subscribe){let e=r[o=t.queryCacheKey]??(r[o]={});e[i]=t.subscriptionOptions??e[i]??{},s=!0}}return s},c=()=>r.currentSubscriptions,l={getSubscriptions:c,getSubscriptionCount:e=>{let t=c()[e]??{};return fc(t)},isRequestSubscribed:(e,t)=>!!c()?.[e]?.[t]};return(a,u)=>{if(i||(i=JSON.parse(JSON.stringify(r.currentSubscriptions))),e.util.resetApiState.match(a))return i=r.currentSubscriptions={},o=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(a))return[!1,l];let c=s(r.currentSubscriptions,a),d=!0;if(c){o||(o=setTimeout((()=>{let t=JSON.parse(JSON.stringify(r.currentSubscriptions)),[,n]=hr(i,(()=>t));u.next(e.internalActions.subscriptionsUpdated(n)),i=t,o=null}),500));let s=typeof a.type=="string"&&!!a.type.startsWith(n),c=t.rejected.match(a)&&a.meta.condition&&!!a.meta.arg.subscribe;d=!s&&!c}return[d,!1]}};function Hc(e){let{reducerPath:t,queryThunk:r,api:n,context:i}=e,{apiUid:o}=i,a={invalidateTags:Mr(`${t}/invalidateTags`)},u=e=>e.type.startsWith(`${t}/`),s=[zc,_c,Mc,Pc,Nc,Qc];return{middleware:r=>{let a=!1,l={...e,internalState:{currentSubscriptions:{}},refetchQuery:c,isThisApiSliceAction:u},d=s.map((e=>e(l))),f=Lc(l),h=$c(l);return e=>s=>{if(!ht(s))return e(s);a||(a=!0,r.dispatch(n.internalActions.middlewareRegistered(o)));let c={...r,next:e},l=r.getState(),[p,y]=f(s,c,l),v;if(p?v=e(s):v=y,r.getState()[t]&&(h(s,c,l),u(s)||i.hasRehydrationInfo(s)))for(let e of d)e(s,c,l);return v}},actions:a};function c(e,t,n={}){return r({type:"query",endpointName:e.endpointName,originalArgs:e.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:t,...n})}}function Vc(e,...t){return Object.assign(e,...t)}var Bc=Symbol(),Kc=({createSelector:e=Rr}={})=>({name:Bc,init(t,{baseQuery:r,tagTypes:n,reducerPath:i,serializeQueryArgs:o,keepUnusedDataFor:a,refetchOnMountOrArgChange:u,refetchOnFocus:s,refetchOnReconnect:c,invalidationBehavior:l},d){lr();let f=e=>e;Object.assign(t,{reducerPath:i,endpoints:{},internalActions:{onOnline:ic,onOffline:oc,onFocus:rc,onFocusLost:nc},util:{}});let{queryThunk:h,mutationThunk:p,patchQueryData:y,updateQueryData:v,upsertQueryData:m,prefetch:g,buildMatchThunkActions:w}=gc({baseQuery:r,reducerPath:i,context:d,api:t,serializeQueryArgs:o,assertTagType:f}),{reducer:b,actions:S}=Ic({context:d,queryThunk:h,mutationThunk:p,reducerPath:i,assertTagType:f,config:{refetchOnFocus:s,refetchOnReconnect:c,refetchOnMountOrArgChange:u,keepUnusedDataFor:a,reducerPath:i,invalidationBehavior:l}});Vc(t.util,{patchQueryData:y,updateQueryData:v,upsertQueryData:m,prefetch:g,resetApiState:S.resetApiState}),Vc(t.internalActions,S);let{middleware:k,actions:O}=Hc({reducerPath:i,context:d,queryThunk:h,mutationThunk:p,api:t,assertTagType:f});Vc(t.util,O),Vc(t,{reducer:b,middleware:k});let{buildQuerySelector:I,buildMutationSelector:j,selectInvalidatedBy:T,selectCachedArgsForQuery:A}=qc({serializeQueryArgs:o,reducerPath:i,createSelector:e});Vc(t.util,{selectInvalidatedBy:T,selectCachedArgsForQuery:A});let{buildInitiateQuery:R,buildInitiateMutation:q,getRunningMutationThunk:C,getRunningMutationsThunk:D,getRunningQueriesThunk:E,getRunningQueryThunk:x}=vc({queryThunk:h,mutationThunk:p,api:t,serializeQueryArgs:o,context:d});return Vc(t.util,{getRunningMutationThunk:C,getRunningMutationsThunk:D,getRunningQueryThunk:x,getRunningQueriesThunk:E}),{name:Bc,injectEndpoint(e,r){var n;let i=t;(n=i.endpoints)[e]??(n[e]={}),ac(r)?Vc(i.endpoints[e],{name:e,select:I(e,r),initiate:R(e,r)},w(h,e)):uc(r)&&Vc(i.endpoints[e],{name:e,select:j(),initiate:q(e)},w(p,e))}}}}),Gc=Ec(Kc());var Yc=async(e,t,r)=>{let n=t.getState(),{accessToken:i,organizationId:o,platformUrl:a}=n.configuration,u={...e,headers:{...e?.headers||{},Authorization:`Bearer ${i}`}};try{return{data:Ys({baseUrl:`${a}/rest/organizations/${o}`})(u,t,r)}}catch(e){return{error:e}}},Jc=Gc({reducerPath:"answer",baseQuery:tc(Yc,{maxRetries:3}),endpoints:()=>({})});var Wc=(e,t)=>{let{answerStyle:r,contentFormat:n}=t;e.answerStyle=r,e.contentFormat=n,e.isStreaming=!0,e.isLoading=!1},Zc=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},Xc=(e,t)=>{e.citations=t.citations},el=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},tl=(e,t)=>{e.error={message:t.errorMessage,code:t.code},e.isStreaming=!1,e.isLoading=!1,console.error(`${t.errorMessage} - code ${t.code}`)},rl=(e,t)=>{let r=JSON.parse(e.data);r.finishReason==="ERROR"&&r.errorMessage&&tl(t,r);let n=r.payload.length?JSON.parse(r.payload):{};switch(r.payloadType){case"genqa.headerMessageType":n.answerStyle&&n.contentFormat&&Wc(t,n);break;case"genqa.messageType":n.textDelta&&Zc(t,n);break;case"genqa.citationsType":n.citations&&Xc(t,n);break;case"genqa.endOfStreamType":n.answerGenerated&&el(t,n);break}},nl=Jc.injectEndpoints({overrideExisting:!0,endpoints:e=>({getAnswer:e.query({queryFn:()=>({data:{answerStyle:void 0,contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!0,isLoading:!0}}),async onCacheEntryAdded(e,{getState:t,cacheDataLoaded:r,updateCachedData:n}){await r;let{configuration:i,generatedAnswer:o}=t(),{platformUrl:a,organizationId:u,accessToken:s}=i;await xs(`${a}/rest/organizations/${u}/answer/v1/configs/${o.answerConfigurationId}/generate`,{method:"POST",body:JSON.stringify(e),headers:{Authorization:`Bearer ${s}`,Accept:"application/json","Content-Type":"application/json","Accept-Encoding":"*"},fetch,onmessage:e=>{n((t=>{rl(e,t)}))},onerror:e=>{throw e}})}})})});var il=Zr(Bn,(e=>e));function ol(){return typeof window<"u"&&typeof document<"u"}function al(e){let t=e.payload?.analyticsAction;return ul(e)&&!z(t)}function ul(e){return"type"in e}var sl=e=>t=>r=>{let n;al(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let i=t(r);return ul(r)&&(r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r)),n!==void 0&&e.dispatch(n),i};var cl=f(R());var ll=Mr("commerce/configuration/updateBasicConfiguration",(e=>Ln(e,{accessToken:$n,organizationId:$n,platformUrl:$n}))),dl=Mr("commerce/configuration/updateAnalyticsConfiguration",(e=>Ln(e,{enabled:Zn.enabled,source:Zn.source,trackingId:Zn.trackingId}))),fl=Mr("commerce/configuration/analytics/disable"),hl=Mr("commerce/configuration/analytics/enable");var pl={q:new J,enableQuerySyntax:new B,aq:new J,cq:new J,firstResult:new L({min:0}),numberOfResults:new L({min:0}),sortCriteria:new J,f:new Z,fExcluded:new Z,cf:new Z,nf:new Z,df:new Z,debug:new B,sf:new Z,tab:new J,af:new Z};var yl=Mr("searchParameters/restore",(e=>Ln(e,pl)));Mr("tab/register",(e=>{let t=new Z({values:{id:Pn,expression:Fn}});return Ln(e,t)}));var vl=Mr("tab/updateActiveTab",(e=>Ln(e,Pn)));var ml=f(q()),gl=f(C()),wl=f(D());ml.default.extend(wl.default);ml.default.extend(gl.default);var bl="/rest/search/v2",Sl="/rest/ua",kl=()=>({organizationId:"",accessToken:"",platformUrl:Re(),search:{apiBaseUrl:`${Re()}${bl}`,locale:"en-US",timezone:ml.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${qe()}${Sl}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy",source:{}},knowledge:{answerConfigurationId:""}});function Ol(e,t){if(_e(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+Sl;let r=Me(e,t);return r?Ae(t,r.environment).analytics:e}var Il=Zr(kl(),(e=>e.addCase(Jn,((e,t)=>{jl(e,t.payload)})).addCase(ll,((e,t)=>{jl(e,t.payload)})).addCase(Wn,((e,t)=>{t.payload.apiBaseUrl&&(e.search.apiBaseUrl=t.payload.apiBaseUrl),t.payload.locale&&(e.search.locale=t.payload.locale),t.payload.timezone&&(e.search.timezone=t.payload.timezone),t.payload.authenticationProviders&&(e.search.authenticationProviders=t.payload.authenticationProviders)})).addCase(Xn,((e,t)=>{z(t.payload.enabled)||(e.analytics.enabled=t.payload.enabled),z(t.payload.originContext)||(e.analytics.originContext=t.payload.originContext),z(t.payload.originLevel2)||(e.analytics.originLevel2=t.payload.originLevel2),z(t.payload.originLevel3)||(e.analytics.originLevel3=t.payload.originLevel3),z(t.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=t.payload.apiBaseUrl),z(t.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=t.payload.nextApiBaseUrl),z(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),z(t.payload.analyticsMode)||(e.analytics.analyticsMode=t.payload.analyticsMode),z(t.payload.source)||(e.analytics.source=t.payload.source);let r=(0,cl.default)();r&&(e.analytics.analyticsMode="next",e.analytics.trackingId=r),z(t.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.payload.runtimeEnvironment),z(t.payload.anonymous)||(e.analytics.anonymous=t.payload.anonymous),z(t.payload.deviceId)||(e.analytics.deviceId=t.payload.deviceId),z(t.payload.userDisplayName)||(e.analytics.userDisplayName=t.payload.userDisplayName),z(t.payload.documentLocation)||(e.analytics.documentLocation=t.payload.documentLocation)})).addCase(dl,((e,t)=>{z(t.payload.enabled)||(e.analytics.enabled=t.payload.enabled),z(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),z(t.payload.source)||(e.analytics.source=t.payload.source)})).addCase(ei,(e=>{e.analytics.enabled=!1})).addCase(fl,(e=>{e.analytics.enabled=!1})).addCase(ti,(e=>{e.analytics.enabled=!0})).addCase(hl,(e=>{e.analytics.enabled=!0})).addCase(ri,((e,t)=>{e.analytics.originLevel2=t.payload.originLevel2})).addCase(ni,((e,t)=>{e.analytics.originLevel3=t.payload.originLevel3})).addCase(vl,((e,t)=>{e.analytics.originLevel2=t.payload})).addCase(yl,((e,t)=>{e.analytics.originLevel2=t.payload.tab||e.analytics.originLevel2}))));function jl(e,t){t.accessToken&&(e.accessToken=t.accessToken),t.organizationId&&(e.organizationId=t.organizationId),t.platformUrl&&(e.platformUrl=t.platformUrl,e.search.apiBaseUrl=`${t.platformUrl}${bl}`,e.analytics.apiBaseUrl=Ol(t.platformUrl,e.organizationId))}var Tl=Il;function Al(e){return e.instantlyCallable}var Rl=()=>e=>t=>e(Al(t)?t():t);var ql=e=>()=>t=>r=>{let n=r;if(!n.error)return t(r);let i=n.error;if(n.payload?.ignored||e.error(i.stack||i.message||i.name||"Error",`Action dispatch error ${n.type}`,r),n.error.name!=="SchemaValidationError")return t(r)},Cl=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));var Dl=e=>({referrer:document.referrer,userAgent:navigator.userAgent,location:window.location.href,clientId:e}),El=()=>({referrer:null,userAgent:null,location:null,clientId:""});function xl(e,t){let r={...e},n,i=e=>(t,r)=>{let i=e(t,r);return n?n(i,r):i};return{get combinedReducer(){let e=we(Object.entries(t).filter((([e])=>!(e in r))).map((([e,t])=>[e,()=>t])));return i(lt({...e,...r}))},containsAll(e){return Object.keys(e).every((e=>e in r))},add(e){Object.keys(e).filter((e=>!(e in r))).forEach((t=>r[t]=e[t]))},addCrossReducer(e){n=e}}}function Ul(e,t,r){var n,i,o;t===void 0&&(t=50),r===void 0&&(r={});var a=(n=r.isImmediate)!=null&&n,u=(i=r.callback)!=null&&i,s=r.maxWait,c=Date.now(),l=[];function d(){if(s!==void 0){var e=Date.now()-c;if(e+t>=s)return s-e}return t}var f=function(){var t=[].slice.call(arguments),r=this;return new Promise((function(n,i){var s=a&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout((function(){if(o=void 0,c=Date.now(),!a){var n=e.apply(r,t);u&&u(n),l.forEach((function(e){return(0,e.resolve)(n)})),l=[]}}),d()),s){var f=e.apply(r,t);return u&&u(f),n(f)}l.push({resolve:n,reject:i})}))};return f.cancel=function(e){o!==void 0&&clearTimeout(o),l.forEach((function(t){return(0,t.reject)(e)})),l=[]},f}function _l(e,t){let r=0,n=Ul((()=>r=0),500);return i=>o=>async a=>{if(!(typeof a=="function"))return o(a);let u=await o(a);if(!Ml(u))return u;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,n();let s=await Pl(t);i.dispatch(Jn({accessToken:s})),i.dispatch(a)}}function Ml(e){return e?.error?.name===(new ye).name}async function Pl(e){try{return await e()}catch{return""}}function $l({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:i}){return Yr({reducer:e,preloadedState:t,devTools:{stateSanitizer:e=>e.history?{...e,history:"<<OMIT>>"}:e,name:i,shouldHotReload:!1},middleware:e=>e({thunk:{extraArgument:n}}).prepend(...r).concat(Cl(n.logger))})}var Fl={configuration:Tl,version:il};function Nl(e,t){let r=e.organizationEndpoints?.analytics||void 0,{analyticsClientMiddleware:n,...i}=e.analytics??{},o={...i,nextApiBaseUrl:`${r}/rest/organizations/${e.organizationId}/events/v1`,apiBaseUrl:r};if(o.analyticsMode!=="next"&&ge())return t.info("Analytics disabled since doNotTrack is active."),{...o,enabled:!1};if(o.analyticsMode==="next"&&!i.trackingId)throw new Gl('analytics.trackingId is required when analytics.analyticsMode="next"');return o}function Ql(e,t){let r=zl(e,t),{accessToken:n,organizationId:i}=e.configuration,{organizationEndpoints:o}=e.configuration,a=o?.platform||e.configuration.platformUrl;Bl(e.configuration)&&r.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),Vl(e.configuration)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):Kl(e.configuration)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${e.configuration.organizationEndpoints?.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(Jn({accessToken:n,organizationId:i,platformUrl:a}));let u=Nl(e.configuration,r.logger);return u&&r.dispatch(Xn(u)),r}function zl(e,t){let{reducers:r}=e,n=xl({...Fl,...r},e.preloadedState??{});e.crossReducer&&n.addCrossReducer(e.crossReducer);let i=t.logger,o=()=>{let e="";try{e=pu(s.state).getMeta("").clientId}catch(e){i.warn("Error while obtaining clientID from relay",e)}return e},a={...t,get relay(){return pu(s.state)},get navigatorContext(){return e.navigatorContextProvider?e.navigatorContextProvider():ol()?Dl(o()):El()}},u=Ll(e,a,n),s={addReducers(e){n.containsAll(e)||(n.add(e),u.replaceReducer(n.combinedReducer))},dispatch:u.dispatch,subscribe:u.subscribe,enableAnalytics(){u.dispatch(ti())},disableAnalytics(){u.dispatch(ei())},get state(){return u.getState()},get relay(){return pu(this.state)},get navigatorContext(){return e.navigatorContextProvider?e.navigatorContextProvider():ol()?Dl(o()):El()},logger:i,store:u};return s}function Ll(e,t,r){let{preloadedState:n,configuration:i}=e,o=i.name||"coveo-headless",a=Hl(e,t.logger);return $l({preloadedState:n,reducer:r.combinedReducer,middlewares:a,thunkExtraArguments:t,name:o})}function Hl(e,t){let{renewAccessToken:r}=e.configuration,n=_l(t,r);return[Rl,n,ql(t),sl].concat(nl.middleware,e.middlewares||[])}function Vl(e){return N(e.organizationEndpoints)}function Bl(e){return!z(e.platformUrl)||z(e.organizationEndpoints?.platform)}function Kl(e){let{platform:t}=e.organizationEndpoints;if(N(t))return!1;let r=Pe(t);return r&&r.organizationId!==e.organizationId}var Gl=class extends Error{constructor(e){super(e),this.name="InvalidEngineConfiguration"}};var Yl=f(x());function Jl(e){return(0,Yl.default)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}function Wl(e,t){let r=Zl(e),n=zn,i=Xl(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:i,logger:t}}function Zl(e){let{analytics:t}=e,r=(e,t)=>t;return t?.analyticsClientMiddleware||r}function Xl(e){return e.preprocessRequest||ne}({organizationId:Pn,accessToken:Pn,platformUrl:new J({required:!1,emptyAllowed:!1}),name:new J({required:!1,emptyAllowed:!1}),analytics:new Z({options:{required:!1},values:{enabled:new B({required:!1}),originContext:new J({required:!1}),originLevel2:new J({required:!1}),originLevel3:new J({required:!1}),analyticsMode:new J({constrainTo:["legacy","next"],required:!1})}})});function ed(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",organizationEndpoints:Ae("searchuisamples")}}var td={organizationId:Pn,accessToken:Pn,platformUrl:new J({required:!1,emptyAllowed:!1}),name:new J({required:!1,emptyAllowed:!1}),analytics:new Z({options:{required:!1},values:{enabled:new B({required:!1}),originContext:new J({required:!1}),originLevel2:new J({required:!1}),originLevel3:new J({required:!1}),analyticsMode:new J({constrainTo:["legacy"],required:!1})}}),searchHub:$n,locale:$n,timezone:$n},rd=new $(td);function nd(){return{...ed(),searchHub:"default"}}var id={searchHub:ks,productRecommendations:ms};function od(e){let t=Jl(e.loggerOptions);ad(e.configuration,t);let r=ud(e.configuration,t),n={...Wl(e.configuration,t),apiClient:r},i={...e,reducers:id},o=Ql(i,n),{searchHub:a,timezone:u,locale:s}=e.configuration;return o.dispatch(Wn({timezone:u,locale:s})),z(a)||o.dispatch(gs(a)),{...o,get state(){return o.state}}}function ad(e,t){try{rd.validate(e)}catch(e){throw t.error("Product Recommendation engine configuration error",e),e}}function ud(e,t){return new Ve({logger:t,preprocessRequest:e.preprocessRequest||ne,postprocessSearchResponseMiddleware:Ze,postprocessFacetSearchResponseMiddleware:Xe,postprocessQuerySuggestResponseMiddleware:et})}var sd=new ee({each:Pn,required:!0}),cd=(e,t)=>(Ln(e,Pn),W(t)?Ln(t,Pn):Ln(t,sd),{payload:{contextKey:e,contextValue:t}}),ld=Mr("context/set",(e=>{for(let[t,r]of Object.entries(e))cd(t,r);return{payload:e}})),dd=Mr("context/add",(e=>cd(e.contextKey,e.contextValue))),fd=Mr("context/remove",(e=>Ln(e,Pn)));function hd(){return{contextValues:{}}}Zr(hd(),(e=>{e.addCase(ld,((e,t)=>{e.contextValues=t.payload})).addCase(dd,((e,t)=>{e.contextValues[t.payload.contextKey]=t.payload.contextValue})).addCase(fd,((e,t)=>{delete e.contextValues[t.payload]})).addCase(Ss.fulfilled,((e,t)=>{t.payload&&(e.contextValues=t.payload.context.contextValues)}))}));var pd=Mr("dictionaryFieldContext/set",(e=>{let t=new Z({options:{required:!0}}),r=Ln(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),i=new ee({each:Fn}),o=Ln(n,i).error;return o?{payload:e,error:o}:{payload:e}})),yd=Mr("dictionaryFieldContext/add",(e=>{let t=new Z({options:{required:!0},values:{field:Fn,key:Fn}});return Ln(e,t)})),vd=Mr("dictionaryFieldContext/remove",(e=>Ln(e,Fn)));function md(){return{contextValues:{}}}Zr(md(),(e=>{e.addCase(pd,((e,t)=>{e.contextValues=t.payload})).addCase(yd,((e,t)=>{let{field:r,key:n}=t.payload;e.contextValues[r]=n})).addCase(vd,((e,t)=>{delete e.contextValues[t.payload]})).addCase(Ss.fulfilled,((e,t)=>{t.payload&&(e.contextValues=t.payload.dictionaryFieldContext.contextValues)}))}));function gd(e){let t,r=new Map,n=()=>r.size===0,i=e=>{try{let r=JSON.stringify(e),n=t!==r;return t=r,n}catch(e){return console.warn('Could not detect if state has changed, check the controller "get state method"',e),!0}};return{subscribe(o){o();let a=Symbol(),u;return n()&&(t=JSON.stringify(this.state),u=e.subscribe((()=>{i(this.state)&&r.forEach((e=>e()))}))),r.set(a,o),()=>{r.delete(a),n()&&u&&u()}},get state(){return{}}}}var wd={additionalFields:new ee({required:!1,each:$n}),skus:new ee({required:!1,each:$n}),maxNumberOfRecommendations:new L({required:!1,max:50,min:1,default:5})},bd=new $({id:Pn,...wd}),Sd=(e,t={})=>{if(!kd(e));let r=gd(e),{dispatch:n}=e,i=()=>e.state,o=Hn(e,bd,t.options,"buildBaseProductRecommendationsList");return n(ss({id:o.id})),n(hs({number:o.maxNumberOfRecommendations})),o.additionalFields&&n(fs({additionalFields:o.additionalFields})),o.skus&&n(cs({skus:o.skus})),{...r,setSkus(e){n(cs({skus:e}))},refresh(){n(ps())},get state(){let{skus:e,maxNumberOfRecommendations:t,recommendations:r,error:n,isLoading:o}=i().productRecommendations;return{skus:e,maxNumberOfRecommendations:t,recommendations:r,error:n,isLoading:o}}}};function kd(e){return e.addReducers({productRecommendations:ms,configuration:Tl}),!0}var Od=new $({sku:new J({required:!0,emptyAllowed:!1}),maxNumberOfRecommendations:wd.maxNumberOfRecommendations,additionalFields:wd.additionalFields});function Id(e,t){let r=Hn(e,Od,t.options,"buildFrequentlyBoughtTogetherList"),n=Sd(e,{...t,options:{maxNumberOfRecommendations:r.maxNumberOfRecommendations,additionalFields:r.additionalFields,skus:[r.sku],id:"frequentBought"}}),{setSkus:i,...o}=n;return{...o,setSku(e){i([e])},get state(){let{skus:e,...t}=n.state;return{...t,sku:e[0]}}}}new $({...wd});new $({...wd});new $({maxNumberOfRecommendations:wd.maxNumberOfRecommendations,additionalFields:wd.additionalFields});new $({maxNumberOfRecommendations:wd.maxNumberOfRecommendations,additionalFields:wd.additionalFields});new $({maxNumberOfRecommendations:wd.maxNumberOfRecommendations,additionalFields:wd.additionalFields});new $({values:new Z({options:{required:!1}})});new $({...wd});new $({...wd});_();
/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=class{constructor(t){e(this,t);this.unsubscribe=()=>{};this.state=undefined}componentWillLoad(){const e=nd();this.engine=od({configuration:{...e,searchHub:"frequently_bought_recommendations"}});this.frequentlyBoughtTogether=Id(this.engine,{options:{sku:"abc"}});this.unsubscribe=this.frequentlyBoughtTogether.subscribe((()=>this.updateState()));this.frequentlyBoughtTogether.refresh()}disconnectedCallback(){this.unsubscribe()}updateState(){this.state=this.frequentlyBoughtTogether.state}render(){return t("div",{key:"b64870885d668475b543f5382ce2c9bca593ad95"},"FREQUENTLY BOUGHT TOGETHER:",t("ul",{key:"153108ef11d145bff7435dce9ac7fd15e8ec71e7"},this.state.recommendations.map((e=>t("li",null,e.ec_name)))))}};export{jd as atomic_frequently_bought_together};
//# sourceMappingURL=p-0931eabd.entry.js.map