/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var e=Object.create;var t=Object.defineProperty;var r=Object.getOwnPropertyDescriptor;var n=Object.getOwnPropertyNames;var i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty;var o=(e,r,n)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var u=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):e)((function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}));var s=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),c=(e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})},l=(e,i,o,u)=>{if(i&&typeof i=="object"||typeof i=="function")for(let s of n(i))!a.call(e,s)&&s!==o&&t(e,s,{get:()=>i[s],enumerable:!(u=r(i,s))||u.enumerable});return e};var d=(r,n,a)=>(a=r!=null?e(i(r)):{},l(n||!r||!r.__esModule?t(a,"default",{value:r,enumerable:!0}):a,r));var f=(e,t,r)=>o(e,typeof t!="symbol"?t+"":t,r);var h=s(((e,t)=>{function r(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(e=`${e}`,e=e.replace(/[ \t\n\f\r]/g,""),e.length%4===0&&(e=e.replace(/==?$/,"")),e.length%4===1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,n=0;for(let a=0;a<e.length;a++)r<<=6,r|=i(e[a]),n+=6,n===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,t+=String.fromCharCode(r)):n===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function i(e){let t=n.indexOf(e);return t<0?void 0:t}t.exports=r}));var p=s(((e,t)=>{function r(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(t)>>2,n[1]=(e.charCodeAt(t)&3)<<4,e.length>t+1&&(n[1]|=e.charCodeAt(t+1)>>4,n[2]=(e.charCodeAt(t+1)&15)<<2),e.length>t+2&&(n[2]|=e.charCodeAt(t+2)>>6,n[3]=e.charCodeAt(t+2)&63);for(let e=0;e<n.length;e++)typeof n[e]>"u"?r+="=":r+=i(n[e])}return r}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function i(e){if(e>=0&&e<64)return n[e]}t.exports=r}));var y=s(((e,t)=>{var r=h(),n=p();t.exports={atob:r,btoa:n}}));var v=s(((e,t)=>{t.exports=fetch}));var g=s((e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function n(e){var n=t(t({},r),e);return n.numOfAttempts<1&&(n.numOfAttempts=1),n}e.getSanitizedOptions=n}));var m=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(e){var t=Math.random()*e;return Math.round(t)}e.fullJitter=t}));var w=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(e){return e}e.noJitter=t}));var b=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=m(),r=w();function n(e){switch(e.jitter){case"full":return t.fullJitter;case"none":default:return r.noJitter}}e.JitterFactory=n}));var S=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=b(),r=function(){function e(e){this.options=e,this.attempt=0}return e.prototype.apply=function(){var e=this;return new Promise((function(t){return setTimeout(t,e.jitteredDelay)}))},e.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var e=t.JitterFactory(this.options);return e(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var e=this.options.startingDelay,t=this.options.timeMultiple,r=this.numOfDelayedAttempts,n=e*Math.pow(t,r);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();e.Delay=r}));var q=s((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r=e&&e.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){e.done?r(e.value):i(e.value).then(o,u)}s((n=n.apply(e,t||[])).next())}))},n=e&&e.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(e){return function(t){return s([e,t])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var i=S(),a=function(e){t(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.apply=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]}))}))},Object.defineProperty(i.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),i}(i.Delay);e.SkipFirstDelay=a}));var O=s((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=S(),n=function(e){t(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(r.Delay);e.AlwaysDelay=n}));var k=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=q(),r=O();function n(e,t){var r=i(e);return r.setAttemptNumber(t),r}e.DelayFactory=n;function i(e){return e.delayFirstAttempt?new r.AlwaysDelay(e):new t.SkipFirstDelay(e)}}));var I=s((e=>{var t=e&&e.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){e.done?r(e.value):i(e.value).then(o,u)}s((n=n.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(e){return function(t){return s([e,t])}}function s(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var n=g(),i=k();function a(e,i){return i===void 0&&(i={}),t(this,void 0,void 0,(function(){var t,a;return r(this,(function(r){switch(r.label){case 0:return t=n.getSanitizedOptions(i),a=new o(e,t),[4,a.execute()];case 1:return[2,r.sent()]}}))}))}e.backOff=a;var o=function(){function e(e,t){this.request=e,this.options=t,this.attemptNumber=0}return e.prototype.execute=function(){return t(this,void 0,void 0,(function(){var e,t;return r(this,(function(r){switch(r.label){case 0:if(this.attemptLimitReached)return[3,7];r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return r.sent(),[4,this.request()];case 3:return[2,r.sent()];case 4:return e=r.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(t=r.sent(),!t||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}}))}))},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return t(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:return e=i.DelayFactory(this.options,this.attemptNumber),[4,e.apply()];case 1:return t.sent(),[2]}}))}))},e}()}));var A=s(((e,t)=>{var r=typeof self<"u"?self:typeof window<"u"?window:void 0;if(!r)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!r.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');t.exports.AbortController=r.AbortController}));var R=s(((e,t)=>{var r=/(^|; )Coveo-Pendragon=([^;]*)/;t.exports=()=>r.exec(document.cookie)?.pop()||null}));var C=s(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=n()})(e,(function(){var e=1e3,t=6e4,r=36e5,n="millisecond",i="second",a="minute",o="hour",u="day",s="week",c="month",l="quarter",d="year",f="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},g=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},m={s:g,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+g(n,2,"0")+":"+g(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,c),a=r-i<0,o=t.clone().add(n+(a?-1:1),c);return+(-(n+(r-i)/(a?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:s,d:u,D:f,h:o,m:a,s:i,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return e===void 0}},w="en",b={};b[w]=v;var S="$isDayjsObject",q=function(e){return e instanceof A||!(!e||!e[S])},O=function e(t,r,n){var i;if(!t)return w;if(typeof t=="string"){var a=t.toLowerCase();b[a]&&(i=a),r&&(b[a]=r,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var u=t.name;b[u]=t,i=u}return!n&&i&&(w=i),i||!n&&w},k=function(e,t){if(q(e))return e.clone();var r=typeof t=="object"?t:{};return r.date=e,r.args=arguments,new A(r)},I=m;I.l=O,I.i=q,I.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var A=function(){function v(e){this.$L=O(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[S]=!0}var g=v.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(t===null)return new Date(NaN);if(I.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var n=t.match(p);if(n){var i=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return I},g.isValid=function(){return this.$d.toString()!==h},g.isSame=function(e,t){var r=k(e);return this.startOf(t)<=r&&r<=this.endOf(t)},g.isAfter=function(e,t){return k(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<k(e)},g.$g=function(e,t,r){return I.u(e)?this[t]:this.set(r,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var r=this,n=!!I.u(t)||t,l=I.p(e),h=function(e,t){var i=I.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?i:i.endOf(u)},p=function(e,t){return I.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},y=this.$W,v=this.$M,g=this.$D,m="set"+(this.$u?"UTC":"");switch(l){case d:return n?h(1,0):h(31,11);case c:return n?h(1,v):h(0,v+1);case s:var w=this.$locale().weekStart||0,b=(y<w?y+7:y)-w;return h(n?g-b:g+(6-b),v);case u:case f:return p(m+"Hours",0);case o:return p(m+"Minutes",1);case a:return p(m+"Seconds",2);case i:return p(m+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var r,s=I.p(e),l="set"+(this.$u?"UTC":""),h=(r={},r[u]=l+"Date",r[f]=l+"Date",r[c]=l+"Month",r[d]=l+"FullYear",r[o]=l+"Hours",r[a]=l+"Minutes",r[i]=l+"Seconds",r[n]=l+"Milliseconds",r)[s],p=s===u?this.$D+(t-this.$W):t;if(s===c||s===d){var y=this.clone().set(f,1);y.$d[h](p),y.init(),this.$d=y.set(f,Math.min(this.$D,y.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[I.p(e)]()},g.add=function(n,l){var f,h=this;n=Number(n);var p=I.p(l),y=function(e){var t=k(h);return I.w(t.date(t.date()+Math.round(e*n)),h)};if(p===c)return this.set(c,this.$M+n);if(p===d)return this.set(d,this.$y+n);if(p===u)return y(1);if(p===s)return y(7);var v=(f={},f[a]=t,f[o]=r,f[i]=e,f)[p]||1,g=this.$d.getTime()+n*v;return I.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=I.z(this),a=this.$H,o=this.$m,u=this.$M,s=r.weekdays,c=r.months,l=r.meridiem,d=function(e,r,i,a){return e&&(e[r]||e(t,n))||i[r].slice(0,a)},f=function(e){return I.s(a%12||12,e,"0")},p=l||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(y,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return I.s(t.$y,4,"0");case"M":return u+1;case"MM":return I.s(u+1,2,"0");case"MMM":return d(r.monthsShort,u,c,3);case"MMMM":return d(c,u);case"D":return t.$D;case"DD":return I.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,s,2);case"ddd":return d(r.weekdaysShort,t.$W,s,3);case"dddd":return s[t.$W];case"H":return String(a);case"HH":return I.s(a,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return p(a,o,!0);case"A":return p(a,o,!1);case"m":return String(o);case"mm":return I.s(o,2,"0");case"s":return String(t.$s);case"ss":return I.s(t.$s,2,"0");case"SSS":return I.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,f,h){var p,y=this,v=I.p(f),g=k(n),m=(g.utcOffset()-this.utcOffset())*t,w=this-g,b=function(){return I.m(y,g)};switch(v){case d:p=b()/12;break;case c:p=b();break;case l:p=b()/3;break;case s:p=(w-m)/6048e5;break;case u:p=(w-m)/864e5;break;case o:p=w/r;break;case a:p=w/t;break;case i:p=w/e;break;default:p=w}return h?p:I.a(p)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return b[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=O(e,t,!0);return n&&(r.$L=n),r},g.clone=function(){return I.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},v}(),R=A.prototype;return k.prototype=R,[["$ms",n],["$s",i],["$m",a],["$H",o],["$W",u],["$M",c],["$y",d],["$D",f]].forEach((function(e){R[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),k.extend=function(e,t){return e.$i||(e(t,A,k),e.$i=!0),k},k.locale=O,k.isDayjs=q,k.unix=function(e){return k(1e3*e)},k.en=b[w],k.Ls=b,k.p={},k}))}));var j=s(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_timezone=n()})(e,(function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,i){var a,o=function(e,r,n){n===void 0&&(n={});var i=new Date(e),a=function(e,r){r===void 0&&(r={});var n=r.timeZoneName||"short",i=e+"|"+n,a=t[i];return a||(a=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:n}),t[i]=a),a}(r,n);return a.formatToParts(i)},u=function(t,r){for(var n=o(t,r),a=[],u=0;u<n.length;u+=1){var s=n[u],c=s.type,l=s.value,d=e[c];d>=0&&(a[d]=parseInt(l,10))}var f=a[3],h=f===24?0:f,p=a[0]+"-"+a[1]+"-"+a[2]+" "+h+":"+a[4]+":"+a[5]+":000",y=+t;return(i.utc(p).valueOf()-(y-=y%1e3))/6e4},s=n.prototype;s.tz=function(e,t){e===void 0&&(e=a);var r=this.utcOffset(),n=this.toDate(),o=n.toLocaleString("en-US",{timeZone:e}),u=Math.round((n-new Date(o))/1e3/60),s=i(o,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(n.getTimezoneOffset()/15)-u,!0);if(t){var c=s.utcOffset();s=s.add(r-c,"minute")}return s.$x.$timezone=e,s},s.offsetName=function(e){var t=this.$x.$timezone||i.tz.guess(),r=o(this.valueOf(),t,{timeZoneName:e}).find((function(e){return e.type.toLowerCase()==="timezonename"}));return r&&r.value};var c=s.startOf;s.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return c.call(this,e,t);var r=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(r,e,t).tz(this.$x.$timezone,!0)},i.tz=function(e,t,r){var n=r&&t,o=r||t||a,s=u(+i(),o);if(typeof e!="string")return i(e).tz(o);var c=function(e,t,r){var n=e-60*t*1e3,i=u(n,r);if(t===i)return[n,t];var a=u(n-=60*(i-t)*1e3,r);return i===a?[n,i]:[e-60*Math.min(i,a)*1e3,Math.max(i,a)]}(i.utc(e,n).valueOf(),s,o),l=c[0],d=c[1],f=i(l).utcOffset(d);return f.$x.$timezone=o,f},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(e){a=e}}}))}));var T=s(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_utc=n()})(e,(function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,i,a){var o=i.prototype;a.utc=function(e){var t={date:e,utc:!0,args:arguments};return new i(t)},o.utc=function(t){var r=a(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},o.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var u=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),u.call(this,e)};var s=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else s.call(this)};var c=o.utcOffset;o.utcOffset=function(n,i){var a=this.$utils().u;if(a(n))return this.$u?0:a(this.$offset)?c.call(this):this.$offset;if(typeof n=="string"&&(n=function(e){e===void 0&&(e="");var n=e.match(t);if(!n)return null;var i=(""+n[0]).match(r)||["-",0,0],a=i[0],o=60*+i[1]+ +i[2];return o===0?0:a==="+"?o:-o}(n),n===null))return this;var o=Math.abs(n)<=16?60*n:n,u=this;if(i)return u.$offset=o,u.$u=n===0,u;if(n!==0){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(u=this.local().add(o+s,e)).$offset=o,u.$x.$localOffset=s}else u=this.utc();return u};var l=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return e==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=o.diff;o.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),i=a(e).local();return f.call(n,i,t,r)}}}))}));var D=s(((e,t)=>{function r(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}t.exports=n;function n(e,t,n){var i=n&&n.stringify||r,a=1;if(typeof e=="object"&&e!==null){var o=t.length+a;if(o===1)return e;var u=new Array(o);u[0]=i(e);for(var s=1;s<o;s++)u[s]=i(t[s]);return u.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var l="",d=1-a,f=-1,h=e&&e.length||0,p=0;p<h;){if(e.charCodeAt(p)===37&&p+1<h){switch(f=f>-1?f:0,e.charCodeAt(p+1)){case 100:case 102:if(d>=c||t[d]==null)break;f<p&&(l+=e.slice(f,p)),l+=Number(t[d]),f=p+2,p++;break;case 105:if(d>=c||t[d]==null)break;f<p&&(l+=e.slice(f,p)),l+=Math.floor(Number(t[d])),f=p+2,p++;break;case 79:case 111:case 106:if(d>=c||t[d]===void 0)break;f<p&&(l+=e.slice(f,p));var y=typeof t[d];if(y==="string"){l+="'"+t[d]+"'",f=p+2,p++;break}if(y==="function"){l+=t[d].name||"<anonymous>",f=p+2,p++;break}l+=i(t[d]),f=p+2,p++;break;case 115:if(d>=c)break;f<p&&(l+=e.slice(f,p)),l+=String(t[d]),f=p+2,p++;break;case 37:f<p&&(l+=e.slice(f,p)),l+="%",f=p+2,p++,d--;break}++d}++p}return f===-1?e:(f<h&&(l+=e.slice(f)),l)}}));var M=s(((e,t)=>{var r=D();t.exports=f;var n=x().console||{},i={mapHttpRequest:I,mapHttpResponse:I,wrapRequestSerializer:A,wrapResponseSerializer:A,wrapErrorSerializer:A,req:I,res:I,err:O,errWithCause:O};function a(e,t){return e==="silent"?1/0:t.levels.values[e]}var o=Symbol("pino.logFuncs"),u=Symbol("pino.hierarchy"),s={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function c(e,t){let r={logger:t,parent:e[u]};t[u]=r}function l(e,t,r){let i={};t.forEach((e=>{i[e]=r[e]?r[e]:n[e]||n[s[e]||"log"]||R})),e[o]=i}function d(e,t){return Array.isArray(e)?e.filter((function(e){return e!=="!stdSerializers.err"})):e===!0?Object.keys(t):!1}function f(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let i=e.serializers||{},o=d(e.browser.serialize,i),u=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(u=!1);let s=Object.keys(e.customLevels||{}),f=["error","fatal","warn","info","debug","trace"].concat(s);typeof r=="function"&&f.forEach((function(e){r[e]=r})),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let p=e.level||"info",y=Object.create(r);y.log||(y.log=R),l(y,f,r),c({},y),Object.defineProperty(y,"levelVal",{get:m}),Object.defineProperty(y,"level",{get:w,set:S});let g={transmit:t,serialize:o,asObject:e.browser.asObject,formatters:e.browser.formatters,levels:f,timestamp:k(e)};y.levels=h(e),y.level=p,y.setMaxListeners=y.getMaxListeners=y.emit=y.addListener=y.on=y.prependListener=y.once=y.prependOnceListener=y.removeListener=y.removeAllListeners=y.listeners=y.listenerCount=y.eventNames=y.write=y.flush=R,y.serializers=i,y._serialize=o,y._stdErrSerialize=u,y.child=O,t&&(y._logEvent=q());function m(){return a(this.level,this)}function w(){return this._level}function S(e){if(e!=="silent"&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,v(this,g,y,"error"),v(this,g,y,"fatal"),v(this,g,y,"warn"),v(this,g,y,"info"),v(this,g,y,"debug"),v(this,g,y,"trace"),s.forEach((e=>{v(this,g,y,e)}))}function O(r,n){if(!r)throw new Error("missing bindings for child Pino");n=n||{},o&&r.serializers&&(n.serializers=r.serializers);let a=n.serializers;if(o&&a){var u=Object.assign({},i,a),s=e.browser.serialize===!0?Object.keys(u):o;delete r.serializers,b([r],s,u,this._stdErrSerialize)}function l(e){this._childLevel=(e._childLevel|0)+1,this.bindings=r,u&&(this.serializers=u,this._serialize=s),t&&(this._logEvent=q([].concat(e._logEvent.bindings,r)))}l.prototype=this;let d=new l(this);return c(this,d),d.level=this.level,d}return y}function h(e){let t=e.customLevels||{},r=Object.assign({},f.levels.values,t),n=Object.assign({},f.levels.labels,p(t));return{values:r,labels:n}}function p(e){let t={};return Object.keys(e).forEach((function(r){t[e[r]]=r})),t}f.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};f.stdSerializers=i;f.stdTimeFunctions=Object.assign({},{nullTime:C,epochTime:j,unixTime:T,isoTime:M});function y(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[u];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function v(e,t,r,n){if(Object.defineProperty(e,n,{value:a(e.level,r)>a(n,r)?R:r[o][n],writable:!0,enumerable:!0,configurable:!0}),!t.transmit&&e[n]===R)return;e[n]=m(e,t,r,n);let i=y(e);i.length!==0&&(e[n]=g(i,e[n]))}function g(e,t){return function(){return t.apply(this,[...e,...arguments])}}function m(e,t,r,i){return function(o){return function(){let u=t.timestamp(),s=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var l=0;l<s.length;l++)s[l]=arguments[l];if(t.serialize&&!t.asObject&&b(s,this._serialize,this.serializers,this._stdErrSerialize),t.asObject||t.formatters?o.call(c,w(this,i,s,u,t.formatters)):o.apply(c,s),t.transmit){let n=t.transmit.level||e._level,o=r.levels.values[n],c=r.levels.values[i];if(c<o)return;S(this,{ts:u,methodLevel:i,methodValue:c,transmitLevel:n,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:a(e._level,r)},s)}}}(e[o][i])}function w(e,t,n,i,a={}){let{level:o=(()=>e.levels.values[t]),log:u=(e=>e)}=a;e._serialize&&b(n,e._serialize,e.serializers,e._stdErrSerialize);let s=n.slice(),c=s[0],l={};i&&(l.time=i),l.level=o(t,e.levels.values[t]);let d=(e._childLevel|0)+1;if(d<1&&(d=1),c!==null&&typeof c=="object"){for(;d--&&typeof s[0]=="object";)Object.assign(l,s.shift());c=s.length?r(s.shift(),s):void 0}else typeof c=="string"&&(c=r(s.shift(),s));return c!==void 0&&(l.msg=c),u(l)}function b(e,t,r,n){for(let i in e)if(n&&e[i]instanceof Error)e[i]=f.stdSerializers.err(e[i]);else if(typeof e[i]=="object"&&!Array.isArray(e[i]))for(let n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function S(e,t,r){let n=t.send,i=t.ts,a=t.methodLevel,o=t.methodValue,u=t.val,s=e._logEvent.bindings;b(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return s.indexOf(e)===-1})),e._logEvent.level.label=a,e._logEvent.level.value=o,n(a,e._logEvent,u),e._logEvent=q(s)}function q(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function O(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function k(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?C:j}function I(){return{}}function A(e){return e}function R(){}function C(){return!1}function j(){return Date.now()}function T(){return Math.round(Date.now()/1e3)}function M(){return new Date(Date.now()).toISOString()}function x(){function e(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}t.exports.default=f;t.exports.pino=f}));var x=s(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_customParseFormat=n()})(e,(function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,i=/\d*[^-_:/,()\s\d]+/,a={},o=function(e){return(e=+e)+(e>68?1900:2e3)},u=function(e){return function(t){this[e]=+t}},s=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||e==="Z")return 0;var t=e.match(/([+-]|\d\d)/g),r=60*t[1]+(+t[2]||0);return r===0?0:t[0]==="+"?-r:r}(e)}],c=function(e){var t=a[e];return t&&(t.indexOf?t:t.s.concat(t.f))},l=function(e,t){var r,n=a.meridiem;if(n){for(var i=1;i<=24;i+=1)if(e.indexOf(n(i,0,t))>-1){r=i>12;break}}else r=e===(t?"pm":"PM");return r},d={A:[i,function(e){this.afternoon=l(e,!1)}],a:[i,function(e){this.afternoon=l(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[n,u("seconds")],ss:[n,u("seconds")],m:[n,u("minutes")],mm:[n,u("minutes")],H:[n,u("hours")],h:[n,u("hours")],HH:[n,u("hours")],hh:[n,u("hours")],D:[n,u("day")],DD:[r,u("day")],Do:[i,function(e){var t=a.ordinal,r=e.match(/\d+/);if(this.day=r[0],t)for(var n=1;n<=31;n+=1)t(n).replace(/\[|\]/g,"")===e&&(this.day=n)}],M:[n,u("month")],MM:[r,u("month")],MMM:[i,function(e){var t=c("months"),r=(c("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[i,function(e){var t=c("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,u("year")],YY:[r,function(e){this.year=o(e)}],YYYY:[/\d{4}/,u("year")],Z:s,ZZ:s};function f(r){var n,i;n=r,i=a&&a.formats;for(var o=(r=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,r,n){var a=n&&n.toUpperCase();return r||i[n]||e[n]||i[a].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,r){return t||r.slice(1)}))}))).match(t),u=o.length,s=0;s<u;s+=1){var c=o[s],l=d[c],f=l&&l[0],h=l&&l[1];o[s]=h?{regex:f,parser:h}:c.replace(/^\[|\]$/g,"")}return function(e){for(var t={},r=0,n=0;r<u;r+=1){var i=o[r];if(typeof i=="string")n+=i.length;else{var a=i.regex,s=i.parser,c=e.slice(n),l=a.exec(c)[0];s.call(t,l),e=e.replace(l,"")}}return function(e){var t=e.afternoon;if(t!==void 0){var r=e.hours;t?r<12&&(e.hours+=12):r===12&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,r){r.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(o=e.parseTwoDigitYear);var n=t.prototype,i=n.parse;n.parse=function(e){var t=e.date,n=e.utc,o=e.args;this.$u=n;var u=o[1];if(typeof u=="string"){var s=o[2]===!0,c=o[3]===!0,l=s||c,d=o[2];c&&(d=o[2]),a=this.$locale(),!s&&d&&(a=r.Ls[d]),this.$d=function(e,t,r){try{if(["x","X"].indexOf(t)>-1)return new Date((t==="X"?1e3:1)*e);var n=f(t)(e),i=n.year,a=n.month,o=n.day,u=n.hours,s=n.minutes,c=n.seconds,l=n.milliseconds,d=n.zone,h=new Date,p=o||(i||a?1:h.getDate()),y=i||h.getFullYear(),v=0;i&&!a||(v=a>0?a-1:h.getMonth());var g=u||0,m=s||0,w=c||0,b=l||0;return d?new Date(Date.UTC(y,v,p,g,m,w,b+60*d.offset*1e3)):r?new Date(Date.UTC(y,v,p,g,m,w,b)):new Date(y,v,p,g,m,w,b)}catch{return new Date("")}}(t,u,n),this.init(),d&&d!==!0&&(this.$L=this.locale(d).$L),l&&t!=this.format(u)&&(this.$d=new Date("")),a={}}else if(u instanceof Array)for(var h=u.length,p=1;p<=h;p+=1){o[1]=u[p-1];var y=r.apply(this,o);if(y.isValid()){this.$d=y.$d,this.$L=y.$L,this.init();break}p===h&&(this.$d=new Date(""))}else i.call(this,e)}}}))}));var E=s(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_quarterOfYear=n()})(e,(function(){var e="month",t="quarter";return function(r,n){var i=n.prototype;i.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var a=i.add;i.add=function(r,n){return r=Number(r),this.$utils().p(n)===t?this.add(3*r,e):a.bind(this)(r,n)};var o=i.startOf;i.startOf=function(r,n){var i=this.$utils(),a=!!i.u(n)||n;if(i.p(r)===t){var u=this.quarter()-1;return a?this.month(3*u).startOf(e).startOf("day"):this.month(3*u+2).endOf(e).endOf("day")}return o.bind(this)(r,n)}}}))}));var P=()=>global.crypto,F=()=>{typeof window<"u"||(P()||(global.crypto=u("crypto")),!P().getRandomValues&&P().webcrypto&&(global.crypto.getRandomValues=P().webcrypto.getRandomValues.bind(P().webcrypto)))};var U={};c(U,{escape:()=>pe,getHighlightedSuggestion:()=>fe,highlightString:()=>de});function $(e,t){let r=`\n  The following properties are invalid:\n\n    ${e.join(`\n\t`)}\n  \n  ${t}\n  `;return new _(r)}var _=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},Q=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let e in this.definition){let t=this.definition[e].validate(r[e]);t&&n.push(`${e}: ${t}`)}if(n.length)throw $(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},N=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&z(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function V(e){return e===void 0}function L(e){return e===null}function z(e){return V(e)||L(e)}var Y=class{constructor(e={}){this.config=e,this.value=new N(e)}validate(e){let t=this.value.validate(e);return t||(H(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function H(e){return V(e)||B(e)}function B(e){return typeof e=="number"&&!isNaN(e)}var W=class{constructor(e={}){this.value=new N(e)}validate(e){let t=this.value.validate(e);return t||(K(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function K(e){return V(e)||G(e)}function G(e){return typeof e=="boolean"}var J=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,Z=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new N(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:i}=this.config,a=this.value.validate(e);return a||(V(e)?null:X(e)?!t&&!e.length?"value is an empty string.":r&&!J.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:i&&!i.includes(e)?`value should be one of: ${i.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function X(e){return Object.prototype.toString.call(e)==="[object String]"}var ee=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(V(e))return this.config.options.required?"value is required and is currently undefined":null;if(!te(e))return"value is not an object";for(let[t,r]of Object.entries(this.config.values))if(r.required&&z(e[t]))return`value does not contain ${t}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let i=e[r],a=n.validate(i);a!==null&&(t+=" "+a)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function te(e){return e!==void 0&&typeof e=="object"}var re=class{constructor(e={}){this.config=e,this.value=new N(this.config)}validate(e){if(!z(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(z(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let t="";return e.forEach((r=>{this.config.each.required&&z(r)&&(t=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(r,this.config.each);n!==null&&(t+=" "+n)})),t===""?null:t}return null}validatePrimitiveValue(e,t){return G(e)||X(e)||B(e)||te(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function ne(e){return Array.isArray(e)}var ie=class{constructor(e){this.config=e,this.value=new N(e)}validate(e){let t=this.value.validate(e);return t!==null?t:V(e)||Object.values(this.config.enum).find((t=>t===e))?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};d(y());function ae(e){return e.trim()===""}function oe(e,t){return[...e.reduce(((e,r)=>{let n=t(r);return e.has(n)||e.set(n,r),e}),new Map).values()]}var ue=new Set(["1",1,"yes",!0]);function se(){if(typeof navigator>"u"||typeof window>"u")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some((e=>ue.has(e)))}function ce(e){let t={};for(let[r,n]of e)t[r]=n;return t}function le(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function de(e){if(ae(e.openingDelimiter)||ae(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(z(e.content)||ae(e.content))return e.content;if(e.highlights.length===0)return pe(e.content);let t=e.content.length,r="",n=0;for(let i=0;i<e.highlights.length;i++){let a=e.highlights[i],o=a.offset,u=o+a.length;if(u>t)break;r+=pe(e.content.slice(n,o)),r+=e.openingDelimiter,r+=pe(e.content.slice(o,u)),r+=e.closingDelimiter,n=u}return n!==t&&(r+=pe(e.content.slice(n))),r}function fe(e,t){return e=pe(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,((e,r,n,i)=>r?he(r,t.notMatchDelimiters):n?he(n,t.exactMatchDelimiters):i?he(i,t.correctionDelimiters):e))}function he(e,t){return t?t.open+e+t.close:e}function pe(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return n.test(e)?e.replace(i,(e=>t[e])):e}var ye=e=>e;function ve(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function ge(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:ve(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:ve(),extendedResults:{}}}function me(e){let{url:t,accessToken:r,organizationId:n,authentication:i,...a}=e;return a}var we=e=>{let{response:t}=e;return t.body?be(e):Se(t)},be=e=>Oe(e)?ke(e):qe(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},Se=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function qe(e){return e.body.statusCode!==void 0}function Oe(e){return e.body.exception!==void 0}var ke=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});var Ie=d(v()),Ae=d(I());var Re=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},Ce=class extends Error{constructor(e,t){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=t??0}};function je(e){let t=[];for(let r in e){let n=encodeURIComponent(r),i=encodeURIComponent(e[r]);t.push(`${n}=${i}`)}return t.join("&")}function Te(e){return typeof e!="object"||!e?!1:Object.values(e).every(De)}function De(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function Me(e){return e===429}var xe=class e{static async call(t){let r=$e(t),{logger:n}=t,i=await e.preprocessRequest(r,t);n.info(i,"Platform request");let{url:a,...o}=i,u=async()=>{let e=await(0,Ie.default)(a,o);if(Me(e.status))throw e;return e};try{let e=await(0,Ae.backOff)(u,{retry:e=>{let t=e&&Me(e.status);return t&&n.info("Platform retrying request"),t}});switch(e.status){case 419:case 401:throw n.info("Platform renewing token"),new Re;case 404:throw new Ce(a,e.status);default:return n.info({response:e,requestInfo:i},"Platform response"),e}}catch(e){return e.message==="Failed to fetch"?new Ce(a):e}}static async preprocessRequest(e,t){let{origin:r,preprocessRequest:n,logger:i,requestMetadata:a}=t,{signal:o,...u}=e,s=le(u);try{let t=await n(e,r,a);return{...e,...t}}catch(e){i.error(e,"Platform request preprocessing failed. Returning default request options.")}return s}};function Ee(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,n=!t||!t.region||t.region==="us"?"":`-${t.region}`;return`https://${e}${r}${n}.cloud.coveo.com`}function Pe(e,t="prod"){let r=t==="prod"?"":t,n=`https://${e}.org${r}.coveo.com`,i=`https://${e}.analytics.org${r}.coveo.com`,a=`${n}/rest/search/v2`,o=`https://${e}.admin.org${r}.coveo.com`;return{platform:n,analytics:i,search:a,admin:o}}function Fe(e){return e?.multiRegionSubDomain?`https://${e.multiRegionSubDomain}.org.coveo.com`:Ee("platform",e)}function Ue(e){return Ee("analytics",e)}function $e(e){let{url:t,method:r,requestParams:n,contentType:i,accessToken:a,signal:o}=e,u=e.method==="POST"||e.method==="PUT",s=_e(n,i);return{url:t,method:r,headers:{"Content-Type":i,Authorization:`Bearer ${a}`,...e.headers},...u&&{body:s},signal:o}}function _e(e,t){return t==="application/x-www-form-urlencoded"?Te(e)?je(e):"":JSON.stringify(e)}function Qe(){if(typeof window>"u"){let{AbortController:e}=A();return new e}return typeof AbortController>"u"?null:new AbortController}var Ne=class{constructor(){this.currentAbortController=null}async enqueue(e,t){let r=this.currentAbortController,n=this.currentAbortController=Qe();r&&(t.warnOnAbort&&t.logger.warn("Cancelling current pending search query"),r.abort());try{return await e(n?.signal??null)}finally{this.currentAbortController===n&&(this.currentAbortController=null)}}};var Ve=class{constructor(e){this._params={};this._basePath=e}addParam(e,t){this._params={...this.params,[e]:t}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&")}`:this.basePath}},Le=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),ze=(e,t)=>{let r=Ye(e);return r&&r.organizationId===t?r:null},Ye=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return t?.groups?t.groups:null};function He(e){return((e.headers.get("content-type")||"").split(";").find((e=>e.indexOf("charset=")!==-1))||"").split("=")[1]||"UTF-8"}var Be=(e,t,r,n)=>{let i=new Ve(`${e.url}${n}`);return i.addParam("organizationId",e.organizationId),e.authentication&&i.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:i.href,origin:"searchApiFetch"}};var We=async(e,t)=>{let r=await xe.call({...Be(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:me(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=He(r),i=await r.arrayBuffer(),a=new TextDecoder(n).decode(i);return Ke(a)?{success:a}:{error:we({response:r,body:a})}};function Ke(e){return typeof e=="string"}function Ge(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function Je(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function Ze(e,t){if(t&&e.name==="AbortError")return{error:Je(e)};if(e instanceof Ce)return{error:Ge(e)};throw e}var Xe=class{constructor(e){this.options=e;this.apiCallsQueues={unknown:new Ne,mainSearch:new Ne,facetValues:new Ne,foldingCollection:new Ne,instantResults:new Ne}}async plan(e){let t=await xe.call({...Be(e,"POST","application/json","/plan"),requestParams:me(e),requestMetadata:{method:"plan"},...this.options});if(t instanceof Error)return Ze(t);let r=await t.json();return at(r)?{success:r}:{error:we({response:t,body:r})}}async querySuggest(e){let t=await xe.call({...Be(e,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:me(e),...this.options});if(t instanceof Error)return Ze(t);let r=await t.json(),n={response:t,body:r};return it(r)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:we(n)}}async search(e,t){let r=t?.origin??"unknown",n=await this.apiCallsQueues[r].enqueue((r=>xe.call({...Be(e,"POST","application/json",""),requestParams:me(e),requestMetadata:{method:"search",origin:t?.origin},...this.options,signal:r??void 0})),{logger:this.options.logger,warnOnAbort:!t?.disableAbortWarning});if(n instanceof Error)return Ze(n,t?.disableAbortWarning);let i=await n.json(),a={response:n,body:i};return rt(i)?(a.body=nt(i),{success:(await this.options.postprocessSearchResponseMiddleware(a)).body}):{error:we(a)}}async facetSearch(e){let t=await xe.call({...Be(e,"POST","application/json","/facet"),requestParams:me(e),requestMetadata:{method:"facetSearch"},...this.options});if(t instanceof Error)throw t;let r=await t.json(),n={response:t,body:r};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){let t=await xe.call({...Be(e,"POST","application/json",""),requestParams:me(e),requestMetadata:{method:"recommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();if(rt(r)){let e={response:t,body:r};return e.body=nt(r),{success:(await this.options.postprocessSearchResponseMiddleware(e)).body}}return{error:we({response:t,body:r})}}async html(e){return We(e,{...this.options})}async productRecommendations(e){let t=await xe.call({...Be(e,"POST","application/json",""),requestParams:me(e),requestMetadata:{method:"productRecommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return rt(r)?{success:r}:{error:we({response:t,body:r})}}async fieldDescriptions(e){let t=await xe.call({...Be(e,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return ot(r)?{success:r}:{error:we({response:t,body:r})}}},et=e=>e.success!==void 0,tt=e=>e.error!==void 0;function rt(e){return e.results!==void 0}function nt(e){let t=ve();return z(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function it(e){return e.completions!==void 0}function at(e){return e.preprocessingOutput!==void 0}function ot(e){return e.fields!==void 0}var ut=e=>e,st=e=>e,ct=e=>e;function lt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var dt=typeof Symbol=="function"&&Symbol.observable||"@@observable",ft=dt,ht=()=>Math.random().toString(36).substring(7).split("").join("."),pt={INIT:`@@redux/INIT${ht()}`,REPLACE:`@@redux/REPLACE${ht()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ht()}`},yt=pt;function vt(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function gt(e,t,r){if(typeof e!="function")throw new Error(lt(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(lt(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(lt(1));return r(gt)(e,t)}let n=e,i=t,a=new Map,o=a,u=0,s=!1;function c(){o===a&&(o=new Map,a.forEach(((e,t)=>{o.set(t,e)})))}function l(){if(s)throw new Error(lt(3));return i}function d(e){if(typeof e!="function")throw new Error(lt(4));if(s)throw new Error(lt(5));let t=!0;c();let r=u++;return o.set(r,e),function(){if(t){if(s)throw new Error(lt(6));t=!1,c(),o.delete(r),a=null}}}function f(e){if(!vt(e))throw new Error(lt(7));if(typeof e.type>"u")throw new Error(lt(8));if(typeof e.type!="string")throw new Error(lt(17));if(s)throw new Error(lt(9));try{s=!0,i=n(i,e)}finally{s=!1}return(a=o).forEach((e=>{e()})),e}function h(e){if(typeof e!="function")throw new Error(lt(10));n=e,f({type:yt.REPLACE})}function p(){let e=d;return{subscribe(t){if(typeof t!="object"||t===null)throw new Error(lt(11));function r(){let e=t;e.next&&e.next(l())}return r(),{unsubscribe:e(r)}},[ft](){return this}}}return f({type:yt.INIT}),{dispatch:f,subscribe:d,getState:l,replaceReducer:h,[ft]:p}}function mt(e){Object.keys(e).forEach((t=>{let r=e[t];if(typeof r(void 0,{type:yt.INIT})>"u")throw new Error(lt(12));if(typeof r(void 0,{type:yt.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(lt(13))}))}function wt(e){let t=Object.keys(e),r={};for(let n=0;n<t.length;n++){let i=t[n];typeof e[i]=="function"&&(r[i]=e[i])}let n=Object.keys(r),i;try{mt(r)}catch(e){i=e}return function(e={},t){if(i)throw i;let a=!1,o={};for(let i=0;i<n.length;i++){let u=n[i],s=r[u],c=e[u],l=s(c,t);if(typeof l>"u"){throw new Error(lt(14))}o[u]=l,a=a||l!==c}return a=a||n.length!==Object.keys(e).length,a?o:e}}function bt(...e){return e.length===0?e=>e:e.length===1?e[0]:e.reduce(((e,t)=>(...r)=>e(t(...r))))}function St(...e){return t=>(r,n)=>{let i=t(r,n),a=()=>{throw new Error(lt(15))},o={getState:i.getState,dispatch:(e,...t)=>a(e,...t)},u=e.map((e=>e(o)));return a=bt(...u)(i.dispatch),{...i,dispatch:a}}}function qt(e){return vt(e)&&"type"in e&&typeof e.type=="string"}var Ot=Symbol.for("immer-nothing"),kt=Symbol.for("immer-draftable"),It=Symbol.for("immer-state");function At(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Rt=Object.getPrototypeOf;function Ct(e){return!!e&&!!e[It]}function jt(e){return e?Dt(e)||Array.isArray(e)||!!e[kt]||!!e.constructor?.[kt]||_t(e)||Qt(e):!1}var Tt=Object.prototype.constructor.toString();function Dt(e){if(!e||typeof e!="object")return!1;let t=Rt(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Tt}function Mt(e){return Ct(e)||At(15,e),e[It].base_}function xt(e,t){Et(e)===0?Object.entries(e).forEach((([r,n])=>{t(r,n,e)})):e.forEach(((r,n)=>t(n,r,e)))}function Et(e){let t=e[It];return t?t.type_:Array.isArray(e)?1:_t(e)?2:Qt(e)?3:0}function Pt(e,t){return Et(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ft(e,t){return Et(e)===2?e.get(t):e[t]}function Ut(e,t,r){let n=Et(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function $t(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function _t(e){return e instanceof Map}function Qt(e){return e instanceof Set}function Nt(e){return e.copy_||e.base_}function Vt(e,t){if(_t(e))return new Map(e);if(Qt(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&Dt(e))return Rt(e)?{...e}:Object.assign(Object.create(null),e);let r=Object.getOwnPropertyDescriptors(e);delete r[It];let n=Reflect.ownKeys(r);for(let t=0;t<n.length;t++){let i=n[t],a=r[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Rt(e),r)}function Lt(e,t=!1){return Yt(e)||Ct(e)||!jt(e)||(Et(e)>1&&(e.set=e.add=e.clear=e.delete=zt),Object.freeze(e),t&&xt(e,((e,t)=>Lt(t,!0)))),e}function zt(){At(2)}function Yt(e){return Object.isFrozen(e)}var Ht={};function Bt(e){let t=Ht[e];return t||At(0,e),t}function Wt(e,t){Ht[e]||(Ht[e]=t)}var Kt;function Gt(){return Kt}function Jt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Zt(e,t){t&&(Bt("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Xt(e){er(e),e.drafts_.forEach(rr),e.drafts_=null}function er(e){e===Kt&&(Kt=e.parent_)}function tr(e){return Kt=Jt(Kt,e)}function rr(e){let t=e[It];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function nr(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[It].modified_&&(Xt(t),At(4)),jt(e)&&(e=ir(t,e),t.parent_||or(t,e)),t.patches_&&Bt("Patches").generateReplacementPatches_(r[It].base_,e,t.patches_,t.inversePatches_)):e=ir(t,r,[]),Xt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ot?e:void 0}function ir(e,t,r){if(Yt(t))return t;let n=t[It];if(!n)return xt(t,((i,a)=>ar(e,n,t,i,a,r))),t;if(n.scope_!==e)return t;if(!n.modified_)return or(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let t=n.copy_,i=t,a=!1;n.type_===3&&(i=new Set(t),t.clear(),a=!0),xt(i,((i,o)=>ar(e,n,t,i,o,r,a))),or(e,t,!1),r&&e.patches_&&Bt("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function ar(e,t,r,n,i,a,o){if(Ct(i)){let o=a&&t&&t.type_!==3&&!Pt(t.assigned_,n)?a.concat(n):void 0,u=ir(e,i,o);if(Ut(r,n,u),Ct(u))e.canAutoFreeze_=!1;else return}else o&&r.add(i);if(jt(i)&&!Yt(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ir(e,i),(!t||!t.scope_.parent_)&&or(e,i)}}function or(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Lt(t,r)}function ur(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Gt(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,a=sr;r&&(i=[n],a=cr);let{revoke:o,proxy:u}=Proxy.revocable(i,a);return n.draft_=u,n.revoke_=o,u}var sr={get(e,t){if(t===It)return e;let r=Nt(e);if(!Pt(r,t))return dr(e,r,t);let n=r[t];return e.finalized_||!jt(n)?n:n===lr(e.base_,t)?(pr(e),e.copy_[t]=vr(n,e)):n},has(e,t){return t in Nt(e)},ownKeys(e){return Reflect.ownKeys(Nt(e))},set(e,t,r){let n=fr(Nt(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let n=lr(Nt(e),t),i=n?.[It];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if($t(r,n)&&(r!==void 0||Pt(e.base_,t)))return!0;pr(e),hr(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return lr(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,pr(e),hr(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=Nt(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){At(11)},getPrototypeOf(e){return Rt(e.base_)},setPrototypeOf(){At(12)}},cr={};xt(sr,((e,t)=>{cr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}));cr.deleteProperty=function(e,t){return cr.set.call(this,e,t,void 0)};cr.set=function(e,t,r){return sr.set.call(this,e[0],t,r,e[0])};function lr(e,t){let r=e[It];return(r?Nt(r):e)[t]}function dr(e,t,r){let n=fr(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function fr(e,t){if(!(t in e))return;let r=Rt(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=Rt(r)}}function hr(e){e.modified_||(e.modified_=!0,e.parent_&&hr(e.parent_))}function pr(e){e.copy_||(e.copy_=Vt(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var yr=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){let r=t;t=e;let n=this;return function(e=r,...i){return n.produce(e,(e=>t.call(this,e,...i)))}}typeof t!="function"&&At(6),r!==void 0&&typeof r!="function"&&At(7);let n;if(jt(e)){let i=tr(this),a=vr(e,void 0),o=!0;try{n=t(a),o=!1}finally{o?Xt(i):er(i)}return Zt(i,r),nr(n,i)}else if(!e||typeof e!="object"){if(n=t(e),n===void 0&&(n=e),n===Ot&&(n=void 0),this.autoFreeze_&&Lt(n,!0),r){let t=[],i=[];Bt("Patches").generateReplacementPatches_(e,n,t,i),r(t,i)}return n}else At(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){jt(e)||At(8),Ct(e)&&(e=gr(e));let t=tr(this),r=vr(e,void 0);return r[It].isManual_=!0,er(t),r}finishDraft(e,t){let r=e&&e[It];(!r||!r.isManual_)&&At(9);let{scope_:n}=r;return Zt(n,t),nr(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));let n=Bt("Patches").applyPatches_;return Ct(e)?n(e,t):this.produce(e,(e=>n(e,t)))}};function vr(e,t){let r=_t(e)?Bt("MapSet").proxyMap_(e,t):Qt(e)?Bt("MapSet").proxySet_(e,t):ur(e,t);return(t?t.scope_:Gt()).drafts_.push(r),r}function gr(e){return Ct(e)||At(10,e),mr(e)}function mr(e){if(!jt(e)||Yt(e))return e;let t=e[It],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Vt(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Vt(e,!0);return xt(r,((e,t)=>{Ut(r,e,mr(t))})),t&&(t.finalized_=!1),r}function wr(){let e="replace",t="add",r="remove";function n(e,t,r,n){switch(e.type_){case 0:case 2:return a(e,t,r,n);case 1:return i(e,t,r,n);case 3:return o(e,t,r,n)}}function i(n,i,a,o){let{base_:u,assigned_:s}=n,c=n.copy_;c.length<u.length&&([u,c]=[c,u],[a,o]=[o,a]);for(let t=0;t<u.length;t++)if(s[t]&&c[t]!==u[t]){let r=i.concat([t]);a.push({op:e,path:r,value:l(c[t])}),o.push({op:e,path:r,value:l(u[t])})}for(let e=u.length;e<c.length;e++){let r=i.concat([e]);a.push({op:t,path:r,value:l(c[e])})}for(let e=c.length-1;u.length<=e;--e){let t=i.concat([e]);o.push({op:r,path:t})}}function a(n,i,a,o){let{base_:u,copy_:s}=n;xt(n.assigned_,((n,c)=>{let d=Ft(u,n),f=Ft(s,n),h=c?Pt(u,n)?e:t:r;if(d===f&&h===e)return;let p=i.concat(n);a.push(h===r?{op:h,path:p}:{op:h,path:p,value:f}),o.push(h===t?{op:r,path:p}:h===r?{op:t,path:p,value:l(d)}:{op:e,path:p,value:l(d)})}))}function o(e,n,i,a){let{base_:o,copy_:u}=e,s=0;o.forEach((e=>{if(!u.has(e)){let o=n.concat([s]);i.push({op:r,path:o,value:e}),a.unshift({op:t,path:o,value:e})}s++})),s=0,u.forEach((e=>{if(!o.has(e)){let o=n.concat([s]);i.push({op:t,path:o,value:e}),a.unshift({op:r,path:o,value:e})}s++}))}function u(t,r,n,i){n.push({op:e,path:[],value:r===Ot?void 0:r}),i.push({op:e,path:[],value:t})}function s(n,i){return i.forEach((i=>{let{path:a,op:o}=i,u=n;for(let e=0;e<a.length-1;e++){let t=Et(u),r=a[e];typeof r!="string"&&typeof r!="number"&&(r=""+r),(t===0||t===1)&&(r==="__proto__"||r==="constructor")&&At(19),typeof u=="function"&&r==="prototype"&&At(19),u=Ft(u,r),typeof u!="object"&&At(18,a.join("/"))}let s=Et(u),l=c(i.value),d=a[a.length-1];switch(o){case e:switch(s){case 2:return u.set(d,l);case 3:At(16);default:return u[d]=l}case t:switch(s){case 1:return d==="-"?u.push(l):u.splice(d,0,l);case 2:return u.set(d,l);case 3:return u.add(l);default:return u[d]=l}case r:switch(s){case 1:return u.splice(d,1);case 2:return u.delete(d);case 3:return u.delete(i.value);default:return delete u[d]}default:At(17,o)}})),n}function c(e){if(!jt(e))return e;if(Array.isArray(e))return e.map(c);if(_t(e))return new Map(Array.from(e.entries()).map((([e,t])=>[e,c(t)])));if(Qt(e))return new Set(Array.from(e).map(c));let t=Object.create(Rt(e));for(let r in e)t[r]=c(e[r]);return Pt(e,kt)&&(t[kt]=e[kt]),t}function l(e){return Ct(e)?c(e):e}Wt("Patches",{applyPatches_:s,generatePatches_:n,generateReplacementPatches_:u})}var br=new yr,Sr=br.produce,qr=br.produceWithPatches.bind(br);br.setAutoFreeze.bind(br);br.setUseStrictShallowCopy.bind(br);var Or=br.applyPatches.bind(br);br.createDraft.bind(br);br.finishDraft.bind(br);function kr(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Ir(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Ar(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>typeof e=="function"))){let r=e.map((e=>typeof e=="function"?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${r}]`)}}var Rr=e=>Array.isArray(e)?e:[e];function Cr(e){let t=Array.isArray(e[0])?e[0]:e;return Ar(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function jr(e,t){let r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var Tr=class{constructor(e){this.value=e}deref(){return this.value}},Dr=typeof WeakRef<"u"?WeakRef:Tr,Mr=0,xr=1;function Er(){return{s:Mr,v:void 0,o:null,p:null}}function Pr(e,t={}){let r=Er(),{resultEqualityCheck:n}=t,i,a=0;function o(){let t=r,{length:o}=arguments;for(let e=0,r=o;e<r;e++){let r=arguments[e];if(typeof r=="function"||typeof r=="object"&&r!==null){let e=t.o;e===null&&(t.o=e=new WeakMap);let n=e.get(r);n===void 0?(t=Er(),e.set(r,t)):t=n}else{let e=t.p;e===null&&(t.p=e=new Map);let n=e.get(r);n===void 0?(t=Er(),e.set(r,t)):t=n}}let u=t,s;if(t.s===xr?s=t.v:(s=e.apply(null,arguments),a++),u.s=xr,n){let e=i?.deref?.()??i;e!=null&&n(e,s)&&(s=e,a!==0&&a--),i=typeof s=="object"&&s!==null||typeof s=="function"?new Dr(s):s}return u.v=s,s}return o.clearCache=()=>{r=Er(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function Fr(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t=0,n=0,i,a={},o=e.pop();typeof o=="object"&&(a=o,o=e.pop()),kr(o,`createSelector expects an output function after the inputs, but received: [${typeof o}]`);let u={...r,...a},{memoize:s,memoizeOptions:c=[],argsMemoize:l=Pr,argsMemoizeOptions:d=[],devModeChecks:f={}}=u,h=Rr(c),p=Rr(d),y=Cr(e),v=s((function(){return t++,o.apply(null,arguments)}),...h),g=l((function(){n++;let e=jr(y,arguments);return i=v.apply(null,e),i}),...p);return Object.assign(g,{resultFunc:o,memoizedResultFunc:v,dependencies:y,dependencyRecomputations:()=>n,resetDependencyRecomputations:()=>{n=0},lastResult:()=>i,recomputations:()=>t,resetRecomputations:()=>{t=0},memoize:s,argsMemoize:l})};return Object.assign(n,{withTypes:()=>n}),n}var Ur=Fr(Pr),$r=Object.assign(((e,t=Ur)=>{Ir(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map((t=>e[t]));return t(n,((...e)=>e.reduce(((e,t,n)=>(e[r[n]]=t,e)),{})))}),{withTypes:()=>$r});function _r(e){return({dispatch:t,getState:r})=>n=>i=>typeof i=="function"?i(t,r,e):n(i)}var Qr=_r(),Nr=_r;var Vr=(...e)=>{let t=Fr(...e),r=Object.assign(((...e)=>{let r=t(...e),n=(e,...t)=>r(Ct(e)?gr(e):e,...t);return Object.assign(n,r),n}),{withTypes:()=>r});return r};Vr(Pr);var Lr=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?bt:bt.apply(null,arguments)},zr=e=>e&&typeof e.match=="function";function Yr(e,t){function r(...r){if(t){let n=t(...r);if(!n)throw new Error(Yn(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:r[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>qt(t)&&t.type===e,r}var Hr=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function Br(e){return jt(e)?Sr(e,(()=>{})):e}function Wr(e,t,r){if(e.has(t)){let n=e.get(t);return r.update&&(n=r.update(n,t,e),e.set(t,n)),n}if(!r.insert)throw new Error(Yn(10));let n=r.insert(t,e);return e.set(t,n),n}function Kr(e){return typeof e=="boolean"}var Gr=()=>function(e){let{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=e??{},a=new Hr;return t&&(Kr(t)?a.push(Qr):a.push(Nr(t.extraArgument))),a},Jr="RTK_autoBatch",Zr=()=>e=>({payload:e,meta:{[Jr]:!0}}),Xr=e=>t=>{setTimeout(t,e)},en=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Xr(10),tn=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),i=!0,a=!1,o=!1,u=new Set,s=e.type==="tick"?queueMicrotask:e.type==="raf"?en:e.type==="callback"?e.queueNotification:Xr(e.timeout),c=()=>{o=!1,a&&(a=!1,u.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){let t=()=>i&&e(),r=n.subscribe(t);return u.add(e),()=>{r(),u.delete(e)}},dispatch(e){try{return i=!e?.meta?.[Jr],a=!i,a&&(o||(o=!0,s(c))),n.dispatch(e)}finally{i=!0}}})},rn=e=>function(t){let{autoBatch:r=!0}=t??{},n=new Hr(e);return r&&n.push(tn(typeof r=="object"?r:void 0)),n},nn=!0;function an(e){let t=Gr(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=e||{},u;if(typeof r=="function")u=r;else if(vt(r))u=wt(r);else throw new Error(Yn(1));let s;if(typeof n=="function"){if(s=n(t),!nn);}else s=t();let c=bt;i&&(c=Lr({trace:!nn,...typeof i=="object"&&i}));let l=St(...s),d=rn(l);let f=typeof o=="function"?o(d):d();let h=c(...f);return gt(u,a,h)}function on(e){let t={},r=[],n,i={addCase(e,r){let n=typeof e=="string"?e:e.type;if(!n)throw new Error(Yn(28));if(n in t)throw new Error(Yn(29));return t[n]=r,i},addMatcher(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase(e){return n=e,i}};return e(i),[t,r,n]}function un(e){return typeof e=="function"}function sn(e,t){let[r,n,i]=on(t),a;if(un(e))a=()=>Br(e());else{let t=Br(e);a=()=>t}function o(e=a(),t){let o=[r[t.type],...n.filter((({matcher:e})=>e(t))).map((({reducer:e})=>e))];return o.filter((e=>!!e)).length===0&&(o=[i]),o.reduce(((e,r)=>{if(r)if(Ct(e)){let n=r(e,t);return n===void 0?e:n}else{if(jt(e))return Sr(e,(e=>r(e,t)));{let n=r(e,t);if(n===void 0){if(e===null)return e;throw new Error(Yn(9))}return n}}return e}),e)}return o.getInitialState=a,o}var cn="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ln=(e=21)=>{let t="",r=e;for(;r--;)t+=cn[Math.random()*64|0];return t},dn=(e,t)=>zr(e)?e.match(t):e(t);function fn(...e){return t=>e.some((e=>dn(e,t)))}function hn(...e){return t=>e.every((e=>dn(e,t)))}function pn(e,t){if(!e||!e.meta)return!1;let r=typeof e.meta.requestId=="string",n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function yn(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function vn(...e){return e.length===0?e=>pn(e,["pending"]):yn(e)?fn(...e.map((e=>e.pending))):vn()(e[0])}function gn(...e){return e.length===0?e=>pn(e,["rejected"]):yn(e)?fn(...e.map((e=>e.rejected))):gn()(e[0])}function mn(...e){let t=e=>e&&e.meta&&e.meta.rejectedWithValue;return e.length===0?hn(gn(...e),t):yn(e)?hn(gn(...e),t):mn()(e[0])}function wn(...e){return e.length===0?e=>pn(e,["fulfilled"]):yn(e)?fn(...e.map((e=>e.fulfilled))):wn()(e[0])}function bn(...e){return e.length===0?e=>pn(e,["pending","fulfilled","rejected"]):yn(e)?fn(...e.flatMap((e=>[e.pending,e.rejected,e.fulfilled]))):bn()(e[0])}var Sn=["name","message","stack","code"],qn=class{constructor(e,t){f(this,"_type");this.payload=e,this.meta=t}},On=class{constructor(e,t){f(this,"_type");this.payload=e,this.meta=t}},kn=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of Sn)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},In=(()=>{function e(e,t,r){let n=Yr(e+"/fulfilled",((e,t,r,n)=>({payload:e,meta:{...n||{},arg:r,requestId:t,requestStatus:"fulfilled"}}))),i=Yr(e+"/pending",((e,t,r)=>({payload:void 0,meta:{...r||{},arg:t,requestId:e,requestStatus:"pending"}}))),a=Yr(e+"/rejected",((e,t,n,i,a)=>({payload:i,error:(r&&r.serializeError||kn)(e||"Rejected"),meta:{...a||{},arg:n,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:e?.name==="AbortError",condition:e?.name==="ConditionError"}})));function o(e){return(o,u,s)=>{let c=r?.idGenerator?r.idGenerator(e):ln(),l=new AbortController,d,f;function h(e){f=e,l.abort()}let p=async function(){let p;try{let a=r?.condition?.(e,{getState:u,extra:s});if(Rn(a)&&(a=await a),a===!1||l.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let y=new Promise(((e,t)=>{d=()=>{t({name:"AbortError",message:f||"Aborted"})},l.signal.addEventListener("abort",d)}));o(i(c,e,r?.getPendingMeta?.({requestId:c,arg:e},{getState:u,extra:s}))),p=await Promise.race([y,Promise.resolve(t(e,{dispatch:o,getState:u,extra:s,requestId:c,signal:l.signal,abort:h,rejectWithValue:(e,t)=>new qn(e,t),fulfillWithValue:(e,t)=>new On(e,t)})).then((t=>{if(t instanceof qn)throw t;return t instanceof On?n(t.payload,c,e,t.meta):n(t,c,e)}))])}catch(t){p=t instanceof qn?a(null,c,e,t.payload,t.meta):a(t,c,e)}finally{d&&l.signal.removeEventListener("abort",d)}return r&&!r.dispatchConditionRejection&&a.match(p)&&p.meta.condition||o(p),p}();return Object.assign(p,{abort:h,requestId:c,arg:e,unwrap(){return p.then(An)}})}}return Object.assign(o,{pending:i,rejected:a,fulfilled:n,settled:fn(a,n),typePrefix:e})}return e.withTypes=()=>e,e})();function An(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Rn(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Cn=Symbol.for("rtk-slice-createasyncthunk");function jn(e,t){return`${e}/${t}`}function Tn({creators:e}={}){let t=e?.asyncThunk?.[Cn];return function(e){let{name:r,reducerPath:n=r}=e;if(!r)throw new Error(Yn(11));let i=(typeof e.reducers=="function"?e.reducers(xn()):e.reducers)||{},a=Object.keys(i),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(e,t){let r=typeof e=="string"?e:e.type;if(!r)throw new Error(Yn(12));if(r in o.sliceCaseReducersByType)throw new Error(Yn(13));return o.sliceCaseReducersByType[r]=t,u},addMatcher(e,t){return o.sliceMatchers.push({matcher:e,reducer:t}),u},exposeAction(e,t){return o.actionCreators[e]=t,u},exposeCaseReducer(e,t){return o.sliceCaseReducersByName[e]=t,u}};a.forEach((n=>{let a=i[n],o={reducerName:n,type:jn(r,n),createNotation:typeof e.reducers=="function"};Pn(a)?Un(o,a,u,t):En(o,a,u)}));function s(){let[t={},r=[],n=void 0]=typeof e.extraReducers=="function"?on(e.extraReducers):[e.extraReducers],i={...t,...o.sliceCaseReducersByType};return sn(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of o.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)}))}let c=e=>e,l=new Map,d;function f(e,t){return d||(d=s()),d(e,t)}function h(){return d||(d=s()),d.getInitialState()}function p(t,r=!1){function n(e){let n=e[t];return typeof n>"u"&&r&&(n=h()),n}function i(t=c){let n=Wr(l,r,{insert:()=>new WeakMap});return Wr(n,t,{insert:()=>{let n={};for(let[i,a]of Object.entries(e.selectors??{}))n[i]=Dn(a,t,h,r);return n}})}return{reducerPath:t,getSelectors:i,get selectors(){return i(n)},selectSlice:n}}let y={name:r,reducer:f,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:h,...p(n),injectInto(e,{reducerPath:t,...r}={}){let i=t??n;return e.inject({reducerPath:i,reducer:f},r),{...y,...p(i,!0)}}};return y}}function Dn(e,t,r,n){function i(i,...a){let o=t(i);return typeof o>"u"&&n&&(o=r()),e(o,...a)}return i.unwrapped=e,i}var Mn=Tn();function xn(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:e}}function En({type:e,reducerName:t,createNotation:r},n,i){let a,o;if("reducer"in n){if(r&&!Fn(n))throw new Error(Yn(17));a=n.reducer,o=n.prepare}else a=n;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,o?Yr(e,o):Yr(e))}function Pn(e){return e._reducerDefinitionType==="asyncThunk"}function Fn(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Un({type:e,reducerName:t},r,n,i){if(!i)throw new Error(Yn(18));let{payloadCreator:a,fulfilled:o,pending:u,rejected:s,settled:c,options:l}=r,d=i(e,a,l);n.exposeAction(t,d),o&&n.addCase(d.fulfilled,o),u&&n.addCase(d.pending,u),s&&n.addCase(d.rejected,s),c&&n.addMatcher(d.settled,c),n.exposeCaseReducer(t,{fulfilled:o||$n,pending:u||$n,rejected:s||$n,settled:c||$n})}function $n(){}var _n=(e,t)=>{if(typeof e!="function")throw new Error(Yn(32))};var Qn="listenerMiddleware";var Nn=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:a}=e;if(t)i=Yr(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(Yn(21));return _n(a),{predicate:i,type:t,effect:a}},Vn=Object.assign((e=>{let{type:t,predicate:r,effect:n}=Nn(e);return{id:ln(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Yn(22))}}}),{withTypes:()=>Vn});var Ln=Object.assign(Yr(`${Qn}/add`),{withTypes:()=>Ln});Yr(`${Qn}/removeAll`);var zn=Object.assign(Yr(`${Qn}/remove`),{withTypes:()=>zn});function Yn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Hn=new Z({required:!0,emptyAllowed:!1}),Bn=new Z({required:!1,emptyAllowed:!1}),Wn=new Z({required:!0,emptyAllowed:!0});new Z({required:!1,emptyAllowed:!0});var Kn=new re({each:Hn,required:!0}),Gn=new Z({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),Jn=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),Zn=(e,t)=>{if("required"in t)return{payload:new Q({value:t}).validate({value:e}).value};let r=new ee({options:{required:!0},values:t}).validate(e);if(r)throw new _(r);return{payload:e}},Xn=(e,t)=>{try{return Zn(e,t)}catch(t){return{payload:e,error:Jn(t)}}},ei=(e,t,r,n)=>{let i=`Check the options of ${n}`;return ti(e,t,r,i,"Controller initialization error")},ti=(e,t,r,n,i)=>{try{return t.validate(r,n)}catch(t){throw e.logger.error(t,i),t}};var ri="2.73.0-pre.a389b402e2",ni=["@coveo/atomic","@coveo/quantic"];var ii=()=>Bn,ai=()=>Hn,oi=Yr("configuration/updateBasicConfiguration",(e=>Xn(e,{accessToken:Bn,organizationId:Bn,platformUrl:Bn}))),ui=Yr("configuration/updateSearchConfiguration",(e=>Xn(e,{apiBaseUrl:Bn,pipeline:new Z({required:!1,emptyAllowed:!0}),searchHub:Bn,timezone:Bn,locale:Bn,authenticationProviders:new re({required:!1,each:Hn})}))),si={enabled:new W({default:!0}),originContext:ii(),originLevel2:ii(),originLevel3:ii(),apiBaseUrl:Bn,nextApiBaseUrl:Bn,runtimeEnvironment:new N,anonymous:new W({default:!1}),deviceId:Bn,userDisplayName:Bn,documentLocation:Bn,trackingId:Bn,analyticsMode:new Z({constrainTo:["legacy","next"],required:!1,default:"legacy"}),source:new ee({options:{required:!1},values:ni.reduce(((e,t)=>(e[t]=Gn,e)),{})})},ci=Yr("configuration/updateAnalyticsConfiguration",(e=>Xn(e,si))),li=Yr("configuration/analytics/disable"),di=Yr("configuration/analytics/enable"),fi=Yr("configuration/analytics/originlevel2",(e=>Xn(e,{originLevel2:ai()}))),hi=Yr("configuration/analytics/originlevel3",(e=>Xn(e,{originLevel3:ai()})));var pi={q:new Z,enableQuerySyntax:new W,aq:new Z,cq:new Z,firstResult:new Y({min:0}),numberOfResults:new Y({min:0}),sortCriteria:new Z,f:new ee,fExcluded:new ee,cf:new ee,nf:new ee,df:new ee,debug:new W,sf:new ee,tab:new Z,af:new ee};var yi=Yr("searchParameters/restore",(e=>Xn(e,pi)));var vi=Yr("debug/enable"),gi=Yr("debug/disable");var mi=()=>!1;var wi=sn(mi(),(e=>{e.addCase(vi,(()=>!0)).addCase(gi,(()=>!1)).addCase(yi,((e,t)=>t.payload.debug??e))}));var bi=Yr("pipeline/set",(e=>Xn(e,new Z({required:!0,emptyAllowed:!0}))));var Si=Yr("history/undo"),qi=Yr("history/redo"),Oi=Yr("history/snapshot");In("history/back",(async(e,{dispatch:t})=>{t(Si()),await t(ki())}));In("history/forward",(async(e,{dispatch:t})=>{t(qi()),await t(ki())}));var ki=In("history/change",(async(e,{getState:t})=>t().history.present));var Ii=()=>"";var Ai=sn(Ii(),(e=>{e.addCase(bi,((e,t)=>t.payload)).addCase(ki.fulfilled,((e,t)=>t.payload?.pipeline??e)).addCase(ui,((e,t)=>t.payload.pipeline||e))}));function Ri(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Ci(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){e.done?r(e.value):i(e.value).then(o,u)}s((n=n.apply(e,t||[])).next())}))}var ji;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(ji||(ji={}));function Ti(){return typeof window<"u"}function Di(){return typeof navigator<"u"}function Mi(){return typeof document<"u"}function xi(){try{return typeof localStorage<"u"}catch{return!1}}function Ei(){try{return typeof sessionStorage<"u"}catch{return!1}}function Pi(){return Di()&&navigator.cookieEnabled}var Fi=[ji.click,ji.custom,ji.search,ji.view],Ui=(e,t)=>Fi.indexOf(e)!==-1?Object.assign({language:Mi()?document.documentElement.lang:"unknown",userAgent:Di()?navigator.userAgent:"unknown"},t):t,$i=class e{static set(e,t,r){var n,i,a,o;r&&(i=new Date,i.setTime(i.getTime()+r)),o=window.location.hostname,o.indexOf(".")===-1?_i(e,t,i):(a=o.split("."),n=a[a.length-2]+"."+a[a.length-1],_i(e,t,i,n))}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var i=r[n];if(i=i.replace(/^\s+/,""),i.lastIndexOf(t,0)===0)return i.substring(t.length,i.length)}return null}static erase(t){e.set(t,"",-1)}};function _i(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function Qi(){return xi()?localStorage:Pi()?new Ni:Ei()?sessionStorage:new Li}var Ni=class e{getItem(t){return $i.get(`${e.prefix}${t}`)}removeItem(t){$i.erase(`${e.prefix}${t}`)}setItem(t,r,n){$i.set(`${e.prefix}${t}`,r,n)}};Ni.prefix="coveo_";var Vi=class{constructor(){this.cookieStorage=new Ni}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t,31556926e3)}},Li=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},zi="__coveo.analytics.history",Yi=20,Hi=1e3*60,Bi=75,Wi=class{constructor(e){this.store=e||Qi()}addElement(e){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return Ci(this,void 0,void 0,(function*(){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}))}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return Ci(this,void 0,void 0,(function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))}))}getHistoryWithInternalTime(){try{let e=this.store.getItem(zi);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return Ci(this,void 0,void 0,(function*(){try{let e=yield this.store.getItem(zi);return e?JSON.parse(e):[]}catch{return[]}}))}setHistory(e){try{this.store.setItem(zi,JSON.stringify(e.slice(0,Yi)))}catch{}}clear(){try{this.store.removeItem(zi)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort(((e,t)=>(t.internalTime||0)-(e.internalTime||0)))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,Bi)),e}isValidEntry(e){let t=this.getMostRecentElement();return t&&t.value==e.value?(e.internalTime||0)-(t.internalTime||0)>Hi:!0}stripInternalTime(e){return Array.isArray(e)?e.map((e=>{let{name:t,time:r,value:n}=e;return{name:t,time:r,value:n}})):[]}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&typeof n=="string"&&t.toLowerCase()==="query"&&n.trim()===""?{name:t,time:r}:e}stripEmptyQueries(e){return e.map((e=>this.stripEmptyQuery(e)))}},Ki=Object.freeze({__proto__:null,HistoryStore:Wi,MAX_NUMBER_OF_HISTORY_ELEMENTS:Yi,MAX_VALUE_SIZE:Bi,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:Hi,STORE_KEY:zi,default:Wi}),Gi=(e,t)=>Ci(void 0,void 0,void 0,(function*(){return e===ji.view?(yield Ji(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t})),Ji=e=>Ci(void 0,void 0,void 0,(function*(){let t=new Wi,r={name:"PageView",value:e,time:(new Date).toISOString()};yield t.addElementAsync(r)})),Zi,Xi=new Uint8Array(16);function ea(){if(!Zi&&(Zi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Zi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zi(Xi)}var ta=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ra(e){return typeof e=="string"&&ta.test(e)}var na=[];for(let e=0;e<256;++e)na.push((e+256).toString(16).slice(1));function ia(e,t=0){return(na[e[t+0]]+na[e[t+1]]+na[e[t+2]]+na[e[t+3]]+"-"+na[e[t+4]]+na[e[t+5]]+"-"+na[e[t+6]]+na[e[t+7]]+"-"+na[e[t+8]]+na[e[t+9]]+"-"+na[e[t+10]]+na[e[t+11]]+na[e[t+12]]+na[e[t+13]]+na[e[t+14]]+na[e[t+15]]).toLowerCase()}function aa(e){if(!ra(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function oa(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var ua="6ba7b810-9dad-11d1-80b4-00c04fd430c8",sa="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ca(e,t,r){function n(e,n,i,a){var o;if(typeof e=="string"&&(e=oa(e)),typeof n=="string"&&(n=aa(n)),((o=n)===null||o===void 0?void 0:o.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(n),u.set(e,n.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,i){a=a||0;for(let e=0;e<16;++e)i[a+e]=u[e];return i}return ia(u)}try{n.name=e}catch{}return n.DNS=ua,n.URL=sa,n}var la=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),da={randomUUID:la};function fa(e,t,r){if(da.randomUUID&&!t&&!e)return da.randomUUID();e=e||{};let n=e.random||(e.rng||ea)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return ia(n)}function ha(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function pa(e,t){return e<<t|e>>>32-t}function ya(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,i=Math.ceil(n/16),a=new Array(i);for(let t=0;t<i;++t){let r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[t*64+n*4]<<24|e[t*64+n*4+1]<<16|e[t*64+n*4+2]<<8|e[t*64+n*4+3];a[t]=r}a[i-1][14]=(e.length-1)*8/Math.pow(2,32),a[i-1][14]=Math.floor(a[i-1][14]),a[i-1][15]=(e.length-1)*8&4294967295;for(let e=0;e<i;++e){let n=new Uint32Array(80);for(let t=0;t<16;++t)n[t]=a[e][t];for(let e=16;e<80;++e)n[e]=pa(n[e-3]^n[e-8]^n[e-14]^n[e-16],1);let i=r[0],o=r[1],u=r[2],s=r[3],c=r[4];for(let e=0;e<80;++e){let r=Math.floor(e/20),a=pa(i,5)+ha(r,o,u,s)+c+t[r]+n[e]>>>0;c=s,s=u,u=pa(o,30)>>>0,o=i,i=a}r[0]=r[0]+i>>>0,r[1]=r[1]+o>>>0,r[2]=r[2]+u>>>0,r[3]=r[3]+s>>>0,r[4]=r[4]+c>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var va=ca("v5",80,ya),ga=va,ma="2.30.6",wa={pageview:"pageview",event:"event"},ba=class e{constructor(e,t){if(!ra(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(t/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(e,t){return!this.expired&&this.matchReferrer(e,t)}matchReferrer(e,t){try{let r=new URL(e);return t.some((e=>new RegExp(e.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(r.host)))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,i]=r;if(n.length!==32||isNaN(parseInt(i)))return null;let a=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return ra(a)?new e(a,Number.parseInt(i)*1e3):null}};ba.cvo_cid="cvo_cid";ba.expirationTime=120;var Sa=Object.keys;function qa(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var Oa={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},ka=Sa(Oa).map((e=>Oa[e])),Ia=[...ka].join("|"),Aa=new RegExp(`^(${Ia}$)`),Ra={svcAction:"svc_action",svcActionData:"svc_action_data"},Ca=e=>Aa.test(e),ja=[Ca],Ta={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Da={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Ma={action:"pa",list:"pal",listSource:"pls"},xa={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},Ea=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Pa={id:"quoteId",affiliation:"quoteAffiliation"},Fa={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},Ua={add:Ma,bookmark_add:Ma,bookmark_remove:Ma,click:Ma,checkout:Ma,checkout_option:Ma,detail:Ma,impression:Ma,remove:Ma,refund:Object.assign(Object.assign({},Ma),xa),purchase:Object.assign(Object.assign({},Ma),xa),quickview:Ma,quote:Object.assign(Object.assign({},Ma),Pa),review:Object.assign(Object.assign({},Ma),Fa)},$a=Sa(Ta).map((e=>Ta[e])),_a=Sa(Da).map((e=>Da[e])),Qa=Sa(Ma).map((e=>Ma[e])),Na=Sa(xa).map((e=>xa[e])),Va=Sa(Fa).map((e=>Fa[e])),La=Sa(Pa).map((e=>Pa[e])),za=[...$a,"custom"].join("|"),Ya=[..._a,"custom"].join("|"),Ha="(pr[0-9]+)",Ba="(il[0-9]+pi[0-9]+)",Wa=new RegExp(`^${Ha}(${za})$`),Ka=new RegExp(`^(${Ba}(${Ya}))|(il[0-9]+nm)$`),Ga=new RegExp(`^(${Qa.join("|")})$`),Ja=new RegExp(`^(${Na.join("|")})$`),Za=new RegExp(`^${Ha}custom$`),Xa=new RegExp(`^${Ba}custom$`),eo=new RegExp(`^(${[...Ea,...Va,...La].join("|")})$`),to=e=>Wa.test(e),ro=e=>Ka.test(e),no=e=>Ga.test(e),io=e=>Ja.test(e),ao=e=>eo.test(e),oo=[ro,to,no,io,ao],uo=[Za,Xa],so={anonymizeIp:"aip"},co={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},lo={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},fo=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],ho=Object.assign(Object.assign(Object.assign(Object.assign({},so),co),lo),fo.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:t})),{})),po=Object.assign(Object.assign({},ho),Ra),yo=e=>{let t=!!e.action&&Ua[e.action]||{};return Sa(e).reduce(((r,n)=>{let i=t[n]||po[n]||n;return Object.assign(Object.assign({},r),{[i]:e[n]})}),{})},vo=Sa(po).map((e=>po[e])),go=e=>vo.indexOf(e)!==-1,mo=e=>e==="custom",wo=e=>[...oo,...ja,go,mo].some((t=>t(e))),bo=e=>Sa(e).reduce(((t,r)=>{let n=So(r);return n?Object.assign(Object.assign({},t),qo(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})}),{}),So=e=>{let t;return[...uo].every((r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t})),t},qo=(e,t)=>Sa(t).reduce(((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]})),{}),Oo=class{constructor(e){this.opts=e}sendEvent(e,t){return Ci(this,void 0,void 0,(function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,i=yield this.getQueryParamsForEventType(e),{url:a,payload:o}=yield this.preProcessRequestAsPotentialJSONString(`${r}/analytics/${e}?${i}`,t,n),u=this.encodeForEventType(e,o),s=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(a,s)}))}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,t,r){return Ci(this,void 0,void 0,(function*(){let n=e,i=t;if(r){let a=yield r({url:e,body:JSON.stringify(t)},"analyticsBeacon"),{url:o,body:u}=a;n=o||e;try{i=JSON.parse(u)}catch(e){console.error("Unable to process the request body as a JSON string",e)}}return{payload:i,url:n}}))}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeEventToJson(e,t):this.encodeEventToJson(e,t,this.opts.token)}getQueryParamsForEventType(e){return Ci(this,void 0,void 0,(function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter((e=>!!e)).join("&")}))}isEventTypeLegacy(e){return[ji.click,ji.custom,ji.search,ji.view].indexOf(e)!==-1}encodeEventToJson(e,t,r){let n=`${e}Event=${encodeURIComponent(JSON.stringify(t))}`;return r&&(n=`access_token=${encodeURIComponent(r)}&${n}`),n}},ko=class{sendEvent(e,t){return Ci(this,void 0,void 0,(function*(){return Promise.resolve()}))}deleteHttpCookieVisitorId(){return Ci(this,void 0,void 0,(function*(){return Promise.resolve()}))}},Io=window.fetch,Ao=class{constructor(e){this.opts=e}sendEvent(e,t){return Ci(this,void 0,void 0,(function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:i}=this.opts,a=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",o={url:`${r}/analytics/${e}${a}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},u=Object.assign(Object.assign({},o),i?yield i(o,"analyticsFetch"):{}),{url:s}=u,c=Ri(u,["url"]),l;try{l=yield Io(s,c)}catch(e){console.error("An error has occured when sending the event.",e);return}if(l.ok){let e=yield l.json();return e.visitorId&&n.setCurrentVisitorId(e.visitorId),e}else{try{l.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,l,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}}))}deleteHttpCookieVisitorId(){return Ci(this,void 0,void 0,(function*(){let{baseUrl:e}=this.opts,t=`${e}/analytics/visit`;yield Io(t,{headers:this.getHeaders(),method:"DELETE"})}))}shouldAppendVisitorId(e){return[ji.click,ji.custom,ji.search,ji.view].indexOf(e)!==-1}getVisitorIdParam(){return Ci(this,void 0,void 0,(function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""}))}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},Ro=class{constructor(e,t){xi()&&Pi()?this.storage=new Vi:xi()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new Li),this.client=new Ao(e),this.beaconClient=new Oo(e),window.addEventListener("beforeunload",(()=>{let e=t();for(let{eventType:t,payload:r}of e)this.beaconClient.sendEvent(t,r)}))}getClientDependingOnEventType(e){return e==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},Co=class{constructor(e,t){this.storage=t||new Li,this.client=new Ao(e)}getClientDependingOnEventType(e){return this.client}},jo=class{constructor(){this.storage=new Li,this.client=new ko}getClientDependingOnEventType(e){return this.client}},To="xx",Do=e=>e?.startsWith(To)||!1,Mo=`\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please use the "coveo.analytics/react-native" subpackage.\n        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native\n    `;function xo(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var Eo=["1",1,"yes",!0];function Po(){return Di()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some((e=>Eo.indexOf(e)!==-1))}var Fo="v15",Uo={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function $o(e=Uo.default,t=Fo,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var _o="38824e1f-37f5-42d3-8372-a4b8fa9df946",Qo=class{get defaultOptions(){return{endpoint:Uo.default,isCustomEndpoint:!1,token:"",version:Fo,beforeSendHooks:[],afterSendHooks:[]}}get version(){return ma}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[Gi,Ui].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};Po()?this.runtime=new jo:this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),this.addEventTypeMapping(ji.view,{newEventType:ji.view,addClientIdParameter:!0}),this.addEventTypeMapping(ji.click,{newEventType:ji.click,addClientIdParameter:!0}),this.addEventTypeMapping(ji.custom,{newEventType:ji.custom,addClientIdParameter:!0}),this.addEventTypeMapping(ji.search,{newEventType:ji.search,addClientIdParameter:!0})}initRuntime(e){return Ti()&&Mi()?new Ro(e,(()=>{let e=[...this.bufferedRequests];return this.bufferedRequests=[],e})):(xo()&&console.warn(Mo),new Co(e))}get storage(){return this.runtime.storage}determineVisitorId(){return Ci(this,void 0,void 0,(function*(){try{return Ti()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||fa()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),fa()}}))}getCurrentVisitorId(){return Ci(this,void 0,void 0,(function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId}))}setCurrentVisitorId(e){return Ci(this,void 0,void 0,(function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)}))}setClientId(e,t){return Ci(this,void 0,void 0,(function*(){if(ra(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!t)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(ga(e,ga(t,_o)))}}))}getParameters(e,...t){return Ci(this,void 0,void 0,(function*(){return yield this.resolveParameters(e,...t)}))}getPayload(e,...t){return Ci(this,void 0,void 0,(function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)}))}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(fa()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(Po())return null;try{let t=new URL(e).searchParams.get(ba.cvo_cid);if(t==null)return null;let r=ba.fromString(t);return!r||!Mi()||!r.validate(document.referrer,this.acceptedLinkReferrers)?null:r.clientId}catch{}return null}resolveParameters(e,...t){return Ci(this,void 0,void 0,(function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:i=!1,addClientIdParameter:a=!1}=this.eventTypeMapping[e]||{};return yield[e=>r.length>0?this.parseVariableArgumentsPayload(r,e):e[0],e=>Ci(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{visitorId:n?yield this.getCurrentVisitorId():""})})),e=>Ci(this,void 0,void 0,(function*(){return a?Object.assign(Object.assign({},e),{clientId:yield this.getCurrentVisitorId()}):e})),e=>i?this.ensureAnonymousUserWhenUsingApiKey(e):e,t=>this.beforeSendHooks.reduce(((t,r)=>Ci(this,void 0,void 0,(function*(){let n=yield t;return yield r(e,n)}))),t)].reduce(((e,t)=>Ci(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}resolvePayloadForParameters(e,t){return Ci(this,void 0,void 0,(function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[e=>this.setTrackingIdIfTrackingIdNotPresent(e),t=>this.removeEmptyPayloadValues(t,e),t=>this.validateParams(t,e),e=>r?yo(e):e,e=>r?this.removeUnknownParameters(e):e,e=>r?this.processCustomParameters(e):this.mapCustomParametersToCustomData(e)].reduce(((e,t)=>Ci(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}makeEvent(e,...t){return Ci(this,void 0,void 0,(function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),i=yield this.resolvePayloadForParameters(e,n);return{eventType:r,payload:i,log:t=>Ci(this,void 0,void 0,(function*(){return this.bufferedRequests.push({eventType:r,payload:Object.assign(Object.assign({},i),t)}),yield Promise.all(this.afterSendHooks.map((r=>r(e,Object.assign(Object.assign({},n),t))))),yield this.deferExecution(),yield this.sendFromBuffer()}))}}))}sendEvent(e,...t){return Ci(this,void 0,void 0,(function*(){return(yield this.makeEvent(e,...t)).log({})}))}deferExecution(){return new Promise((e=>setTimeout(e,0)))}sendFromBuffer(){return Ci(this,void 0,void 0,(function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.getClientDependingOnEventType(t).sendEvent(t,r)}}))}clear(){this.storage.removeItem("visitorId"),(new Wi).clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return Ci(this,void 0,void 0,(function*(){return this.makeEvent(ji.search,e)}))}sendSearchEvent(e){var{searchQueryUid:t}=e,r=Ri(e,["searchQueryUid"]);return Ci(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(r)).log({searchQueryUid:t})}))}makeClickEvent(e){return Ci(this,void 0,void 0,(function*(){return this.makeEvent(ji.click,e)}))}sendClickEvent(e){var{searchQueryUid:t}=e,r=Ri(e,["searchQueryUid"]);return Ci(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(r)).log({searchQueryUid:t})}))}makeCustomEvent(e){return Ci(this,void 0,void 0,(function*(){return this.makeEvent(ji.custom,e)}))}sendCustomEvent(e){var{lastSearchQueryUid:t}=e,r=Ri(e,["lastSearchQueryUid"]);return Ci(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(r)).log({lastSearchQueryUid:t})}))}makeViewEvent(e){return Ci(this,void 0,void 0,(function*(){return this.makeEvent(ji.view,e)}))}sendViewEvent(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeViewEvent(e)).log({})}))}getVisit(){return Ci(this,void 0,void 0,(function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e}))}getHealth(){return Ci(this,void 0,void 0,(function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()}))}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every((e=>typeof e=="string")))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,i=t.length;n<i;n++){let i=t[n];if(typeof i=="string")r[e[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},r),i)}return r}isKeyAllowedEmpty(e,t){return({[ji.search]:["queryText"]}[e]||[]).indexOf(t)!==-1}removeEmptyPayloadValues(e,t){let r=e=>typeof e<"u"&&e!==null&&e!=="";return Object.keys(e).filter((n=>this.isKeyAllowedEmpty(t,n)||r(e[n]))).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}removeUnknownParameters(e){return Object.keys(e).filter((e=>{if(wo(e))return!0;console.log(e,"is not processed by coveoua")})).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}processCustomParameters(e){let{custom:t}=e,r=Ri(e,["custom"]),n={};t&&qa(t)&&(n=this.lowercaseKeys(t));let i=bo(r);return Object.assign(Object.assign({},n),i)}mapCustomParametersToCustomData(e){let{custom:t}=e,r=Ri(e,["custom"]);if(t&&qa(t)){let n=this.lowercaseKeys(t);return Object.assign(Object.assign({},r),{customData:Object.assign(Object.assign({},n),e.customData)})}else return e}lowercaseKeys(e){let t=Object.keys(e),r={};return t.forEach((t=>{r[t.toLowerCase()]=e[t]})),r}validateParams(e,t){let{anonymizeIp:r}=e,n=Ri(e,["anonymizeIp"]);return r!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${r}`.toLowerCase())==-1&&(n.anonymizeIp=1),(t==ji.view||t==ji.click||t==ji.search||t==ji.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),t==ji.view&&(n.location=this.limit(n.location,128)),(t=="pageview"||t=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=Ri(e,["userId"]);return Do(this.options.token)&&!t?(r.userId="anonymous",r):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:t}=e,r=Ri(e,["trackingId"]);return t?e:(r.hasOwnProperty("custom")&&qa(r.custom)&&(r.custom.hasOwnProperty("context_website")||r.custom.hasOwnProperty("siteName"))&&(r.trackingId=r.custom.context_website||r.custom.siteName),r.hasOwnProperty("customData")&&qa(r.customData)&&(r.customData.hasOwnProperty("context_website")||r.customData.hasOwnProperty("siteName"))&&(r.trackingId=r.customData.context_website||r.customData.siteName),r)}limit(e,t){return typeof e!="string"?e:e.substring(0,t)}get baseUrl(){return $o(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},No;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(No||(No={}));var Vo;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer",e.generatedAnswerFeedbackSubmitV2="generatedAnswerFeedbackSubmitV2"})(Vo||(Vo={}));var Lo={[Vo.triggerNotify]:"queryPipelineTriggers",[Vo.triggerExecute]:"queryPipelineTriggers",[Vo.triggerQuery]:"queryPipelineTriggers",[Vo.triggerRedirect]:"queryPipelineTriggers",[Vo.queryError]:"errors",[Vo.queryErrorBack]:"errors",[Vo.queryErrorClear]:"errors",[Vo.queryErrorRetry]:"errors",[Vo.pagerNext]:"getMoreResults",[Vo.pagerPrevious]:"getMoreResults",[Vo.pagerNumber]:"getMoreResults",[Vo.pagerResize]:"getMoreResults",[Vo.pagerScrolling]:"getMoreResults",[Vo.facetSearch]:"facet",[Vo.facetShowLess]:"facet",[Vo.facetShowMore]:"facet",[Vo.recommendation]:"recommendation",[Vo.likeSmartSnippet]:"smartSnippet",[Vo.dislikeSmartSnippet]:"smartSnippet",[Vo.expandSmartSnippet]:"smartSnippet",[Vo.collapseSmartSnippet]:"smartSnippet",[Vo.openSmartSnippetFeedbackModal]:"smartSnippet",[Vo.closeSmartSnippetFeedbackModal]:"smartSnippet",[Vo.sendSmartSnippetReason]:"smartSnippet",[Vo.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[Vo.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[Vo.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[Vo.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[Vo.clearRecentQueries]:"recentQueries",[Vo.recentResultClick]:"recentlyClickedDocuments",[Vo.clearRecentResults]:"recentlyClickedDocuments",[Vo.showLessFoldedResults]:"folding",[Vo.caseDetach]:"case",[Vo.likeGeneratedAnswer]:"generatedAnswer",[Vo.dislikeGeneratedAnswer]:"generatedAnswer",[Vo.openGeneratedAnswerSource]:"generatedAnswer",[Vo.generatedAnswerStreamEnd]:"generatedAnswer",[Vo.generatedAnswerSourceHover]:"generatedAnswer",[Vo.generatedAnswerCopyToClipboard]:"generatedAnswer",[Vo.generatedAnswerHideAnswers]:"generatedAnswer",[Vo.generatedAnswerShowAnswers]:"generatedAnswer",[Vo.generatedAnswerExpand]:"generatedAnswer",[Vo.generatedAnswerCollapse]:"generatedAnswer",[Vo.generatedAnswerFeedbackSubmit]:"generatedAnswer",[Vo.generatedAnswerFeedbackSubmitV2]:"generatedAnswer",[No.expandToFullUI]:"interface",[No.openUserActions]:"User Actions",[No.showPrecedingSessions]:"User Actions",[No.showFollowingSessions]:"User Actions",[No.clickViewedDocument]:"User Actions",[No.clickPageView]:"User Actions",[No.createArticle]:"createArticle"},zo=class{constructor(){this.runtime=new jo,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(ji.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(ji.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(ji.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(ji.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return ma}};function Yo(e){let t="";return e.filter((e=>{let r=e!==t;return t=e,r}))}function Ho(e){return e.map((e=>e.replace(/;/g,"")))}function Bo(e){let t=e.join(";");return t.length<=256?t:Bo(e.slice(1))}var Wo=e=>{let t=Ho(e),r=Yo(t);return Bo(r)};function Ko(e){let t=typeof e.partialQueries=="string"?e.partialQueries:Wo(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:Wo(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Go=class{constructor(e,t){this.opts=e,this.provider=t;let r=e.enableAnalytics===!1||Po();this.coveoAnalyticsClient=r?new zo:new Qo(e)}disable(){this.coveoAnalyticsClient=new zo}enable(){this.coveoAnalyticsClient=new Qo(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(Vo.interfaceLoad)}logInterfaceLoad(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(Vo.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendation(){return this.makeCustomEvent(Vo.recommendation)}logRecommendation(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationOpen(e,t){return this.makeClickEvent(Vo.recommendationOpen,e,t)}logRecommendationOpen(e,t){return Ci(this,void 0,void 0,(function*(){return(yield this.makeRecommendationOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterClearAll(e){return this.makeSearchEvent(Vo.staticFilterClearAll,e)}logStaticFilterClearAll(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterSelect(e){return this.makeSearchEvent(Vo.staticFilterSelect,e)}logStaticFilterSelect(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterDeselect(e){return this.makeSearchEvent(Vo.staticFilterDeselect,e)}logStaticFilterDeselect(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFetchMoreResults(){return this.makeCustomEvent(Vo.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})}))}makeInterfaceChange(e){return this.makeSearchEvent(Vo.interfaceChange,e)}logInterfaceChange(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanAutomatic(){return this.makeSearchEvent(Vo.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanClick(){return this.makeSearchEvent(Vo.didyoumeanClick)}logDidYouMeanClick(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})}))}makeResultsSort(e){return this.makeSearchEvent(Vo.resultsSort,e)}logResultsSort(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxSubmit(){return this.makeSearchEvent(Vo.searchboxSubmit)}logSearchboxSubmit(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxClear(){return this.makeSearchEvent(Vo.searchboxClear)}logSearchboxClear(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxAsYouType(){return this.makeSearchEvent(Vo.searchboxAsYouType)}logSearchboxAsYouType(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbFacet(e){return this.makeSearchEvent(Vo.breadcrumbFacet,e)}logBreadcrumbFacet(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbResetAll(){return this.makeSearchEvent(Vo.breadcrumbResetAll)}logBreadcrumbResetAll(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentQuickview(e,t){return this.makeClickEvent(Vo.documentQuickview,e,t)}logDocumentQuickview(e,t){return Ci(this,void 0,void 0,(function*(){return(yield this.makeDocumentQuickview(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentOpen(e,t){return this.makeClickEvent(Vo.documentOpen,e,t)}logDocumentOpen(e,t){return Ci(this,void 0,void 0,(function*(){return(yield this.makeDocumentOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxAnalytics(e){return this.makeSearchEvent(Vo.omniboxAnalytics,Ko(e))}logOmniboxAnalytics(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxFromLink(e){return this.makeSearchEvent(Vo.omniboxFromLink,Ko(e))}logOmniboxFromLink(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchFromLink(){return this.makeSearchEvent(Vo.searchFromLink)}logSearchFromLink(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerNotify(e){return this.makeCustomEvent(Vo.triggerNotify,e)}logTriggerNotify(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerExecute(e){return this.makeCustomEvent(Vo.triggerExecute,e)}logTriggerExecute(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerQuery(){return this.makeCustomEvent(Vo.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})}))}makeUndoTriggerQuery(e){return this.makeSearchEvent(Vo.undoTriggerQuery,e)}logUndoTriggerQuery(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerRedirect(e){return this.makeCustomEvent(Vo.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerResize(e){return this.makeCustomEvent(Vo.pagerResize,e)}logPagerResize(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNumber(e){return this.makeCustomEvent(Vo.pagerNumber,e)}logPagerNumber(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNext(e){return this.makeCustomEvent(Vo.pagerNext,e)}logPagerNext(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerPrevious(e){return this.makeCustomEvent(Vo.pagerPrevious,e)}logPagerPrevious(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerScrolling(){return this.makeCustomEvent(Vo.pagerScrolling)}logPagerScrolling(){return Ci(this,void 0,void 0,(function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})}))}makeFacetClearAll(e){return this.makeSearchEvent(Vo.facetClearAll,e)}logFacetClearAll(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSearch(e){return this.makeSearchEvent(Vo.facetSearch,e)}logFacetSearch(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelect(e){return this.makeSearchEvent(Vo.facetSelect,e)}logFacetSelect(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetDeselect(e){return this.makeSearchEvent(Vo.facetDeselect,e)}logFacetDeselect(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetExclude(e){return this.makeSearchEvent(Vo.facetExclude,e)}logFacetExclude(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUnexclude(e){return this.makeSearchEvent(Vo.facetUnexclude,e)}logFacetUnexclude(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelectAll(e){return this.makeSearchEvent(Vo.facetSelectAll,e)}logFacetSelectAll(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUpdateSort(e){return this.makeSearchEvent(Vo.facetUpdateSort,e)}logFacetUpdateSort(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowMore(e){return this.makeCustomEvent(Vo.facetShowMore,e)}logFacetShowMore(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowLess(e){return this.makeCustomEvent(Vo.facetShowLess,e)}logFacetShowLess(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryError(e){return this.makeCustomEvent(Vo.queryError,e)}logQueryError(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorBack(){return Ci(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Vo.queryErrorBack);return{description:e.description,log:()=>Ci(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Vo.queryErrorBack)}))}}))}logQueryErrorBack(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorRetry(){return Ci(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Vo.queryErrorRetry);return{description:e.description,log:()=>Ci(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Vo.queryErrorRetry)}))}}))}logQueryErrorRetry(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorClear(){return Ci(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Vo.queryErrorClear);return{description:e.description,log:()=>Ci(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Vo.queryErrorClear)}))}}))}logQueryErrorClear(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})}))}makeLikeSmartSnippet(){return this.makeCustomEvent(Vo.likeSmartSnippet)}logLikeSmartSnippet(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeSmartSnippet(){return this.makeCustomEvent(Vo.dislikeSmartSnippet)}logDislikeSmartSnippet(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippet(){return this.makeCustomEvent(Vo.expandSmartSnippet)}logExpandSmartSnippet(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippet(){return this.makeCustomEvent(Vo.collapseSmartSnippet)}logCollapseSmartSnippet(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(Vo.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(Vo.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeSmartSnippetFeedbackReason(e,t){return this.makeCustomEvent(Vo.sendSmartSnippetReason,{reason:e,details:t})}logSmartSnippetFeedbackReason(e,t){return Ci(this,void 0,void 0,(function*(){return(yield this.makeSmartSnippetFeedbackReason(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(Vo.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(Vo.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(Vo.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(Vo.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSource(e,t){return this.makeClickEvent(Vo.openSmartSnippetSource,e,t)}logOpenSmartSnippetSource(e,t){return Ci(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionSource(e,t){return this.makeClickEvent(Vo.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}makeCopyToClipboard(e,t){return this.makeClickEvent(Vo.copyToClipboard,e,t)}logCopyToClipboard(e,t){return Ci(this,void 0,void 0,(function*(){return(yield this.makeCopyToClipboard(e,t)).log({searchUID:this.provider.getSearchUID()})}))}logOpenSmartSnippetSuggestionSource(e,t){return Ci(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetInlineLink(e,t){return this.makeClickEvent(Vo.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},t)}logOpenSmartSnippetInlineLink(e,t){return Ci(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionInlineLink(e,t){return this.makeClickEvent(Vo.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logOpenSmartSnippetSuggestionInlineLink(e,t){return Ci(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeRecentQueryClick(){return this.makeSearchEvent(Vo.recentQueryClick)}logRecentQueryClick(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentQueries(){return this.makeCustomEvent(Vo.clearRecentQueries)}logClearRecentQueries(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})}))}makeRecentResultClick(e,t){return this.makeCustomEvent(Vo.recentResultClick,{info:e,identifier:t})}logRecentResultClick(e,t){return Ci(this,void 0,void 0,(function*(){return(yield this.makeRecentResultClick(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentResults(){return this.makeCustomEvent(Vo.clearRecentResults)}logClearRecentResults(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})}))}makeNoResultsBack(){return this.makeSearchEvent(Vo.noResultsBack)}logNoResultsBack(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreFoldedResults(e,t){return this.makeClickEvent(Vo.showMoreFoldedResults,e,t)}logShowMoreFoldedResults(e,t){return Ci(this,void 0,void 0,(function*(){return(yield this.makeShowMoreFoldedResults(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessFoldedResults(){return this.makeCustomEvent(Vo.showLessFoldedResults)}logShowLessFoldedResults(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})}))}makeEventDescription(e,t){var r;return{actionCause:t,customData:(r=e.payload)===null||r===void 0?void 0:r.customData}}makeCustomEvent(e,t,r=Lo[e]){return Ci(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({lastSearchQueryUid:e})}}))}logCustomEvent(e,t,r=Lo[e]){return Ci(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}makeCustomEventWithType(e,t,r){return Ci(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:t,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({lastSearchQueryUid:e})}}))}logCustomEventWithType(e,t,r){return Ci(this,void 0,void 0,(function*(){return(yield this.makeCustomEventWithType(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}logSearchEvent(e,t){return Ci(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchEvent(e,t){return Ci(this,void 0,void 0,(function*(){let r=yield this.getBaseSearchEventRequest(e,t),n=yield this.coveoAnalyticsClient.makeSearchEvent(r);return{description:this.makeEventDescription(n,e),log:({searchUID:e})=>n.log({searchQueryUid:e})}}))}makeClickEvent(e,t,r,n){return Ci(this,void 0,void 0,(function*(){let i=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),a=yield this.coveoAnalyticsClient.makeClickEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({searchQueryUid:e})}}))}logClickEvent(e,t,r,n){return Ci(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(e,t,r,n)).log({searchUID:this.provider.getSearchUID()})}))}getBaseSearchEventRequest(e,t){var r,n;return Ci(this,void 0,void 0,(function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},t),(n=(r=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(r)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})}))}getBaseEventRequest(e){return Ci(this,void 0,void 0,(function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})}))}getOrigins(){var e,t;return{originContext:(t=(e=this.provider).getOriginContext)===null||t===void 0?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Qo?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",t=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),t&&{splitTestRunVersion:t})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(Vo.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(Vo.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(Vo.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(Vo.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(Vo.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(Vo.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(Vo.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerExpand(e){return this.makeCustomEvent(Vo.generatedAnswerExpand,e)}logGeneratedAnswerExpand(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerExpand(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerCollapse(e){return this.makeCustomEvent(Vo.generatedAnswerCollapse,e)}logGeneratedAnswerCollapse(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerCollapse(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(Vo.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerFeedbackSubmitV2(e){return this.makeCustomEvent(Vo.generatedAnswerFeedbackSubmitV2,e)}logGeneratedAnswerFeedbackSubmitV2(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerFeedbackSubmitV2(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(Vo.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRetryGeneratedAnswer(){return this.makeSearchEvent(Vo.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return Ci(this,void 0,void 0,(function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(Vo.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return Ci(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})}))}},Jo=Object.assign({},wa);Object.keys(Jo).map((e=>Jo[e]));var Zo;(function(e){e.click="click",e.flowStart="flowStart"})(Zo||(Zo={}));var Xo;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(Xo||(Xo={}));var eu;(function(e){e.quit="Quit",e.solved="Solved"})(eu||(eu={}));var tu=e=>new Qo(e).getCurrentVisitorId(),ru=new Ki.HistoryStore,nu=(e,t)=>typeof t=="function"?(...r)=>{let n=le(r[0]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,iu=(e,t)=>(...r)=>{let n=le(r[1]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics hook. Returning original request."),n}};var au=Ur((e=>e.source),(e=>[`@coveo/headless@${ri}`].concat(Object.entries(e).map((([e,t])=>`${e}@${t}`)))));function ou(){return{desiredCount:5,numberOfValues:8,set:{}}}function uu(e){let{activeValue:t,ancestryMap:r}=su(e);return t?cu(t,r):[]}function su(e){let t=[...e],r=new Map;for(;t.length>0;){let e=t.shift();if(e.state==="selected")return{activeValue:e,ancestryMap:r};if(r)for(let t of e.children)r.set(t,e);t.unshift(...e.children)}return{}}function cu(e,t){let r=[];if(!e)return[];let n=e;do{r.unshift(n),n=t.get(n)}while(n);return r}var lu=(e,t)=>e.categoryFacetSet[t]?.request;var du=(e,t)=>{let r=lu(e,t);return uu(r?.currentValues??[])};function fu(){return{}}function hu(){return{}}function pu(){return{}}function yu(){return{}}function vu(e){return{facetSet:e.facetSet??yu(),categoryFacetSet:e.categoryFacetSet??fu(),dateFacetSet:e.dateFacetSet??hu(),numericFacetSet:e.numericFacetSet??pu(),automaticFacetSet:e.automaticFacetSet??ou()}}var gu=e=>{let t=[];return bu(e).forEach(((r,n)=>{let i=Du(e,r.facetId),a=Cu(r,n+1);if(wu(r)){if(!!!du(e,r.facetId).length)return;t.push({...a,...Au(e,r.facetId),facetType:i,state:"selected"});return}r.currentValues.forEach(((e,n)=>{if(e.state==="idle")return;let o=qu(e,n+1,i),u=mu(r)?ku(e):Ou(e);t.push({...a,...o,...u})}))})),Su(e).forEach(((e,r)=>{let n=Ru(e,r+1);e.values.forEach(((e,r)=>{if(e.state==="idle")return;let i=qu(e,r+1,"specific"),a=ku(e);t.push({...n,...i,...a})}))})),t},mu=e=>e.type==="specific",wu=e=>e.type==="hierarchical",bu=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map((e=>e.request)),Su=e=>[...Object.values(e.automaticFacetSet.set)].map((e=>e.response)),qu=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),Ou=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),ku=e=>({displayValue:e.value,value:e.value}),Iu=(e,t)=>du(e,t).map((e=>e.value)).join(";"),Au=(e,t)=>{let r=Iu(e,t);return{value:r,valuePosition:1,displayValue:r}},Ru=(e,t)=>({title:ju(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),Cu=(e,t)=>({title:ju(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),ju=(e,t)=>`${e}_${t}`,Tu=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,Du=(e,t)=>{let r=Tu(e,t);return r?r.type:"specific"};var Mu=()=>({q:"",enableQuerySyntax:!1});var xu=(e=>(e.Ascending="ascending",e.Descending="descending",e))(xu||{}),Eu=(e=>(e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort",e))(Eu||{}),Pu=e=>{if(ne(e))return e.map((e=>Pu(e))).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},Fu=()=>({by:"relevancy"});new ee({values:{by:new ie({enum:Eu,required:!0}),order:new ie({enum:xu}),field:new Z}});function Uu(){return Pu(Fu())}var $u=()=>"default";var _u=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},Qu=class{constructor(e){this.getState=e;this.state=e()}getLanguage(){return _u(this.state)}getBaseMetadata(){let{context:e,configuration:t}=this.state,r=e?.contextValues||{},n={};for(let[e,t]of Object.entries(r)){let r=`context_${e}`;n[r]=t}return t.analytics.analyticsMode==="legacy"&&(n.coveoHeadlessVersion=ri),n}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||$u()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var Nu=class e extends Qu{constructor(){super(...arguments);this.getFacetRequest=e=>this.state.facetSet?.[e]?.request||this.state.categoryFacetSet?.[e]?.request||this.state.dateFacetSet?.[e]?.request||this.state.numericFacetSet?.[e]?.request||this.state.automaticFacetSet?.set[e]?.response}getFacetState(){return gu(vu(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||e.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let e=this.getState();return e.search?.searchResponseId||e.search?.response.searchUid||ge().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let t=!!this.getSplitTestRunName(),r=this.state.search?.response.pipeline||this.state.pipeline||e.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){let e=this.getState(),t=super.getBaseMetadata(),r=e.search?.response?.extendedResults?.generativeQuestionAnsweringId;return r&&(t.generativeQuestionAnsweringId=r),t}getFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,facetValue:t,facetTitle:`${r}_${e}`}}getFacetClearAllMetadata(e){let t=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:t,facetTitle:`${t}_${e}`}}getFacetUpdateSortMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,criteria:t,facetTitle:`${r}_${e}`}}getRangeBreadcrumbFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,facetRangeEnd:t.end,facetRangeEndInclusive:t.endInclusive,facetRangeStart:t.start,facetTitle:`${r}_${e}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??Uu()}}getStaticFilterToggleMetadata(e,t){return{...this.getBaseMetadata(),staticFilterId:e,staticFilterValue:t}}getStaticFilterClearAllMetadata(e){return{...this.getBaseMetadata(),staticFilterId:e}}getUndoTriggerQueryMetadata(e){return{...this.getBaseMetadata(),undoneQuery:e}}getCategoryBreadcrumbFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),categoryFacetId:e,categoryFacetField:r,categoryFacetPath:t,categoryFacetTitle:`${r}_${e}`}}getOmniboxAnalyticsMetadata(e,t){let r=this.state.querySuggest&&this.state.querySuggest[e],n=r.completions.map((e=>e.expression)),i=r.partialQueries.length-1,a=r.partialQueries[i]||"",o=r.responseId;return{...this.getBaseMetadata(),suggestionRanking:n.indexOf(t),partialQuery:a,partialQueries:r.partialQueries.length>0?r.partialQueries:"",suggestions:n.length>0?n:"",querySuggestResponseId:o}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(e){return{...this.getBaseMetadata(),...e}}getGeneratedAnswerMetadata(){let e=this.getState(),t={};return e.generatedAnswer?.isVisible!==void 0&&(t.showGeneratedAnswer=e.generatedAnswer.isVisible),t}get resultURIs(){return this.results?.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||Mu().q}get responseTime(){return this.state.search?.duration||ge().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||ge().response.totalCountFiltered}};Nu.fallbackPipelineName="default";var Vu=Nu,Lu=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new Vu(t)})=>{let a=t(),o=a.configuration.accessToken,u=a.configuration.analytics.apiBaseUrl,s=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,l=new Go({token:o,endpoint:u,runtimeEnvironment:s,preprocessRequest:nu(e,n),beforeSendHooks:[iu(e,r),(t,r)=>(e.info({...r,type:t,endpoint:u,token:o},"Analytics request"),r)]},i);return c||l.disable(),l},zu=()=>{let e=ru.getHistory().reverse().find((e=>e.name==="PageView"&&e.value));return e?e.value:""};var Yu=async(e,t)=>{let r=e.analyticsMode==="next";return{analytics:{clientId:await tu(e),clientTimestamp:(new Date).toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...zu()&&{pageId:zu()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:au(e)}}}};var Hu=()=>({duration:0,error:null,isLoading:!1,id:"Recommendation",recommendations:[],searchUid:"",splitTestRun:"",pipeline:""});var Bu=class extends Qu{getPipeline(){return this.state.pipeline||this.state.recommendation?.pipeline||"default"}getSearchEventRequestPayload(){return{queryText:Mu().q,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){return this.getState().recommendation?.searchUid||Hu().searchUid}getSplitTestRunName(){return this.state.recommendation?.splitTestRun}getSplitTestRunVersion(){let e=!!this.getSplitTestRunName(),t=this.state.recommendation?.pipeline||this.state.pipeline||"default";return e?t:void 0}get responseTime(){return this.state.recommendation?.duration||Hu().duration}mapResultsToAnalyticsDocument(){return this.state.recommendation?.recommendations.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get numberOfResults(){return this.state.recommendation?.recommendations.length||Hu().recommendations.length}};function Wu({config:e,environment:t,event:r,listenerManager:n}){let{url:i,token:a,mode:o}=e;o!=="disabled"&&(n.call(r),t.send(i,a,r))}var Ku=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Gu(e){return typeof e=="string"&&Ku.test(e)}function Ju(e){let t="visitorId";return{getClientId:()=>{let r=e.get(),n=r.storage,i=n.getItem(t),a=i&&Gu(i)?i:r.generateUUID();return n.setItem(t,a),a},clear:()=>{e.get().storage.removeItem(t)}}}var Zu="0.7.7";function Xu(e){let{trackingId:t}=e;return{trackingId:t}}function es(e){return(e.source||[]).concat([`relay@${Zu}`])}function ts(e,t,r,n){let{getReferrer:i,getLocation:a,getUserAgent:o}=r,u=Xu(t),s=n.getClientId();return Object.freeze({type:e,config:u,ts:Date.now(),source:es(t),clientId:s,userAgent:o(),referrer:i(),location:a()})}function rs(e,t,r,n,i){return{...t,meta:ts(e,r,n,i)}}var ns="*";function is(){let e=[];function t({type:t,callback:r}){return e.findIndex((e=>e.type===t&&e.callback===r))}function r(e,t){return e.type==="*"||t===e.type}function n(r){return t(r)<0&&e.push(r),()=>u(r.type,r.callback)}function i(t){e.forEach((e=>{if(r(e,t.meta.type))try{e.callback(t)}catch(e){console.error(e)}}))}function a(t){if(t===ns)e.length=0;else for(let r=e.length-1;r>=0;r--)e[r].type===t&&e.splice(r,1)}function o(r){let n=t(r);n>=0&&e.splice(n,1)}function u(e,t){t?o({type:e,callback:t}):a(e)}return{add:n,call:i,remove:u}}function as({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source}})}function os(e){let t=as(e);return{get:()=>t,update:e=>{t=as({...t,...e})}}}function us(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}var ss=cs();function cs(){let e="coveo_",t=e=>{let t=e.split(".").slice(-2);return t.length==2?t.join("."):""};return{getItem(t){let r=`${e}${t}=`,n=document.cookie.split(";");for(let e of n){let t=e.replace(/^\s+/,"");if(t.lastIndexOf(r,0)===0)return t.substring(r.length,t.length)}return null},setItem(r,n,i){let a=t(window.location.hostname),o=`;expires=${new Date((new Date).getTime()+i).toUTCString()}`,u=a?`;domain=${a}`:"";document.cookie=`${e}${r}=${n}${o}${u};path=/;SameSite=Lax`},removeItem(e){this.setItem(e,"",-1)}}}function ls(){return{getItem(e){return ss.getItem(e)||localStorage.getItem(e)},removeItem(e){ss.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),ss.setItem(e,t,31556952e3)}}}function ds(){let e=document.referrer;return e===""?null:e}function fs(){return{runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(us().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>ds(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:ls()}}function hs(){return{getItem(){return null},removeItem(){},setItem(){}}}function ps(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:hs()}}function ys(e){return e.get().mode!=="disabled"&&vs()?fs():ps()}function vs(){try{return typeof window=="object"}catch{return!1}}function gs(e){return{get:()=>Object.freeze(ys(e))}}function ms(e){let t=os(e),r=is(),n=gs(t),i=Ju(n);return{emit:(e,a)=>{let o=t.get(),u=n.get(),s=rs(e,a,o,u,i);return Wu({config:o,environment:u,event:s,listenerManager:r})},getMeta:e=>ts(e,t.get(),n.get(),i),on:(e,t)=>r.add({type:e,callback:t}),off:(e,t)=>r.remove(e,t),updateConfig:e=>t.update(e),version:Zu,clearStorage:()=>{i.clear()}}}var ws=Ur((e=>e.configuration.accessToken),(e=>e.configuration.analytics),(e=>au(e.configuration.analytics)),((e,{trackingId:t,nextApiBaseUrl:r,enabled:n},i)=>ms({mode:n?"emit":"disabled",url:r,token:e,trackingId:t,source:i})));var bs=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});var Ss=class extends Qu{constructor(){super(...arguments);this.initialState=bs()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){return this.getState().productListing?.responseId||this.initialState.responseId}mapResultsToAnalyticsDocument(){return this.state.productListing?.products.map((e=>({documentUri:e.documentUri,documentUriHash:e.documentUriHash,permanentid:e.permanentid})))}get numberOfResults(){return this.state.productListing.products.length}},qs=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new Ss(t)})=>{let a=t(),o=a.configuration.accessToken,u=a.configuration.analytics.apiBaseUrl,s=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,l=new Go({token:o,endpoint:u,runtimeEnvironment:s,preprocessRequest:nu(e,n),beforeSendHooks:[iu(e,r),(t,r)=>(e.info({...r,type:t,endpoint:u,token:o},"Analytics request"),r)]},i);return c||l.disable(),l};function Os(e){let t=ks(e),r=[e,...t].filter((e=>e.parentResult)).map((e=>e.parentResult));return oe([e,...t,...r],(e=>e.uniqueId))}function ks(e){return e.childResults?e.childResults.flatMap((e=>[e,...ks(e)])):[]}function Is(e,t){return{...new Vu(t).getBaseMetadata(),actionCause:e,type:e}}function As(e){return Object.assign(e,{instantlyCallable:!0})}function Rs(e,t){let r=t=>As(In(e,t)),n=r((async(e,{getState:r,extra:n})=>{let{analyticsClientMiddleware:i,preprocessRequest:a,logger:o}=n;return await(await t({getState:r,analyticsClientMiddleware:i,preprocessRequest:a,logger:o})).log({state:r(),extra:n})}));return Object.assign(n,{prepare:async({getState:e,analyticsClientMiddleware:n,preprocessRequest:i,logger:a})=>{let{description:o,log:u}=await t({getState:e,analyticsClientMiddleware:n,preprocessRequest:i,logger:a});return{description:o,action:r((async(e,{getState:t,extra:r})=>await u({state:t(),extra:r})))}}}),n}var Cs=(e,t,r)=>{function n(...n){let i=n.length===1?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r};return Ds(i)}return n},js=e=>e.configuration.analytics.analyticsMode==="legacy",Ts=e=>e.configuration.analytics.analyticsMode==="next",Ds=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:i,analyticsConfigurator:a,providerClass:o})=>(r??(r=e=>new o(e)),Rs(e,(async({getState:e,analyticsClientMiddleware:o,preprocessRequest:u,logger:s})=>{let c=[],l={log:async({state:e})=>{for(let t of c)await t(e)}},d=e(),f=a({getState:e,logger:s,analyticsClientMiddleware:o,preprocessRequest:u,provider:r(e)}),h=await t(f,e());l.description=h?.description,c.push((async e=>{js(e)&&await Ms(h,r,e,s,f.coveoAnalyticsClient)}));let{emit:p}=ws(d);return c.push((async e=>{if(Ts(e)&&i&&n){let t=n(e);await Ws(p,i,t)}})),l})));async function Ms(e,t,r,n,i){t((()=>r));let a=await(e?.log({searchUID:t((()=>r)).getSearchUID()}));n.info({client:i,response:a},"Analytics response")}var xs=Cs(Lu,(e=>e),Vu);var Es=Cs(qs,(e=>e),Ss);var Ps=(e,t)=>{let r=e=>e+(t.pagination?.firstResult??0),n=-1,i=t.search?.results;return n=Bs(e,i),n<0&&(n=Hs(e,i)),n<0&&(n=0),Us(e,r(n),t)},Fs=(e,t)=>{let r=t.recommendation?.recommendations.findIndex((({uniqueId:t})=>e.uniqueId===t))||0;return Us(e,r,t)};function Us(e,t,r){let n=e.raw.collection;return{collectionName:typeof n=="string"?n:"default",documentAuthor:Ls(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:zs(e),queryPipeline:r.pipeline||Ii()}}var $s=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),_s={urihash:new Z,sourcetype:new Z,permanentid:new Z},Qs={uniqueId:Hn,raw:new ee({values:_s}),title:Hn,uri:Hn,clickUri:Hn,rankingModifier:new Z({required:!1,emptyAllowed:!0})};function Ns(e){return Object.assign({},...Object.keys(_s).map((t=>({[t]:e[t]}))))}function Vs(e){return Object.assign({},...Object.keys(Qs).map((t=>({[t]:e[t]}))),{raw:Ns(e.raw)})}function Ls(e){let t=e.raw.author;return z(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function zs(e){let t=e.raw.source;return z(t)?"unknown":t}var Ys=e=>new Q(Qs).validate(Vs(e));function Hs(e,t){for(let[r,n]of t.entries()){let t=Os(n);if(Bs(e,t)!==-1)return r}return-1}function Bs(e,t=[]){return t.findIndex((({uniqueId:t})=>t===e.uniqueId))}async function Ws(e,t,r){await e(t,r)}var Ks=()=>xs("analytics/recommendation/update",(e=>e.makeRecommendationInterfaceLoad()),(e=>new Bu(e))),Gs=()=>({actionCause:"recommendationInterfaceLoad"}),Js=e=>xs({prefix:"analytics/recommendation/open",__legacy__getBuilder:(t,r)=>(Ys(e),t.makeRecommendationOpen(Fs(e,r),$s(e))),__legacy__provider:e=>new Bu(e),analyticsType:"itemClick",analyticsPayloadBuilder:t=>{let r=Ps(e,t),n=$s(e);return{searchUid:t.search?.response.searchUid??"",position:r.documentPosition,itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}});var Zs=Yr("recommendation/set",(e=>Xn(e,{id:Hn}))),Xs=In("recommendation/get",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let i=t(),a=(new Date).getTime(),o=await ec(i),u=await n.recommendations(o),s=(new Date).getTime()-a;return tt(u)?r(u.error):{recommendations:u.success.results,analyticsAction:Ks(),duration:s,searchUid:u.success.searchUid,splitTestRun:u.success.splitTestRun,pipeline:u.success.pipeline}})),ec=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,recommendation:e.recommendation.id,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,locale:e.configuration.search.locale,actionsHistory:e.configuration.analytics.enabled?ru.getHistory():[],...e.advancedSearchQueries&&{aq:e.advancedSearchQueries.aq,cq:e.advancedSearchQueries.cq},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.configuration.analytics.enabled&&{visitorId:await tu(e.configuration.analytics)},...e.configuration.analytics.enabled&&await tc(e,Gs()),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")},...e.pagination&&{numberOfResults:e.pagination.numberOfResults}}),tc=async(e,t)=>{let r=e.configuration.analytics.analyticsMode==="legacy"?void 0:{actionCause:t.actionCause,type:t.actionCause};return await Yu(e.configuration.analytics,r)};var rc=sn(Hu(),(e=>{e.addCase(Zs,((e,t)=>{e.id=t.payload.id})).addCase(Xs.rejected,((e,t)=>{e.error=t.payload?t.payload:null,e.isLoading=!1})).addCase(Xs.fulfilled,((e,t)=>{e.error=null,e.recommendations=t.payload.recommendations,e.duration=t.payload.duration,e.isLoading=!1,e.searchUid=t.payload.searchUid,e.splitTestRun=t.payload.splitTestRun,e.pipeline=t.payload.pipeline})).addCase(Xs.pending,(e=>{e.isLoading=!0}))}));var nc=Yr("searchHub/set",(e=>Xn(e,new Z({required:!0,emptyAllowed:!0}))));var ic=sn($u(),(e=>{e.addCase(nc,((e,t)=>t.payload)).addCase(ki.fulfilled,((e,t)=>t.payload?.searchHub??e)).addCase(ui,((e,t)=>t.payload.searchHub||e))}));async function ac(e,t){let r=e.getReader(),n;for(;!(n=await r.read()).done;)t(n.value)}function oc(e){let t,r,n,i=!1;return function(a){t===void 0?(t=a,r=0,n=-1):t=sc(t,a);let o=t.length,u=0;for(;r<o;){i&&(t[r]===10&&(u=++r),i=!1);let a=-1;for(;r<o&&a===-1;++r)switch(t[r]){case 58:n===-1&&(n=r-u);break;case 13:i=!0;case 10:a=r;break}if(a===-1)break;e(t.subarray(u,a),n),u=r,n=-1}u===o?t=void 0:u!==0&&(t=t.subarray(u),r-=u)}}function uc(e,t,r){let n=cc(),i=new TextDecoder;return function(a,o){if(a.length===0)r?.(n),n=cc();else if(o>0){let r=i.decode(a.subarray(0,o)),u=o+(a[o+1]===32?2:1),s=i.decode(a.subarray(u));switch(r){case"data":n.data=n.data?n.data+`\n`+s:s;break;case"event":n.event=s;break;case"id":e(n.id=s);break;case"retry":let r=parseInt(s,10);isNaN(r)||t(n.retry=r);break}}}}function sc(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function cc(){return{data:"",event:"",id:"",retry:void 0}}var lc=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},dc="text/event-stream",fc=1e3,hc="last-event-id";function pc(){}function yc(e,t){var{signal:r,headers:n,onopen:i,onmessage:a,onclose:o,onerror:u,openWhenHidden:s,fetch:c}=t,l=lc(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise(((t,d)=>{let f=Object.assign({},n);f.accept||(f.accept=dc);let h;function p(){h?.abort(),document.hidden||b()}!s&&pc()&&document.addEventListener("visibilitychange",p);let y=fc,v=0;function g(){pc()&&document.removeEventListener("visibilitychange",p),clearTimeout(v),h?.abort()}r?.addEventListener("abort",(()=>{g(),t()}));let m=c??m,w=i??vc;async function b(){var r;h=typeof AbortController>"u"?null:new AbortController;try{let r=await m(e,Object.assign(Object.assign({},l),{headers:f,signal:h?.signal}));await w(r),await ac(r.body,oc(uc((e=>{e?f[hc]=e:delete f[hc]}),(e=>{y=e}),a))),o?.(),g(),t()}catch(e){if(!h?.signal.aborted)try{let t=(r=u?.(e))!==null&&r!==void 0?r:y;clearTimeout(v),v=setTimeout(b,t)}catch(e){g(),d(e)}}}b()}))}function vc(e){let t=e.headers.get("content-type");if(!t?.startsWith(dc))throw new Error(`Expected content-type to be ${dc}, Actual: ${t}`)}Ur(((e,t)=>e.generatedAnswer?.citations?.find((e=>e.id===t))),(e=>e));Ur((e=>e.search?.response?.extendedResults?.generativeQuestionAnsweringId),(e=>e));Ur((e=>e.generatedAnswer?.fieldsToIncludeInCitations),(e=>e));Ur((e=>e.pipeline),(e=>e));Ur((e=>e.query),(e=>e));Ur((e=>e.searchHub),(e=>e));function gc(e){return{status:e,isUninitialized:e==="uninitialized",isLoading:e==="pending",isSuccess:e==="fulfilled",isError:e==="rejected"}}function mc(e){return new RegExp("(^|:)//").test(e)}var wc=e=>e.replace(/\/$/,""),bc=e=>e.replace(/^\//,"");function Sc(e,t){if(!e)return t;if(!t)return e;if(mc(t))return t;let r=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=wc(e),t=bc(t),`${e}${r}${t}`}var qc=e=>[].concat(...e);function Oc(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}function kc(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}var Ic=vt;function Ac(e,t){if(e===t||!(Ic(e)&&Ic(t)||Array.isArray(e)&&Array.isArray(t)))return t;let r=Object.keys(t),n=Object.keys(e),i=r.length===n.length,a=Array.isArray(t)?[]:{};for(let n of r)a[n]=Ac(e[n],t[n]),i&&(i=e[n]===a[n]);return i?e:a}var Rc=(...e)=>fetch(...e),Cc=e=>e.status>=200&&e.status<=299,jc=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function Tc(e){if(!vt(e))return e;let t={...e};for(let[e,r]of Object.entries(t))r===void 0&&delete t[e];return t}function Dc({baseUrl:e,prepareHeaders:t=(e=>e),fetchFn:r=Rc,paramsSerializer:n,isJsonContentType:i=jc,jsonContentType:a="application/json",jsonReplacer:o,timeout:u,responseHandler:s,validateStatus:c,...l}={}){return typeof fetch>"u"&&r===Rc&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(f,h)=>{let{signal:p,getState:y,extra:v,endpoint:g,forced:m,type:w}=h,b,{url:S,headers:q=new Headers(l.headers),params:O=void 0,responseHandler:k=s??"json",validateStatus:I=c??Cc,timeout:A=u,...R}=typeof f=="string"?{url:f}:f,C={...l,signal:p,...R};q=new Headers(Tc(q)),C.headers=await t(q,{getState:y,extra:v,endpoint:g,forced:m,type:w})||q;let j=e=>typeof e=="object"&&(vt(e)||Array.isArray(e)||typeof e.toJSON=="function");if(!C.headers.has("content-type")&&j(C.body)&&C.headers.set("content-type",a),j(C.body)&&i(C.headers)&&(C.body=JSON.stringify(C.body,o)),O){let e=~S.indexOf("?")?"&":"?",t=n?n(O):new URLSearchParams(Tc(O));S+=e+t}S=Sc(e,S);let T=new Request(S,C);b={request:new Request(S,C)};let D,M=!1,x=A&&setTimeout((()=>{M=!0,h.abort()}),A);try{D=await r(T)}catch(e){return{error:{status:M?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(e)},meta:b}}finally{x&&clearTimeout(x)}let E=D.clone();b.response=E;let P,F="";try{let e;if(await Promise.all([d(D,k).then((e=>P=e),(t=>e=t)),E.text().then((e=>F=e),(()=>{}))]),e)throw e}catch(e){return{error:{status:"PARSING_ERROR",originalStatus:D.status,data:F,error:String(e)},meta:b}}return I(D,P)?{data:P,meta:b}:{error:{status:D.status,data:P},meta:b}};async function d(e,t){if(typeof t=="function")return t(e);if(t==="content-type"&&(t=i(e.headers)?"json":"text"),t==="json"){let t=await e.text();return t.length?JSON.parse(t):null}return e.text()}}var Mc=class{constructor(e,t=void 0){this.value=e,this.meta=t}};async function xc(e=0,t=5){let r=Math.min(e,t),n=~~((Math.random()+.4)*(300<<r));await new Promise((e=>setTimeout((t=>e(t)),n)))}function Ec(e){throw Object.assign(new Mc({error:e}),{throwImmediately:!0})}var Pc={},Fc=(e,t)=>async(r,n,i)=>{let a=[5,(t||Pc).maxRetries,(i||Pc).maxRetries].filter((e=>e!==void 0)),[o]=a.slice(-1),u={maxRetries:o,backoff:xc,retryCondition:(e,t,{attempt:r})=>r<=o,...t,...i},s=0;for(;;)try{let t=await e(r,n,i);if(t.error)throw new Mc(t);return t}catch(e){if(s++,e.throwImmediately){if(e instanceof Mc)return e.value;throw e}if(e instanceof Mc&&!u.retryCondition(e.value.error,r,{attempt:s,baseQueryApi:n,extraOptions:i}))return e.value;await u.backoff(s,u.maxRetries)}},Uc=Object.assign(Fc,{fail:Ec}),$c=Yr("__rtkq/focused"),_c=Yr("__rtkq/unfocused"),Qc=Yr("__rtkq/online"),Nc=Yr("__rtkq/offline");function Vc(e){return e.type==="query"}function Lc(e){return e.type==="mutation"}function zc(e,t,r,n,i,a){return Yc(e)?e(t,r,n,i).map(Hc).map(a):Array.isArray(e)?e.map(Hc).map(a):[]}function Yc(e){return typeof e=="function"}function Hc(e){return typeof e=="string"?{type:e}:e}function Bc(e){return e!=null}function Wc(e){let t=0;for(let r in e)t++;return t}function Kc(e,t){return e.catch(t)}var Gc=Symbol("forceQueryFn"),Jc=e=>typeof e[Gc]=="function";function Zc({serializeQueryArgs:e,queryThunk:t,mutationThunk:r,api:n,context:i}){let a=new Map,o=new Map,{unsubscribeQueryResult:u,removeMutationResult:s,updateSubscriptionOptions:c}=n.internalActions;return{buildInitiateQuery:p,buildInitiateMutation:y,getRunningQueryThunk:l,getRunningMutationThunk:d,getRunningQueriesThunk:f,getRunningMutationsThunk:h};function l(t,r){return n=>{let o=i.endpointDefinitions[t],u=e({queryArgs:r,endpointDefinition:o,endpointName:t});return a.get(n)?.[u]}}function d(e,t){return e=>o.get(e)?.[t]}function f(){return e=>Object.values(a.get(e)||{}).filter(Bc)}function h(){return e=>Object.values(o.get(e)||{}).filter(Bc)}function p(r,i){let o=(s,{subscribe:l=!0,forceRefetch:d,subscriptionOptions:f,[Gc]:h,...p}={})=>(y,v)=>{let g=e({queryArgs:s,endpointDefinition:i,endpointName:r}),m=t({...p,type:"query",subscribe:l,forceRefetch:d,subscriptionOptions:f,endpointName:r,originalArgs:s,queryCacheKey:g,[Gc]:h}),w=n.endpoints[r].select(s),b=y(m),S=w(v());let{requestId:q,abort:O}=b,k=S.requestId!==q,I=a.get(y)?.[g],A=()=>w(v()),R=Object.assign(h?b.then(A):k&&!I?Promise.resolve(S):Promise.all([I,b]).then(A),{arg:s,requestId:q,subscriptionOptions:f,queryCacheKey:g,abort:O,async unwrap(){let e=await R;if(e.isError)throw e.error;return e.data},refetch:()=>y(o(s,{subscribe:!1,forceRefetch:!0})),unsubscribe(){l&&y(u({queryCacheKey:g,requestId:q}))},updateSubscriptionOptions(e){R.subscriptionOptions=e,y(c({endpointName:r,requestId:q,queryCacheKey:g,options:e}))}});if(!I&&!k&&!h){let e=a.get(y)||{};e[g]=R,a.set(y,e),R.then((()=>{delete e[g],Wc(e)||a.delete(y)}))}return R};return o}function y(e){return(t,{track:n=!0,fixedCacheKey:i}={})=>(a,u)=>{let c=r({type:"mutation",endpointName:e,originalArgs:t,track:n,fixedCacheKey:i}),l=a(c);let{requestId:d,abort:f,unwrap:h}=l,p=Kc(l.unwrap().then((e=>({data:e}))),(e=>({error:e}))),y=()=>{a(s({requestId:d,fixedCacheKey:i}))},v=Object.assign(p,{arg:l.arg,requestId:d,abort:f,unwrap:h,reset:y}),g=o.get(a)||{};return o.set(a,g),g[d]=v,v.then((()=>{delete g[d],Wc(g)||o.delete(a)})),i&&(g[i]=v,v.then((()=>{g[i]===v&&(delete g[i],Wc(g)||o.delete(a))}))),v}}}function Xc(e){return e}function el({reducerPath:e,baseQuery:t,context:{endpointDefinitions:r},serializeQueryArgs:n,api:i,assertTagType:a}){let o=(e,t,o,u)=>(s,c)=>{let l=r[e],d=n({queryArgs:t,endpointDefinition:l,endpointName:e});if(s(i.internalActions.queryResultPatched({queryCacheKey:d,patches:o})),!u)return;let f=i.endpoints[e].select(t)(c()),h=zc(l.providesTags,f.data,void 0,t,{},a);s(i.internalActions.updateProvidedBy({queryCacheKey:d,providedTags:h}))},u=(e,t,r,n=!0)=>(a,o)=>{let u=i.endpoints[e].select(t)(o()),s={patches:[],inversePatches:[],undo:()=>a(i.util.patchQueryData(e,t,s.inversePatches,n))};if(u.status==="uninitialized")return s;let c;if("data"in u)if(jt(u.data)){let[e,t,n]=qr(u.data,r);s.patches.push(...t),s.inversePatches.push(...n),c=e}else c=r(u.data),s.patches.push({op:"replace",path:[],value:c}),s.inversePatches.push({op:"replace",path:[],value:u.data});return s.patches.length===0||a(i.util.patchQueryData(e,t,s.patches,n)),s},s=(e,t,r)=>n=>n(i.endpoints[e].initiate(t,{subscribe:!1,forceRefetch:!0,[Gc]:()=>({data:r})})),c=async(e,{signal:n,abort:i,rejectWithValue:a,fulfillWithValue:o,dispatch:u,getState:s,extra:c})=>{let d=r[e.endpointName];try{let r=Xc,a,f={signal:n,abort:i,dispatch:u,getState:s,extra:c,endpoint:e.endpointName,type:e.type,forced:e.type==="query"?l(e,s()):void 0},h=e.type==="query"?e[Gc]:void 0;if(h?a=h():d.query?(a=await t(d.query(e.originalArgs),f,d.extraOptions),d.transformResponse&&(r=d.transformResponse)):a=await d.queryFn(e.originalArgs,f,d.extraOptions,(e=>t(e,f,d.extraOptions))),a.error)throw new Mc(a.error,a.meta);return o(await r(a.data,a.meta,e.originalArgs),{fulfilledTimeStamp:Date.now(),baseQueryMeta:a.meta,[Jr]:!0})}catch(t){let r=t;if(r instanceof Mc){let t=Xc;d.query&&d.transformErrorResponse&&(t=d.transformErrorResponse);try{return a(await t(r.value,r.meta,e.originalArgs),{baseQueryMeta:r.meta,[Jr]:!0})}catch(e){r=e}}throw console.error(r),r}};function l(t,r){let n=r[e]?.queries?.[t.queryCacheKey],i=r[e]?.config.refetchOnMountOrArgChange,a=n?.fulfilledTimeStamp,o=t.forceRefetch??(t.subscribe&&i);return o?o===!0||(Number(new Date)-Number(a))/1e3>=o:!1}let d=In(`${e}/executeQuery`,c,{getPendingMeta(){return{startedTimeStamp:Date.now(),[Jr]:!0}},condition(t,{getState:n}){let i=n(),a=i[e]?.queries?.[t.queryCacheKey],o=a?.fulfilledTimeStamp,u=t.originalArgs,s=a?.originalArgs,c=r[t.endpointName];return Jc(t)?!0:a?.status==="pending"?!1:l(t,i)||Vc(c)&&c?.forceRefetch?.({currentArg:u,previousArg:s,endpointState:a,state:i})?!0:!o},dispatchConditionRejection:!0}),f=In(`${e}/executeMutation`,c,{getPendingMeta(){return{startedTimeStamp:Date.now(),[Jr]:!0}}}),h=e=>"force"in e,p=e=>"ifOlderThan"in e,y=(e,t,r)=>(n,a)=>{let o=h(r)&&r.force,u=p(r)&&r.ifOlderThan,s=(r=!0)=>{let n={forceRefetch:r,isPrefetch:!0};return i.endpoints[e].initiate(t,n)},c=i.endpoints[e].select(t)(a());if(o)n(s());else if(u){let e=c?.fulfilledTimeStamp;if(!e){n(s());return}(Number(new Date)-Number(new Date(e)))/1e3>=u&&n(s())}else n(s(!1))};function v(e){return t=>t?.meta?.arg?.endpointName===e}function g(e,t){return{matchPending:hn(vn(e),v(t)),matchFulfilled:hn(wn(e),v(t)),matchRejected:hn(gn(e),v(t))}}return{queryThunk:d,mutationThunk:f,prefetch:y,updateQueryData:u,upsertQueryData:s,patchQueryData:o,buildMatchThunkActions:g}}function tl(e,t,r,n){return zc(r[e.meta.arg.endpointName][t],wn(e)?e.payload:void 0,mn(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,n)}function rl(e,t,r){let n=e[t];n&&r(n)}function nl(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function il(e,t,r){let n=e[nl(t)];n&&r(n)}var al={};function ol({reducerPath:e,queryThunk:t,mutationThunk:r,context:{endpointDefinitions:n,apiUid:i,extractRehydrationInfo:a,hasRehydrationInfo:o},assertTagType:u,config:s}){let c=Yr(`${e}/resetApiState`),l=Mn({name:`${e}/queries`,initialState:al,reducers:{removeQueryResult:{reducer(e,{payload:{queryCacheKey:t}}){delete e[t]},prepare:Zr()},queryResultPatched:{reducer(e,{payload:{queryCacheKey:t,patches:r}}){rl(e,t,(e=>{e.data=Or(e.data,r.concat())}))},prepare:Zr()}},extraReducers(e){e.addCase(t.pending,((e,{meta:t,meta:{arg:r}})=>{var n;let i=Jc(r);e[n=r.queryCacheKey]??(e[n]={status:"uninitialized",endpointName:r.endpointName}),rl(e,r.queryCacheKey,(e=>{e.status="pending",e.requestId=i&&e.requestId?e.requestId:t.requestId,r.originalArgs!==void 0&&(e.originalArgs=r.originalArgs),e.startedTimeStamp=t.startedTimeStamp}))})).addCase(t.fulfilled,((e,{meta:t,payload:r})=>{rl(e,t.arg.queryCacheKey,(e=>{if(e.requestId!==t.requestId&&!Jc(t.arg))return;let{merge:i}=n[t.arg.endpointName];if(e.status="fulfilled",i)if(e.data!==void 0){let{fulfilledTimeStamp:n,arg:a,baseQueryMeta:o,requestId:u}=t,s=Sr(e.data,(e=>i(e,r,{arg:a.originalArgs,baseQueryMeta:o,fulfilledTimeStamp:n,requestId:u})));e.data=s}else e.data=r;else e.data=n[t.arg.endpointName].structuralSharing??!0?Ac(Ct(e.data)?Mt(e.data):e.data,r):r;delete e.error,e.fulfilledTimeStamp=t.fulfilledTimeStamp}))})).addCase(t.rejected,((e,{meta:{condition:t,arg:r,requestId:n},error:i,payload:a})=>{rl(e,r.queryCacheKey,(e=>{if(!t){if(e.requestId!==n)return;e.status="rejected",e.error=a??i}}))})).addMatcher(o,((e,t)=>{let{queries:r}=a(t);for(let[t,n]of Object.entries(r))(n?.status==="fulfilled"||n?.status==="rejected")&&(e[t]=n)}))}}),d=Mn({name:`${e}/mutations`,initialState:al,reducers:{removeMutationResult:{reducer(e,{payload:t}){let r=nl(t);r in e&&delete e[r]},prepare:Zr()}},extraReducers(e){e.addCase(r.pending,((e,{meta:t,meta:{requestId:r,arg:n,startedTimeStamp:i}})=>{n.track&&(e[nl(t)]={requestId:r,status:"pending",endpointName:n.endpointName,startedTimeStamp:i})})).addCase(r.fulfilled,((e,{payload:t,meta:r})=>{r.arg.track&&il(e,r,(e=>{e.requestId===r.requestId&&(e.status="fulfilled",e.data=t,e.fulfilledTimeStamp=r.fulfilledTimeStamp)}))})).addCase(r.rejected,((e,{payload:t,error:r,meta:n})=>{n.arg.track&&il(e,n,(e=>{e.requestId===n.requestId&&(e.status="rejected",e.error=t??r)}))})).addMatcher(o,((e,t)=>{let{mutations:r}=a(t);for(let[t,n]of Object.entries(r))(n?.status==="fulfilled"||n?.status==="rejected")&&t!==n?.requestId&&(e[t]=n)}))}}),f=Mn({name:`${e}/invalidation`,initialState:al,reducers:{updateProvidedBy:{reducer(e,t){var r,n;let{queryCacheKey:i,providedTags:a}=t.payload;for(let t of Object.values(e))for(let e of Object.values(t)){let t=e.indexOf(i);t!==-1&&e.splice(t,1)}for(let{type:t,id:o}of a){let a=(r=e[t]??(e[t]={}))[n=o||"__internal_without_id"]??(r[n]=[]);a.includes(i)||a.push(i)}},prepare:Zr()}},extraReducers(e){e.addCase(l.actions.removeQueryResult,((e,{payload:{queryCacheKey:t}})=>{for(let r of Object.values(e))for(let e of Object.values(r)){let r=e.indexOf(t);r!==-1&&e.splice(r,1)}})).addMatcher(o,((e,t)=>{var r,n;let{provided:i}=a(t);for(let[t,a]of Object.entries(i))for(let[i,o]of Object.entries(a)){let a=(r=e[t]??(e[t]={}))[n=i||"__internal_without_id"]??(r[n]=[]);for(let e of o)a.includes(e)||a.push(e)}})).addMatcher(fn(wn(t),mn(t)),((e,t)=>{let r=tl(t,"providesTags",n,u),{queryCacheKey:i}=t.meta.arg;f.caseReducers.updateProvidedBy(e,f.actions.updateProvidedBy({queryCacheKey:i,providedTags:r}))}))}}),h=Mn({name:`${e}/subscriptions`,initialState:al,reducers:{updateSubscriptionOptions(e,t){},unsubscribeQueryResult(e,t){},internal_getRTKQSubscriptions(){}}}),p=Mn({name:`${e}/internalSubscriptions`,initialState:al,reducers:{subscriptionsUpdated:{reducer(e,t){return Or(e,t.payload)},prepare:Zr()}}}),y=Mn({name:`${e}/config`,initialState:{online:Oc(),focused:kc(),middlewareRegistered:!1,...s},reducers:{middlewareRegistered(e,{payload:t}){e.middlewareRegistered=e.middlewareRegistered==="conflict"||i!==t?"conflict":!0}},extraReducers:e=>{e.addCase(Qc,(e=>{e.online=!0})).addCase(Nc,(e=>{e.online=!1})).addCase($c,(e=>{e.focused=!0})).addCase(_c,(e=>{e.focused=!1})).addMatcher(o,(e=>({...e})))}}),v=wt({queries:l.reducer,mutations:d.reducer,provided:f.reducer,subscriptions:p.reducer,config:y.reducer}),g=(e,t)=>v(c.match(t)?void 0:e,t),m={...y.actions,...l.actions,...h.actions,...p.actions,...d.actions,...f.actions,resetApiState:c};return{reducer:g,actions:m}}var ul=Symbol.for("RTKQ/skipToken"),sl={status:"uninitialized"},cl=Sr(sl,(()=>{})),ll=Sr(sl,(()=>{}));function dl({serializeQueryArgs:e,reducerPath:t,createSelector:r}){let n=e=>cl,i=e=>ll;return{buildQuerySelector:u,buildMutationSelector:s,selectInvalidatedBy:c,selectCachedArgsForQuery:l};function a(e){return{...e,...gc(e.status)}}function o(e){return e[t]}function u(t,i){return u=>{let s=e({queryArgs:u,endpointDefinition:i,endpointName:t});return r(u===ul?n:e=>o(e)?.queries?.[s]??cl,a)}}function s(){return e=>{let t;return typeof e=="object"?t=nl(e)??ul:t=e,r(t===ul?i:e=>o(e)?.mutations?.[t]??ll,a)}}function c(e,r){let n=e[t],i=new Set;for(let e of r.map(Hc)){let t=n.provided[e.type];if(!t)continue;let r=(e.id!==void 0?t[e.id]:qc(Object.values(t)))??[];for(let e of r)i.add(e)}return qc(Array.from(i.values()).map((e=>{let t=n.queries[e];return t?[{queryCacheKey:e,endpointName:t.endpointName,originalArgs:t.originalArgs}]:[]})))}function l(e,r){return Object.values(e[t].queries).filter((e=>e?.endpointName===r&&e.status!=="uninitialized")).map((e=>e.originalArgs))}}var fl=WeakMap?new WeakMap:void 0,hl=({endpointName:e,queryArgs:t})=>{let r="",n=fl?.get(t);if(typeof n=="string")r=n;else{let e=JSON.stringify(t,((e,t)=>(t=typeof t=="bigint"?{$bigint:t.toString()}:t,t=vt(t)?Object.keys(t).sort().reduce(((e,r)=>(e[r]=t[r],e)),{}):t,t)));vt(t)&&fl?.set(t,e),r=e}return`${e}(${r})`};function pl(...e){return function(t){let r=Pr((e=>t.extractRehydrationInfo?.(e,{reducerPath:t.reducerPath??"api"}))),n={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...t,extractRehydrationInfo:r,serializeQueryArgs(e){let r=hl;if("serializeQueryArgs"in e.endpointDefinition){let t=e.endpointDefinition.serializeQueryArgs;r=e=>{let r=t(e);return typeof r=="string"?r:hl({...e,queryArgs:r})}}else t.serializeQueryArgs&&(r=t.serializeQueryArgs);return r(e)},tagTypes:[...t.tagTypes||[]]},i={endpointDefinitions:{},batch(e){e()},apiUid:ln(),extractRehydrationInfo:r,hasRehydrationInfo:Pr((e=>r(e)!=null))},a={injectEndpoints:u,enhanceEndpoints({addTagTypes:e,endpoints:t}){if(e)for(let t of e)n.tagTypes.includes(t)||n.tagTypes.push(t);if(t)for(let[e,r]of Object.entries(t))typeof r=="function"?r(i.endpointDefinitions[e]):Object.assign(i.endpointDefinitions[e]||{},r);return a}},o=e.map((e=>e.init(a,n,i)));function u(e){let t=e.endpoints({query:e=>({...e,type:"query"}),mutation:e=>({...e,type:"mutation"})});for(let[r,n]of Object.entries(t)){if(e.overrideExisting!==!0&&r in i.endpointDefinitions){if(e.overrideExisting==="throw")throw new Error(Yn(39));continue}i.endpointDefinitions[r]=n;for(let e of o)e.injectEndpoint(r,n)}return a}return a.injectEndpoints({endpoints:t.endpoints})}}function yl(e){for(let t in e)return!1;return!0}var vl=2147483647/1e3-1,gl=({reducerPath:e,api:t,queryThunk:r,context:n,internalState:i})=>{let{removeQueryResult:a,unsubscribeQueryResult:o}=t.internalActions,u=fn(o.match,r.fulfilled,r.rejected);function s(e){let t=i.currentSubscriptions[e];return!!t&&!yl(t)}let c={},l=(r,i,a)=>{if(u(r)){let t=i.getState()[e],{queryCacheKey:n}=o.match(r)?r.payload:r.meta.arg;d(n,t.queries[n]?.endpointName,i,t.config)}if(t.util.resetApiState.match(r))for(let[e,t]of Object.entries(c))t&&clearTimeout(t),delete c[e];if(n.hasRehydrationInfo(r)){let t=i.getState()[e],{queries:a}=n.extractRehydrationInfo(r);for(let[e,r]of Object.entries(a))d(e,r?.endpointName,i,t.config)}};function d(e,t,r,i){let o=n.endpointDefinitions[t]?.keepUnusedDataFor??i.keepUnusedDataFor;if(o===1/0)return;let u=Math.max(0,Math.min(o,vl));if(!s(e)){let t=c[e];t&&clearTimeout(t),c[e]=setTimeout((()=>{s(e)||r.dispatch(a({queryCacheKey:e})),delete c[e]}),u*1e3)}}return l},ml=({reducerPath:e,context:t,context:{endpointDefinitions:r},mutationThunk:n,queryThunk:i,api:a,assertTagType:o,refetchQuery:u,internalState:s})=>{let{removeQueryResult:c}=a.internalActions,l=fn(wn(n),mn(n)),d=fn(wn(n,i),gn(n,i)),f=[],h=(e,t)=>{l(e)?y(tl(e,"invalidatesTags",r,o),t):d(e)?y([],t):a.util.invalidateTags.match(e)&&y(zc(e.payload,void 0,void 0,void 0,void 0,o),t)};function p(e){for(let t in e.queries)if(e.queries[t]?.status==="pending")return!0;for(let t in e.mutations)if(e.mutations[t]?.status==="pending")return!0;return!1}function y(r,n){let i=n.getState(),o=i[e];if(f.push(...r),o.config.invalidationBehavior==="delayed"&&p(o))return;let l=f;if(f=[],l.length===0)return;let d=a.util.selectInvalidatedBy(i,l);t.batch((()=>{let e=Array.from(d.values());for(let{queryCacheKey:t}of e){let e=o.queries[t],r=s.currentSubscriptions[t]??{};e&&(Wc(r)===0?n.dispatch(c({queryCacheKey:t})):e.status!=="uninitialized"&&n.dispatch(u(e,t)))}}))}return h},wl=({reducerPath:e,queryThunk:t,api:r,refetchQuery:n,internalState:i})=>{let a={},o=(e,n)=>{(r.internalActions.updateSubscriptionOptions.match(e)||r.internalActions.unsubscribeQueryResult.match(e))&&s(e.payload,n),(t.pending.match(e)||t.rejected.match(e)&&e.meta.condition)&&s(e.meta.arg,n),(t.fulfilled.match(e)||t.rejected.match(e)&&!e.meta.condition)&&u(e.meta.arg,n),r.util.resetApiState.match(e)&&l()};function u({queryCacheKey:t},r){let o=r.getState()[e],s=o.queries[t],c=i.currentSubscriptions[t];if(!s||s.status==="uninitialized")return;let{lowestPollingInterval:l,skipPollingIfUnfocused:f}=d(c);if(!Number.isFinite(l))return;let h=a[t];h?.timeout&&(clearTimeout(h.timeout),h.timeout=void 0);let p=Date.now()+l;a[t]={nextPollTimestamp:p,pollingInterval:l,timeout:setTimeout((()=>{(o.config.focused||!f)&&r.dispatch(n(s,t)),u({queryCacheKey:t},r)}),l)}}function s({queryCacheKey:t},r){let n=r.getState()[e].queries[t],o=i.currentSubscriptions[t];if(!n||n.status==="uninitialized")return;let{lowestPollingInterval:s}=d(o);if(!Number.isFinite(s)){c(t);return}let l=a[t],f=Date.now()+s;(!l||f<l.nextPollTimestamp)&&u({queryCacheKey:t},r)}function c(e){let t=a[e];t?.timeout&&clearTimeout(t.timeout),delete a[e]}function l(){for(let e of Object.keys(a))c(e)}function d(e={}){let t=!1,r=Number.POSITIVE_INFINITY;for(let n in e)e[n].pollingInterval&&(r=Math.min(e[n].pollingInterval,r),t=e[n].skipPollingIfUnfocused||t);return{lowestPollingInterval:r,skipPollingIfUnfocused:t}}return o},bl=({reducerPath:e,context:t,api:r,refetchQuery:n,internalState:i})=>{let{removeQueryResult:a}=r.internalActions,o=(e,t)=>{$c.match(e)&&u(t,"refetchOnFocus"),Qc.match(e)&&u(t,"refetchOnReconnect")};function u(r,o){let u=r.getState()[e],s=u.queries,c=i.currentSubscriptions;t.batch((()=>{for(let e of Object.keys(c)){let t=s[e],i=c[e];if(!i||!t)continue;(Object.values(i).some((e=>e[o]===!0))||Object.values(i).every((e=>e[o]===void 0))&&u.config[o])&&(Wc(i)===0?r.dispatch(a({queryCacheKey:e})):t.status!=="uninitialized"&&r.dispatch(n(t,e)))}}))}return o},Sl=new Error("Promise never resolved before cacheEntryRemoved."),ql=({api:e,reducerPath:t,context:r,queryThunk:n,mutationThunk:i,internalState:a})=>{let o=bn(n),u=bn(i),s=wn(n,i),c={},l=(r,a,o)=>{let u=d(r);if(n.pending.match(r)){let e=o[t].queries[u],n=a.getState()[t].queries[u];!e&&n&&f(r.meta.arg.endpointName,r.meta.arg.originalArgs,u,a,r.meta.requestId)}else if(i.pending.match(r))a.getState()[t].mutations[u]&&f(r.meta.arg.endpointName,r.meta.arg.originalArgs,u,a,r.meta.requestId);else if(s(r)){let e=c[u];e?.valueResolved&&(e.valueResolved({data:r.payload,meta:r.meta.baseQueryMeta}),delete e.valueResolved)}else if(e.internalActions.removeQueryResult.match(r)||e.internalActions.removeMutationResult.match(r)){let e=c[u];e&&(delete c[u],e.cacheEntryRemoved())}else if(e.util.resetApiState.match(r))for(let[e,t]of Object.entries(c))delete c[e],t.cacheEntryRemoved()};function d(t){return o(t)?t.meta.arg.queryCacheKey:u(t)?t.meta.arg.fixedCacheKey??t.meta.requestId:e.internalActions.removeQueryResult.match(t)?t.payload.queryCacheKey:e.internalActions.removeMutationResult.match(t)?nl(t.payload):""}function f(t,n,i,a,o){let u=r.endpointDefinitions[t],s=u?.onCacheEntryAdded;if(!s)return;let l={},d=new Promise((e=>{l.cacheEntryRemoved=e})),f=Promise.race([new Promise((e=>{l.valueResolved=e})),d.then((()=>{throw Sl}))]);f.catch((()=>{})),c[i]=l;let h=e.endpoints[t].select(u.type==="query"?n:i),p=a.dispatch(((e,t,r)=>r)),y={...a,getCacheEntry:()=>h(a.getState()),requestId:o,extra:p,updateCachedData:u.type==="query"?r=>a.dispatch(e.util.updateQueryData(t,n,r)):void 0,cacheDataLoaded:f,cacheEntryRemoved:d},v=s(n,y);Promise.resolve(v).catch((e=>{if(e!==Sl)throw e}))}return l},Ol=({api:e,context:t,queryThunk:r,mutationThunk:n})=>{let i=vn(r,n),a=gn(r,n),o=wn(r,n),u={};return(r,n)=>{if(i(r)){let{requestId:i,arg:{endpointName:a,originalArgs:o}}=r.meta,s=t.endpointDefinitions[a],c=s?.onQueryStarted;if(c){let t={},r=new Promise(((e,r)=>{t.resolve=e,t.reject=r}));r.catch((()=>{})),u[i]=t;let l=e.endpoints[a].select(s.type==="query"?o:i),d=n.dispatch(((e,t,r)=>r)),f={...n,getCacheEntry:()=>l(n.getState()),requestId:i,extra:d,updateCachedData:s.type==="query"?t=>n.dispatch(e.util.updateQueryData(a,o,t)):void 0,queryFulfilled:r};c(o,f)}}else if(o(r)){let{requestId:e,baseQueryMeta:t}=r.meta;u[e]?.resolve({data:r.payload,meta:t}),delete u[e]}else if(a(r)){let{requestId:e,rejectedWithValue:t,baseQueryMeta:n}=r.meta;u[e]?.reject({error:r.payload??r.error,isUnhandledError:!t,meta:n}),delete u[e]}}},kl=({api:e,context:{apiUid:t},reducerPath:r})=>(r,n)=>{e.util.resetApiState.match(r)&&n.dispatch(e.internalActions.middlewareRegistered(t))},Il=({api:e,queryThunk:t,internalState:r})=>{let n=`${e.reducerPath}/subscriptions`,i=null,a=null,{updateSubscriptionOptions:o,unsubscribeQueryResult:u}=e.internalActions,s=(r,n)=>{var i,a;if(o.match(n)){let{queryCacheKey:e,requestId:t,options:i}=n.payload;return r?.[e]?.[t]&&(r[e][t]=i),!0}if(u.match(n)){let{queryCacheKey:e,requestId:t}=n.payload;return r[e]&&delete r[e][t],!0}if(e.internalActions.removeQueryResult.match(n))return delete r[n.payload.queryCacheKey],!0;if(t.pending.match(n)){let{meta:{arg:e,requestId:t}}=n,a=r[i=e.queryCacheKey]??(r[i]={});return a[`${t}_running`]={},e.subscribe&&(a[t]=e.subscriptionOptions??a[t]??{}),!0}let s=!1;if(t.fulfilled.match(n)||t.rejected.match(n)){let e=r[n.meta.arg.queryCacheKey]||{},t=`${n.meta.requestId}_running`;s||(s=!!e[t]),delete e[t]}if(t.rejected.match(n)){let{meta:{condition:e,arg:t,requestId:i}}=n;if(e&&t.subscribe){let e=r[a=t.queryCacheKey]??(r[a]={});e[i]=t.subscriptionOptions??e[i]??{},s=!0}}return s},c=()=>r.currentSubscriptions,l={getSubscriptions:c,getSubscriptionCount:e=>{let t=c()[e]??{};return Wc(t)},isRequestSubscribed:(e,t)=>!!c()?.[e]?.[t]};return(o,u)=>{if(i||(i=JSON.parse(JSON.stringify(r.currentSubscriptions))),e.util.resetApiState.match(o))return i=r.currentSubscriptions={},a=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(o))return[!1,l];let c=s(r.currentSubscriptions,o),d=!0;if(c){a||(a=setTimeout((()=>{let t=JSON.parse(JSON.stringify(r.currentSubscriptions)),[,n]=qr(i,(()=>t));u.next(e.internalActions.subscriptionsUpdated(n)),i=t,a=null}),500));let s=typeof o.type=="string"&&!!o.type.startsWith(n),c=t.rejected.match(o)&&o.meta.condition&&!!o.meta.arg.subscribe;d=!s&&!c}return[d,!1]}};function Al(e){let{reducerPath:t,queryThunk:r,api:n,context:i}=e,{apiUid:a}=i,o={invalidateTags:Yr(`${t}/invalidateTags`)},u=e=>e.type.startsWith(`${t}/`),s=[kl,gl,ml,wl,ql,Ol];return{middleware:r=>{let o=!1,l={...e,internalState:{currentSubscriptions:{}},refetchQuery:c,isThisApiSliceAction:u},d=s.map((e=>e(l))),f=Il(l),h=bl(l);return e=>s=>{if(!qt(s))return e(s);o||(o=!0,r.dispatch(n.internalActions.middlewareRegistered(a)));let c={...r,next:e},l=r.getState(),[p,y]=f(s,c,l),v;if(p?v=e(s):v=y,r.getState()[t]&&(h(s,c,l),u(s)||i.hasRehydrationInfo(s)))for(let e of d)e(s,c,l);return v}},actions:o};function c(e,t,n={}){return r({type:"query",endpointName:e.endpointName,originalArgs:e.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:t,...n})}}function Rl(e,...t){return Object.assign(e,...t)}var Cl=Symbol(),jl=({createSelector:e=Ur}={})=>({name:Cl,init(t,{baseQuery:r,tagTypes:n,reducerPath:i,serializeQueryArgs:a,keepUnusedDataFor:o,refetchOnMountOrArgChange:u,refetchOnFocus:s,refetchOnReconnect:c,invalidationBehavior:l},d){wr();let f=e=>e;Object.assign(t,{reducerPath:i,endpoints:{},internalActions:{onOnline:Qc,onOffline:Nc,onFocus:$c,onFocusLost:_c},util:{}});let{queryThunk:h,mutationThunk:p,patchQueryData:y,updateQueryData:v,upsertQueryData:g,prefetch:m,buildMatchThunkActions:w}=el({baseQuery:r,reducerPath:i,context:d,api:t,serializeQueryArgs:a,assertTagType:f}),{reducer:b,actions:S}=ol({context:d,queryThunk:h,mutationThunk:p,reducerPath:i,assertTagType:f,config:{refetchOnFocus:s,refetchOnReconnect:c,refetchOnMountOrArgChange:u,keepUnusedDataFor:o,reducerPath:i,invalidationBehavior:l}});Rl(t.util,{patchQueryData:y,updateQueryData:v,upsertQueryData:g,prefetch:m,resetApiState:S.resetApiState}),Rl(t.internalActions,S);let{middleware:q,actions:O}=Al({reducerPath:i,context:d,queryThunk:h,mutationThunk:p,api:t,assertTagType:f});Rl(t.util,O),Rl(t,{reducer:b,middleware:q});let{buildQuerySelector:k,buildMutationSelector:I,selectInvalidatedBy:A,selectCachedArgsForQuery:R}=dl({serializeQueryArgs:a,reducerPath:i,createSelector:e});Rl(t.util,{selectInvalidatedBy:A,selectCachedArgsForQuery:R});let{buildInitiateQuery:C,buildInitiateMutation:j,getRunningMutationThunk:T,getRunningMutationsThunk:D,getRunningQueriesThunk:M,getRunningQueryThunk:x}=Zc({queryThunk:h,mutationThunk:p,api:t,serializeQueryArgs:a,context:d});return Rl(t.util,{getRunningMutationThunk:T,getRunningMutationsThunk:D,getRunningQueryThunk:x,getRunningQueriesThunk:M}),{name:Cl,injectEndpoint(e,r){var n;let i=t;(n=i.endpoints)[e]??(n[e]={}),Vc(r)?Rl(i.endpoints[e],{name:e,select:k(e,r),initiate:C(e,r)},w(h,e)):Lc(r)&&Rl(i.endpoints[e],{name:e,select:I(),initiate:j(e)},w(p,e))}}}}),Tl=pl(jl());var Dl=async(e,t,r)=>{let n=t.getState(),{accessToken:i,organizationId:a,platformUrl:o}=n.configuration,u={...e,headers:{...e?.headers||{},Authorization:`Bearer ${i}`}};try{return{data:Dc({baseUrl:`${o}/rest/organizations/${a}`})(u,t,r)}}catch(e){return{error:e}}},Ml=Tl({reducerPath:"answer",baseQuery:Uc(Dl,{maxRetries:3}),endpoints:()=>({})});var xl=(e,t)=>{let{answerStyle:r,contentFormat:n}=t;e.answerStyle=r,e.contentFormat=n,e.isStreaming=!0,e.isLoading=!1},El=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},Pl=(e,t)=>{e.citations=t.citations},Fl=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},Ul=(e,t)=>{e.error={message:t.errorMessage,code:t.code},e.isStreaming=!1,e.isLoading=!1,console.error(`${t.errorMessage} - code ${t.code}`)},$l=(e,t)=>{let r=JSON.parse(e.data);r.finishReason==="ERROR"&&r.errorMessage&&Ul(t,r);let n=r.payload.length?JSON.parse(r.payload):{};switch(r.payloadType){case"genqa.headerMessageType":n.answerStyle&&n.contentFormat&&xl(t,n);break;case"genqa.messageType":n.textDelta&&El(t,n);break;case"genqa.citationsType":n.citations&&Pl(t,n);break;case"genqa.endOfStreamType":n.answerGenerated&&Fl(t,n);break}},_l=Ml.injectEndpoints({overrideExisting:!0,endpoints:e=>({getAnswer:e.query({queryFn:()=>({data:{answerStyle:void 0,contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!0,isLoading:!0}}),async onCacheEntryAdded(e,{getState:t,cacheDataLoaded:r,updateCachedData:n}){await r;let{configuration:i,generatedAnswer:a}=t(),{platformUrl:o,organizationId:u,accessToken:s}=i;await yc(`${o}/rest/organizations/${u}/answer/v1/configs/${a.answerConfigurationId}/generate`,{method:"POST",body:JSON.stringify(e),headers:{Authorization:`Bearer ${s}`,Accept:"application/json","Content-Type":"application/json","Accept-Encoding":"*"},fetch,onmessage:e=>{n((t=>{$l(e,t)}))},onerror:e=>{throw e}})}})})});var Ql=sn(ri,(e=>e));function Nl(){return typeof window<"u"&&typeof document<"u"}function Vl(e){let t=e.payload?.analyticsAction;return Ll(e)&&!z(t)}function Ll(e){return"type"in e}var zl=e=>t=>r=>{let n;Vl(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let i=t(r);return Ll(r)&&(r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r)),n!==void 0&&e.dispatch(n),i};var Yl=d(R());var Hl=Yr("commerce/configuration/updateBasicConfiguration",(e=>Xn(e,{accessToken:Bn,organizationId:Bn,platformUrl:Bn}))),Bl=Yr("commerce/configuration/updateAnalyticsConfiguration",(e=>Xn(e,{enabled:si.enabled,source:si.source,trackingId:si.trackingId}))),Wl=Yr("commerce/configuration/analytics/disable"),Kl=Yr("commerce/configuration/analytics/enable");Yr("tab/register",(e=>{let t=new ee({values:{id:Hn,expression:Wn}});return Xn(e,t)}));var Gl=Yr("tab/updateActiveTab",(e=>Xn(e,Hn)));var Jl=d(C()),Zl=d(j()),Xl=d(T());Jl.default.extend(Xl.default);Jl.default.extend(Zl.default);var ed="/rest/search/v2",td="/rest/ua",rd=()=>({organizationId:"",accessToken:"",platformUrl:Fe(),search:{apiBaseUrl:`${Fe()}${ed}`,locale:"en-US",timezone:Jl.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${Ue()}${td}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy",source:{}},knowledge:{answerConfigurationId:""}});function nd(e,t){if(Le(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+td;let r=ze(e,t);return r?Pe(t,r.environment).analytics:e}var id=sn(rd(),(e=>e.addCase(oi,((e,t)=>{ad(e,t.payload)})).addCase(Hl,((e,t)=>{ad(e,t.payload)})).addCase(ui,((e,t)=>{t.payload.apiBaseUrl&&(e.search.apiBaseUrl=t.payload.apiBaseUrl),t.payload.locale&&(e.search.locale=t.payload.locale),t.payload.timezone&&(e.search.timezone=t.payload.timezone),t.payload.authenticationProviders&&(e.search.authenticationProviders=t.payload.authenticationProviders)})).addCase(ci,((e,t)=>{z(t.payload.enabled)||(e.analytics.enabled=t.payload.enabled),z(t.payload.originContext)||(e.analytics.originContext=t.payload.originContext),z(t.payload.originLevel2)||(e.analytics.originLevel2=t.payload.originLevel2),z(t.payload.originLevel3)||(e.analytics.originLevel3=t.payload.originLevel3),z(t.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=t.payload.apiBaseUrl),z(t.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=t.payload.nextApiBaseUrl),z(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),z(t.payload.analyticsMode)||(e.analytics.analyticsMode=t.payload.analyticsMode),z(t.payload.source)||(e.analytics.source=t.payload.source);let r=(0,Yl.default)();r&&(e.analytics.analyticsMode="next",e.analytics.trackingId=r),z(t.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.payload.runtimeEnvironment),z(t.payload.anonymous)||(e.analytics.anonymous=t.payload.anonymous),z(t.payload.deviceId)||(e.analytics.deviceId=t.payload.deviceId),z(t.payload.userDisplayName)||(e.analytics.userDisplayName=t.payload.userDisplayName),z(t.payload.documentLocation)||(e.analytics.documentLocation=t.payload.documentLocation)})).addCase(Bl,((e,t)=>{z(t.payload.enabled)||(e.analytics.enabled=t.payload.enabled),z(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),z(t.payload.source)||(e.analytics.source=t.payload.source)})).addCase(li,(e=>{e.analytics.enabled=!1})).addCase(Wl,(e=>{e.analytics.enabled=!1})).addCase(di,(e=>{e.analytics.enabled=!0})).addCase(Kl,(e=>{e.analytics.enabled=!0})).addCase(fi,((e,t)=>{e.analytics.originLevel2=t.payload.originLevel2})).addCase(hi,((e,t)=>{e.analytics.originLevel3=t.payload.originLevel3})).addCase(Gl,((e,t)=>{e.analytics.originLevel2=t.payload})).addCase(yi,((e,t)=>{e.analytics.originLevel2=t.payload.tab||e.analytics.originLevel2}))));function ad(e,t){t.accessToken&&(e.accessToken=t.accessToken),t.organizationId&&(e.organizationId=t.organizationId),t.platformUrl&&(e.platformUrl=t.platformUrl,e.search.apiBaseUrl=`${t.platformUrl}${ed}`,e.analytics.apiBaseUrl=nd(t.platformUrl,e.organizationId))}var od=id;function ud(e){return e.instantlyCallable}var sd=()=>e=>t=>e(ud(t)?t():t);var cd=e=>()=>t=>r=>{let n=r;if(!n.error)return t(r);let i=n.error;if(n.payload?.ignored||e.error(i.stack||i.message||i.name||"Error",`Action dispatch error ${n.type}`,r),n.error.name!=="SchemaValidationError")return t(r)},ld=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));var dd=e=>({referrer:document.referrer,userAgent:navigator.userAgent,location:window.location.href,clientId:e}),fd=()=>({referrer:null,userAgent:null,location:null,clientId:""});function hd(e,t){let r={...e},n,i=e=>(t,r)=>{let i=e(t,r);return n?n(i,r):i};return{get combinedReducer(){let e=ce(Object.entries(t).filter((([e])=>!(e in r))).map((([e,t])=>[e,()=>t])));return i(wt({...e,...r}))},containsAll(e){return Object.keys(e).every((e=>e in r))},add(e){Object.keys(e).filter((e=>!(e in r))).forEach((t=>r[t]=e[t]))},addCrossReducer(e){n=e}}}function pd(e,t,r){var n,i,a;t===void 0&&(t=50),r===void 0&&(r={});var o=(n=r.isImmediate)!=null&&n,u=(i=r.callback)!=null&&i,s=r.maxWait,c=Date.now(),l=[];function d(){if(s!==void 0){var e=Date.now()-c;if(e+t>=s)return s-e}return t}var f=function(){var t=[].slice.call(arguments),r=this;return new Promise((function(n,i){var s=o&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout((function(){if(a=void 0,c=Date.now(),!o){var n=e.apply(r,t);u&&u(n),l.forEach((function(e){return(0,e.resolve)(n)})),l=[]}}),d()),s){var f=e.apply(r,t);return u&&u(f),n(f)}l.push({resolve:n,reject:i})}))};return f.cancel=function(e){a!==void 0&&clearTimeout(a),l.forEach((function(t){return(0,t.reject)(e)})),l=[]},f}function yd(e,t){let r=0,n=pd((()=>r=0),500);return i=>a=>async o=>{if(!(typeof o=="function"))return a(o);let u=await a(o);if(!vd(u))return u;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,n();let s=await gd(t);i.dispatch(oi({accessToken:s})),i.dispatch(o)}}function vd(e){return e?.error?.name===(new Re).name}async function gd(e){try{return await e()}catch{return""}}function md({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:i}){return an({reducer:e,preloadedState:t,devTools:{stateSanitizer:e=>e.history?{...e,history:"<<OMIT>>"}:e,name:i,shouldHotReload:!1},middleware:e=>e({thunk:{extraArgument:n}}).prepend(...r).concat(ld(n.logger))})}var wd={configuration:od,version:Ql};function bd(e,t){let r=e.organizationEndpoints?.analytics||void 0,{analyticsClientMiddleware:n,...i}=e.analytics??{},a={...i,nextApiBaseUrl:`${r}/rest/organizations/${e.organizationId}/events/v1`,apiBaseUrl:r};if(a.analyticsMode!=="next"&&se())return t.info("Analytics disabled since doNotTrack is active."),{...a,enabled:!1};if(a.analyticsMode==="next"&&!i.trackingId)throw new Cd('analytics.trackingId is required when analytics.analyticsMode="next"');return a}function Sd(e,t){let r=qd(e,t),{accessToken:n,organizationId:i}=e.configuration,{organizationEndpoints:a}=e.configuration,o=a?.platform||e.configuration.platformUrl;Ad(e.configuration)&&r.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),Id(e.configuration)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):Rd(e.configuration)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${e.configuration.organizationEndpoints?.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(oi({accessToken:n,organizationId:i,platformUrl:o}));let u=bd(e.configuration,r.logger);return u&&r.dispatch(ci(u)),r}function qd(e,t){let{reducers:r}=e,n=hd({...wd,...r},e.preloadedState??{});e.crossReducer&&n.addCrossReducer(e.crossReducer);let i=t.logger,a=()=>{let e="";try{e=ws(s.state).getMeta("").clientId}catch(e){i.warn("Error while obtaining clientID from relay",e)}return e},o={...t,get relay(){return ws(s.state)},get navigatorContext(){return e.navigatorContextProvider?e.navigatorContextProvider():Nl()?dd(a()):fd()}},u=Od(e,o,n),s={addReducers(e){n.containsAll(e)||(n.add(e),u.replaceReducer(n.combinedReducer))},dispatch:u.dispatch,subscribe:u.subscribe,enableAnalytics(){u.dispatch(di())},disableAnalytics(){u.dispatch(li())},get state(){return u.getState()},get relay(){return ws(this.state)},get navigatorContext(){return e.navigatorContextProvider?e.navigatorContextProvider():Nl()?dd(a()):fd()},logger:i,store:u};return s}function Od(e,t,r){let{preloadedState:n,configuration:i}=e,a=i.name||"coveo-headless",o=kd(e,t.logger);return md({preloadedState:n,reducer:r.combinedReducer,middlewares:o,thunkExtraArguments:t,name:a})}function kd(e,t){let{renewAccessToken:r}=e.configuration,n=yd(t,r);return[sd,n,cd(t),zl].concat(_l.middleware,e.middlewares||[])}function Id(e){return V(e.organizationEndpoints)}function Ad(e){return!z(e.platformUrl)||z(e.organizationEndpoints?.platform)}function Rd(e){let{platform:t}=e.organizationEndpoints;if(V(t))return!1;let r=Ye(t);return r&&r.organizationId!==e.organizationId}var Cd=class extends Error{constructor(e){super(e),this.name="InvalidEngineConfiguration"}};var jd=d(M());function Td(e){return(0,jd.default)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}function Dd(e,t){let r=Md(e),n=Zn,i=xd(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:i,logger:t}}function Md(e){let{analytics:t}=e,r=(e,t)=>t;return t?.analyticsClientMiddleware||r}function xd(e){return e.preprocessRequest||ye}var Ed={organizationId:Hn,accessToken:Hn,platformUrl:new Z({required:!1,emptyAllowed:!1}),name:new Z({required:!1,emptyAllowed:!1}),analytics:new ee({options:{required:!1},values:{enabled:new W({required:!1}),originContext:new Z({required:!1}),originLevel2:new Z({required:!1}),originLevel3:new Z({required:!1}),analyticsMode:new Z({constrainTo:["legacy","next"],required:!1})}})};var Pd=new Q({...Ed,pipeline:new Z({required:!1,emptyAllowed:!0}),searchHub:Bn,locale:Bn,timezone:Bn});var Fd={debug:wi,pipeline:Ai,searchHub:ic,recommendation:rc};function Ud(e){let t=Td(e.loggerOptions);$d(e.configuration,t);let r=_d(e.configuration,t),n={...Dd(e.configuration,t),apiClient:r},i={...e,reducers:Fd},a=Sd(i,n),{pipeline:o,searchHub:u,timezone:s,locale:c}=e.configuration;return a.dispatch(ui({timezone:s,locale:c})),z(o)||a.dispatch(bi(o)),z(u)||a.dispatch(nc(u)),{...a,get state(){return a.state}}}function $d(e,t){try{Pd.validate(e)}catch(e){throw t.error(e,"Recommendation engine configuration error"),e}}function _d(e,t){return new Xe({logger:t,preprocessRequest:e.preprocessRequest||ye,postprocessSearchResponseMiddleware:e.preprocessSearchResponseMiddleware||ut,postprocessFacetSearchResponseMiddleware:st,postprocessQuerySuggestResponseMiddleware:ct})}function Qd(e){return e.addReducers({configuration:od}),{disableAnalytics:li,enableAnalytics:di,setOriginLevel2:fi,setOriginLevel3:hi,updateAnalyticsConfiguration:ci,updateBasicConfiguration:oi}}function Nd(e){return e.addReducers({configuration:od,pipeline:Ai,searchHub:ic}),{updateSearchConfiguration:ui}}var Vd=()=>new Z({required:!1,emptyAllowed:!0}),Ld=Yr("advancedSearchQueries/update",(e=>Xn(e,{aq:Vd(),cq:Vd(),lq:Vd(),dq:Vd()}))),zd=Yr("advancedSearchQueries/register",(e=>Xn(e,{aq:Vd(),cq:Vd(),lq:Vd(),dq:Vd()})));var Yd=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});sn(Yd(),(e=>{e.addCase(Ld,((e,t)=>{let{aq:r,cq:n,lq:i,dq:a}=t.payload;V(r)||(e.aq=r,e.aqWasSet=!0),V(n)||(e.cq=n,e.cqWasSet=!0),V(i)||(e.lq=i,e.lqWasSet=!0),V(a)||(e.dq=a,e.dqWasSet=!0)})).addCase(zd,((e,t)=>{let{aq:r,cq:n,lq:i,dq:a}=t.payload;V(r)||(e.defaultFilters.aq=r,e.aqWasSet||(e.aq=r)),V(n)||(e.defaultFilters.cq=n,e.cqWasSet||(e.cq=n)),V(i)||(e.defaultFilters.lq=i,e.lqWasSet||(e.lq=i)),V(a)||(e.defaultFilters.dq=a,e.dqWasSet||(e.dq=a))})).addCase(ki.fulfilled,((e,t)=>t.payload?.advancedSearchQueries??e)).addCase(yi,((e,t)=>{let{aq:r,cq:n}=t.payload;V(r)||(e.aq=r,e.aqWasSet=!0),V(n)||(e.cq=n,e.cqWasSet=!0)}))}));var Hd=new re({each:Hn,required:!0}),Bd=(e,t)=>(Xn(e,Hn),X(t)?Xn(t,Hn):Xn(t,Hd),{payload:{contextKey:e,contextValue:t}}),Wd=Yr("context/set",(e=>{for(let[t,r]of Object.entries(e))Bd(t,r);return{payload:e}})),Kd=Yr("context/add",(e=>Bd(e.contextKey,e.contextValue))),Gd=Yr("context/remove",(e=>Xn(e,Hn)));function Jd(){return{contextValues:{}}}sn(Jd(),(e=>{e.addCase(Wd,((e,t)=>{e.contextValues=t.payload})).addCase(Kd,((e,t)=>{e.contextValues[t.payload.contextKey]=t.payload.contextValue})).addCase(Gd,((e,t)=>{delete e.contextValues[t.payload]})).addCase(ki.fulfilled,((e,t)=>{t.payload&&(e.contextValues=t.payload.context.contextValues)}))}));var Zd=Yr("dictionaryFieldContext/set",(e=>{let t=new ee({options:{required:!0}}),r=Xn(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),i=new re({each:Wn}),a=Xn(n,i).error;return a?{payload:e,error:a}:{payload:e}})),Xd=Yr("dictionaryFieldContext/add",(e=>{let t=new ee({options:{required:!0},values:{field:Wn,key:Wn}});return Xn(e,t)})),ef=Yr("dictionaryFieldContext/remove",(e=>Xn(e,Wn)));function tf(){return{contextValues:{}}}sn(tf(),(e=>{e.addCase(Zd,((e,t)=>{e.contextValues=t.payload})).addCase(Xd,((e,t)=>{let{field:r,key:n}=t.payload;e.contextValues[r]=n})).addCase(ef,((e,t)=>{delete e.contextValues[t.payload]})).addCase(ki.fulfilled,((e,t)=>{t.payload&&(e.contextValues=t.payload.dictionaryFieldContext.contextValues)}))}));var rf=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await tu(e.configuration.analytics),actionsHistory:ru.getHistory()},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Yu(e.configuration.analytics,t),...e.excerptLength&&!z(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var nf=(e,t,r)=>({analytics:{clientId:t.clientId,clientTimestamp:(new Date).toISOString(),documentReferrer:t.referrer,documentLocation:t.location,originContext:e.originContext,...r&&{actionCause:r.actionCause},...r&&{customData:r.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.deviceId&&{deviceId:e.deviceId},...zu()&&{pageId:zu()},...e.trackingId&&{trackingId:e.trackingId},capture:!0,source:au(e)}});var af=(e,t,r)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:t.referrer,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:t.clientId},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&nf(e.configuration.analytics,t,r),...e.excerptLength&&!z(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var of={collectionField:new Z({emptyAllowed:!1,required:!1}),parentField:new Z({emptyAllowed:!1,required:!1}),childField:new Z({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new Y({min:0,required:!1})},uf=Yr("folding/register",(e=>Xn(e,of)));In("folding/loadCollection",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:i}})=>{let a=t(),o=a.configuration.analytics.analyticsMode==="legacy"?await rf(a):af(a,i),u=await n.search({...o,q:sf(a),enableQuerySyntax:!0,cq:`@${a.folding.fields.collection}="${e}"`,filterField:a.folding.fields.collection,childField:a.folding.fields.parent,parentField:a.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return tt(u)?r(u.error):{collectionId:e,results:u.success.results,rootResult:a.folding.collections[e].result}}));function sf(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var cf=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});var lf=Yr("fields/registerFieldsToInclude",(e=>Xn(e,Kn))),df=Yr("fields/fetchall/enable"),ff=Yr("fields/fetchall/disable"),hf=In("fields/fetchDescription",(async(e,{extra:t,getState:r,rejectWithValue:n})=>{let i=r(),{accessToken:a,organizationId:o}=i.configuration,{apiBaseUrl:u}=i.configuration.search,s=await t.apiClient.fieldDescriptions({accessToken:a,organizationId:o,url:u});return tt(s)?n(s.error):s.success.fields}));var pf=["author","language","urihash","objecttype","collection","source","permanentid"],yf=[...pf,"date","filetype","parents"],vf=[...yf,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],gf=()=>({fieldsToInclude:pf,fetchAllFields:!1,fieldsDescription:[]});var mf=sn(gf(),(e=>e.addCase(lf,((e,t)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(t.payload))]})).addCase(df,(e=>{e.fetchAllFields=!0})).addCase(ff,(e=>{e.fetchAllFields=!1})).addCase(hf.fulfilled,((e,{payload:t})=>{e.fieldsDescription=t})).addCase(uf,((e,{payload:t})=>{let r=cf().fields;e.fieldsToInclude.push(t.collectionField??r.collection,t.parentField??r.parent,t.childField??r.child)}))));function wf(e){return e.addReducers({fields:mf}),{registerFieldsToInclude:lf,enableFetchAllFields:df,disableFetchAllFields:ff,fetchFieldsDescription:hf}}function bf(e){return e.addReducers({recommendation:rc}),{getRecommendations:Xs,setRecommendationId:Zs}}var Sf=Yr("breadcrumb/deselectAll"),qf=Yr("breadcrumb/deselectAllNonBreadcrumbs");var Of={value:Hn,numberOfResults:new Y({min:0}),state:Hn};var kf=Hn;var If=new Y({min:1,default:8,required:!1}),Af=new Y({min:1,max:20,default:5,required:!1}),Rf={desiredCount:Af,numberOfValues:If};Yr("automaticFacet/setOptions",(e=>Xn(e,Rf)));Yr("automaticFacet/deselectAll",(e=>Xn(e,kf)));var Cf=Hn,jf=Yr("automaticFacet/toggleSelectValue",(e=>Xn(e,{field:Cf,selection:new ee({values:Of})})));var Tf={state:new N({required:!0}),numberOfResults:new Y({required:!0,min:0}),value:new Z({required:!0,emptyAllowed:!0}),path:new re({required:!0,each:Hn}),moreValuesAvailable:new W({required:!1})};function Df(e){e.children.forEach((e=>{Df(e)})),Zn({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},Tf)}var Mf={facetId:kf,field:Hn,delimitingCharacter:new Z({required:!1,emptyAllowed:!0}),filterFacetCount:new W({required:!1}),injectionDepth:new Y({required:!1,min:0}),numberOfValues:new Y({required:!1,min:1}),sortCriteria:new N({required:!1}),basePath:new re({required:!1,each:Hn}),filterByBasePath:new W({required:!1})};Yr("categoryFacet/register",(e=>Xn(e,Mf)));var xf=Yr("categoryFacet/toggleSelectValue",(e=>{try{return Zn(e.facetId,Hn),Df(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Jn(t)}}})),Ef=Yr("categoryFacet/deselectAll",(e=>Xn(e,Mf.facetId)));Yr("categoryFacet/updateNumberOfValues",(e=>Xn(e,{facetId:Mf.facetId,numberOfValues:Mf.numberOfValues})));Yr("categoryFacet/updateSortCriterion",(e=>Xn(e,{facetId:Mf.facetId,criterion:new N})));Yr("categoryFacet/updateBasePath",(e=>Xn(e,{facetId:Mf.facetId,basePath:new re({each:Hn})})));var Pf={facetId:kf,captions:new ee({options:{required:!1}}),numberOfValues:new Y({required:!1,min:1}),query:new Z({required:!1,emptyAllowed:!0})};var Ff={path:new re({required:!0,each:Hn}),displayValue:Wn,rawValue:Wn,count:new Y({required:!0,min:0})},Uf=Yr("categoryFacet/selectSearchResult",(e=>Xn(e,{facetId:kf,value:new ee({values:Ff})})));Yr("categoryFacetSearch/register",(e=>Xn(e,Pf)));var $f={facetId:kf,value:new ee({values:{displayValue:Wn,rawValue:Wn,count:new Y({required:!0,min:0})}})};Yr("facetSearch/register",(e=>Xn(e,Pf)));Yr("facetSearch/update",(e=>Xn(e,Pf)));var _f=Yr("facetSearch/toggleSelectValue",(e=>Xn(e,$f))),Qf=Yr("facetSearch/toggleExcludeValue",(e=>Xn(e,$f)));var Nf=d(C()),Vf=d(x());Nf.default.extend(Vf.default);var Lf="YYYY/MM/DD@HH:mm:ss",zf="1401-01-01";function Yf(e,t){let r=(0,Nf.default)(e,t);return!r.isValid()&&!t?(0,Nf.default)(e,Lf):r}function Hf(e){return e.format(Lf)}function Bf(e,t){let r=Yf(e,t);if(!r.isValid()){let r=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",n=` with the format "${t}"`;throw new Error(`Could not parse the provided date "${e}"${t?n:r}`)}Wf(r)}function Wf(e){if(e.isBefore(zf))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}var Kf=d(C()),Gf=d(E());Kf.default.extend(Gf.default);var Jf=["past","now","next"],Zf=["minute","hour","day","week","month","quarter","year"],Xf=e=>{let t=e==="now";return{amount:new Y({required:!t,min:1}),unit:new Z({required:!t,constrainTo:Zf}),period:new Z({required:!0,constrainTo:Jf})}};function eh(e){if(typeof e=="string"&&!ah(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?uh(e):e;new Q(Xf(t.period)).validate(t);let r=rh(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);Wf(r)}function th(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function rh(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,Kf.default)().subtract(r,n);case"next":return(0,Kf.default)().add(r,n);case"now":return(0,Kf.default)()}}function nh(e){return Hf(rh(uh(e)))}function ih(e){return e.toLocaleLowerCase().split("-")}function ah(e){let[t,r,n]=ih(e);if(t==="now")return!0;if(!Jf.includes(t)||!Zf.includes(n))return!1;let i=parseInt(r);return!(isNaN(i)||i<=0)}function oh(e){return!!e&&typeof e=="object"&&"period"in e}function uh(e){let[t,r,n]=ih(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function sh(e){let t=ch(e.start,e),r=ch(e.end,e),n=e.endInclusive??!1,i=e.state??"idle";return{start:t,end:r,endInclusive:n,state:i}}function ch(e,t){let{dateFormat:r}=t;return oh(e)?(eh(e),th(e)):typeof e=="string"&&ah(e)?(eh(e),e):(Bf(e,r),Hf(Yf(e,r)))}new Z({regex:/^[a-zA-Z0-9-_]+$/});new Z({required:!0});new re({each:new Z});new Z;new W;new W;new Y({min:0});var lh=new Y({min:1});new W({required:!0});var dh=new ee,fh=new Z,hh={captions:dh,numberOfValues:lh,query:fh};new ee({values:hh});var ph=new ee({options:{required:!1},values:{type:new Z({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new re({required:!0,max:25,each:new Z({emptyAllowed:!1,required:!0})})}});new W;var yh=new re({min:1,max:25,required:!1,each:new Z({emptyAllowed:!1,required:!0})});var vh={facetId:kf,field:new Z({required:!0,emptyAllowed:!0}),filterFacetCount:new W({required:!1}),injectionDepth:new Y({required:!1,min:0}),numberOfValues:new Y({required:!1,min:1}),sortCriteria:new N({required:!1}),resultsMustMatch:new N({required:!1}),allowedValues:ph,customSort:yh};Yr("facet/register",(e=>Xn(e,vh)));var gh=Yr("facet/toggleSelectValue",(e=>Xn(e,{facetId:kf,selection:new ee({values:Of})}))),mh=Yr("facet/toggleExcludeValue",(e=>Xn(e,{facetId:kf,selection:new ee({values:Of})}))),wh=Yr("facet/deselectAll",(e=>Xn(e,kf)));Yr("facet/updateSortCriterion",(e=>Xn(e,{facetId:kf,criterion:new N({required:!0})})));Yr("facet/updateNumberOfValues",(e=>Xn(e,{facetId:kf,numberOfValues:new Y({required:!0,min:1})})));Yr("facet/updateIsFieldExpanded",(e=>Xn(e,{facetId:kf,isFieldExpanded:new W({required:!0})})));Yr("facet/updateFreezeCurrentValues",(e=>Xn(e,{facetId:kf,freezeCurrentValues:new W({required:!0})})));Yr("rangeFacet/updateSortCriterion",(e=>Xn(e,{facetId:kf,criterion:new N({required:!0})})));var bh={state:Hn,start:new Y({required:!0}),end:new Y({required:!0}),endInclusive:new W({required:!0}),numberOfResults:new Y({required:!0,min:0})},Sh={start:Hn,end:Hn,endInclusive:new W({required:!0}),state:Hn,numberOfResults:new Y({required:!0,min:0})};var qh={start:Hn,end:Hn,endInclusive:new W({required:!0}),state:Hn},Oh={facetId:kf,field:Hn,currentValues:new re({required:!1,each:new ee({values:qh})}),generateAutomaticRanges:new W({required:!0}),filterFacetCount:new W({required:!1}),injectionDepth:new Y({required:!1,min:0}),numberOfValues:new Y({required:!1,min:1}),sortCriteria:new N({required:!1}),rangeAlgorithm:new N({required:!1})};function kh(e){return ah(e)?nh(e):e}function Ih(e){e.currentValues&&e.currentValues.forEach((e=>{let{start:t,end:r}=sh(e);if(Yf(kh(t)).isAfter(Yf(kh(r))))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)}))}Yr("dateFacet/register",(e=>{try{return Zn(e,Oh),Ih(e),{payload:e,error:null}}catch(t){return{payload:e,error:Jn(t)}}}));var Ah=Yr("dateFacet/toggleSelectValue",(e=>Xn(e,{facetId:kf,selection:new ee({values:Sh})}))),Rh=Yr("dateFacet/toggleExcludeValue",(e=>Xn(e,{facetId:kf,selection:new ee({values:Sh})}))),Ch=Yr("dateFacet/updateFacetValues",(e=>{try{return Zn(e,{facetId:kf,values:new re({each:new ee({values:Sh})})}),Ih({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Jn(t)}}}));var jh={state:Hn,start:new Y({required:!0}),end:new Y({required:!0}),endInclusive:new W({required:!0})},Th={facetId:kf,field:Hn,currentValues:new re({required:!1,each:new ee({values:jh})}),generateAutomaticRanges:new W({required:!0}),filterFacetCount:new W({required:!1}),injectionDepth:new Y({required:!1,min:0}),numberOfValues:new Y({required:!1,min:1}),sortCriteria:new N({required:!1}),rangeAlgorithm:new N({required:!1})};function Dh(e){e.currentValues&&e.currentValues.forEach((({start:e,end:t})=>{if(e>t)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${t}`)}))}Yr("numericFacet/register",(e=>{try{return Xn(e,Th),Dh(e),{payload:e,error:null}}catch(t){return{payload:e,error:Jn(t)}}}));var Mh=Yr("numericFacet/toggleSelectValue",(e=>Xn(e,{facetId:kf,selection:new ee({values:bh})}))),xh=Yr("numericFacet/toggleExcludeValue",(e=>Xn(e,{facetId:kf,selection:new ee({values:bh})}))),Eh=Yr("numericFacet/updateFacetValues",(e=>{try{return Zn(e,{facetId:kf,values:new re({each:new ee({values:bh})})}),Dh({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Jn(t)}}}));var Ph=e=>e.error!==void 0;function Fh(e,t){let r={};e.forEach((e=>r[e.facetId]=e));let n=[];t.forEach((e=>{e in r&&(n.push(r[e]),delete r[e])}));let i=Object.values(r);return[...n,...i]}function Uh(e){return Object.values(e).map((e=>e.request))}var $h=()=>xs("search/logFetchMoreResults",(e=>e.makeFetchMoreResults())),_h=e=>xs("search/queryError",((t,r)=>t.makeQueryError({query:r.query?.q||Mu().q,aq:r.advancedSearchQueries?.aq||Yd().aq,cq:r.advancedSearchQueries?.cq||Yd().cq,dq:r.advancedSearchQueries?.dq||Yd().dq,errorType:e.type,errorMessage:e.message})));var Qh=(e=>(e.Relevance="relevance",e.Fields="fields",e))(Qh||{}),Nh=(e=>(e.Ascending="asc",e.Descending="desc",e))(Nh||{});new ee({options:{required:!1},values:{by:new ie({enum:Qh,required:!0}),fields:new re({each:new ee({values:{name:new Z,direction:new ie({enum:Nh})}})})}});var Vh=()=>Es("analytics/productListing/load",(e=>e.makeInterfaceLoad()),(e=>new Ss(e)));Yr("productlisting/setUrl",(e=>Xn(e,{url:new Z({required:!0,url:!0})})));Yr("productlisting/setAdditionalFields",(e=>Xn(e,{additionalFields:new re({required:!0,each:new Z({required:!0,emptyAllowed:!1})})})));var Lh=In("productlisting/fetch",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:i})=>{let a=t(),{apiClient:o}=i,u=await o.getProducts(await zh(a));return Ph(u)?(r(_h(u.error)),n(u.error)):{response:u.success,analyticsAction:Vh()}})),zh=async e=>{let t=Hh(e),r=await tu(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:e.productListing?.url,...e.configuration.analytics.enabled&&r?{clientId:r}:{},...e.productListing.additionalFields?.length?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&Yh(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...t.length&&{facets:{requests:t}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(e.sort?.by||"relevance")!=="relevance"&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function Yh(e){return e.debug}function Hh(e){return Fh(Bh(e),e.facetOrder??[])}function Bh(e){return[...Uh(e.facetSet??{}),...Uh(e.numericFacetSet??{}),...Uh(e.dateFacetSet??{}),...Uh(e.categoryFacetSet??{})]}var Wh=Yr("facet/updateFacetAutoSelection",(e=>Xn(e,{allow:new W({required:!0})})));var Kh=class extends Vu{constructor(e){super(e);this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].cache[r];return null}get results(){return this.activeInstantResultCache?.results}get queryText(){return this.activeInstantResultQuery??Mu().q}get responseTime(){return this.activeInstantResultCache?.duration??ge().duration}get numberOfResults(){return this.activeInstantResultCache?.totalCountFiltered??ge().response.totalCountFiltered}getSearchUID(){return this.activeInstantResultCache?.searchUid||super.getSearchUID()}};var Gh=()=>xs("analytics/instantResult/searchboxAsYouType",(e=>e.makeSearchboxAsYouType()),(e=>new Kh(e))),Jh=()=>({actionCause:"searchboxAsYouType"});var Zh={id:Hn},Xh={...Zh,q:Wn};Yr("instantResults/register",(e=>Xn(e,Zh)));var ep=Yr("instantResults/updateQuery",(e=>Xn(e,Xh)));Yr("instantResults/clearExpired",(e=>Xn(e,Zh)));var tp=new Y({required:!0,min:0}),rp=Yr("pagination/registerNumberOfResults",(e=>Xn(e,tp))),np=Yr("pagination/updateNumberOfResults",(e=>Xn(e,tp))),ip=Yr("pagination/registerPage",(e=>Xn(e,tp))),ap=Yr("pagination/updatePage",(e=>Xn(e,tp))),op=Yr("pagination/nextPage"),up=Yr("pagination/previousPage");var sp=Yr("query/updateQuery",(e=>Xn(e,{q:new Z,enableQuerySyntax:new W})));function cp(e){return e.type==="dateRange"}function lp(e){return`start${e}`}function dp(e){return`end${e}`}var fp=()=>({dateFacetValueMap:{}});function hp(e,t,r){let n=e.start,i=e.end;return ah(n)&&(n=nh(n),r.dateFacetValueMap[t][lp(n)]=e.start),ah(i)&&(i=nh(i),r.dateFacetValueMap[t][dp(i)]=e.end),{...e,start:n,end:i}}function pp(e,t){if(cp(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map((e=>hp(e,r,t)))}}return e}function yp(e){let t=fp();return{request:{...e,facets:e.facets?.map((e=>pp(e,t)))},mappings:t}}function vp(e,t,r){return{...e,start:r.dateFacetValueMap[t][lp(e.start)]||e.start,end:r.dateFacetValueMap[t][dp(e.end)]||e.end}}function gp(e,t){return e.facetId in t.dateFacetValueMap}function mp(e,t){return gp(e,t)?{...e,values:e.values.map((r=>vp(r,e.facetId,t)))}:e}function wp(e,t){return"success"in e?{success:{...e.success,facets:e.success.facets?.map((e=>mp(e,t)))}}:e}Yr("didYouMean/enable");Yr("didYouMean/disable");Yr("didYouMean/automaticCorrections/disable");Yr("didYouMean/automaticCorrections/enable");var bp=Yr("didYouMean/correction",(e=>Xn(e,Hn)));Yr("didYouMean/automaticCorrections/mode",(e=>Xn(e,new Z({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0}))));var Sp=()=>xs("analytics/didyoumean/automatic",(e=>e.makeDidYouMeanAutomatic()));var qp=()=>({actionCause:"didyoumeanAutomatic"});function Op(){return{freezeFacetOrder:!1,facets:{}}}function kp(){return[]}function Ip(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function Ap(){return{}}function Rp(){return{}}function Cp(){return{}}function jp(e){return{context:e.context||Jd(),dictionaryFieldContext:e.dictionaryFieldContext||tf(),facetSet:e.facetSet||yu(),numericFacetSet:e.numericFacetSet||pu(),dateFacetSet:e.dateFacetSet||hu(),categoryFacetSet:e.categoryFacetSet||fu(),automaticFacetSet:e.automaticFacetSet??ou(),pagination:e.pagination||Ip(),query:e.query||Mu(),tabSet:e.tabSet||Cp(),advancedSearchQueries:e.advancedSearchQueries||Yd(),staticFilterSet:e.staticFilterSet||Rp(),querySet:e.querySet||Ap(),sortCriteria:e.sortCriteria||Uu(),pipeline:e.pipeline||Ii(),searchHub:e.searchHub||$u(),facetOptions:e.facetOptions||Op(),facetOrder:e.facetOrder??kp(),debug:e.debug??mi()}}new ee({values:{undoneQuery:Wn},options:{required:!0}});var Tp=()=>xs("analytics/trigger/query",((e,t)=>t.triggers?.queryModification.newQuery?e.makeTriggerQuery():null));var Dp=Yr("trigger/query/ignore",(e=>Xn(e,new Z({emptyAllowed:!0,required:!0})))),Mp=Yr("trigger/query/modification",(e=>Xn(e,new ee({values:{originalQuery:Bn,modification:Bn}}))));var xp=async(e,t)=>{let r=Np(e),n=Ep(e),i=Pp(e),a=await rf(e,t),o=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return yp({...a,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:o(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:i}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function Ep(e){return Fh(Up(e),e.facetOrder??[])}function Pp(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map((e=>e.response)).map(Fp).filter((e=>e.currentValues.length>0)):void 0}function Fp(e){let{field:t,label:r,values:n}=e,i=n.filter((e=>e.state==="selected"));return{field:t,label:r,currentValues:i}}function Up(e){return $p(e).filter((({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0))}function $p(e){return[..._p(e.facetSet??{}),...Qp(e.numericFacetSet??{}),...Qp(e.dateFacetSet??{}),...Uh(e.categoryFacetSet??{})]}function _p(e){return Uh(e).map((e=>e.sortCriteria==="alphanumericDescending"?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e))}function Qp(e){return Uh(e).map((e=>{let t=e.currentValues.some((({state:e})=>e!=="idle"));return e.generateAutomaticRanges&&!t?{...e,currentValues:[]}:e}))}function Np(e){let t=e.advancedSearchQueries?.cq.trim()||"",r=Object.values(e.tabSet||{}).find((e=>e.isActive))?.expression.trim()||"",n=Vp(e);return[t,r,...n].filter((e=>!!e)).join(" AND ")}function Vp(e){return Object.values(e.staticFilterSet||{}).map((e=>{let t=e.values.filter((e=>e.state==="selected"&&!!e.expression.trim())),r=t.map((e=>e.expression)).join(" OR ");return t.length>1?`(${r})`:r}))}var Lp=class{constructor(e,t=(e=>{this.dispatch(sp({q:e}))})){this.config=e;this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){let n=(new Date).getTime(),i=wp(await this.extra.apiClient.search(t,r),e),a=(new Date).getTime()-n,o=this.getState().query?.q||"";return{response:i,duration:a,queryExecuted:o,requestExecuted:t}}async process(e){return this.processQueryErrorOrContinue(e)??await this.processQueryCorrectionsOrContinue(e)??await this.processQueryTriggersOrContinue(e)??this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return tt(e.response)?(this.dispatch(_h(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:i}=t.didYouMean,{results:a,queryCorrections:o,queryCorrection:u}=r;if(!n||!i)return null;let s=a.length===0&&o&&o.length!==0,c=!z(u)&&!z(u.correctedQuery);if(!s&&!c)return null;let l=s?await this.processLegacyDidYouMeanAutoCorrection(e):this.processModernDidYouMeanAutoCorrection(e);return this.dispatch(Oi(jp(this.getState()))),l}async processLegacyDidYouMeanAutoCorrection(e){let t=this.getCurrentQuery(),r=this.getSuccessResponse(e);if(!r.queryCorrections)return null;let{correctedQuery:n}=r.queryCorrections[0],i=await this.automaticallyRetryQueryWithCorrection(n);return tt(i.response)?(this.dispatch(_h(i.response.error)),this.rejectWithValue(i.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(e),this.dispatch(Oi(jp(this.getState()))),{...i,response:{...i.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:t,analyticsAction:Sp()})}processModernDidYouMeanAutoCorrection(e){let t=this.getSuccessResponse(e),{correctedQuery:r,originalQuery:n}=t.queryCorrection;return this.onUpdateQueryForCorrection(r),{...e,response:{...t},queryExecuted:r,automaticallyCorrected:!0,originalQuery:n,analyticsAction:Sp()}}logOriginalAnalyticsQueryBeforeAutoCorrection(e){let t=this.getState(),r=this.getSuccessResponse(e);this.analyticsAction&&this.analyticsAction()(this.dispatch,(()=>this.getStateAfterResponse(e.queryExecuted,e.duration,t,r)),this.extra)}async processQueryTriggersOrContinue(e){let t=this.getSuccessResponse(e);if(!t)return null;let r=t.triggers.find((e=>e.type==="query"))?.content||"";if(!r)return null;if(this.getState().triggers?.queryModification.queryToIgnore===r)return this.dispatch(Dp("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let n=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(r);return tt(i.response)?(this.dispatch(_h(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Oi(jp(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:n,analyticsAction:Tp()})}getStateAfterResponse(e,t,r,n){return{...r,query:{q:e,enableQuerySyntax:r.query?.enableQuerySyntax??Mu().enableQuerySyntax},search:{...ge(),duration:t,response:n,results:n.results}}}processSuccessResponse(e){return this.dispatch(Oi(jp(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return et(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=await this.fetchFromAPI(await xp(this.getState()),{origin:"mainSearch"});return this.dispatch(bp(e)),t}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(Mp({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await xp(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){let e=this.getState();return e.query?.q!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};In("search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;Xn(e,{q:new Z,enableQuerySyntax:new W,clearFilters:new W}),e.clearFilters&&(r(Sf()),r(qf())),r(Wh({allow:!0})),r(sp({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(ap(1))}));In("search/executeSearch",(async(e,t)=>{let r=t.getState();return await Zp(r,t,e)}));In("search/fetchPage",(async(e,t)=>{let r=t.getState();return await Kp(r,t,e)}));In("search/fetchMoreResults",(async(e,t)=>{let r=t.getState();return await Gp(t,r)}));In("search/fetchFacetValues",(async(e,t)=>{let r=t.getState();return await Jp(t,e,r)}));In("search/fetchInstantResults",(async(e,t)=>Wp(e,t)));var zp=async(e,t)=>{let r=await xp(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},r},Yp=async(e,t,r)=>{let n=await rf(e);return yp({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},Hp=async(e,t)=>{let r=await xp(e,t);return r.request.numberOfResults=0,r},Bp=e=>{e.configuration.analytics.enabled&&ru.addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})};async function Wp(e,t){Xn(e,{id:Hn,q:Hn,maxResultsPerQuery:new Y({required:!0,min:1}),cacheTimeout:new Y});let{q:r,maxResultsPerQuery:n}=e,i=t.getState(),a=new Lp({...t,analyticsAction:Gh()},(r=>{t.dispatch(ep({q:r,id:e.id}))})),o=await Yp(i,r,n),u=await a.fetchFromAPI(o,{origin:"instantResults",disableAbortWarning:!0}),s=await a.process(u);return"response"in s?{results:s.response.results,searchUid:s.response.searchUid,analyticsAction:s.analyticsAction,totalCountFiltered:s.response.totalCountFiltered,duration:s.duration}:s}async function Kp(e,t,r){Bp(e);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:o}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),u=new Lp({...t,analyticsAction:r}),s=await xp(e,o),c=await u.fetchFromAPI(s,{origin:"mainSearch"});return await u.process(c)}async function Gp(e,t){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:i}=e.extra,{description:a}=await $h().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:i}),o=new Lp({...e,analyticsAction:$h()}),u=await zp(t,a),s=await o.fetchFromAPI(u,{origin:"mainSearch"});return await o.process(s)}async function Jp(e,t,r){let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=e.extra,{description:o}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),u=new Lp({...e,analyticsAction:t}),s=await Hp(r,o),c=await u.fetchFromAPI(s,{origin:"facetValues"});return await u.process(c)}async function Zp(e,t,r){Bp(e);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:o}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),u=await xp(e,o),s=new Lp({...t,analyticsAction:r}),c=await s.fetchFromAPI(u,{origin:"mainSearch"});return await s.process(c)}var Xp=async(e,t,r)=>{let n=uy(e),i=ey(e),a=ty(e),o=e.configuration.analytics.analyticsMode==="legacy"?await rf(e,r):af(e,t,r),u=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return yp({...o,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...n&&{cq:n},...i.length&&{facets:i},...e.pagination&&{numberOfResults:u(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:a}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function ey(e){return Fh(ny(e),e.facetOrder??[])}function ty(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map((e=>e.response)).map(ry).filter((e=>e.currentValues.length>0)):void 0}function ry(e){let{field:t,label:r,values:n}=e,i=n.filter((e=>e.state==="selected"));return{field:t,label:r,currentValues:i}}function ny(e){return iy(e).filter((({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0))}function iy(e){return[...ay(e.facetSet??{}),...oy(e.numericFacetSet??{}),...oy(e.dateFacetSet??{}),...Uh(e.categoryFacetSet??{})]}function ay(e){return Uh(e).map((e=>e.sortCriteria==="alphanumericDescending"?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e))}function oy(e){return Uh(e).map((e=>{let t=e.currentValues.some((({state:e})=>e!=="idle"));return e.generateAutomaticRanges&&!t?{...e,currentValues:[]}:e}))}function uy(e){let t=e.advancedSearchQueries?.cq.trim()||"",r=Object.values(e.tabSet||{}).find((e=>e.isActive))?.expression.trim()||"",n=sy(e);return[t,r,...n].filter((e=>!!e)).join(" AND ")}function sy(e){return Object.values(e.staticFilterSet||{}).map((e=>{let t=e.values.filter((e=>e.state==="selected"&&!!e.expression.trim())),r=t.map((e=>e.expression)).join(" OR ");return t.length>1?`(${r})`:r}))}var cy=class{constructor(e,t=(e=>{this.dispatch(sp({q:e}))})){this.config=e;this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){let n=(new Date).getTime(),i=wp(await this.extra.apiClient.search(t,r),e),a=(new Date).getTime()-n,o=this.getState().query?.q||"";return{response:i,duration:a,queryExecuted:o,requestExecuted:t}}async process(e){return this.processQueryErrorOrContinue(e)??await this.processQueryCorrectionsOrContinue(e)??await this.processQueryTriggersOrContinue(e)??this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return tt(e.response)?(this.dispatch(_h(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:i}=t.didYouMean,{results:a,queryCorrections:o,queryCorrection:u}=r;if(!n||!i)return null;let s=a.length===0&&o&&o.length!==0,c=!z(u)&&!z(u.correctedQuery);if(!s&&!c)return null;let l=s?await this.processLegacyDidYouMeanAutoCorrection(e):this.processModernDidYouMeanAutoCorrection(e);return this.dispatch(Oi(jp(this.getState()))),l}async processLegacyDidYouMeanAutoCorrection(e){let t=this.getCurrentQuery(),r=this.getSuccessResponse(e);if(!r.queryCorrections)return null;let{correctedQuery:n}=r.queryCorrections[0],i=await this.automaticallyRetryQueryWithCorrection(n);return tt(i.response)?(this.dispatch(_h(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Oi(jp(this.getState()))),{...i,response:{...i.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:t})}processModernDidYouMeanAutoCorrection(e){let t=this.getSuccessResponse(e),{correctedQuery:r,originalQuery:n}=t.queryCorrection;return this.onUpdateQueryForCorrection(r),{...e,response:{...t},queryExecuted:r,automaticallyCorrected:!0,originalQuery:n}}async processQueryTriggersOrContinue(e){let t=this.getSuccessResponse(e);if(!t)return null;let r=t.triggers.find((e=>e.type==="query"))?.content||"";if(!r)return null;if(this.getState().triggers?.queryModification.queryToIgnore===r)return this.dispatch(Dp("")),null;let n=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(r);return tt(i.response)?(this.dispatch(_h(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Oi(jp(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:n})}processSuccessResponse(e){return this.dispatch(Oi(jp(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(e){return et(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=this.getState(),{actionCause:r}=qp(),n=await this.fetchFromAPI(await Xp(t,this.extra.navigatorContext,{actionCause:r}),{origin:"mainSearch"});return this.dispatch(bp(e)),n}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(Mp({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await Xp(this.getState(),this.extra.navigatorContext),{origin:"mainSearch"})}getCurrentQuery(){let e=this.getState();return e.query?.q!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};In("search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;Xn(e,{q:new Z,enableQuerySyntax:new W,clearFilters:new W}),e.clearFilters&&(r(Sf()),r(qf())),r(Wh({allow:!0})),r(sp({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(ap(1))}));var ly=In("search/executeSearch",(async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Zp(r,t,e.legacy);py(r);let n=yy(e.next),i=await Xp(r,t.extra.navigatorContext,n),a=new cy({...t,analyticsAction:n}),o=await a.fetchFromAPI(i,{origin:"mainSearch"});return await a.process(o)}));In("search/fetchPage",(async(e,t)=>{let r=t.getState();if(py(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Kp(r,t,e.legacy);let n=new cy({...t,analyticsAction:e.next}),i=await Xp(r,t.extra.navigatorContext,e.next),a=await n.fetchFromAPI(i,{origin:"mainSearch"});return await n.process(a)}));In("search/fetchMoreResults",(async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Gp(t,r);let n=Is("browseResults",t.getState),i=new cy({...t,analyticsAction:n}),a=await dy(r,t.extra.navigatorContext,n),o=await i.fetchFromAPI(a,{origin:"mainSearch"});return await i.process(o)}));In("search/fetchFacetValues",(async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Zp(r,t,e.legacy);let n=yy(e.next),i=new cy({...t,analyticsAction:n}),a=await hy(r,t.extra.navigatorContext,n),o=await i.fetchFromAPI(a,{origin:"facetValues"});return await i.process(o)}));In("search/fetchInstantResults",(async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Wp(e,t);Xn(e,{id:Hn,q:Hn,maxResultsPerQuery:new Y({required:!0,min:1}),cacheTimeout:new Y});let{q:n,maxResultsPerQuery:i}=e,a=yy(Jh()),o=await fy(r,t.extra.navigatorContext,n,i,a),u=new cy({...t,analyticsAction:a},(r=>{t.dispatch(ep({q:r,id:e.id}))})),s=await u.fetchFromAPI(o,{origin:"instantResults",disableAbortWarning:!0}),c=await u.process(s);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c}));var dy=async(e,t,r)=>{let n=await Xp(e,t,r);return n.request={...n.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},n},fy=async(e,t,r,n,i)=>{let a=af(e,t,i);return yp({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:n,q:r})},hy=async(e,t,r)=>{let n=await Xp(e,t,r);return n.request.numberOfResults=0,n},py=e=>{e.configuration.analytics.enabled&&ru.addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})},yy=e=>({actionCause:e.actionCause,type:e.actionCause});var vy=sn(Ip(),(e=>{e.addCase(rp,((e,t)=>{let r=my(e),n=t.payload;e.defaultNumberOfResults=e.numberOfResults=n,e.firstResult=by(r,n)})).addCase(np,((e,t)=>{e.numberOfResults=t.payload,e.firstResult=0})).addCase(Gl,(e=>{e.firstResult=0})).addCase(ip,((e,t)=>{let r=t.payload;e.firstResult=by(r,e.numberOfResults)})).addCase(ap,((e,t)=>{let r=t.payload;e.firstResult=by(r,e.numberOfResults)})).addCase(up,(e=>{let t=my(e),r=Math.max(t-1,1);e.firstResult=by(r,e.numberOfResults)})).addCase(op,(e=>{let t=my(e),r=wy(e),n=Math.min(t+1,r);e.firstResult=by(n,e.numberOfResults)})).addCase(ki.fulfilled,((e,t)=>{t.payload&&(e.numberOfResults=t.payload.pagination.numberOfResults,e.firstResult=t.payload.pagination.firstResult)})).addCase(yi,((e,t)=>{e.firstResult=t.payload.firstResult??e.firstResult,e.numberOfResults=t.payload.numberOfResults??e.defaultNumberOfResults})).addCase(ly.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.totalCountFiltered})).addCase(Lh.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.pagination.totalCount})).addCase(wh,(e=>{gy(e)})).addCase(Rh,(e=>{gy(e)})).addCase(mh,(e=>{gy(e)})).addCase(xh,(e=>{gy(e)})).addCase(Qf,(e=>{gy(e)})).addCase(gh,(e=>{gy(e)})).addCase(Ef,(e=>{gy(e)})).addCase(xf,(e=>{gy(e)})).addCase(Uf,(e=>{gy(e)})).addCase(Ah,(e=>{gy(e)})).addCase(Mh,(e=>{gy(e)})).addCase(Sf,(e=>{gy(e)})).addCase(Ch,(e=>{gy(e)})).addCase(Eh,(e=>{gy(e)})).addCase(_f,(e=>{gy(e)})).addCase(jf,(e=>{gy(e)}))}));function gy(e){e.firstResult=Ip().firstResult}function my(e){let{firstResult:t,numberOfResults:r}=e;return Sy(t,r)}function wy(e){let{totalCountFiltered:t,numberOfResults:r}=e;return qy(t,r)}function by(e,t){return(e-1)*t}function Sy(e,t){return Math.round(e/t)+1}function qy(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}function Oy(e){return e.addReducers({pagination:vy}),{nextPage:op,previousPage:up,registerNumberOfResults:rp,registerPage:ip,updateNumberOfResults:np,updatePage:ap}}function ky(e){let t,r=new Map,n=()=>r.size===0,i=e=>{try{let r=JSON.stringify(e),n=t!==r;return t=r,n}catch(e){return console.warn('Could not detect if state has changed, check the controller "get state method"',e),!0}};return{subscribe(a){a();let o=Symbol(),u;return n()&&(t=JSON.stringify(this.state),u=e.subscribe((()=>{i(this.state)&&r.forEach((e=>e()))}))),r.set(o,a),()=>{r.delete(o),n()&&u&&u()}},get state(){return{}}}}var Iy=new Q({id:new Z({emptyAllowed:!0,required:!1,default:""}),numberOfRecommendations:new Y({min:0})});function Ay(e,t={}){if(!Ry(e));let r=ky(e),{dispatch:n}=e,i=()=>e.state,a=ei(e,Iy,t.options,"buildRecommendationList");return a.id!==""&&n(Zs({id:a.id})),a.numberOfRecommendations&&n(Oy(e).updateNumberOfResults(a.numberOfRecommendations)),{...r,refresh(){n(Xs())},get state(){let e=i();return{recommendations:e.recommendation.recommendations,error:e.recommendation.error,isLoading:e.recommendation.isLoading,searchResponseId:e.recommendation.searchUid}}}}function Ry(e){return e.addReducers({recommendation:rc,configuration:od}),!0}function Cy(e,t,r){if(!jy(e));let n=1e3,i={selectionDelay:n,debounceWait:n,...t.options},a;return{select:pd(r,i.debounceWait,{isImmediate:!0}),beginDelayedSelect(){a=setTimeout(r,i.selectionDelay)},cancelPendingSelect(){a&&clearTimeout(a)}}}function jy(e){return e.addReducers({configuration:od}),!0}function Ty(e,t){let r=!1,n=()=>{r||(r=!0,e.dispatch(Js(t.options.result)))};return Cy(e,t,(()=>{n()}))}new Q({values:new ee({options:{required:!1}})});new Q({content:new N({required:!0}),conditions:new N({required:!0}),priority:new Y({required:!1,default:0,min:0}),fields:new re({required:!1,each:Hn})});F();
/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */export{wf as A,Nd as H,Qd as L,Pe as N,Ud as U,Ay as Z,vf as a,bf as j,Ty as r};
//# sourceMappingURL=p-db576330.js.map