import{W as t}from"./p-0e432c2f.js";import{h as e}from"./p-00525453.js";import{e as o,f as n,b as r}from"./p-effc0f7e.js";import{i}from"./p-65c3e61f.js";import{t as s}from"./p-4328fcc3.js";function c(t){if(i(t)){return"section"}if(!n(t)){return"metadata"}if(r(t)&&t.tagName.toLowerCase()===s){return"table-column-definition"}return"other"}function a(t){return o(Array.from(t),(t=>c(t)))}class l{constructor({host:t,setError:e,validParents:o,allowEmpty:n=false}){this.matchConditions=[];this.host=t;this.validateTemplate(t,e,o,n)}validateTemplate(t,e,o,n=true){var r;const i=o.map((t=>t.toUpperCase())).includes(((r=t.parentElement)===null||r===void 0?void 0:r.nodeName)||"");const s=t.nodeName.toLowerCase();if(!i){e(new Error(`The "${s}" component has to be the child of one of the following: ${o.map((t=>`"${t.toLowerCase()}"`)).join(", ")}.`));return}const c=t.querySelector("template");if(!c){e(new Error(`The "${s}" component must contain a "template" element as a child.`));return}if(!n&&!c.innerHTML.trim()){e(new Error(`The "template" tag inside "${s}" cannot be empty.`));return}if(c.content.querySelector("script")){console.warn('Any "script" tags defined inside of "template" elements are not supported and will not be executed when the products are rendered.',t)}const{section:l,other:f}=a(c.content.childNodes);if((l===null||l===void 0?void 0:l.length)&&(f===null||f===void 0?void 0:f.length)){console.warn("Product templates should only contain section elements or non-section elements. Future updates could unpredictably affect this product template.",t,{sectionNodes:l,otherNodes:f})}}getTemplate(t,e){if(e){return null}return{conditions:t.concat(this.matchConditions),content:f(this.host).content,priority:1}}renderIfError(t){if(t){return e("atomic-component-error",{element:this.host,error:t})}}}function f(t){return t.querySelector("template")}function u(e,o){const n=[];for(const o in e){n.push(t.fieldMustMatch(o,e[o]))}for(const e in o){n.push(t.fieldMustNotMatch(e,o[e]))}return n}function m(e,o){const n=[];if(e){const o=e.split(",");n.push(t.fieldsMustBeDefined(o))}if(o){const e=o.split(",");n.push(t.fieldsMustNotBeDefined(e))}return n}export{l as P,u as a,m};
//# sourceMappingURL=p-2fd5dfed.js.map