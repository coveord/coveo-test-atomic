{"version":3,"names":["AtomicProductPrice","initialize","this","context","buildContext","bindings","engine","render","hasPromotionalPrice","product","ec_promo_price","ec_price","currency","contextState","h","key","class","field","__decorate","InitializeBindings","ProductContext","BindStateToController"],"sources":["src/components/commerce/product-template-components/atomic-product-price/atomic-product-price.tsx"],"sourcesContent":["import {\n  buildContext,\n  Product,\n  Context,\n  ContextState,\n} from '@coveo/headless/commerce';\nimport {Component, h} from '@stencil/core';\nimport {\n  BindStateToController,\n  InitializableComponent,\n  InitializeBindings,\n} from '../../../../utils/initialization-utils';\nimport {CommerceBindings} from '../../atomic-commerce-interface/atomic-commerce-interface';\nimport {ProductContext} from '../product-template-decorators';\n\n/**\n * @internal\n * The `atomic-product-price` component renders the price of a product.\n */\n@Component({\n  tag: 'atomic-product-price',\n  shadow: false,\n})\nexport class AtomicProductPrice\n  implements InitializableComponent<CommerceBindings>\n{\n  @InitializeBindings() public bindings!: CommerceBindings;\n  public error!: Error;\n\n  @ProductContext() private product!: Product;\n  public context!: Context;\n  @BindStateToController('context') contextState!: ContextState;\n\n  public initialize(): void {\n    this.context = buildContext(this.bindings.engine);\n  }\n\n  public render() {\n    const hasPromotionalPrice =\n      this.product.ec_promo_price !== null &&\n      this.product.ec_price !== null &&\n      this.product.ec_promo_price < this.product.ec_price;\n\n    const {currency} = this.contextState;\n\n    return (\n      <div class=\"flex flex-wrap\">\n        <atomic-product-numeric-field-value\n          class={`truncate break-keep mx-1 ${hasPromotionalPrice && 'text-error'}`}\n          field={hasPromotionalPrice ? 'ec_promo_price' : 'ec_price'}\n        >\n          <atomic-format-currency currency={currency}></atomic-format-currency>\n        </atomic-product-numeric-field-value>\n        {hasPromotionalPrice && (\n          <atomic-product-numeric-field-value\n            class=\"truncate break-keep mx-1 text-xl line-through\"\n            field=\"ec_price\"\n          >\n            <atomic-format-currency\n              currency={currency}\n            ></atomic-format-currency>\n          </atomic-product-numeric-field-value>\n        )}\n      </div>\n    );\n  }\n}\n"],"mappings":"+mBAuBaA,EAAkB,M,yBAUtB,UAAAC,GACLC,KAAKC,QAAUC,EAAaF,KAAKG,SAASC,O,CAGrC,MAAAC,GACL,MAAMC,EACJN,KAAKO,QAAQC,iBAAmB,MAChCR,KAAKO,QAAQE,WAAa,MAC1BT,KAAKO,QAAQC,eAAiBR,KAAKO,QAAQE,SAE7C,MAAMC,SAACA,GAAYV,KAAKW,aAExB,OACEC,EAAA,OAAAC,IAAA,2CAAKC,MAAM,kBACTF,EAAA,sCAAAC,IAAA,2CACEC,MAAO,4BAA4BR,GAAuB,eAC1DS,MAAOT,EAAsB,iBAAmB,YAEhDM,EAAA,0BAAAC,IAAA,2CAAwBH,SAAUA,KAEnCJ,GACCM,EAAA,sCAAAC,IAAA,2CACEC,MAAM,gDACNC,MAAM,YAENH,EAAA,0BAAAC,IAAA,2CACEH,SAAUA,K,GAjCOM,EAAA,CAA5BC,K,+BAGyBD,EAAA,CAAzBE,K,8BAEiCF,EAAA,CAAjCG,EAAsB,Y"}