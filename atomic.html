<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Atomic Feedback Demo</title>
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
            integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w=="
            crossorigin="anonymous"
    />
    <!-- Module containing the Atomic web components -->
    <script
            type="module"
            src="../atomic/atomic.esm.js"
    ></script>
    <!-- Optional stylesheet containing useful layout styling (Bootstrap Grid)  -->
    <!-- https://v5.getbootstrap.com/docs/5.0/layout -->
    <link
            rel="stylesheet"
            href="../atomic/atomic.css"
    />
    <style>
        * {
            box-sizing: border-box;
        }

        atomic-search-interface:not(.hydrated) {
            display: none;
        }

        :root {
            /* Bootstrap CSS variable https://v5.getbootstrap.com/docs/5.0/customize/css-variables/ */
            --bs-font-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI",
            Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji",
            "Segoe UI Emoji", "Segoe UI Symbol";

            /* Custom Atomic CSS variable */
            --atomic-border-radius: 0.5em;

            /* CSS variable for personal use */
            --some-nice-red: #dc3545;
        }

        header h1 {
            font-family: var(--bs-font-sans-serif);
            background-color: var(--some-nice-red);
            color: white;
            padding: 20px;
            margin: 0;
            text-align: center;
        }

        /* Example on how to customize Atomic component CSS parts */
        atomic-search-box::part(submit-button) {
            background-color: green;
            border-color: green;
        }

        /* Example on how to customize custom templates CSS parts */
        atomic-result-list::part(card-result) {
            width: 30rem;
        }
    </style>
    <script>
        // Example on how to configure the search interface with an organizationId/accessToken
        (async () => {
            await customElements.whenDefined("atomic-search-interface");
            document.querySelector("#search").initialize({
                accessToken: "xx044fbc2a-acea-46fe-b2c8-c57dba06ed25",
                organizationId: "commercedemosportsstore90xhuodn"
            });
        })();
    </script>
</head>

<body>
<header>
    <h1>Atomic Feedback Demo</h1>
</header>
<!-- Bootstrap's grid layout classes are used to position elements -->
<div class="container-xl">
    <atomic-search-interface
            id="search"
            pipeline="CatalogAvailableSkus"
            search-hub="storefront"
    >
        <div class="row justify-content-center my-5">
            <div class="col-8">
                <atomic-search-box>
                    <!-- Example on how to use slots to insert content into components -->
                    <span slot="submit-button">
                <svg
                        width="1em"
                        height="1em"
                        viewBox="0 0 16 16"
                        fill="currentColor"
                        xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                          fill-rule="evenodd"
                          d="M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z"
                  ></path>
                  <path
                          fill-rule="evenodd"
                          d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"
                  ></path>
                </svg>
              </span>
                </atomic-search-box>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div class="d-flex justify-content-between align-items-center">
                    <atomic-query-summary></atomic-query-summary>
                    <atomic-sort-dropdown></atomic-sort-dropdown>
                </div>

                <div class="row">
                    <!-- The result list component offers additional classes (list-class, list-element-class) that allow to control the layout -->
                    <!-- Here we use it to display 2 results per row using Bootstrap classes -->
                    <atomic-result-list
                            class="container"
                            list-class="row row-cols-2"
                            list-element-class="col"
                    >
                        <!-- Result template example -->
                        <!-- You can see this template in action if you query "levi" or "belt"-->
                        <atomic-result-template
                                id="demo-template"
                                must-match-brand="levi's,carhartt"
                                must-not-match-season="2019AI"
                                fields-to-include="ec_image"
                        >
                            <!-- Inside templates, many Bootstrap components are made available e.g. Cards, Buttons, Badge, Tables, etc. -->
                            <div class="card" part="card-result">
                                <!-- Example on how to insert data directly from the Result object using Mustache -->
                                <img
                                        class="card-img-top"
                                        src="{{raw.ec_image}}"
                                        alt="{{title}}"
                                />
                                <div class="card-body">
                                    <h3 class="h5">
                                        <!-- Example on how to insert data using the result value component -->
                                        <!-- Different formatting will be added in the future e.g., Date, Currency, etc. -->
                                        <atomic-result-value value="title">
                                        </atomic-result-value>
                                    </h3>
                                    <p>
                                        <atomic-result-value value="ec_description">
                                        </atomic-result-value>
                                    </p>

                                    <div class="row">
                                        <!-- Example on how to conditionally render content inside a template -->
                                        <atomic-field-condition
                                                if-defined="ec_promo_price"
                                                class="col"
                                        >
                          <span class="fs-6 mr-1 badge bg-primary"
                          >Sale price:
                          </span>
                                            $<atomic-result-value
                                                value="ec_promo_price"
                                        ></atomic-result-value>
                                        </atomic-field-condition>

                                        <div class="col">
                          <span class="fs-6 mr-1 badge bg-secondary"
                          >Price:
                          </span>
                                            $<atomic-result-value
                                                value="price"
                                        ></atomic-result-value>
                                        </div>
                                    </div>

                                    <hr />
                                    <atomic-result-link class="btn btn-primary"
                                    >View product</atomic-result-link
                                    >
                                </div>
                            </div>
                        </atomic-result-template>

                        <script>
                            // Example on how to manually add conditions
                            document.querySelector("#demo-template").conditions = [
                                (result) => {
                                    const price =
                                        result.raw.ec_promo_price || result.raw.price;
                                    return price < 25;
                                }
                            ];
                        </script>
                    </atomic-result-list>
                </div>

                <div class="d-flex justify-content-between my-4">
                    <atomic-pager></atomic-pager>
                    <atomic-results-per-page></atomic-results-per-page>
                </div>
            </div>
        </div>
    </atomic-search-interface>
</div>
</body>
</html>
