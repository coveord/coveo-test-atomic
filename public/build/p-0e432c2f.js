/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var e=Object.create;var t=Object.defineProperty;var r=Object.getOwnPropertyDescriptor;var n=Object.getOwnPropertyNames;var i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty;var o=(e,r,n)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var u=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):e)((function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}));var c=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})},l=(e,i,o,u)=>{if(i&&typeof i=="object"||typeof i=="function")for(let c of n(i))!a.call(e,c)&&c!==o&&t(e,c,{get:()=>i[c],enumerable:!(u=r(i,c))||u.enumerable});return e};var d=(r,n,a)=>(a=r!=null?e(i(r)):{},l(n||!r||!r.__esModule?t(a,"default",{value:r,enumerable:!0}):a,r));var f=(e,t,r)=>o(e,typeof t!="symbol"?t+"":t,r);var h=c(((e,t)=>{function r(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(e=`${e}`,e=e.replace(/[ \t\n\f\r]/g,""),e.length%4===0&&(e=e.replace(/==?$/,"")),e.length%4===1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,n=0;for(let a=0;a<e.length;a++)r<<=6,r|=i(e[a]),n+=6,n===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,t+=String.fromCharCode(r)):n===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function i(e){let t=n.indexOf(e);return t<0?void 0:t}t.exports=r}));var p=c(((e,t)=>{function r(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(t)>>2,n[1]=(e.charCodeAt(t)&3)<<4,e.length>t+1&&(n[1]|=e.charCodeAt(t+1)>>4,n[2]=(e.charCodeAt(t+1)&15)<<2),e.length>t+2&&(n[2]|=e.charCodeAt(t+2)>>6,n[3]=e.charCodeAt(t+2)&63);for(let e=0;e<n.length;e++)typeof n[e]>"u"?r+="=":r+=i(n[e])}return r}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function i(e){if(e>=0&&e<64)return n[e]}t.exports=r}));var g=c(((e,t)=>{var r=h(),n=p();t.exports={atob:r,btoa:n}}));var y=c(((e,t)=>{t.exports=fetch}));var v=c((e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function n(e){var n=t(t({},r),e);return n.numOfAttempts<1&&(n.numOfAttempts=1),n}e.getSanitizedOptions=n}));var m=c((e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(e){var t=Math.random()*e;return Math.round(t)}e.fullJitter=t}));var w=c((e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(e){return e}e.noJitter=t}));var b=c((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=m(),r=w();function n(e){switch(e.jitter){case"full":return t.fullJitter;case"none":default:return r.noJitter}}e.JitterFactory=n}));var S=c((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=b(),r=function(){function e(e){this.options=e,this.attempt=0}return e.prototype.apply=function(){var e=this;return new Promise((function(t){return setTimeout(t,e.jitteredDelay)}))},e.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var e=t.JitterFactory(this.options);return e(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var e=this.options.startingDelay,t=this.options.timeMultiple,r=this.numOfDelayedAttempts,n=e*Math.pow(t,r);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();e.Delay=r}));var I=c((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r=e&&e.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{c(n.next(e))}catch(e){a(e)}}function u(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):i(e.value).then(o,u)}c((n=n.apply(e,t||[])).next())}))},n=e&&e.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var i=S(),a=function(e){t(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.apply=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]}))}))},Object.defineProperty(i.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),i}(i.Delay);e.SkipFirstDelay=a}));var q=c((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=S(),n=function(e){t(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(r.Delay);e.AlwaysDelay=n}));var O=c((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=I(),r=q();function n(e,t){var r=i(e);return r.setAttemptNumber(t),r}e.DelayFactory=n;function i(e){return e.delayFirstAttempt?new r.AlwaysDelay(e):new t.SkipFirstDelay(e)}}));var C=c((e=>{var t=e&&e.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{c(n.next(e))}catch(e){a(e)}}function u(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):i(e.value).then(o,u)}c((n=n.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var n=v(),i=O();function a(e,i){return i===void 0&&(i={}),t(this,void 0,void 0,(function(){var t,a;return r(this,(function(r){switch(r.label){case 0:return t=n.getSanitizedOptions(i),a=new o(e,t),[4,a.execute()];case 1:return[2,r.sent()]}}))}))}e.backOff=a;var o=function(){function e(e,t){this.request=e,this.options=t,this.attemptNumber=0}return e.prototype.execute=function(){return t(this,void 0,void 0,(function(){var e,t;return r(this,(function(r){switch(r.label){case 0:if(this.attemptLimitReached)return[3,7];r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return r.sent(),[4,this.request()];case 3:return[2,r.sent()];case 4:return e=r.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(t=r.sent(),!t||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}}))}))},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return t(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:return e=i.DelayFactory(this.options,this.attemptNumber),[4,e.apply()];case 1:return t.sent(),[2]}}))}))},e}()}));var x=c(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=n()})(e,(function(){var e=1e3,t=6e4,r=36e5,n="millisecond",i="second",a="minute",o="hour",u="day",c="week",s="month",l="quarter",d="year",f="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},v=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},m={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,s),a=r-i<0,o=t.clone().add(n+(a?-1:1),s);return+(-(n+(r-i)/(a?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:s,y:d,w:c,d:u,D:f,h:o,m:a,s:i,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return e===void 0}},w="en",b={};b[w]=y;var S="$isDayjsObject",I=function(e){return e instanceof x||!(!e||!e[S])},q=function e(t,r,n){var i;if(!t)return w;if(typeof t=="string"){var a=t.toLowerCase();b[a]&&(i=a),r&&(b[a]=r,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var u=t.name;b[u]=t,i=u}return!n&&i&&(w=i),i||!n&&w},O=function(e,t){if(I(e))return e.clone();var r=typeof t=="object"?t:{};return r.date=e,r.args=arguments,new x(r)},C=m;C.l=q,C.i=I,C.w=function(e,t){return O(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var x=function(){function y(e){this.$L=q(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[S]=!0}var v=y.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(t===null)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var n=t.match(p);if(n){var i=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return C},v.isValid=function(){return this.$d.toString()!==h},v.isSame=function(e,t){var r=O(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return O(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<O(e)},v.$g=function(e,t,r){return C.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,n=!!C.u(t)||t,l=C.p(e),h=function(e,t){var i=C.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?i:i.endOf(u)},p=function(e,t){return C.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},g=this.$W,y=this.$M,v=this.$D,m="set"+(this.$u?"UTC":"");switch(l){case d:return n?h(1,0):h(31,11);case s:return n?h(1,y):h(0,y+1);case c:var w=this.$locale().weekStart||0,b=(g<w?g+7:g)-w;return h(n?v-b:v+(6-b),y);case u:case f:return p(m+"Hours",0);case o:return p(m+"Minutes",1);case a:return p(m+"Seconds",2);case i:return p(m+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var r,c=C.p(e),l="set"+(this.$u?"UTC":""),h=(r={},r[u]=l+"Date",r[f]=l+"Date",r[s]=l+"Month",r[d]=l+"FullYear",r[o]=l+"Hours",r[a]=l+"Minutes",r[i]=l+"Seconds",r[n]=l+"Milliseconds",r)[c],p=c===u?this.$D+(t-this.$W):t;if(c===s||c===d){var g=this.clone().set(f,1);g.$d[h](p),g.init(),this.$d=g.set(f,Math.min(this.$D,g.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[C.p(e)]()},v.add=function(n,l){var f,h=this;n=Number(n);var p=C.p(l),g=function(e){var t=O(h);return C.w(t.date(t.date()+Math.round(e*n)),h)};if(p===s)return this.set(s,this.$M+n);if(p===d)return this.set(d,this.$y+n);if(p===u)return g(1);if(p===c)return g(7);var y=(f={},f[a]=t,f[o]=r,f[i]=e,f)[p]||1,v=this.$d.getTime()+n*y;return C.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=C.z(this),a=this.$H,o=this.$m,u=this.$M,c=r.weekdays,s=r.months,l=r.meridiem,d=function(e,r,i,a){return e&&(e[r]||e(t,n))||i[r].slice(0,a)},f=function(e){return C.s(a%12||12,e,"0")},p=l||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(g,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return C.s(t.$y,4,"0");case"M":return u+1;case"MM":return C.s(u+1,2,"0");case"MMM":return d(r.monthsShort,u,s,3);case"MMMM":return d(s,u);case"D":return t.$D;case"DD":return C.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,c,2);case"ddd":return d(r.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(a);case"HH":return C.s(a,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return p(a,o,!0);case"A":return p(a,o,!1);case"m":return String(o);case"mm":return C.s(o,2,"0");case"s":return String(t.$s);case"ss":return C.s(t.$s,2,"0");case"SSS":return C.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,f,h){var p,g=this,y=C.p(f),v=O(n),m=(v.utcOffset()-this.utcOffset())*t,w=this-v,b=function(){return C.m(g,v)};switch(y){case d:p=b()/12;break;case s:p=b();break;case l:p=b()/3;break;case c:p=(w-m)/6048e5;break;case u:p=(w-m)/864e5;break;case o:p=w/r;break;case a:p=w/t;break;case i:p=w/e;break;default:p=w}return h?p:C.a(p)},v.daysInMonth=function(){return this.endOf(s).$D},v.$locale=function(){return b[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=q(e,t,!0);return n&&(r.$L=n),r},v.clone=function(){return C.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},y}(),A=x.prototype;return O.prototype=A,[["$ms",n],["$s",i],["$m",a],["$H",o],["$W",u],["$M",s],["$y",d],["$D",f]].forEach((function(e){A[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),O.extend=function(e,t){return e.$i||(e(t,x,O),e.$i=!0),O},O.locale=q,O.isDayjs=I,O.unix=function(e){return O(1e3*e)},O.en=b[w],O.Ls=b,O.p={},O}))}));var A=c(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_quarterOfYear=n()})(e,(function(){var e="month",t="quarter";return function(r,n){var i=n.prototype;i.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var a=i.add;i.add=function(r,n){return r=Number(r),this.$utils().p(n)===t?this.add(3*r,e):a.bind(this)(r,n)};var o=i.startOf;i.startOf=function(r,n){var i=this.$utils(),a=!!i.u(n)||n;if(i.p(r)===t){var u=this.quarter()-1;return a?this.month(3*u).startOf(e).startOf("day"):this.month(3*u+2).endOf(e).endOf("day")}return o.bind(this)(r,n)}}}))}));var k=c(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_customParseFormat=n()})(e,(function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,i=/\d*[^-_:/,()\s\d]+/,a={},o=function(e){return(e=+e)+(e>68?1900:2e3)},u=function(e){return function(t){this[e]=+t}},c=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||e==="Z")return 0;var t=e.match(/([+-]|\d\d)/g),r=60*t[1]+(+t[2]||0);return r===0?0:t[0]==="+"?-r:r}(e)}],s=function(e){var t=a[e];return t&&(t.indexOf?t:t.s.concat(t.f))},l=function(e,t){var r,n=a.meridiem;if(n){for(var i=1;i<=24;i+=1)if(e.indexOf(n(i,0,t))>-1){r=i>12;break}}else r=e===(t?"pm":"PM");return r},d={A:[i,function(e){this.afternoon=l(e,!1)}],a:[i,function(e){this.afternoon=l(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[n,u("seconds")],ss:[n,u("seconds")],m:[n,u("minutes")],mm:[n,u("minutes")],H:[n,u("hours")],h:[n,u("hours")],HH:[n,u("hours")],hh:[n,u("hours")],D:[n,u("day")],DD:[r,u("day")],Do:[i,function(e){var t=a.ordinal,r=e.match(/\d+/);if(this.day=r[0],t)for(var n=1;n<=31;n+=1)t(n).replace(/\[|\]/g,"")===e&&(this.day=n)}],M:[n,u("month")],MM:[r,u("month")],MMM:[i,function(e){var t=s("months"),r=(s("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[i,function(e){var t=s("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,u("year")],YY:[r,function(e){this.year=o(e)}],YYYY:[/\d{4}/,u("year")],Z:c,ZZ:c};function f(r){var n,i;n=r,i=a&&a.formats;for(var o=(r=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,r,n){var a=n&&n.toUpperCase();return r||i[n]||e[n]||i[a].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,r){return t||r.slice(1)}))}))).match(t),u=o.length,c=0;c<u;c+=1){var s=o[c],l=d[s],f=l&&l[0],h=l&&l[1];o[c]=h?{regex:f,parser:h}:s.replace(/^\[|\]$/g,"")}return function(e){for(var t={},r=0,n=0;r<u;r+=1){var i=o[r];if(typeof i=="string")n+=i.length;else{var a=i.regex,c=i.parser,s=e.slice(n),l=a.exec(s)[0];c.call(t,l),e=e.replace(l,"")}}return function(e){var t=e.afternoon;if(t!==void 0){var r=e.hours;t?r<12&&(e.hours+=12):r===12&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,r){r.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(o=e.parseTwoDigitYear);var n=t.prototype,i=n.parse;n.parse=function(e){var t=e.date,n=e.utc,o=e.args;this.$u=n;var u=o[1];if(typeof u=="string"){var c=o[2]===!0,s=o[3]===!0,l=c||s,d=o[2];s&&(d=o[2]),a=this.$locale(),!c&&d&&(a=r.Ls[d]),this.$d=function(e,t,r){try{if(["x","X"].indexOf(t)>-1)return new Date((t==="X"?1e3:1)*e);var n=f(t)(e),i=n.year,a=n.month,o=n.day,u=n.hours,c=n.minutes,s=n.seconds,l=n.milliseconds,d=n.zone,h=new Date,p=o||(i||a?1:h.getDate()),g=i||h.getFullYear(),y=0;i&&!a||(y=a>0?a-1:h.getMonth());var v=u||0,m=c||0,w=s||0,b=l||0;return d?new Date(Date.UTC(g,y,p,v,m,w,b+60*d.offset*1e3)):r?new Date(Date.UTC(g,y,p,v,m,w,b)):new Date(g,y,p,v,m,w,b)}catch{return new Date("")}}(t,u,n),this.init(),d&&d!==!0&&(this.$L=this.locale(d).$L),l&&t!=this.format(u)&&(this.$d=new Date("")),a={}}else if(u instanceof Array)for(var h=u.length,p=1;p<=h;p+=1){o[1]=u[p-1];var g=r.apply(this,o);if(g.isValid()){this.$d=g.$d,this.$L=g.$L,this.init();break}p===h&&(this.$d=new Date(""))}else i.call(this,e)}}}))}));var j=c(((e,t)=>{var r=/(^|; )Coveo-Pendragon=([^;]*)/;t.exports=()=>r.exec(document.cookie)?.pop()||null}));var R=c(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_timezone=n()})(e,(function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,i){var a,o=function(e,r,n){n===void 0&&(n={});var i=new Date(e),a=function(e,r){r===void 0&&(r={});var n=r.timeZoneName||"short",i=e+"|"+n,a=t[i];return a||(a=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:n}),t[i]=a),a}(r,n);return a.formatToParts(i)},u=function(t,r){for(var n=o(t,r),a=[],u=0;u<n.length;u+=1){var c=n[u],s=c.type,l=c.value,d=e[s];d>=0&&(a[d]=parseInt(l,10))}var f=a[3],h=f===24?0:f,p=a[0]+"-"+a[1]+"-"+a[2]+" "+h+":"+a[4]+":"+a[5]+":000",g=+t;return(i.utc(p).valueOf()-(g-=g%1e3))/6e4},c=n.prototype;c.tz=function(e,t){e===void 0&&(e=a);var r=this.utcOffset(),n=this.toDate(),o=n.toLocaleString("en-US",{timeZone:e}),u=Math.round((n-new Date(o))/1e3/60),c=i(o,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(n.getTimezoneOffset()/15)-u,!0);if(t){var s=c.utcOffset();c=c.add(r-s,"minute")}return c.$x.$timezone=e,c},c.offsetName=function(e){var t=this.$x.$timezone||i.tz.guess(),r=o(this.valueOf(),t,{timeZoneName:e}).find((function(e){return e.type.toLowerCase()==="timezonename"}));return r&&r.value};var s=c.startOf;c.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return s.call(this,e,t);var r=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return s.call(r,e,t).tz(this.$x.$timezone,!0)},i.tz=function(e,t,r){var n=r&&t,o=r||t||a,c=u(+i(),o);if(typeof e!="string")return i(e).tz(o);var s=function(e,t,r){var n=e-60*t*1e3,i=u(n,r);if(t===i)return[n,t];var a=u(n-=60*(i-t)*1e3,r);return i===a?[n,i]:[e-60*Math.min(i,a)*1e3,Math.max(i,a)]}(i.utc(e,n).valueOf(),c,o),l=s[0],d=s[1],f=i(l).utcOffset(d);return f.$x.$timezone=o,f},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(e){a=e}}}))}));var T=c(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_utc=n()})(e,(function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,i,a){var o=i.prototype;a.utc=function(e){var t={date:e,utc:!0,args:arguments};return new i(t)},o.utc=function(t){var r=a(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},o.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var u=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),u.call(this,e)};var c=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else c.call(this)};var s=o.utcOffset;o.utcOffset=function(n,i){var a=this.$utils().u;if(a(n))return this.$u?0:a(this.$offset)?s.call(this):this.$offset;if(typeof n=="string"&&(n=function(e){e===void 0&&(e="");var n=e.match(t);if(!n)return null;var i=(""+n[0]).match(r)||["-",0,0],a=i[0],o=60*+i[1]+ +i[2];return o===0?0:a==="+"?o:-o}(n),n===null))return this;var o=Math.abs(n)<=16?60*n:n,u=this;if(i)return u.$offset=o,u.$u=n===0,u;if(n!==0){var c=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(u=this.local().add(o+c,e)).$offset=o,u.$x.$localOffset=c}else u=this.utc();return u};var l=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return e==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=o.diff;o.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),i=a(e).local();return f.call(n,i,t,r)}}}))}));var M=c(((e,t)=>{function r(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}t.exports=n;function n(e,t,n){var i=n&&n.stringify||r,a=1;if(typeof e=="object"&&e!==null){var o=t.length+a;if(o===1)return e;var u=new Array(o);u[0]=i(e);for(var c=1;c<o;c++)u[c]=i(t[c]);return u.join(" ")}if(typeof e!="string")return e;var s=t.length;if(s===0)return e;for(var l="",d=1-a,f=-1,h=e&&e.length||0,p=0;p<h;){if(e.charCodeAt(p)===37&&p+1<h){switch(f=f>-1?f:0,e.charCodeAt(p+1)){case 100:case 102:if(d>=s||t[d]==null)break;f<p&&(l+=e.slice(f,p)),l+=Number(t[d]),f=p+2,p++;break;case 105:if(d>=s||t[d]==null)break;f<p&&(l+=e.slice(f,p)),l+=Math.floor(Number(t[d])),f=p+2,p++;break;case 79:case 111:case 106:if(d>=s||t[d]===void 0)break;f<p&&(l+=e.slice(f,p));var g=typeof t[d];if(g==="string"){l+="'"+t[d]+"'",f=p+2,p++;break}if(g==="function"){l+=t[d].name||"<anonymous>",f=p+2,p++;break}l+=i(t[d]),f=p+2,p++;break;case 115:if(d>=s)break;f<p&&(l+=e.slice(f,p)),l+=String(t[d]),f=p+2,p++;break;case 37:f<p&&(l+=e.slice(f,p)),l+="%",f=p+2,p++,d--;break}++d}++p}return f===-1?e:(f<h&&(l+=e.slice(f)),l)}}));var E=c(((e,t)=>{var r=M();t.exports=f;var n=E().console||{},i={mapHttpRequest:C,mapHttpResponse:C,wrapRequestSerializer:x,wrapResponseSerializer:x,wrapErrorSerializer:x,req:C,res:C,err:q,errWithCause:q};function a(e,t){return e==="silent"?1/0:t.levels.values[e]}var o=Symbol("pino.logFuncs"),u=Symbol("pino.hierarchy"),c={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function s(e,t){let r={logger:t,parent:e[u]};t[u]=r}function l(e,t,r){let i={};t.forEach((e=>{i[e]=r[e]?r[e]:n[e]||n[c[e]||"log"]||A})),e[o]=i}function d(e,t){return Array.isArray(e)?e.filter((function(e){return e!=="!stdSerializers.err"})):e===!0?Object.keys(t):!1}function f(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let i=e.serializers||{},o=d(e.browser.serialize,i),u=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(u=!1);let c=Object.keys(e.customLevels||{}),f=["error","fatal","warn","info","debug","trace"].concat(c);typeof r=="function"&&f.forEach((function(e){r[e]=r})),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let p=e.level||"info",g=Object.create(r);g.log||(g.log=A),l(g,f,r),s({},g),Object.defineProperty(g,"levelVal",{get:m}),Object.defineProperty(g,"level",{get:w,set:S});let v={transmit:t,serialize:o,asObject:e.browser.asObject,formatters:e.browser.formatters,levels:f,timestamp:O(e)};g.levels=h(e),g.level=p,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=A,g.serializers=i,g._serialize=o,g._stdErrSerialize=u,g.child=q,t&&(g._logEvent=I());function m(){return a(this.level,this)}function w(){return this._level}function S(e){if(e!=="silent"&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,y(this,v,g,"error"),y(this,v,g,"fatal"),y(this,v,g,"warn"),y(this,v,g,"info"),y(this,v,g,"debug"),y(this,v,g,"trace"),c.forEach((e=>{y(this,v,g,e)}))}function q(r,n){if(!r)throw new Error("missing bindings for child Pino");n=n||{},o&&r.serializers&&(n.serializers=r.serializers);let a=n.serializers;if(o&&a){var u=Object.assign({},i,a),c=e.browser.serialize===!0?Object.keys(u):o;delete r.serializers,b([r],c,u,this._stdErrSerialize)}function l(e){this._childLevel=(e._childLevel|0)+1,this.bindings=r,u&&(this.serializers=u,this._serialize=c),t&&(this._logEvent=I([].concat(e._logEvent.bindings,r)))}l.prototype=this;let d=new l(this);return s(this,d),d.level=this.level,d}return g}function h(e){let t=e.customLevels||{},r=Object.assign({},f.levels.values,t),n=Object.assign({},f.levels.labels,p(t));return{values:r,labels:n}}function p(e){let t={};return Object.keys(e).forEach((function(r){t[e[r]]=r})),t}f.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};f.stdSerializers=i;f.stdTimeFunctions=Object.assign({},{nullTime:k,epochTime:j,unixTime:R,isoTime:T});function g(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[u];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function y(e,t,r,n){if(Object.defineProperty(e,n,{value:a(e.level,r)>a(n,r)?A:r[o][n],writable:!0,enumerable:!0,configurable:!0}),!t.transmit&&e[n]===A)return;e[n]=m(e,t,r,n);let i=g(e);i.length!==0&&(e[n]=v(i,e[n]))}function v(e,t){return function(){return t.apply(this,[...e,...arguments])}}function m(e,t,r,i){return function(o){return function(){let u=t.timestamp(),c=new Array(arguments.length),s=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var l=0;l<c.length;l++)c[l]=arguments[l];if(t.serialize&&!t.asObject&&b(c,this._serialize,this.serializers,this._stdErrSerialize),t.asObject||t.formatters?o.call(s,w(this,i,c,u,t.formatters)):o.apply(s,c),t.transmit){let n=t.transmit.level||e._level,o=r.levels.values[n],s=r.levels.values[i];if(s<o)return;S(this,{ts:u,methodLevel:i,methodValue:s,transmitLevel:n,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:a(e._level,r)},c)}}}(e[o][i])}function w(e,t,n,i,a={}){let{level:o=(()=>e.levels.values[t]),log:u=(e=>e)}=a;e._serialize&&b(n,e._serialize,e.serializers,e._stdErrSerialize);let c=n.slice(),s=c[0],l={};i&&(l.time=i),l.level=o(t,e.levels.values[t]);let d=(e._childLevel|0)+1;if(d<1&&(d=1),s!==null&&typeof s=="object"){for(;d--&&typeof c[0]=="object";)Object.assign(l,c.shift());s=c.length?r(c.shift(),c):void 0}else typeof s=="string"&&(s=r(c.shift(),c));return s!==void 0&&(l.msg=s),u(l)}function b(e,t,r,n){for(let i in e)if(n&&e[i]instanceof Error)e[i]=f.stdSerializers.err(e[i]);else if(typeof e[i]=="object"&&!Array.isArray(e[i]))for(let n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function S(e,t,r){let n=t.send,i=t.ts,a=t.methodLevel,o=t.methodValue,u=t.val,c=e._logEvent.bindings;b(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return c.indexOf(e)===-1})),e._logEvent.level.label=a,e._logEvent.level.value=o,n(a,e._logEvent,u),e._logEvent=I(c)}function I(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function q(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function O(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?k:j}function C(){return{}}function x(e){return e}function A(){}function k(){return!1}function j(){return Date.now()}function R(){return Math.round(Date.now()/1e3)}function T(){return new Date(Date.now()).toISOString()}function E(){function e(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}t.exports.default=f;t.exports.pino=f}));var P=()=>global.crypto,D=()=>{typeof window<"u"||(P()||(global.crypto=u("crypto")),!P().getRandomValues&&P().webcrypto&&(global.crypto.getRandomValues=P().webcrypto.getRandomValues.bind(P().webcrypto)))};var F={};s(F,{ProductListing:()=>Un,Search:()=>$n});var $="coveo-headless-internal-state",U=Symbol.for($),Q=e=>new Proxy(e,{ownKeys(e){return Reflect.ownKeys(e).filter((e=>e!==U))},get(t,r,n){return typeof r=="symbol"&&r.description===$&&r!==U&&e.logger.warn(`You might be loading Headless twice. Please check your setup.\nIf you are trying to access the inner state... Don't`),Reflect.get(t,r,n)}});function V(e,t){let r=`\n  The following properties are invalid:\n\n    ${e.join(`\n\t`)}\n  \n  ${t}\n  `;return new _(r)}var _=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},N=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let e in this.definition){let t=this.definition[e].validate(r[e]);t&&n.push(`${e}: ${t}`)}if(n.length)throw V(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},L=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&Y(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function z(e){return e===void 0}function B(e){return e===null}function Y(e){return z(e)||B(e)}var H=class{constructor(e={}){this.config=e,this.value=new L(e)}validate(e){let t=this.value.validate(e);return t||(W(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function W(e){return z(e)||K(e)}function K(e){return typeof e=="number"&&!isNaN(e)}var G=class{constructor(e={}){this.value=new L(e)}validate(e){let t=this.value.validate(e);return t||(J(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function J(e){return z(e)||Z(e)}function Z(e){return typeof e=="boolean"}var X=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,ee=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new L(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:i}=this.config,a=this.value.validate(e);return a||(z(e)?null:te(e)?!t&&!e.length?"value is an empty string.":r&&!X.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:i&&!i.includes(e)?`value should be one of: ${i.join(", ")}.`:null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function te(e){return Object.prototype.toString.call(e)==="[object String]"}var re=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(z(e))return this.config.options.required?"value is required and is currently undefined":null;if(!ne(e))return"value is not an object";for(let[t,r]of Object.entries(this.config.values))if(r.required&&Y(e[t]))return`value does not contain ${t}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let i=e[r],a=n.validate(i);a!==null&&(t+=" "+a)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function ne(e){return e!==void 0&&typeof e=="object"}var ie=class{constructor(e={}){this.config=e,this.value=new L(this.config)}validate(e){if(!Y(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(Y(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let t="";return e.forEach((r=>{this.config.each.required&&Y(r)&&(t=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(r,this.config.each);n!==null&&(t+=" "+n)})),t===""?null:t}return null}validatePrimitiveValue(e,t){return Z(e)||te(e)||K(e)||ne(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function ae(e){return Array.isArray(e)}var oe=class{constructor(e){this.config=e,this.value=new L(e)}validate(e){let t=this.value.validate(e);return t!==null?t:z(e)||Object.values(this.config.enum).find((t=>t===e))?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};function ue(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ce=typeof Symbol=="function"&&Symbol.observable||"@@observable",se=ce,le=()=>Math.random().toString(36).substring(7).split("").join("."),de={INIT:`@@redux/INIT${le()}`,REPLACE:`@@redux/REPLACE${le()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${le()}`},fe=de;function he(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function pe(e,t,r){if(typeof e!="function")throw new Error(ue(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ue(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ue(1));return r(pe)(e,t)}let n=e,i=t,a=new Map,o=a,u=0,c=!1;function s(){o===a&&(o=new Map,a.forEach(((e,t)=>{o.set(t,e)})))}function l(){if(c)throw new Error(ue(3));return i}function d(e){if(typeof e!="function")throw new Error(ue(4));if(c)throw new Error(ue(5));let t=!0;s();let r=u++;return o.set(r,e),function(){if(t){if(c)throw new Error(ue(6));t=!1,s(),o.delete(r),a=null}}}function f(e){if(!he(e))throw new Error(ue(7));if(typeof e.type>"u")throw new Error(ue(8));if(typeof e.type!="string")throw new Error(ue(17));if(c)throw new Error(ue(9));try{c=!0,i=n(i,e)}finally{c=!1}return(a=o).forEach((e=>{e()})),e}function h(e){if(typeof e!="function")throw new Error(ue(10));n=e,f({type:fe.REPLACE})}function p(){let e=d;return{subscribe(t){if(typeof t!="object"||t===null)throw new Error(ue(11));function r(){let e=t;e.next&&e.next(l())}return r(),{unsubscribe:e(r)}},[se](){return this}}}return f({type:fe.INIT}),{dispatch:f,subscribe:d,getState:l,replaceReducer:h,[se]:p}}function ge(e){Object.keys(e).forEach((t=>{let r=e[t];if(typeof r(void 0,{type:fe.INIT})>"u")throw new Error(ue(12));if(typeof r(void 0,{type:fe.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ue(13))}))}function ye(e){let t=Object.keys(e),r={};for(let n=0;n<t.length;n++){let i=t[n];typeof e[i]=="function"&&(r[i]=e[i])}let n=Object.keys(r),i;try{ge(r)}catch(e){i=e}return function(e={},t){if(i)throw i;let a=!1,o={};for(let i=0;i<n.length;i++){let u=n[i],c=r[u],s=e[u],l=c(s,t);if(typeof l>"u"){throw new Error(ue(14))}o[u]=l,a=a||l!==s}return a=a||n.length!==Object.keys(e).length,a?o:e}}function ve(...e){return e.length===0?e=>e:e.length===1?e[0]:e.reduce(((e,t)=>(...r)=>e(t(...r))))}function me(...e){return t=>(r,n)=>{let i=t(r,n),a=()=>{throw new Error(ue(15))},o={getState:i.getState,dispatch:(e,...t)=>a(e,...t)},u=e.map((e=>e(o)));return a=ve(...u)(i.dispatch),{...i,dispatch:a}}}function we(e){return he(e)&&"type"in e&&typeof e.type=="string"}var be=Symbol.for("immer-nothing"),Se=Symbol.for("immer-draftable"),Ie=Symbol.for("immer-state");function qe(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Oe=Object.getPrototypeOf;function Ce(e){return!!e&&!!e[Ie]}function xe(e){return e?ke(e)||Array.isArray(e)||!!e[Se]||!!e.constructor?.[Se]||Fe(e)||$e(e):!1}var Ae=Object.prototype.constructor.toString();function ke(e){if(!e||typeof e!="object")return!1;let t=Oe(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Ae}function je(e){return Ce(e)||qe(15,e),e[Ie].base_}function Re(e,t){Te(e)===0?Object.entries(e).forEach((([r,n])=>{t(r,n,e)})):e.forEach(((r,n)=>t(n,r,e)))}function Te(e){let t=e[Ie];return t?t.type_:Array.isArray(e)?1:Fe(e)?2:$e(e)?3:0}function Me(e,t){return Te(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ee(e,t){return Te(e)===2?e.get(t):e[t]}function Pe(e,t,r){let n=Te(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function De(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Fe(e){return e instanceof Map}function $e(e){return e instanceof Set}function Ue(e){return e.copy_||e.base_}function Qe(e,t){if(Fe(e))return new Map(e);if($e(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&ke(e))return Oe(e)?{...e}:Object.assign(Object.create(null),e);let r=Object.getOwnPropertyDescriptors(e);delete r[Ie];let n=Reflect.ownKeys(r);for(let t=0;t<n.length;t++){let i=n[t],a=r[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Oe(e),r)}function Ve(e,t=!1){return Ne(e)||Ce(e)||!xe(e)||(Te(e)>1&&(e.set=e.add=e.clear=e.delete=_e),Object.freeze(e),t&&Re(e,((e,t)=>Ve(t,!0)))),e}function _e(){qe(2)}function Ne(e){return Object.isFrozen(e)}var Le={};function ze(e){let t=Le[e];return t||qe(0,e),t}function Be(e,t){Le[e]||(Le[e]=t)}var Ye;function He(){return Ye}function We(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ke(e,t){t&&(ze("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ge(e){Je(e),e.drafts_.forEach(Xe),e.drafts_=null}function Je(e){e===Ye&&(Ye=e.parent_)}function Ze(e){return Ye=We(Ye,e)}function Xe(e){let t=e[Ie];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function et(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[Ie].modified_&&(Ge(t),qe(4)),xe(e)&&(e=tt(t,e),t.parent_||nt(t,e)),t.patches_&&ze("Patches").generateReplacementPatches_(r[Ie].base_,e,t.patches_,t.inversePatches_)):e=tt(t,r,[]),Ge(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==be?e:void 0}function tt(e,t,r){if(Ne(t))return t;let n=t[Ie];if(!n)return Re(t,((i,a)=>rt(e,n,t,i,a,r))),t;if(n.scope_!==e)return t;if(!n.modified_)return nt(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let t=n.copy_,i=t,a=!1;n.type_===3&&(i=new Set(t),t.clear(),a=!0),Re(i,((i,o)=>rt(e,n,t,i,o,r,a))),nt(e,t,!1),r&&e.patches_&&ze("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function rt(e,t,r,n,i,a,o){if(Ce(i)){let o=a&&t&&t.type_!==3&&!Me(t.assigned_,n)?a.concat(n):void 0,u=tt(e,i,o);if(Pe(r,n,u),Ce(u))e.canAutoFreeze_=!1;else return}else o&&r.add(i);if(xe(i)&&!Ne(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;tt(e,i),(!t||!t.scope_.parent_)&&nt(e,i)}}function nt(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ve(t,r)}function it(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:He(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,a=at;r&&(i=[n],a=ot);let{revoke:o,proxy:u}=Proxy.revocable(i,a);return n.draft_=u,n.revoke_=o,u}var at={get(e,t){if(t===Ie)return e;let r=Ue(e);if(!Me(r,t))return ct(e,r,t);let n=r[t];return e.finalized_||!xe(n)?n:n===ut(e.base_,t)?(dt(e),e.copy_[t]=ht(n,e)):n},has(e,t){return t in Ue(e)},ownKeys(e){return Reflect.ownKeys(Ue(e))},set(e,t,r){let n=st(Ue(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let n=ut(Ue(e),t),i=n?.[Ie];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(De(r,n)&&(r!==void 0||Me(e.base_,t)))return!0;dt(e),lt(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return ut(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,dt(e),lt(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=Ue(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){qe(11)},getPrototypeOf(e){return Oe(e.base_)},setPrototypeOf(){qe(12)}},ot={};Re(at,((e,t)=>{ot[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}));ot.deleteProperty=function(e,t){return ot.set.call(this,e,t,void 0)};ot.set=function(e,t,r){return at.set.call(this,e[0],t,r,e[0])};function ut(e,t){let r=e[Ie];return(r?Ue(r):e)[t]}function ct(e,t,r){let n=st(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function st(e,t){if(!(t in e))return;let r=Oe(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=Oe(r)}}function lt(e){e.modified_||(e.modified_=!0,e.parent_&&lt(e.parent_))}function dt(e){e.copy_||(e.copy_=Qe(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ft=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){let r=t;t=e;let n=this;return function(e=r,...i){return n.produce(e,(e=>t.call(this,e,...i)))}}typeof t!="function"&&qe(6),r!==void 0&&typeof r!="function"&&qe(7);let n;if(xe(e)){let i=Ze(this),a=ht(e,void 0),o=!0;try{n=t(a),o=!1}finally{o?Ge(i):Je(i)}return Ke(i,r),et(n,i)}else if(!e||typeof e!="object"){if(n=t(e),n===void 0&&(n=e),n===be&&(n=void 0),this.autoFreeze_&&Ve(n,!0),r){let t=[],i=[];ze("Patches").generateReplacementPatches_(e,n,t,i),r(t,i)}return n}else qe(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){xe(e)||qe(8),Ce(e)&&(e=pt(e));let t=Ze(this),r=ht(e,void 0);return r[Ie].isManual_=!0,Je(t),r}finishDraft(e,t){let r=e&&e[Ie];(!r||!r.isManual_)&&qe(9);let{scope_:n}=r;return Ke(n,t),et(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));let n=ze("Patches").applyPatches_;return Ce(e)?n(e,t):this.produce(e,(e=>n(e,t)))}};function ht(e,t){let r=Fe(e)?ze("MapSet").proxyMap_(e,t):$e(e)?ze("MapSet").proxySet_(e,t):it(e,t);return(t?t.scope_:He()).drafts_.push(r),r}function pt(e){return Ce(e)||qe(10,e),gt(e)}function gt(e){if(!xe(e)||Ne(e))return e;let t=e[Ie],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Qe(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Qe(e,!0);return Re(r,((e,t)=>{Pe(r,e,gt(t))})),t&&(t.finalized_=!1),r}function yt(){let e="replace",t="add",r="remove";function n(e,t,r,n){switch(e.type_){case 0:case 2:return a(e,t,r,n);case 1:return i(e,t,r,n);case 3:return o(e,t,r,n)}}function i(n,i,a,o){let{base_:u,assigned_:c}=n,s=n.copy_;s.length<u.length&&([u,s]=[s,u],[a,o]=[o,a]);for(let t=0;t<u.length;t++)if(c[t]&&s[t]!==u[t]){let r=i.concat([t]);a.push({op:e,path:r,value:l(s[t])}),o.push({op:e,path:r,value:l(u[t])})}for(let e=u.length;e<s.length;e++){let r=i.concat([e]);a.push({op:t,path:r,value:l(s[e])})}for(let e=s.length-1;u.length<=e;--e){let t=i.concat([e]);o.push({op:r,path:t})}}function a(n,i,a,o){let{base_:u,copy_:c}=n;Re(n.assigned_,((n,s)=>{let d=Ee(u,n),f=Ee(c,n),h=s?Me(u,n)?e:t:r;if(d===f&&h===e)return;let p=i.concat(n);a.push(h===r?{op:h,path:p}:{op:h,path:p,value:f}),o.push(h===t?{op:r,path:p}:h===r?{op:t,path:p,value:l(d)}:{op:e,path:p,value:l(d)})}))}function o(e,n,i,a){let{base_:o,copy_:u}=e,c=0;o.forEach((e=>{if(!u.has(e)){let o=n.concat([c]);i.push({op:r,path:o,value:e}),a.unshift({op:t,path:o,value:e})}c++})),c=0,u.forEach((e=>{if(!o.has(e)){let o=n.concat([c]);i.push({op:t,path:o,value:e}),a.unshift({op:r,path:o,value:e})}c++}))}function u(t,r,n,i){n.push({op:e,path:[],value:r===be?void 0:r}),i.push({op:e,path:[],value:t})}function c(n,i){return i.forEach((i=>{let{path:a,op:o}=i,u=n;for(let e=0;e<a.length-1;e++){let t=Te(u),r=a[e];typeof r!="string"&&typeof r!="number"&&(r=""+r),(t===0||t===1)&&(r==="__proto__"||r==="constructor")&&qe(19),typeof u=="function"&&r==="prototype"&&qe(19),u=Ee(u,r),typeof u!="object"&&qe(18,a.join("/"))}let c=Te(u),l=s(i.value),d=a[a.length-1];switch(o){case e:switch(c){case 2:return u.set(d,l);case 3:qe(16);default:return u[d]=l}case t:switch(c){case 1:return d==="-"?u.push(l):u.splice(d,0,l);case 2:return u.set(d,l);case 3:return u.add(l);default:return u[d]=l}case r:switch(c){case 1:return u.splice(d,1);case 2:return u.delete(d);case 3:return u.delete(i.value);default:return delete u[d]}default:qe(17,o)}})),n}function s(e){if(!xe(e))return e;if(Array.isArray(e))return e.map(s);if(Fe(e))return new Map(Array.from(e.entries()).map((([e,t])=>[e,s(t)])));if($e(e))return new Set(Array.from(e).map(s));let t=Object.create(Oe(e));for(let r in e)t[r]=s(e[r]);return Me(e,Se)&&(t[Se]=e[Se]),t}function l(e){return Ce(e)?s(e):e}Be("Patches",{applyPatches_:c,generatePatches_:n,generateReplacementPatches_:u})}var vt=new ft,mt=vt.produce,wt=vt.produceWithPatches.bind(vt);vt.setAutoFreeze.bind(vt);vt.setUseStrictShallowCopy.bind(vt);var bt=vt.applyPatches.bind(vt);vt.createDraft.bind(vt);vt.finishDraft.bind(vt);function St(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function It(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function qt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>typeof e=="function"))){let r=e.map((e=>typeof e=="function"?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${r}]`)}}var Ot=e=>Array.isArray(e)?e:[e];function Ct(e){let t=Array.isArray(e[0])?e[0]:e;return qt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function xt(e,t){let r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var At=class{constructor(e){this.value=e}deref(){return this.value}},kt=typeof WeakRef<"u"?WeakRef:At,jt=0,Rt=1;function Tt(){return{s:jt,v:void 0,o:null,p:null}}function Mt(e,t={}){let r=Tt(),{resultEqualityCheck:n}=t,i,a=0;function o(){let t=r,{length:o}=arguments;for(let e=0,r=o;e<r;e++){let r=arguments[e];if(typeof r=="function"||typeof r=="object"&&r!==null){let e=t.o;e===null&&(t.o=e=new WeakMap);let n=e.get(r);n===void 0?(t=Tt(),e.set(r,t)):t=n}else{let e=t.p;e===null&&(t.p=e=new Map);let n=e.get(r);n===void 0?(t=Tt(),e.set(r,t)):t=n}}let u=t,c;if(t.s===Rt?c=t.v:(c=e.apply(null,arguments),a++),u.s=Rt,n){let e=i?.deref?.()??i;e!=null&&n(e,c)&&(c=e,a!==0&&a--),i=typeof c=="object"&&c!==null||typeof c=="function"?new kt(c):c}return u.v=c,c}return o.clearCache=()=>{r=Tt(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function Et(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t=0,n=0,i,a={},o=e.pop();typeof o=="object"&&(a=o,o=e.pop()),St(o,`createSelector expects an output function after the inputs, but received: [${typeof o}]`);let u={...r,...a},{memoize:c,memoizeOptions:s=[],argsMemoize:l=Mt,argsMemoizeOptions:d=[],devModeChecks:f={}}=u,h=Ot(s),p=Ot(d),g=Ct(e),y=c((function(){return t++,o.apply(null,arguments)}),...h),v=l((function(){n++;let e=xt(g,arguments);return i=y.apply(null,e),i}),...p);return Object.assign(v,{resultFunc:o,memoizedResultFunc:y,dependencies:g,dependencyRecomputations:()=>n,resetDependencyRecomputations:()=>{n=0},lastResult:()=>i,recomputations:()=>t,resetRecomputations:()=>{t=0},memoize:c,argsMemoize:l})};return Object.assign(n,{withTypes:()=>n}),n}var Pt=Et(Mt),Dt=Object.assign(((e,t=Pt)=>{It(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map((t=>e[t]));return t(n,((...e)=>e.reduce(((e,t,n)=>(e[r[n]]=t,e)),{})))}),{withTypes:()=>Dt});function Ft(e){return({dispatch:t,getState:r})=>n=>i=>typeof i=="function"?i(t,r,e):n(i)}var $t=Ft(),Ut=Ft;var Qt=(...e)=>{let t=Et(...e),r=Object.assign(((...e)=>{let r=t(...e),n=(e,...t)=>r(Ce(e)?pt(e):e,...t);return Object.assign(n,r),n}),{withTypes:()=>r});return r};Qt(Mt);var Vt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ve:ve.apply(null,arguments)},_t=e=>e&&typeof e.match=="function";function Nt(e,t){function r(...r){if(t){let n=t(...r);if(!n)throw new Error(_r(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:r[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>we(t)&&t.type===e,r}var Lt=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function zt(e){return xe(e)?mt(e,(()=>{})):e}function Bt(e,t,r){if(e.has(t)){let n=e.get(t);return r.update&&(n=r.update(n,t,e),e.set(t,n)),n}if(!r.insert)throw new Error(_r(10));let n=r.insert(t,e);return e.set(t,n),n}function Yt(e){return typeof e=="boolean"}var Ht=()=>function(e){let{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=e??{},a=new Lt;return t&&(Yt(t)?a.push($t):a.push(Ut(t.extraArgument))),a},Wt="RTK_autoBatch",Kt=()=>e=>({payload:e,meta:{[Wt]:!0}}),Gt=e=>t=>{setTimeout(t,e)},Jt=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Gt(10),Zt=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),i=!0,a=!1,o=!1,u=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?Jt:e.type==="callback"?e.queueNotification:Gt(e.timeout),s=()=>{o=!1,a&&(a=!1,u.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){let t=()=>i&&e(),r=n.subscribe(t);return u.add(e),()=>{r(),u.delete(e)}},dispatch(e){try{return i=!e?.meta?.[Wt],a=!i,a&&(o||(o=!0,c(s))),n.dispatch(e)}finally{i=!0}}})},Xt=e=>function(t){let{autoBatch:r=!0}=t??{},n=new Lt(e);return r&&n.push(Zt(typeof r=="object"?r:void 0)),n},er=!0;function tr(e){let t=Ht(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=e||{},u;if(typeof r=="function")u=r;else if(he(r))u=ye(r);else throw new Error(_r(1));let c;if(typeof n=="function"){if(c=n(t),!er);}else c=t();let s=ve;i&&(s=Vt({trace:!er,...typeof i=="object"&&i}));let l=me(...c),d=Xt(l);let f=typeof o=="function"?o(d):d();let h=s(...f);return pe(u,a,h)}function rr(e){let t={},r=[],n,i={addCase(e,r){let n=typeof e=="string"?e:e.type;if(!n)throw new Error(_r(28));if(n in t)throw new Error(_r(29));return t[n]=r,i},addMatcher(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase(e){return n=e,i}};return e(i),[t,r,n]}function nr(e){return typeof e=="function"}function ir(e,t){let[r,n,i]=rr(t),a;if(nr(e))a=()=>zt(e());else{let t=zt(e);a=()=>t}function o(e=a(),t){let o=[r[t.type],...n.filter((({matcher:e})=>e(t))).map((({reducer:e})=>e))];return o.filter((e=>!!e)).length===0&&(o=[i]),o.reduce(((e,r)=>{if(r)if(Ce(e)){let n=r(e,t);return n===void 0?e:n}else{if(xe(e))return mt(e,(e=>r(e,t)));{let n=r(e,t);if(n===void 0){if(e===null)return e;throw new Error(_r(9))}return n}}return e}),e)}return o.getInitialState=a,o}var ar="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",or=(e=21)=>{let t="",r=e;for(;r--;)t+=ar[Math.random()*64|0];return t},ur=(e,t)=>_t(e)?e.match(t):e(t);function cr(...e){return t=>e.some((e=>ur(e,t)))}function sr(...e){return t=>e.every((e=>ur(e,t)))}function lr(e,t){if(!e||!e.meta)return!1;let r=typeof e.meta.requestId=="string",n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function dr(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function fr(...e){return e.length===0?e=>lr(e,["pending"]):dr(e)?cr(...e.map((e=>e.pending))):fr()(e[0])}function hr(...e){return e.length===0?e=>lr(e,["rejected"]):dr(e)?cr(...e.map((e=>e.rejected))):hr()(e[0])}function pr(...e){let t=e=>e&&e.meta&&e.meta.rejectedWithValue;return e.length===0?sr(hr(...e),t):dr(e)?sr(hr(...e),t):pr()(e[0])}function gr(...e){return e.length===0?e=>lr(e,["fulfilled"]):dr(e)?cr(...e.map((e=>e.fulfilled))):gr()(e[0])}function yr(...e){return e.length===0?e=>lr(e,["pending","fulfilled","rejected"]):dr(e)?cr(...e.flatMap((e=>[e.pending,e.rejected,e.fulfilled]))):yr()(e[0])}var vr=["name","message","stack","code"],mr=class{constructor(e,t){f(this,"_type");this.payload=e,this.meta=t}},wr=class{constructor(e,t){f(this,"_type");this.payload=e,this.meta=t}},br=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of vr)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},Sr=(()=>{function e(e,t,r){let n=Nt(e+"/fulfilled",((e,t,r,n)=>({payload:e,meta:{...n||{},arg:r,requestId:t,requestStatus:"fulfilled"}}))),i=Nt(e+"/pending",((e,t,r)=>({payload:void 0,meta:{...r||{},arg:t,requestId:e,requestStatus:"pending"}}))),a=Nt(e+"/rejected",((e,t,n,i,a)=>({payload:i,error:(r&&r.serializeError||br)(e||"Rejected"),meta:{...a||{},arg:n,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:e?.name==="AbortError",condition:e?.name==="ConditionError"}})));function o(e){return(o,u,c)=>{let s=r?.idGenerator?r.idGenerator(e):or(),l=new AbortController,d,f;function h(e){f=e,l.abort()}let p=async function(){let p;try{let a=r?.condition?.(e,{getState:u,extra:c});if(qr(a)&&(a=await a),a===!1||l.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let g=new Promise(((e,t)=>{d=()=>{t({name:"AbortError",message:f||"Aborted"})},l.signal.addEventListener("abort",d)}));o(i(s,e,r?.getPendingMeta?.({requestId:s,arg:e},{getState:u,extra:c}))),p=await Promise.race([g,Promise.resolve(t(e,{dispatch:o,getState:u,extra:c,requestId:s,signal:l.signal,abort:h,rejectWithValue:(e,t)=>new mr(e,t),fulfillWithValue:(e,t)=>new wr(e,t)})).then((t=>{if(t instanceof mr)throw t;return t instanceof wr?n(t.payload,s,e,t.meta):n(t,s,e)}))])}catch(t){p=t instanceof mr?a(null,s,e,t.payload,t.meta):a(t,s,e)}finally{d&&l.signal.removeEventListener("abort",d)}return r&&!r.dispatchConditionRejection&&a.match(p)&&p.meta.condition||o(p),p}();return Object.assign(p,{abort:h,requestId:s,arg:e,unwrap(){return p.then(Ir)}})}}return Object.assign(o,{pending:i,rejected:a,fulfilled:n,settled:cr(a,n),typePrefix:e})}return e.withTypes=()=>e,e})();function Ir(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function qr(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Or=Symbol.for("rtk-slice-createasyncthunk");function Cr(e,t){return`${e}/${t}`}function xr({creators:e}={}){let t=e?.asyncThunk?.[Or];return function(e){let{name:r,reducerPath:n=r}=e;if(!r)throw new Error(_r(11));let i=(typeof e.reducers=="function"?e.reducers(jr()):e.reducers)||{},a=Object.keys(i),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(e,t){let r=typeof e=="string"?e:e.type;if(!r)throw new Error(_r(12));if(r in o.sliceCaseReducersByType)throw new Error(_r(13));return o.sliceCaseReducersByType[r]=t,u},addMatcher(e,t){return o.sliceMatchers.push({matcher:e,reducer:t}),u},exposeAction(e,t){return o.actionCreators[e]=t,u},exposeCaseReducer(e,t){return o.sliceCaseReducersByName[e]=t,u}};a.forEach((n=>{let a=i[n],o={reducerName:n,type:Cr(r,n),createNotation:typeof e.reducers=="function"};Tr(a)?Er(o,a,u,t):Rr(o,a,u)}));function c(){let[t={},r=[],n=void 0]=typeof e.extraReducers=="function"?rr(e.extraReducers):[e.extraReducers],i={...t,...o.sliceCaseReducersByType};return ir(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of o.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)}))}let s=e=>e,l=new Map,d;function f(e,t){return d||(d=c()),d(e,t)}function h(){return d||(d=c()),d.getInitialState()}function p(t,r=!1){function n(e){let n=e[t];return typeof n>"u"&&r&&(n=h()),n}function i(t=s){let n=Bt(l,r,{insert:()=>new WeakMap});return Bt(n,t,{insert:()=>{let n={};for(let[i,a]of Object.entries(e.selectors??{}))n[i]=Ar(a,t,h,r);return n}})}return{reducerPath:t,getSelectors:i,get selectors(){return i(n)},selectSlice:n}}let g={name:r,reducer:f,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:h,...p(n),injectInto(e,{reducerPath:t,...r}={}){let i=t??n;return e.inject({reducerPath:i,reducer:f},r),{...g,...p(i,!0)}}};return g}}function Ar(e,t,r,n){function i(i,...a){let o=t(i);return typeof o>"u"&&n&&(o=r()),e(o,...a)}return i.unwrapped=e,i}var kr=xr();function jr(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:e}}function Rr({type:e,reducerName:t,createNotation:r},n,i){let a,o;if("reducer"in n){if(r&&!Mr(n))throw new Error(_r(17));a=n.reducer,o=n.prepare}else a=n;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,o?Nt(e,o):Nt(e))}function Tr(e){return e._reducerDefinitionType==="asyncThunk"}function Mr(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Er({type:e,reducerName:t},r,n,i){if(!i)throw new Error(_r(18));let{payloadCreator:a,fulfilled:o,pending:u,rejected:c,settled:s,options:l}=r,d=i(e,a,l);n.exposeAction(t,d),o&&n.addCase(d.fulfilled,o),u&&n.addCase(d.pending,u),c&&n.addCase(d.rejected,c),s&&n.addMatcher(d.settled,s),n.exposeCaseReducer(t,{fulfilled:o||Pr,pending:u||Pr,rejected:c||Pr,settled:s||Pr})}function Pr(){}var Dr=(e,t)=>{if(typeof e!="function")throw new Error(_r(32))};var Fr="listenerMiddleware";var $r=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:a}=e;if(t)i=Nt(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(_r(21));return Dr(a),{predicate:i,type:t,effect:a}},Ur=Object.assign((e=>{let{type:t,predicate:r,effect:n}=$r(e);return{id:or(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(_r(22))}}}),{withTypes:()=>Ur});var Qr=Object.assign(Nt(`${Fr}/add`),{withTypes:()=>Qr});Nt(`${Fr}/removeAll`);var Vr=Object.assign(Nt(`${Fr}/remove`),{withTypes:()=>Vr});function _r(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Nr=Pt((e=>e.commercePagination?.principal.perPage||0),(e=>e)),Lr=Pt(((e,t)=>e.commercePagination?.recommendations[t]?.perPage||0),(e=>e)),zr=Pt((e=>e.commercePagination?.principal.totalEntries||0),(e=>e)),Br=Pt(((e,t)=>e.commercePagination?.recommendations[t]?.totalEntries||0),(e=>e)),Yr=Pt((e=>e.commercePagination?.principal.page||0),(e=>e)),Hr=Pt(((e,t)=>e.commercePagination?.recommendations[t]?.page||0),(e=>e));Pt((e=>e[U].productListing.responseId),(e=>e));var Wr=Pt((e=>e.productListing.responseId),(e=>e)),Kr=Pt((e=>e.productListing.requestId),(e=>e)),Gr=Pt((e=>e.productListing?.products.length||0),(e=>e)),Jr=Pt((e=>({total:zr(e),current:Gr(e)})),(({current:e,total:t})=>e<t)),Zr=Pt((e=>e.productListing?.isLoading),(e=>Y(e)?!1:e)),Xr=Pt((e=>e.productListing?.error),(e=>e??null));function en(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{q:n}:{}}function tn(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{sortCriteria:n}:{}}function rn(e,t,r,n){if(e===void 0)return{};let i=Object.entries(e).filter((([e])=>t(e))).map((([e,{request:t}])=>{let n=r(t);return n.length?{[e]:n}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(i).length?{[n]:i}:{}}function nn(e){let{activeValue:t,ancestryMap:r}=an(e);return t?on(t,r):[]}function an(e){let t=[...e],r=new Map;for(;t.length>0;){let e=t.shift();if(e.state==="selected")return{activeValue:e,ancestryMap:r};if(r)for(let t of e.children)r.set(t,e);t.unshift(...e.children)}return{}}function on(e,t){let r=[];if(!e)return[];let n=e;do{r.unshift(n),n=t.get(n)}while(n);return r}function un(){return{principal:cn(),recommendations:{}}}function cn(){return{page:0,perPage:0,totalEntries:0,totalPages:0}}var sn=(e=>(e.Relevance="relevance",e.Fields="fields",e))(sn||{}),ln=(e=>(e.Ascending="asc",e.Descending="desc",e))(ln||{}),dn=()=>({by:"relevance"});new re({options:{required:!1},values:{by:new oe({enum:sn,required:!0}),fields:new ie({each:new re({values:{name:new ee,direction:new oe({enum:ln})}})})}});var fn=e=>({by:"fields",fields:e}),hn=new re({options:{required:!1},values:{by:new oe({enum:sn,required:!0}),fields:new ie({each:new re({values:{field:new ee({required:!0}),direction:new oe({enum:ln}),displayName:new ee}})})}});function pn(){return{appliedSort:dn(),availableSorts:[dn()]}}function gn(e){return{page:e.commercePagination.principal.page??cn().page,perPage:e.commercePagination.principal.perPage??cn().perPage,sortCriteria:e.commerceSort.appliedSort??pn().appliedSort,cf:{},nf:{},df:{},f:{}}}function yn(e){return{...mn(e?.commercePagination,(e=>e.principal.page),cn().page),...wn(e?.commercePagination,(e=>e.principal.perPage),cn().perPage),...tn(e?.commerceSort,(e=>e.appliedSort),pn().appliedSort),...rn(e.commerceFacetSet,qn(e,"regular"),bn,"f"),...rn(e.commerceFacetSet,qn(e,"hierarchical"),In,"cf"),...rn(e.commerceFacetSet,qn(e,"dateRange"),Sn,"df"),...rn(e.commerceFacetSet,qn(e,"numericalRange"),Sn,"nf")}}function vn(e,t){return{...gn(e),...t}}function mn(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{page:n}:{}}function wn(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{perPage:n}:{}}function bn(e){return e.values.filter((e=>e.state==="selected")).map((e=>e.value))}function Sn(e){return e.values.filter((e=>e.state==="selected"))}function In(e){return nn(e.values).map((e=>e.value))}function qn(e,t){return r=>e.commerceFacetSet[r].request.type===t}var On=()=>({query:""});Pt((e=>e[U].commerceSearch.responseId),(e=>e));var Cn=Pt((e=>e.commerceSearch.responseId),(e=>e)),xn=Pt((e=>e.commerceSearch.requestId),(e=>e)),An=Pt((e=>e.commerceSearch?.products.length||0),(e=>e)),kn=Pt((e=>({total:zr(e),current:An(e)})),(({current:e,total:t})=>e<t)),jn=Pt((e=>e.commerceSearch?.isLoading),(e=>Y(e)?!1:e)),Rn=Pt((e=>e.commerceSearch?.error),(e=>e??null)),Tn=Pt((e=>e.commerceQuery?.query),(e=>e??"")),Mn=Pt((e=>e.commerceSearch?.queryExecuted),(e=>e)),En=(e,t)=>Y(t.queryCorrection?.correctedQuery)?Tn(e):t.queryCorrection.correctedQuery,Pn=e=>({...en(e?.commerceQuery,(e=>e.query),On().query),...yn(e)});function Dn(e,t){return{q:On().query,...vn(e,t)}}function Fn(e){return{query:Mn(e)||""}}var $n;(e=>e.responseIdSelector=Qn(Cn))($n||($n={}));var Un;(e=>e.responseIdSelector=Qn(Wr))(Un||(Un={}));function Qn(e){return t=>e(t[U])}var Vn={};s(Vn,{escape:()=>Jn,getHighlightedSuggestion:()=>Kn,highlightString:()=>Wn});d(g());var _n=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function Nn(e){return Array.isArray(e)}function Ln(e){return e.trim()===""}var zn=new Set(["1",1,"yes",!0]);function Bn(){if(typeof navigator>"u"||typeof window>"u")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some((e=>zn.has(e)))}function Yn(e){let t={};for(let[r,n]of e)t[r]=n;return t}function Hn(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function Wn(e){if(Ln(e.openingDelimiter)||Ln(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(Y(e.content)||Ln(e.content))return e.content;if(e.highlights.length===0)return Jn(e.content);let t=e.content.length,r="",n=0;for(let i=0;i<e.highlights.length;i++){let a=e.highlights[i],o=a.offset,u=o+a.length;if(u>t)break;r+=Jn(e.content.slice(n,o)),r+=e.openingDelimiter,r+=Jn(e.content.slice(o,u)),r+=e.closingDelimiter,n=u}return n!==t&&(r+=Jn(e.content.slice(n))),r}function Kn(e,t){return e=Jn(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,((e,r,n,i)=>r?Gn(r,t.notMatchDelimiters):n?Gn(n,t.exactMatchDelimiters):i?Gn(i,t.correctionDelimiters):e))}function Gn(e,t){return t?t.open+e+t.close:e}function Jn(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return n.test(e)?e.replace(i,(e=>t[e])):e}var Zn=d(y()),Xn=d(C());var ei=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},ti=class extends Error{constructor(e,t){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=t??0}};function ri(e){let t=[];for(let r in e){let n=encodeURIComponent(r),i=encodeURIComponent(e[r]);t.push(`${n}=${i}`)}return t.join("&")}function ni(e){return typeof e!="object"||!e?!1:Object.values(e).every(ii)}function ii(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function ai(e){return e===429}var oi=class e{static async call(t){let r=di(t),{logger:n}=t,i=await e.preprocessRequest(r,t);n.info(i,"Platform request");let{url:a,...o}=i,u=async()=>{let e=await(0,Zn.default)(a,o);if(ai(e.status))throw e;return e};try{let e=await(0,Xn.backOff)(u,{retry:e=>{let t=e&&ai(e.status);return t&&n.info("Platform retrying request"),t}});switch(e.status){case 419:case 401:throw n.info("Platform renewing token"),new ei;case 404:throw new ti(a,e.status);default:return n.info({response:e,requestInfo:i},"Platform response"),e}}catch(e){return e.message==="Failed to fetch"?new ti(a):e}}static async preprocessRequest(e,t){let{origin:r,preprocessRequest:n,logger:i,requestMetadata:a}=t,{signal:o,...u}=e,c=Hn(u);try{let t=await n(e,r,a);return{...e,...t}}catch(e){i.error(e,"Platform request preprocessing failed. Returning default request options.")}return c}};function ui(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,n=!t||!t.region||t.region==="us"?"":`-${t.region}`;return`https://${e}${r}${n}.cloud.coveo.com`}function ci(e,t="prod"){let r=t==="prod"?"":t,n=`https://${e}.org${r}.coveo.com`,i=`https://${e}.analytics.org${r}.coveo.com`,a=`${n}/rest/search/v2`,o=`https://${e}.admin.org${r}.coveo.com`;return{platform:n,analytics:i,search:a,admin:o}}function si(e){return e?.multiRegionSubDomain?`https://${e.multiRegionSubDomain}.org.coveo.com`:ui("platform",e)}function li(e){return ui("analytics",e)}function di(e){let{url:t,method:r,requestParams:n,contentType:i,accessToken:a,signal:o}=e,u=e.method==="POST"||e.method==="PUT",c=fi(n,i);return{url:t,method:r,headers:{"Content-Type":i,Authorization:`Bearer ${a}`,...e.headers},...u&&{body:c},signal:o}}function fi(e,t){return t==="application/x-www-form-urlencoded"?ni(e)?ri(e):"":JSON.stringify(e)}function hi(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function pi(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function gi(e,t){if(t&&e.name==="AbortError")return{error:pi(e)};if(e instanceof ti)return{error:hi(e)};throw e}var yi=(e,t)=>({...mi(e,t),requestParams:vi(e)}),vi=e=>{let{trackingId:t,clientId:r,context:n,language:i,country:a,currency:o,page:u,perPage:c,facets:s,sort:l}=e;return{trackingId:t,clientId:r,context:n,language:i,country:a,currency:o,page:u,perPage:c,facets:s,sort:l}},mi=(e,t)=>{let{url:r,organizationId:n,accessToken:i}=e,a=`${r}/rest/organizations/${n}/commerce/v2/${t}`;return{accessToken:i,method:"POST",contentType:"application/json",url:a,origin:"commerceApiFetch",requestMetadata:{method:t}}};var wi=(e,t)=>({...mi(e,t),requestParams:bi(e)}),bi=e=>{let{slotId:t,trackingId:r,clientId:n,context:i,language:a,country:o,currency:u,page:c}=e;return{slotId:t,trackingId:r,clientId:n,context:i,language:a,country:o,currency:u,page:c}};var Si=e=>({...mi(e,"search/querySuggest"),requestParams:Ii(e)}),Ii=e=>{let{trackingId:t,query:r,clientId:n,context:i,language:a,country:o,currency:u}=e;return{trackingId:t,query:r,clientId:n,context:i,language:a,country:o,currency:u}};var qi=e=>e.error!==void 0,Oi=class{constructor(e){this.options=e}async getProductListing(e){return this.query({...yi(e,"listing"),...this.options})}async search(e){let t=yi(e,"search");return this.query({...t,requestParams:{...t.requestParams,query:e?.query},...this.options})}async getRecommendations(e){return this.query({...wi(e,"recommendations"),...this.options})}async productSuggestions(e){let t=yi(e,"search/productSuggest");return this.query({...t,requestParams:{...t.requestParams,query:e?.query},...this.options})}async querySuggest(e){let t=Si(e);return this.query({...t,requestParams:{...t.requestParams,query:e?.query},...this.options})}async facetSearch(e,t){let r=yi(e,"facet");return this.query({...r,url:`${r.url}?type=${t}`,requestParams:{...r.requestParams,facetId:e?.facetId,facetQuery:e?.facetQuery,query:e?.query},...this.options})}async plan(e){let t=yi(e,"search");return this.query({...t,requestParams:{...t.requestParams,query:e?.query},...this.options})}async query(e){let t=await oi.call(e);if(t instanceof Error)return gi(t);let r=await t.json();return t.ok?{success:r}:{error:r}}};var Ci=e=>e;var xi=new ee({required:!0,emptyAllowed:!1}),Ai=new ee({required:!1,emptyAllowed:!1}),ki=new ee({required:!0,emptyAllowed:!0}),ji=new ee({required:!1,emptyAllowed:!0});new ie({each:xi,required:!0});var Ri=new ee({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),Ti=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),Mi=(e,t)=>{if("required"in t)return{payload:new N({value:t}).validate({value:e}).value};let r=new re({options:{required:!0},values:t}).validate(e);if(r)throw new _(r);return{payload:e}},Ei=(e,t)=>{try{return Mi(e,t)}catch(t){return{payload:e,error:Ti(t)}}},Pi=(e,t,r,n)=>{let i=`Check the initialState of ${n}`;return Fi(e,t,r,i,"Controller initialization error")},Di=(e,t,r,n)=>{let i=`Check the options of ${n}`;return Fi(e,t,r,i,"Controller initialization error")},Fi=(e,t,r,n,i)=>{try{return t.validate(r,n)}catch(t){throw e.logger.error(t,i),t}};function $i(e){return e.currency}var Ui=(e,t)=>({currency:$i(t.commerceContext),products:Vi(t.cart),transaction:e}),Qi=Pt((e=>e.cart),(e=>e.cartItems),((e,t)=>t.map((t=>e[t])))),Vi=Pt(Qi,(e=>e.map((({quantity:e,...t})=>({quantity:e,product:t})))));var _i={productId:xi,quantity:new H({required:!0,min:0}),name:new ee({required:!1}),price:new H({required:!1,min:0})},Ni=new ie({each:new re({values:{..._i}})}),Li={items:Ni};new N(Li);var zi=Sr("commerce/cart/purchase",(async(e,{extra:t,getState:r})=>{let n=Ui(e,r()),{relay:i}=t;i.emit("ec.purchase",n)})),Bi=Nt("commerce/cart/setItems",(e=>Ei(e,Ni))),Yi=Nt("commerce/cart/updateItemQuantity",(e=>Ei(e,_i)));function Hi(e){let t,r=new Map,n=()=>r.size===0,i=e=>{try{let r=JSON.stringify(e),n=t!==r;return t=r,n}catch(e){return console.warn('Could not detect if state has changed, check the controller "get state method"',e),!0}};return{subscribe(a){a();let o=Symbol(),u;return n()&&(t=JSON.stringify(this.state),u=e.subscribe((()=>{i(this.state)&&r.forEach((e=>e()))}))),r.set(o,a),()=>{r.delete(o),n()&&u&&u()}},get state(){return{}}}}Pt(Qi,(e=>e.reduce(((e,t)=>e+t.quantity),0)));Pt(Qi,(e=>e.reduce(((e,t)=>e+t.price*t.quantity),0)));function Wi(e){return`${e.productId},${e.name},${e.price}`}var Ki=()=>({cartItems:[],cart:{},purchasedItems:[],purchased:{}}),Gi=e=>Zi(e.cartItems,e.cart),Ji=e=>Zi(e.purchasedItems,e.purchased);function Zi(e,t){let r=e.reduce(((e,r)=>{let{productId:n,quantity:i}=t[r];return n in e||(e[n]={productId:n,quantity:0}),e[n].quantity+=i,e}),{});return[...Object.values(r)]}var Xi=ir(Ki(),(e=>{e.addCase(Bi,((e,{payload:t})=>{let{cart:r,cartItems:n}=t.reduce(((e,t)=>{let r=Wi(t);return{cartItems:[...e.cartItems,r],cart:{...e.cart,[r]:t},purchasedItems:[],purchased:{}}}),Ki());ea(e,n,r)})).addCase(Yi,((e,{payload:t})=>{let r=Wi(t);if(!(r in e.cart)){ta(t,e);return}if(t.quantity<=0){ra(t,e);return}e.cart[r]=t})).addCase(zi.fulfilled,(e=>{na(e);let{cart:t,cartItems:r}=Ki();ea(e,r,t)}))}));function ea(e,t,r){e.cartItems=t,e.cart=r}function ta(e,t){if(e.quantity<=0)return;let r=Wi(e);t.cartItems=[...t.cartItems,r],t.cart[r]=e}function ra(e,t){let r=Wi(e);t.cartItems=t.cartItems.filter((e=>e!==r)),delete t.cart[r]}function na(e){for(let t of e.cartItems){if(t in e.purchased){e.purchased[t].quantity+=e.cart[t].quantity;continue}e.purchasedItems=[...e.purchasedItems,t],e.purchased[t]=e.cart[t]}}var ia=Intl.supportedValuesOf("currency"),aa=new ee({required:!0,emptyAllowed:!1,constrainTo:ia}),oa={url:xi},ua={language:xi,country:xi,currency:aa,view:new re({options:{required:!0},values:oa})},ca=new N(ua);var sa=Nt("commerce/context/set",(e=>Ei(e,ua))),la=Nt("commerce/context/setView",(e=>Ei(e,oa)));var da=()=>({language:"",country:"",currency:"",view:{url:""}});var fa=ir(da(),(e=>{e.addCase(sa,((e,{payload:t})=>t)).addCase(la,((e,{payload:t})=>{e.view=t}))}));var ha=()=>({correctedQuery:"",corrections:[],originalQuery:""});var pa=(e,t)=>{let r={...ha(),...t,correctedQuery:t?.correctedQuery||t?.corrections[0]?.correctedQuery||""};e.queryCorrection=r,e.wasCorrectedTo=r.correctedQuery};var ga=Nt("breadcrumb/deselectAll"),ya=Nt("breadcrumb/deselectAllNonBreadcrumbs");var va="2.73.0-pre.a389b402e2",ma=["@coveo/atomic","@coveo/quantic"];var wa=Pt((e=>e.source),(e=>[`@coveo/headless@${va}`].concat(Object.entries(e).map((([e,t])=>`${e}@${t}`)))));var ba=(e,t)=>({...Sa(e,t),facets:qa(e),...e.commerceSort&&{sort:Oa(e.commerceSort.appliedSort)}}),Sa=(e,t,r)=>{let{view:n,...i}=e.commerceContext;return{accessToken:e.configuration.accessToken,url:e.configuration.platformUrl,organizationId:e.configuration.organizationId,trackingId:e.configuration.analytics.trackingId,...i,clientId:t.clientId,context:{...t.userAgent?{user:{userAgent:t.userAgent}}:{},view:{...n,...t.referrer?{referrer:t.referrer}:{}},capture:e.configuration.analytics.enabled,cart:Gi(e.cart),source:wa(e.configuration.analytics)},...Ia(e,r)}},Ia=(e,t)=>{let r=t?e.commercePagination?.recommendations[t]:e.commercePagination?.principal;return r&&{page:r.page,...r.perPage&&{perPage:r.perPage}}};function qa(e){return!e.facetOrder||!e.commerceFacetSet?[]:e.facetOrder.map((t=>e.commerceFacetSet[t].request)).filter((e=>e.values.length>0))}function Oa(e){return e.by==="relevance"?{sortCriteria:"relevance"}:{sortCriteria:"fields",fields:e.fields.map((({name:e,direction:t})=>({field:e,direction:t})))}}var Ca=Nt("commerce/facets/core/updateNumberOfValues",(e=>Ei(e,{facetId:xi,numberOfValues:new H({required:!0,min:1})}))),xa=Nt("commerce/facets/core/updateIsFieldExpanded",(e=>Ei(e,{facetId:xi,isFieldExpanded:new G({required:!0})}))),Aa=Nt("commerce/facets/core/clearAll"),ka=Nt("commerce/facets/core/deselectAllValues",(e=>Ei(e,{facetId:xi}))),ja=Nt("commerce/facets/core/updateFreezeCurrentValues",(e=>Ei(e,{facetId:xi,freezeCurrentValues:new G({required:!0})}))),Ra=Nt("commerce/facets/core/updateAutoSelectionForAll",(e=>Ei(e,{allow:new G({required:!0})})));var Ta={slotId:ji},Ma={...Ta,pageSize:new H({required:!0,min:0})},Ea=Nt("commerce/pagination/setPageSize",(e=>Ei(e,Ma))),Pa={...Ta,page:new H({required:!0,min:0})},Da=Nt("commerce/pagination/selectPage",(e=>Ei(e,Pa))),Fa=Nt("commerce/pagination/nextPage",(e=>Ei(e,Ta))),$a=Nt("commerce/pagination/previousPage",(e=>Ei(e,Ta))),Ua=Nt("commerce/pagination/registerRecommendationsSlot",(e=>Ei(e,{slotId:xi})));var Qa=Nt("commerce/query/update",(e=>Ei(e,{query:new ee})));var Va=Nt("commerce/triggers/query/updateIgnore",(e=>Ei(e,{q:new ee({emptyAllowed:!0,required:!0})}))),_a=Nt("commerce/triggers/query/applyModification",(e=>Ei(e,new re({values:{originalQuery:Ai,modification:Ai}}))));var Na=class{constructor(e){this.config=e}async process(e){return this.processQueryErrorOrContinue(e)??await this.processQueryCorrectionsOrContinue(e)??await this.processQueryTriggersOrContinue(e)??this.processSuccessResponse(e)}async fetchFromAPI(e){let t=(new Date).getTime(),r=await this.extra.apiClient.search(e),n=(new Date).getTime()-t,i=this.getState().commerceQuery.query||"";return{response:r,duration:n,queryExecuted:i,requestExecuted:e}}processSuccessResponse(e){return{...e,response:this.getSuccessResponse(e),originalQuery:this.getCurrentQuery()}}processQueryErrorOrContinue(e){return qi(e.response)?this.rejectWithValue(e.response.error):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{queryCorrection:n}=r;if(!(!Y(n)&&!Y(n.correctedQuery)))return null;let{correctedQuery:i,originalQuery:a}=r.queryCorrection;return this.onUpdateQueryForCorrection(i),{...e,response:{...r},queryExecuted:En(t,r),originalQuery:a}}async processQueryTriggersOrContinue(e){let t=this.getSuccessResponse(e);if(!t)return null;let r=t.triggers.find((e=>e.type==="query"))?.content||"";if(!r)return null;if(this.getState().triggers?.queryModification.queryToIgnore===r)return this.dispatch(Va({q:""})),null;let n=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(r);return qi(i.response)?this.rejectWithValue(i.response.error):{...i,response:{...i.response.success},originalQuery:n}}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(_a({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI({...ba(this.getState(),this.navigatorContext),query:e})}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}getState(){return this.config.getState()}get navigatorContext(){return this.config.extra.navigatorContext}getCurrentQuery(){let e=this.getState();return e.commerceQuery.query!==void 0?e.commerceQuery.query:""}getSuccessResponse(e){return qi(e.response)?null:e.response.success}get extra(){return this.config.extra}onUpdateQueryForCorrection(e){this.dispatch(Qa({query:e}))}};var La=Sr("commerce/search/executeSearch",(async(e,t)=>{let{getState:r}=t,n=r(),{navigatorContext:i}=t.extra,a=ba(n,i),o=Tn(n),u=new Na(t),c=await u.fetchFromAPI({...a,query:o});return u.process(c)})),za=Sr("commerce/search/fetchMoreProducts",(async(e,t)=>{let{getState:r}=t,n=r(),{navigatorContext:i}=t.extra;if(!kn(n))return null;let a=Nr(n),o=An(n)/a,u=Tn(n),c=ba(n,i),s=new Na(t),l=await s.fetchFromAPI({...c,query:u,page:o});return s.process(l)})),Ba=Sr("commerce/search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;Ei(e,{query:new ee,clearFilters:new G}),e.clearFilters&&(r(Aa()),r(ya())),r(Ra({allow:!0})),r(Qa({query:e.query})),r(Da({page:0}))})),Ya=Sr("commerce/search/fetchInstantProducts",(async(e,{getState:t,rejectWithValue:r,extra:n})=>{let i=t(),{apiClient:a,navigatorContext:o}=n,{q:u}=e,c=await a.productSuggestions({...ba(i,o),query:u});if(qi(c))return r(c.error);let s=c.success.products.slice(0,5);return{response:{...c.success,products:s}}})),Ha={child:new re({options:{required:!0},values:{permanentid:new ee({required:!0})}})},Wa=Nt("commerce/search/promoteChildToParent",(e=>Ei(e,Ha)));function Ka(){return{wasCorrectedTo:"",queryCorrection:ha(),originalQuery:""}}var Ga=ir(Ka(),(e=>{e.addCase(La.pending,(e=>{e.queryCorrection=ha(),e.wasCorrectedTo=""})).addCase(La.fulfilled,((e,t)=>{let{queryCorrection:r}=t.payload.response;pa(e,r),e.originalQuery=t.payload.originalQuery}))}));var Ja=xi;var Za={state:new L({required:!0}),numberOfResults:new H({required:!0,min:0}),value:new ee({required:!0,emptyAllowed:!0}),path:new ie({required:!0,each:xi}),moreValuesAvailable:new G({required:!1})};function Xa(e){e.children.forEach((e=>{Xa(e)})),Mi({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},Za)}var eo={facetId:Ja,field:xi,delimitingCharacter:new ee({required:!1,emptyAllowed:!0}),filterFacetCount:new G({required:!1}),injectionDepth:new H({required:!1,min:0}),numberOfValues:new H({required:!1,min:1}),sortCriteria:new L({required:!1}),basePath:new ie({required:!1,each:xi}),filterByBasePath:new G({required:!1})},to=5,ro=Nt("categoryFacet/register",(e=>Ei(e,eo))),no=Nt("categoryFacet/toggleSelectValue",(e=>{try{return Mi(e.facetId,xi),Xa(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Ti(t)}}})),io=Nt("categoryFacet/deselectAll",(e=>Ei(e,eo.facetId)));Nt("categoryFacet/updateNumberOfValues",(e=>Ei(e,{facetId:eo.facetId,numberOfValues:eo.numberOfValues})));Nt("categoryFacet/updateSortCriterion",(e=>Ei(e,{facetId:eo.facetId,criterion:new L})));Nt("categoryFacet/updateBasePath",(e=>Ei(e,{facetId:eo.facetId,basePath:new ie({each:xi})})));var ao={facetId:Ja,captions:new re({options:{required:!1}}),numberOfValues:new H({required:!1,min:1}),query:new ee({required:!1,emptyAllowed:!0})};var oo={path:new ie({required:!0,each:xi}),displayValue:ki,rawValue:ki,count:new H({required:!0,min:0})},uo=Nt("categoryFacet/selectSearchResult",(e=>Ei(e,{facetId:Ja,value:new re({values:oo})}))),co=Nt("categoryFacetSearch/register",(e=>Ei(e,ao)));var so={facetId:Ja,value:new re({values:{displayValue:ki,rawValue:ki,count:new H({required:!0,min:0})}})},lo=Nt("facetSearch/register",(e=>Ei(e,ao))),fo=Nt("facetSearch/update",(e=>Ei(e,ao))),ho=Nt("facetSearch/toggleSelectValue",(e=>Ei(e,so))),po=Nt("facetSearch/toggleExcludeValue",(e=>Ei(e,so)));var go=Nt("facetOptions/update",((e={freezeFacetOrder:!0})=>Ei(e,{freezeFacetOrder:new G({required:!1})}))),yo=Nt("facetOptions/facet/enable",(e=>Ei(e,Ja))),vo=Nt("facetOptions/facet/disable",(e=>Ei(e,Ja)));var mo=Nt("history/undo"),wo=Nt("history/redo"),bo=Nt("history/snapshot");Sr("history/back",(async(e,{dispatch:t})=>{t(mo()),await t(So())}));Sr("history/forward",(async(e,{dispatch:t})=>{t(wo()),await t(So())}));var So=Sr("history/change",(async(e,{getState:t})=>t().history.present));function Io(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function qo(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{c(n.next(e))}catch(e){a(e)}}function u(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):i(e.value).then(o,u)}c((n=n.apply(e,t||[])).next())}))}var Oo;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(Oo||(Oo={}));function Co(){return typeof window<"u"}function xo(){return typeof navigator<"u"}function Ao(){return typeof document<"u"}function ko(){try{return typeof localStorage<"u"}catch{return!1}}function jo(){try{return typeof sessionStorage<"u"}catch{return!1}}function Ro(){return xo()&&navigator.cookieEnabled}var To=[Oo.click,Oo.custom,Oo.search,Oo.view],Mo=(e,t)=>To.indexOf(e)!==-1?Object.assign({language:Ao()?document.documentElement.lang:"unknown",userAgent:xo()?navigator.userAgent:"unknown"},t):t,Eo=class e{static set(e,t,r){var n,i,a,o;r&&(i=new Date,i.setTime(i.getTime()+r)),o=window.location.hostname,o.indexOf(".")===-1?Po(e,t,i):(a=o.split("."),n=a[a.length-2]+"."+a[a.length-1],Po(e,t,i,n))}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var i=r[n];if(i=i.replace(/^\s+/,""),i.lastIndexOf(t,0)===0)return i.substring(t.length,i.length)}return null}static erase(t){e.set(t,"",-1)}};function Po(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function Do(){return ko()?localStorage:Ro()?new Fo:jo()?sessionStorage:new Uo}var Fo=class e{getItem(t){return Eo.get(`${e.prefix}${t}`)}removeItem(t){Eo.erase(`${e.prefix}${t}`)}setItem(t,r,n){Eo.set(`${e.prefix}${t}`,r,n)}};Fo.prefix="coveo_";var $o=class{constructor(){this.cookieStorage=new Fo}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t,31556926e3)}},Uo=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},Qo="__coveo.analytics.history",Vo=20,_o=1e3*60,No=75,Lo=class{constructor(e){this.store=e||Do()}addElement(e){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return qo(this,void 0,void 0,(function*(){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}))}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return qo(this,void 0,void 0,(function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))}))}getHistoryWithInternalTime(){try{let e=this.store.getItem(Qo);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return qo(this,void 0,void 0,(function*(){try{let e=yield this.store.getItem(Qo);return e?JSON.parse(e):[]}catch{return[]}}))}setHistory(e){try{this.store.setItem(Qo,JSON.stringify(e.slice(0,Vo)))}catch{}}clear(){try{this.store.removeItem(Qo)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort(((e,t)=>(t.internalTime||0)-(e.internalTime||0)))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,No)),e}isValidEntry(e){let t=this.getMostRecentElement();return t&&t.value==e.value?(e.internalTime||0)-(t.internalTime||0)>_o:!0}stripInternalTime(e){return Array.isArray(e)?e.map((e=>{let{name:t,time:r,value:n}=e;return{name:t,time:r,value:n}})):[]}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&typeof n=="string"&&t.toLowerCase()==="query"&&n.trim()===""?{name:t,time:r}:e}stripEmptyQueries(e){return e.map((e=>this.stripEmptyQuery(e)))}},zo=Object.freeze({__proto__:null,HistoryStore:Lo,MAX_NUMBER_OF_HISTORY_ELEMENTS:Vo,MAX_VALUE_SIZE:No,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:_o,STORE_KEY:Qo,default:Lo}),Bo=(e,t)=>qo(void 0,void 0,void 0,(function*(){return e===Oo.view?(yield Yo(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t})),Yo=e=>qo(void 0,void 0,void 0,(function*(){let t=new Lo,r={name:"PageView",value:e,time:(new Date).toISOString()};yield t.addElementAsync(r)})),Ho,Wo=new Uint8Array(16);function Ko(){if(!Ho&&(Ho=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ho))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ho(Wo)}var Go=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Jo(e){return typeof e=="string"&&Go.test(e)}var Zo=[];for(let e=0;e<256;++e)Zo.push((e+256).toString(16).slice(1));function Xo(e,t=0){return(Zo[e[t+0]]+Zo[e[t+1]]+Zo[e[t+2]]+Zo[e[t+3]]+"-"+Zo[e[t+4]]+Zo[e[t+5]]+"-"+Zo[e[t+6]]+Zo[e[t+7]]+"-"+Zo[e[t+8]]+Zo[e[t+9]]+"-"+Zo[e[t+10]]+Zo[e[t+11]]+Zo[e[t+12]]+Zo[e[t+13]]+Zo[e[t+14]]+Zo[e[t+15]]).toLowerCase()}function eu(e){if(!Jo(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function tu(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var ru="6ba7b810-9dad-11d1-80b4-00c04fd430c8",nu="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function iu(e,t,r){function n(e,n,i,a){var o;if(typeof e=="string"&&(e=tu(e)),typeof n=="string"&&(n=eu(n)),((o=n)===null||o===void 0?void 0:o.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(n),u.set(e,n.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,i){a=a||0;for(let e=0;e<16;++e)i[a+e]=u[e];return i}return Xo(u)}try{n.name=e}catch{}return n.DNS=ru,n.URL=nu,n}var au=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ou={randomUUID:au};function uu(e,t,r){if(ou.randomUUID&&!t&&!e)return ou.randomUUID();e=e||{};let n=e.random||(e.rng||Ko)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return Xo(n)}function cu(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function su(e,t){return e<<t|e>>>32-t}function lu(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,i=Math.ceil(n/16),a=new Array(i);for(let t=0;t<i;++t){let r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[t*64+n*4]<<24|e[t*64+n*4+1]<<16|e[t*64+n*4+2]<<8|e[t*64+n*4+3];a[t]=r}a[i-1][14]=(e.length-1)*8/Math.pow(2,32),a[i-1][14]=Math.floor(a[i-1][14]),a[i-1][15]=(e.length-1)*8&4294967295;for(let e=0;e<i;++e){let n=new Uint32Array(80);for(let t=0;t<16;++t)n[t]=a[e][t];for(let e=16;e<80;++e)n[e]=su(n[e-3]^n[e-8]^n[e-14]^n[e-16],1);let i=r[0],o=r[1],u=r[2],c=r[3],s=r[4];for(let e=0;e<80;++e){let r=Math.floor(e/20),a=su(i,5)+cu(r,o,u,c)+s+t[r]+n[e]>>>0;s=c,c=u,u=su(o,30)>>>0,o=i,i=a}r[0]=r[0]+i>>>0,r[1]=r[1]+o>>>0,r[2]=r[2]+u>>>0,r[3]=r[3]+c>>>0,r[4]=r[4]+s>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var du=iu("v5",80,lu),fu=du,hu="2.30.6",pu={pageview:"pageview",event:"event"},gu=class e{constructor(e,t){if(!Jo(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(t/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(e,t){return!this.expired&&this.matchReferrer(e,t)}matchReferrer(e,t){try{let r=new URL(e);return t.some((e=>new RegExp(e.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(r.host)))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,i]=r;if(n.length!==32||isNaN(parseInt(i)))return null;let a=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return Jo(a)?new e(a,Number.parseInt(i)*1e3):null}};gu.cvo_cid="cvo_cid";gu.expirationTime=120;var yu=Object.keys;function vu(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var mu={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},wu=yu(mu).map((e=>mu[e])),bu=[...wu].join("|"),Su=new RegExp(`^(${bu}$)`),Iu={svcAction:"svc_action",svcActionData:"svc_action_data"},qu=e=>Su.test(e),Ou=[qu],Cu={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},xu={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Au={action:"pa",list:"pal",listSource:"pls"},ku={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},ju=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Ru={id:"quoteId",affiliation:"quoteAffiliation"},Tu={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},Mu={add:Au,bookmark_add:Au,bookmark_remove:Au,click:Au,checkout:Au,checkout_option:Au,detail:Au,impression:Au,remove:Au,refund:Object.assign(Object.assign({},Au),ku),purchase:Object.assign(Object.assign({},Au),ku),quickview:Au,quote:Object.assign(Object.assign({},Au),Ru),review:Object.assign(Object.assign({},Au),Tu)},Eu=yu(Cu).map((e=>Cu[e])),Pu=yu(xu).map((e=>xu[e])),Du=yu(Au).map((e=>Au[e])),Fu=yu(ku).map((e=>ku[e])),$u=yu(Tu).map((e=>Tu[e])),Uu=yu(Ru).map((e=>Ru[e])),Qu=[...Eu,"custom"].join("|"),Vu=[...Pu,"custom"].join("|"),_u="(pr[0-9]+)",Nu="(il[0-9]+pi[0-9]+)",Lu=new RegExp(`^${_u}(${Qu})$`),zu=new RegExp(`^(${Nu}(${Vu}))|(il[0-9]+nm)$`),Bu=new RegExp(`^(${Du.join("|")})$`),Yu=new RegExp(`^(${Fu.join("|")})$`),Hu=new RegExp(`^${_u}custom$`),Wu=new RegExp(`^${Nu}custom$`),Ku=new RegExp(`^(${[...ju,...$u,...Uu].join("|")})$`),Gu=e=>Lu.test(e),Ju=e=>zu.test(e),Zu=e=>Bu.test(e),Xu=e=>Yu.test(e),ec=e=>Ku.test(e),tc=[Ju,Gu,Zu,Xu,ec],rc=[Hu,Wu],nc={anonymizeIp:"aip"},ic={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},ac={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},oc=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],uc=Object.assign(Object.assign(Object.assign(Object.assign({},nc),ic),ac),oc.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:t})),{})),cc=Object.assign(Object.assign({},uc),Iu),sc=e=>{let t=!!e.action&&Mu[e.action]||{};return yu(e).reduce(((r,n)=>{let i=t[n]||cc[n]||n;return Object.assign(Object.assign({},r),{[i]:e[n]})}),{})},lc=yu(cc).map((e=>cc[e])),dc=e=>lc.indexOf(e)!==-1,fc=e=>e==="custom",hc=e=>[...tc,...Ou,dc,fc].some((t=>t(e))),pc=e=>yu(e).reduce(((t,r)=>{let n=gc(r);return n?Object.assign(Object.assign({},t),yc(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})}),{}),gc=e=>{let t;return[...rc].every((r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t})),t},yc=(e,t)=>yu(t).reduce(((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]})),{}),vc=class{constructor(e){this.opts=e}sendEvent(e,t){return qo(this,void 0,void 0,(function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,i=yield this.getQueryParamsForEventType(e),{url:a,payload:o}=yield this.preProcessRequestAsPotentialJSONString(`${r}/analytics/${e}?${i}`,t,n),u=this.encodeForEventType(e,o),c=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(a,c)}))}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,t,r){return qo(this,void 0,void 0,(function*(){let n=e,i=t;if(r){let a=yield r({url:e,body:JSON.stringify(t)},"analyticsBeacon"),{url:o,body:u}=a;n=o||e;try{i=JSON.parse(u)}catch(e){console.error("Unable to process the request body as a JSON string",e)}}return{payload:i,url:n}}))}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeEventToJson(e,t):this.encodeEventToJson(e,t,this.opts.token)}getQueryParamsForEventType(e){return qo(this,void 0,void 0,(function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter((e=>!!e)).join("&")}))}isEventTypeLegacy(e){return[Oo.click,Oo.custom,Oo.search,Oo.view].indexOf(e)!==-1}encodeEventToJson(e,t,r){let n=`${e}Event=${encodeURIComponent(JSON.stringify(t))}`;return r&&(n=`access_token=${encodeURIComponent(r)}&${n}`),n}},mc=class{sendEvent(e,t){return qo(this,void 0,void 0,(function*(){return Promise.resolve()}))}deleteHttpCookieVisitorId(){return qo(this,void 0,void 0,(function*(){return Promise.resolve()}))}},wc=window.fetch,bc=class{constructor(e){this.opts=e}sendEvent(e,t){return qo(this,void 0,void 0,(function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:i}=this.opts,a=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",o={url:`${r}/analytics/${e}${a}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},u=Object.assign(Object.assign({},o),i?yield i(o,"analyticsFetch"):{}),{url:c}=u,s=Io(u,["url"]),l;try{l=yield wc(c,s)}catch(e){console.error("An error has occured when sending the event.",e);return}if(l.ok){let e=yield l.json();return e.visitorId&&n.setCurrentVisitorId(e.visitorId),e}else{try{l.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,l,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}}))}deleteHttpCookieVisitorId(){return qo(this,void 0,void 0,(function*(){let{baseUrl:e}=this.opts,t=`${e}/analytics/visit`;yield wc(t,{headers:this.getHeaders(),method:"DELETE"})}))}shouldAppendVisitorId(e){return[Oo.click,Oo.custom,Oo.search,Oo.view].indexOf(e)!==-1}getVisitorIdParam(){return qo(this,void 0,void 0,(function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""}))}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},Sc=class{constructor(e,t){ko()&&Ro()?this.storage=new $o:ko()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new Uo),this.client=new bc(e),this.beaconClient=new vc(e),window.addEventListener("beforeunload",(()=>{let e=t();for(let{eventType:t,payload:r}of e)this.beaconClient.sendEvent(t,r)}))}getClientDependingOnEventType(e){return e==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},Ic=class{constructor(e,t){this.storage=t||new Uo,this.client=new bc(e)}getClientDependingOnEventType(e){return this.client}},qc=class{constructor(){this.storage=new Uo,this.client=new mc}getClientDependingOnEventType(e){return this.client}},Oc="xx",Cc=e=>e?.startsWith(Oc)||!1,xc=`\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please use the "coveo.analytics/react-native" subpackage.\n        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native\n    `;function Ac(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var kc=["1",1,"yes",!0];function jc(){return xo()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some((e=>kc.indexOf(e)!==-1))}var Rc="v15",Tc={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function Mc(e=Tc.default,t=Rc,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var Ec="38824e1f-37f5-42d3-8372-a4b8fa9df946",Pc=class{get defaultOptions(){return{endpoint:Tc.default,isCustomEndpoint:!1,token:"",version:Rc,beforeSendHooks:[],afterSendHooks:[]}}get version(){return hu}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[Bo,Mo].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};jc()?this.runtime=new qc:this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),this.addEventTypeMapping(Oo.view,{newEventType:Oo.view,addClientIdParameter:!0}),this.addEventTypeMapping(Oo.click,{newEventType:Oo.click,addClientIdParameter:!0}),this.addEventTypeMapping(Oo.custom,{newEventType:Oo.custom,addClientIdParameter:!0}),this.addEventTypeMapping(Oo.search,{newEventType:Oo.search,addClientIdParameter:!0})}initRuntime(e){return Co()&&Ao()?new Sc(e,(()=>{let e=[...this.bufferedRequests];return this.bufferedRequests=[],e})):(Ac()&&console.warn(xc),new Ic(e))}get storage(){return this.runtime.storage}determineVisitorId(){return qo(this,void 0,void 0,(function*(){try{return Co()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||uu()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),uu()}}))}getCurrentVisitorId(){return qo(this,void 0,void 0,(function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId}))}setCurrentVisitorId(e){return qo(this,void 0,void 0,(function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)}))}setClientId(e,t){return qo(this,void 0,void 0,(function*(){if(Jo(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!t)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(fu(e,fu(t,Ec)))}}))}getParameters(e,...t){return qo(this,void 0,void 0,(function*(){return yield this.resolveParameters(e,...t)}))}getPayload(e,...t){return qo(this,void 0,void 0,(function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)}))}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(uu()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(jc())return null;try{let t=new URL(e).searchParams.get(gu.cvo_cid);if(t==null)return null;let r=gu.fromString(t);return!r||!Ao()||!r.validate(document.referrer,this.acceptedLinkReferrers)?null:r.clientId}catch{}return null}resolveParameters(e,...t){return qo(this,void 0,void 0,(function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:i=!1,addClientIdParameter:a=!1}=this.eventTypeMapping[e]||{};return yield[e=>r.length>0?this.parseVariableArgumentsPayload(r,e):e[0],e=>qo(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{visitorId:n?yield this.getCurrentVisitorId():""})})),e=>qo(this,void 0,void 0,(function*(){return a?Object.assign(Object.assign({},e),{clientId:yield this.getCurrentVisitorId()}):e})),e=>i?this.ensureAnonymousUserWhenUsingApiKey(e):e,t=>this.beforeSendHooks.reduce(((t,r)=>qo(this,void 0,void 0,(function*(){let n=yield t;return yield r(e,n)}))),t)].reduce(((e,t)=>qo(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}resolvePayloadForParameters(e,t){return qo(this,void 0,void 0,(function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[e=>this.setTrackingIdIfTrackingIdNotPresent(e),t=>this.removeEmptyPayloadValues(t,e),t=>this.validateParams(t,e),e=>r?sc(e):e,e=>r?this.removeUnknownParameters(e):e,e=>r?this.processCustomParameters(e):this.mapCustomParametersToCustomData(e)].reduce(((e,t)=>qo(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}makeEvent(e,...t){return qo(this,void 0,void 0,(function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),i=yield this.resolvePayloadForParameters(e,n);return{eventType:r,payload:i,log:t=>qo(this,void 0,void 0,(function*(){return this.bufferedRequests.push({eventType:r,payload:Object.assign(Object.assign({},i),t)}),yield Promise.all(this.afterSendHooks.map((r=>r(e,Object.assign(Object.assign({},n),t))))),yield this.deferExecution(),yield this.sendFromBuffer()}))}}))}sendEvent(e,...t){return qo(this,void 0,void 0,(function*(){return(yield this.makeEvent(e,...t)).log({})}))}deferExecution(){return new Promise((e=>setTimeout(e,0)))}sendFromBuffer(){return qo(this,void 0,void 0,(function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.getClientDependingOnEventType(t).sendEvent(t,r)}}))}clear(){this.storage.removeItem("visitorId"),(new Lo).clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return qo(this,void 0,void 0,(function*(){return this.makeEvent(Oo.search,e)}))}sendSearchEvent(e){var{searchQueryUid:t}=e,r=Io(e,["searchQueryUid"]);return qo(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(r)).log({searchQueryUid:t})}))}makeClickEvent(e){return qo(this,void 0,void 0,(function*(){return this.makeEvent(Oo.click,e)}))}sendClickEvent(e){var{searchQueryUid:t}=e,r=Io(e,["searchQueryUid"]);return qo(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(r)).log({searchQueryUid:t})}))}makeCustomEvent(e){return qo(this,void 0,void 0,(function*(){return this.makeEvent(Oo.custom,e)}))}sendCustomEvent(e){var{lastSearchQueryUid:t}=e,r=Io(e,["lastSearchQueryUid"]);return qo(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(r)).log({lastSearchQueryUid:t})}))}makeViewEvent(e){return qo(this,void 0,void 0,(function*(){return this.makeEvent(Oo.view,e)}))}sendViewEvent(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeViewEvent(e)).log({})}))}getVisit(){return qo(this,void 0,void 0,(function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e}))}getHealth(){return qo(this,void 0,void 0,(function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()}))}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every((e=>typeof e=="string")))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,i=t.length;n<i;n++){let i=t[n];if(typeof i=="string")r[e[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},r),i)}return r}isKeyAllowedEmpty(e,t){return({[Oo.search]:["queryText"]}[e]||[]).indexOf(t)!==-1}removeEmptyPayloadValues(e,t){let r=e=>typeof e<"u"&&e!==null&&e!=="";return Object.keys(e).filter((n=>this.isKeyAllowedEmpty(t,n)||r(e[n]))).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}removeUnknownParameters(e){return Object.keys(e).filter((e=>{if(hc(e))return!0;console.log(e,"is not processed by coveoua")})).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}processCustomParameters(e){let{custom:t}=e,r=Io(e,["custom"]),n={};t&&vu(t)&&(n=this.lowercaseKeys(t));let i=pc(r);return Object.assign(Object.assign({},n),i)}mapCustomParametersToCustomData(e){let{custom:t}=e,r=Io(e,["custom"]);if(t&&vu(t)){let n=this.lowercaseKeys(t);return Object.assign(Object.assign({},r),{customData:Object.assign(Object.assign({},n),e.customData)})}else return e}lowercaseKeys(e){let t=Object.keys(e),r={};return t.forEach((t=>{r[t.toLowerCase()]=e[t]})),r}validateParams(e,t){let{anonymizeIp:r}=e,n=Io(e,["anonymizeIp"]);return r!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${r}`.toLowerCase())==-1&&(n.anonymizeIp=1),(t==Oo.view||t==Oo.click||t==Oo.search||t==Oo.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),t==Oo.view&&(n.location=this.limit(n.location,128)),(t=="pageview"||t=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=Io(e,["userId"]);return Cc(this.options.token)&&!t?(r.userId="anonymous",r):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:t}=e,r=Io(e,["trackingId"]);return t?e:(r.hasOwnProperty("custom")&&vu(r.custom)&&(r.custom.hasOwnProperty("context_website")||r.custom.hasOwnProperty("siteName"))&&(r.trackingId=r.custom.context_website||r.custom.siteName),r.hasOwnProperty("customData")&&vu(r.customData)&&(r.customData.hasOwnProperty("context_website")||r.customData.hasOwnProperty("siteName"))&&(r.trackingId=r.customData.context_website||r.customData.siteName),r)}limit(e,t){return typeof e!="string"?e:e.substring(0,t)}get baseUrl(){return Mc(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},Dc;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(Dc||(Dc={}));var Fc;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer",e.generatedAnswerFeedbackSubmitV2="generatedAnswerFeedbackSubmitV2"})(Fc||(Fc={}));var $c={[Fc.triggerNotify]:"queryPipelineTriggers",[Fc.triggerExecute]:"queryPipelineTriggers",[Fc.triggerQuery]:"queryPipelineTriggers",[Fc.triggerRedirect]:"queryPipelineTriggers",[Fc.queryError]:"errors",[Fc.queryErrorBack]:"errors",[Fc.queryErrorClear]:"errors",[Fc.queryErrorRetry]:"errors",[Fc.pagerNext]:"getMoreResults",[Fc.pagerPrevious]:"getMoreResults",[Fc.pagerNumber]:"getMoreResults",[Fc.pagerResize]:"getMoreResults",[Fc.pagerScrolling]:"getMoreResults",[Fc.facetSearch]:"facet",[Fc.facetShowLess]:"facet",[Fc.facetShowMore]:"facet",[Fc.recommendation]:"recommendation",[Fc.likeSmartSnippet]:"smartSnippet",[Fc.dislikeSmartSnippet]:"smartSnippet",[Fc.expandSmartSnippet]:"smartSnippet",[Fc.collapseSmartSnippet]:"smartSnippet",[Fc.openSmartSnippetFeedbackModal]:"smartSnippet",[Fc.closeSmartSnippetFeedbackModal]:"smartSnippet",[Fc.sendSmartSnippetReason]:"smartSnippet",[Fc.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[Fc.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[Fc.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[Fc.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[Fc.clearRecentQueries]:"recentQueries",[Fc.recentResultClick]:"recentlyClickedDocuments",[Fc.clearRecentResults]:"recentlyClickedDocuments",[Fc.showLessFoldedResults]:"folding",[Fc.caseDetach]:"case",[Fc.likeGeneratedAnswer]:"generatedAnswer",[Fc.dislikeGeneratedAnswer]:"generatedAnswer",[Fc.openGeneratedAnswerSource]:"generatedAnswer",[Fc.generatedAnswerStreamEnd]:"generatedAnswer",[Fc.generatedAnswerSourceHover]:"generatedAnswer",[Fc.generatedAnswerCopyToClipboard]:"generatedAnswer",[Fc.generatedAnswerHideAnswers]:"generatedAnswer",[Fc.generatedAnswerShowAnswers]:"generatedAnswer",[Fc.generatedAnswerExpand]:"generatedAnswer",[Fc.generatedAnswerCollapse]:"generatedAnswer",[Fc.generatedAnswerFeedbackSubmit]:"generatedAnswer",[Fc.generatedAnswerFeedbackSubmitV2]:"generatedAnswer",[Dc.expandToFullUI]:"interface",[Dc.openUserActions]:"User Actions",[Dc.showPrecedingSessions]:"User Actions",[Dc.showFollowingSessions]:"User Actions",[Dc.clickViewedDocument]:"User Actions",[Dc.clickPageView]:"User Actions",[Dc.createArticle]:"createArticle"},Uc=class{constructor(){this.runtime=new qc,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(Oo.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(Oo.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(Oo.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(Oo.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return hu}};function Qc(e){let t="";return e.filter((e=>{let r=e!==t;return t=e,r}))}function Vc(e){return e.map((e=>e.replace(/;/g,"")))}function _c(e){let t=e.join(";");return t.length<=256?t:_c(e.slice(1))}var Nc=e=>{let t=Vc(e),r=Qc(t);return _c(r)};function Lc(e){let t=typeof e.partialQueries=="string"?e.partialQueries:Nc(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:Nc(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var zc=class{constructor(e,t){this.opts=e,this.provider=t;let r=e.enableAnalytics===!1||jc();this.coveoAnalyticsClient=r?new Uc:new Pc(e)}disable(){this.coveoAnalyticsClient=new Uc}enable(){this.coveoAnalyticsClient=new Pc(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(Fc.interfaceLoad)}logInterfaceLoad(){return qo(this,void 0,void 0,(function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(Fc.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return qo(this,void 0,void 0,(function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendation(){return this.makeCustomEvent(Fc.recommendation)}logRecommendation(){return qo(this,void 0,void 0,(function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationOpen(e,t){return this.makeClickEvent(Fc.recommendationOpen,e,t)}logRecommendationOpen(e,t){return qo(this,void 0,void 0,(function*(){return(yield this.makeRecommendationOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterClearAll(e){return this.makeSearchEvent(Fc.staticFilterClearAll,e)}logStaticFilterClearAll(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterSelect(e){return this.makeSearchEvent(Fc.staticFilterSelect,e)}logStaticFilterSelect(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterDeselect(e){return this.makeSearchEvent(Fc.staticFilterDeselect,e)}logStaticFilterDeselect(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFetchMoreResults(){return this.makeCustomEvent(Fc.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return qo(this,void 0,void 0,(function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})}))}makeInterfaceChange(e){return this.makeSearchEvent(Fc.interfaceChange,e)}logInterfaceChange(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanAutomatic(){return this.makeSearchEvent(Fc.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return qo(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanClick(){return this.makeSearchEvent(Fc.didyoumeanClick)}logDidYouMeanClick(){return qo(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})}))}makeResultsSort(e){return this.makeSearchEvent(Fc.resultsSort,e)}logResultsSort(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxSubmit(){return this.makeSearchEvent(Fc.searchboxSubmit)}logSearchboxSubmit(){return qo(this,void 0,void 0,(function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxClear(){return this.makeSearchEvent(Fc.searchboxClear)}logSearchboxClear(){return qo(this,void 0,void 0,(function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxAsYouType(){return this.makeSearchEvent(Fc.searchboxAsYouType)}logSearchboxAsYouType(){return qo(this,void 0,void 0,(function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbFacet(e){return this.makeSearchEvent(Fc.breadcrumbFacet,e)}logBreadcrumbFacet(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbResetAll(){return this.makeSearchEvent(Fc.breadcrumbResetAll)}logBreadcrumbResetAll(){return qo(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentQuickview(e,t){return this.makeClickEvent(Fc.documentQuickview,e,t)}logDocumentQuickview(e,t){return qo(this,void 0,void 0,(function*(){return(yield this.makeDocumentQuickview(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentOpen(e,t){return this.makeClickEvent(Fc.documentOpen,e,t)}logDocumentOpen(e,t){return qo(this,void 0,void 0,(function*(){return(yield this.makeDocumentOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxAnalytics(e){return this.makeSearchEvent(Fc.omniboxAnalytics,Lc(e))}logOmniboxAnalytics(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxFromLink(e){return this.makeSearchEvent(Fc.omniboxFromLink,Lc(e))}logOmniboxFromLink(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchFromLink(){return this.makeSearchEvent(Fc.searchFromLink)}logSearchFromLink(){return qo(this,void 0,void 0,(function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerNotify(e){return this.makeCustomEvent(Fc.triggerNotify,e)}logTriggerNotify(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerExecute(e){return this.makeCustomEvent(Fc.triggerExecute,e)}logTriggerExecute(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerQuery(){return this.makeCustomEvent(Fc.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return qo(this,void 0,void 0,(function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})}))}makeUndoTriggerQuery(e){return this.makeSearchEvent(Fc.undoTriggerQuery,e)}logUndoTriggerQuery(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerRedirect(e){return this.makeCustomEvent(Fc.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerResize(e){return this.makeCustomEvent(Fc.pagerResize,e)}logPagerResize(e){return qo(this,void 0,void 0,(function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNumber(e){return this.makeCustomEvent(Fc.pagerNumber,e)}logPagerNumber(e){return qo(this,void 0,void 0,(function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNext(e){return this.makeCustomEvent(Fc.pagerNext,e)}logPagerNext(e){return qo(this,void 0,void 0,(function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerPrevious(e){return this.makeCustomEvent(Fc.pagerPrevious,e)}logPagerPrevious(e){return qo(this,void 0,void 0,(function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerScrolling(){return this.makeCustomEvent(Fc.pagerScrolling)}logPagerScrolling(){return qo(this,void 0,void 0,(function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})}))}makeFacetClearAll(e){return this.makeSearchEvent(Fc.facetClearAll,e)}logFacetClearAll(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSearch(e){return this.makeSearchEvent(Fc.facetSearch,e)}logFacetSearch(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelect(e){return this.makeSearchEvent(Fc.facetSelect,e)}logFacetSelect(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetDeselect(e){return this.makeSearchEvent(Fc.facetDeselect,e)}logFacetDeselect(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetExclude(e){return this.makeSearchEvent(Fc.facetExclude,e)}logFacetExclude(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUnexclude(e){return this.makeSearchEvent(Fc.facetUnexclude,e)}logFacetUnexclude(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelectAll(e){return this.makeSearchEvent(Fc.facetSelectAll,e)}logFacetSelectAll(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUpdateSort(e){return this.makeSearchEvent(Fc.facetUpdateSort,e)}logFacetUpdateSort(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowMore(e){return this.makeCustomEvent(Fc.facetShowMore,e)}logFacetShowMore(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowLess(e){return this.makeCustomEvent(Fc.facetShowLess,e)}logFacetShowLess(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryError(e){return this.makeCustomEvent(Fc.queryError,e)}logQueryError(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorBack(){return qo(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Fc.queryErrorBack);return{description:e.description,log:()=>qo(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Fc.queryErrorBack)}))}}))}logQueryErrorBack(){return qo(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorRetry(){return qo(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Fc.queryErrorRetry);return{description:e.description,log:()=>qo(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Fc.queryErrorRetry)}))}}))}logQueryErrorRetry(){return qo(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorClear(){return qo(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Fc.queryErrorClear);return{description:e.description,log:()=>qo(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Fc.queryErrorClear)}))}}))}logQueryErrorClear(){return qo(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})}))}makeLikeSmartSnippet(){return this.makeCustomEvent(Fc.likeSmartSnippet)}logLikeSmartSnippet(){return qo(this,void 0,void 0,(function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeSmartSnippet(){return this.makeCustomEvent(Fc.dislikeSmartSnippet)}logDislikeSmartSnippet(){return qo(this,void 0,void 0,(function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippet(){return this.makeCustomEvent(Fc.expandSmartSnippet)}logExpandSmartSnippet(){return qo(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippet(){return this.makeCustomEvent(Fc.collapseSmartSnippet)}logCollapseSmartSnippet(){return qo(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(Fc.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return qo(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(Fc.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return qo(this,void 0,void 0,(function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeSmartSnippetFeedbackReason(e,t){return this.makeCustomEvent(Fc.sendSmartSnippetReason,{reason:e,details:t})}logSmartSnippetFeedbackReason(e,t){return qo(this,void 0,void 0,(function*(){return(yield this.makeSmartSnippetFeedbackReason(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(Fc.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(Fc.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(Fc.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(Fc.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSource(e,t){return this.makeClickEvent(Fc.openSmartSnippetSource,e,t)}logOpenSmartSnippetSource(e,t){return qo(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionSource(e,t){return this.makeClickEvent(Fc.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}makeCopyToClipboard(e,t){return this.makeClickEvent(Fc.copyToClipboard,e,t)}logCopyToClipboard(e,t){return qo(this,void 0,void 0,(function*(){return(yield this.makeCopyToClipboard(e,t)).log({searchUID:this.provider.getSearchUID()})}))}logOpenSmartSnippetSuggestionSource(e,t){return qo(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetInlineLink(e,t){return this.makeClickEvent(Fc.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},t)}logOpenSmartSnippetInlineLink(e,t){return qo(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionInlineLink(e,t){return this.makeClickEvent(Fc.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logOpenSmartSnippetSuggestionInlineLink(e,t){return qo(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeRecentQueryClick(){return this.makeSearchEvent(Fc.recentQueryClick)}logRecentQueryClick(){return qo(this,void 0,void 0,(function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentQueries(){return this.makeCustomEvent(Fc.clearRecentQueries)}logClearRecentQueries(){return qo(this,void 0,void 0,(function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})}))}makeRecentResultClick(e,t){return this.makeCustomEvent(Fc.recentResultClick,{info:e,identifier:t})}logRecentResultClick(e,t){return qo(this,void 0,void 0,(function*(){return(yield this.makeRecentResultClick(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentResults(){return this.makeCustomEvent(Fc.clearRecentResults)}logClearRecentResults(){return qo(this,void 0,void 0,(function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})}))}makeNoResultsBack(){return this.makeSearchEvent(Fc.noResultsBack)}logNoResultsBack(){return qo(this,void 0,void 0,(function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreFoldedResults(e,t){return this.makeClickEvent(Fc.showMoreFoldedResults,e,t)}logShowMoreFoldedResults(e,t){return qo(this,void 0,void 0,(function*(){return(yield this.makeShowMoreFoldedResults(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessFoldedResults(){return this.makeCustomEvent(Fc.showLessFoldedResults)}logShowLessFoldedResults(){return qo(this,void 0,void 0,(function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})}))}makeEventDescription(e,t){var r;return{actionCause:t,customData:(r=e.payload)===null||r===void 0?void 0:r.customData}}makeCustomEvent(e,t,r=$c[e]){return qo(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({lastSearchQueryUid:e})}}))}logCustomEvent(e,t,r=$c[e]){return qo(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}makeCustomEventWithType(e,t,r){return qo(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:t,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({lastSearchQueryUid:e})}}))}logCustomEventWithType(e,t,r){return qo(this,void 0,void 0,(function*(){return(yield this.makeCustomEventWithType(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}logSearchEvent(e,t){return qo(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchEvent(e,t){return qo(this,void 0,void 0,(function*(){let r=yield this.getBaseSearchEventRequest(e,t),n=yield this.coveoAnalyticsClient.makeSearchEvent(r);return{description:this.makeEventDescription(n,e),log:({searchUID:e})=>n.log({searchQueryUid:e})}}))}makeClickEvent(e,t,r,n){return qo(this,void 0,void 0,(function*(){let i=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),a=yield this.coveoAnalyticsClient.makeClickEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({searchQueryUid:e})}}))}logClickEvent(e,t,r,n){return qo(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(e,t,r,n)).log({searchUID:this.provider.getSearchUID()})}))}getBaseSearchEventRequest(e,t){var r,n;return qo(this,void 0,void 0,(function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},t),(n=(r=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(r)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})}))}getBaseEventRequest(e){return qo(this,void 0,void 0,(function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})}))}getOrigins(){var e,t;return{originContext:(t=(e=this.provider).getOriginContext)===null||t===void 0?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Pc?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",t=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),t&&{splitTestRunVersion:t})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(Fc.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(Fc.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(Fc.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(Fc.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(Fc.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(Fc.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(Fc.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerExpand(e){return this.makeCustomEvent(Fc.generatedAnswerExpand,e)}logGeneratedAnswerExpand(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerExpand(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerCollapse(e){return this.makeCustomEvent(Fc.generatedAnswerCollapse,e)}logGeneratedAnswerCollapse(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerCollapse(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(Fc.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerFeedbackSubmitV2(e){return this.makeCustomEvent(Fc.generatedAnswerFeedbackSubmitV2,e)}logGeneratedAnswerFeedbackSubmitV2(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerFeedbackSubmitV2(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(Fc.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRetryGeneratedAnswer(){return this.makeSearchEvent(Fc.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return qo(this,void 0,void 0,(function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(Fc.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return qo(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})}))}},Bc=Object.assign({},pu);Object.keys(Bc).map((e=>Bc[e]));var Yc;(function(e){e.click="click",e.flowStart="flowStart"})(Yc||(Yc={}));var Hc;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(Hc||(Hc={}));var Wc;(function(e){e.quit="Quit",e.solved="Solved"})(Wc||(Wc={}));var Kc=e=>new Pc(e).getCurrentVisitorId(),Gc=new zo.HistoryStore,Jc=(e,t)=>typeof t=="function"?(...r)=>{let n=Hn(r[0]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,Zc=(e,t)=>(...r)=>{let n=Hn(r[1]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics hook. Returning original request."),n}};function Xc(e,t){let r={};e.forEach((e=>r[e.facetId]=e));let n=[];t.forEach((e=>{e in r&&(n.push(r[e]),delete r[e])}));let i=Object.values(r);return[...n,...i]}function es(e){return Object.values(e).map((e=>e.request))}var ts=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});function rs({config:e,environment:t,event:r,listenerManager:n}){let{url:i,token:a,mode:o}=e;o!=="disabled"&&(n.call(r),t.send(i,a,r))}var ns=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function is(e){return typeof e=="string"&&ns.test(e)}function as(e){let t="visitorId";return{getClientId:()=>{let r=e.get(),n=r.storage,i=n.getItem(t),a=i&&is(i)?i:r.generateUUID();return n.setItem(t,a),a},clear:()=>{e.get().storage.removeItem(t)}}}var os="0.7.7";function us(e){let{trackingId:t}=e;return{trackingId:t}}function cs(e){return(e.source||[]).concat([`relay@${os}`])}function ss(e,t,r,n){let{getReferrer:i,getLocation:a,getUserAgent:o}=r,u=us(t),c=n.getClientId();return Object.freeze({type:e,config:u,ts:Date.now(),source:cs(t),clientId:c,userAgent:o(),referrer:i(),location:a()})}function ls(e,t,r,n,i){return{...t,meta:ss(e,r,n,i)}}var ds="*";function fs(){let e=[];function t({type:t,callback:r}){return e.findIndex((e=>e.type===t&&e.callback===r))}function r(e,t){return e.type==="*"||t===e.type}function n(r){return t(r)<0&&e.push(r),()=>u(r.type,r.callback)}function i(t){e.forEach((e=>{if(r(e,t.meta.type))try{e.callback(t)}catch(e){console.error(e)}}))}function a(t){if(t===ds)e.length=0;else for(let r=e.length-1;r>=0;r--)e[r].type===t&&e.splice(r,1)}function o(r){let n=t(r);n>=0&&e.splice(n,1)}function u(e,t){t?o({type:e,callback:t}):a(e)}return{add:n,call:i,remove:u}}function hs({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source}})}function ps(e){let t=hs(e);return{get:()=>t,update:e=>{t=hs({...t,...e})}}}function gs(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}var ys=vs();function vs(){let e="coveo_",t=e=>{let t=e.split(".").slice(-2);return t.length==2?t.join("."):""};return{getItem(t){let r=`${e}${t}=`,n=document.cookie.split(";");for(let e of n){let t=e.replace(/^\s+/,"");if(t.lastIndexOf(r,0)===0)return t.substring(r.length,t.length)}return null},setItem(r,n,i){let a=t(window.location.hostname),o=`;expires=${new Date((new Date).getTime()+i).toUTCString()}`,u=a?`;domain=${a}`:"";document.cookie=`${e}${r}=${n}${o}${u};path=/;SameSite=Lax`},removeItem(e){this.setItem(e,"",-1)}}}function ms(){return{getItem(e){return ys.getItem(e)||localStorage.getItem(e)},removeItem(e){ys.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),ys.setItem(e,t,31556952e3)}}}function ws(){let e=document.referrer;return e===""?null:e}function bs(){return{runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(gs().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>ws(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:ms()}}function Ss(){return{getItem(){return null},removeItem(){},setItem(){}}}function Is(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:Ss()}}function qs(e){return e.get().mode!=="disabled"&&Os()?bs():Is()}function Os(){try{return typeof window=="object"}catch{return!1}}function Cs(e){return{get:()=>Object.freeze(qs(e))}}function xs(e){let t=ps(e),r=fs(),n=Cs(t),i=as(n);return{emit:(e,a)=>{let o=t.get(),u=n.get(),c=ls(e,a,o,u,i);return rs({config:o,environment:u,event:c,listenerManager:r})},getMeta:e=>ss(e,t.get(),n.get(),i),on:(e,t)=>r.add({type:e,callback:t}),off:(e,t)=>r.remove(e,t),updateConfig:e=>t.update(e),version:os,clearStorage:()=>{i.clear()}}}var As=Pt((e=>e.configuration.accessToken),(e=>e.configuration.analytics),(e=>wa(e.configuration.analytics)),((e,{trackingId:t,nextApiBaseUrl:r,enabled:n},i)=>xs({mode:n?"emit":"disabled",url:r,token:e,trackingId:t,source:i})));var ks=()=>"default";function js(){return{desiredCount:5,numberOfValues:8,set:{}}}var Rs=(e,t)=>e.categoryFacetSet[t]?.request;var Ts=(e,t)=>{let r=Rs(e,t);return nn(r?.currentValues??[])};function Ms(){return{}}function Es(e){return{request:e}}function Ps(){return{}}function Ds(e){return{request:e}}function Fs(){return{}}function $s(e){return{request:e,hasBreadcrumbs:!0}}function Us(){return{}}function Qs(e){return{facetSet:e.facetSet??Us(),categoryFacetSet:e.categoryFacetSet??Ms(),dateFacetSet:e.dateFacetSet??Ps(),numericFacetSet:e.numericFacetSet??Fs(),automaticFacetSet:e.automaticFacetSet??js()}}var Vs=e=>{let t=[];return Ls(e).forEach(((r,n)=>{let i=el(e,r.facetId),a=Js(r,n+1);if(Ns(r)){if(!!!Ts(e,r.facetId).length)return;t.push({...a,...Ks(e,r.facetId),facetType:i,state:"selected"});return}r.currentValues.forEach(((e,n)=>{if(e.state==="idle")return;let o=Bs(e,n+1,i),u=_s(r)?Hs(e):Ys(e);t.push({...a,...o,...u})}))})),zs(e).forEach(((e,r)=>{let n=Gs(e,r+1);e.values.forEach(((e,r)=>{if(e.state==="idle")return;let i=Bs(e,r+1,"specific"),a=Hs(e);t.push({...n,...i,...a})}))})),t},_s=e=>e.type==="specific",Ns=e=>e.type==="hierarchical",Ls=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map((e=>e.request)),zs=e=>[...Object.values(e.automaticFacetSet.set)].map((e=>e.response)),Bs=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),Ys=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),Hs=e=>({displayValue:e.value,value:e.value}),Ws=(e,t)=>Ts(e,t).map((e=>e.value)).join(";"),Ks=(e,t)=>{let r=Ws(e,t);return{value:r,valuePosition:1,displayValue:r}},Gs=(e,t)=>({title:Zs(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),Js=(e,t)=>({title:Zs(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),Zs=(e,t)=>`${e}_${t}`,Xs=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,el=(e,t)=>{let r=Xs(e,t);return r?r.type:"specific"};var tl=()=>({q:"",enableQuerySyntax:!1});function rl(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function nl(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:rl(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:rl(),extendedResults:{}}}var il=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},al=class{constructor(e){this.getState=e;this.state=e()}getLanguage(){return il(this.state)}getBaseMetadata(){let{context:e,configuration:t}=this.state,r=e?.contextValues||{},n={};for(let[e,t]of Object.entries(r)){let r=`context_${e}`;n[r]=t}return t.analytics.analyticsMode==="legacy"&&(n.coveoHeadlessVersion=va),n}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||ks()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var ol=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});var ul=class extends al{constructor(){super(...arguments);this.initialState=ol()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){return this.getState().productListing?.responseId||this.initialState.responseId}mapResultsToAnalyticsDocument(){return this.state.productListing?.products.map((e=>({documentUri:e.documentUri,documentUriHash:e.documentUriHash,permanentid:e.permanentid})))}get numberOfResults(){return this.state.productListing.products.length}},cl=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new ul(t)})=>{let a=t(),o=a.configuration.accessToken,u=a.configuration.analytics.apiBaseUrl,c=a.configuration.analytics.runtimeEnvironment,s=a.configuration.analytics.enabled,l=new zc({token:o,endpoint:u,runtimeEnvironment:c,preprocessRequest:Jc(e,n),beforeSendHooks:[Zc(e,r),(t,r)=>(e.info({...r,type:t,endpoint:u,token:o},"Analytics request"),r)]},i);return s||l.disable(),l};var sl=(e=>(e.Ascending="ascending",e.Descending="descending",e))(sl||{}),ll=(e=>(e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort",e))(ll||{}),dl=e=>{if(ae(e))return e.map((e=>dl(e))).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},fl=()=>({by:"relevancy"});new re({values:{by:new oe({enum:ll,required:!0}),order:new oe({enum:sl}),field:new ee}});function hl(){return dl(fl())}var pl=class e extends al{constructor(){super(...arguments);this.getFacetRequest=e=>this.state.facetSet?.[e]?.request||this.state.categoryFacetSet?.[e]?.request||this.state.dateFacetSet?.[e]?.request||this.state.numericFacetSet?.[e]?.request||this.state.automaticFacetSet?.set[e]?.response}getFacetState(){return Vs(Qs(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||e.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let e=this.getState();return e.search?.searchResponseId||e.search?.response.searchUid||nl().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let t=!!this.getSplitTestRunName(),r=this.state.search?.response.pipeline||this.state.pipeline||e.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){let e=this.getState(),t=super.getBaseMetadata(),r=e.search?.response?.extendedResults?.generativeQuestionAnsweringId;return r&&(t.generativeQuestionAnsweringId=r),t}getFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,facetValue:t,facetTitle:`${r}_${e}`}}getFacetClearAllMetadata(e){let t=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:t,facetTitle:`${t}_${e}`}}getFacetUpdateSortMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,criteria:t,facetTitle:`${r}_${e}`}}getRangeBreadcrumbFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,facetRangeEnd:t.end,facetRangeEndInclusive:t.endInclusive,facetRangeStart:t.start,facetTitle:`${r}_${e}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??hl()}}getStaticFilterToggleMetadata(e,t){return{...this.getBaseMetadata(),staticFilterId:e,staticFilterValue:t}}getStaticFilterClearAllMetadata(e){return{...this.getBaseMetadata(),staticFilterId:e}}getUndoTriggerQueryMetadata(e){return{...this.getBaseMetadata(),undoneQuery:e}}getCategoryBreadcrumbFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),categoryFacetId:e,categoryFacetField:r,categoryFacetPath:t,categoryFacetTitle:`${r}_${e}`}}getOmniboxAnalyticsMetadata(e,t){let r=this.state.querySuggest&&this.state.querySuggest[e],n=r.completions.map((e=>e.expression)),i=r.partialQueries.length-1,a=r.partialQueries[i]||"",o=r.responseId;return{...this.getBaseMetadata(),suggestionRanking:n.indexOf(t),partialQuery:a,partialQueries:r.partialQueries.length>0?r.partialQueries:"",suggestions:n.length>0?n:"",querySuggestResponseId:o}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(e){return{...this.getBaseMetadata(),...e}}getGeneratedAnswerMetadata(){let e=this.getState(),t={};return e.generatedAnswer?.isVisible!==void 0&&(t.showGeneratedAnswer=e.generatedAnswer.isVisible),t}get resultURIs(){return this.results?.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||tl().q}get responseTime(){return this.state.search?.duration||nl().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||nl().response.totalCountFiltered}};pl.fallbackPipelineName="default";var gl=pl,yl=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new gl(t)})=>{let a=t(),o=a.configuration.accessToken,u=a.configuration.analytics.apiBaseUrl,c=a.configuration.analytics.runtimeEnvironment,s=a.configuration.analytics.enabled,l=new zc({token:o,endpoint:u,runtimeEnvironment:c,preprocessRequest:Jc(e,n),beforeSendHooks:[Zc(e,r),(t,r)=>(e.info({...r,type:t,endpoint:u,token:o},"Analytics request"),r)]},i);return s||l.disable(),l},vl=()=>{let e=Gc.getHistory().reverse().find((e=>e.name==="PageView"&&e.value));return e?e.value:""};var ml=()=>"";function wl(e,t){return{...new gl(t).getBaseMetadata(),actionCause:e,type:e}}function bl(e){return Object.assign(e,{instantlyCallable:!0})}function Sl(e,t){let r=t=>bl(Sr(e,t)),n=r((async(e,{getState:r,extra:n})=>{let{analyticsClientMiddleware:i,preprocessRequest:a,logger:o}=n;return await(await t({getState:r,analyticsClientMiddleware:i,preprocessRequest:a,logger:o})).log({state:r(),extra:n})}));return Object.assign(n,{prepare:async({getState:e,analyticsClientMiddleware:n,preprocessRequest:i,logger:a})=>{let{description:o,log:u}=await t({getState:e,analyticsClientMiddleware:n,preprocessRequest:i,logger:a});return{description:o,action:r((async(e,{getState:t,extra:r})=>await u({state:t(),extra:r})))}}}),n}var Il=(e,t,r)=>{function n(...n){let i=n.length===1?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r};return Cl(i)}return n},ql=e=>e.configuration.analytics.analyticsMode==="legacy",Ol=e=>e.configuration.analytics.analyticsMode==="next",Cl=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:i,analyticsConfigurator:a,providerClass:o})=>(r??(r=e=>new o(e)),Sl(e,(async({getState:e,analyticsClientMiddleware:o,preprocessRequest:u,logger:c})=>{let s=[],l={log:async({state:e})=>{for(let t of s)await t(e)}},d=e(),f=a({getState:e,logger:c,analyticsClientMiddleware:o,preprocessRequest:u,provider:r(e)}),h=await t(f,e());l.description=h?.description,s.push((async e=>{ql(e)&&await xl(h,r,e,c,f.coveoAnalyticsClient)}));let{emit:p}=As(d);return s.push((async e=>{if(Ol(e)&&i&&n){let t=n(e);await Rl(p,i,t)}})),l})));async function xl(e,t,r,n,i){t((()=>r));let a=await(e?.log({searchUID:t((()=>r)).getSearchUID()}));n.info({client:i,response:a},"Analytics response")}var Al=Il(yl,(e=>e),gl);var kl=Il(cl,(e=>e),ul);var jl={urihash:new ee,sourcetype:new ee,permanentid:new ee};({uniqueId:xi,raw:new re({values:jl}),title:xi,uri:xi,clickUri:xi,rankingModifier:new ee({required:!1,emptyAllowed:!0})});async function Rl(e,t,r){await e(t,r)}var Tl=()=>Al("search/logFetchMoreResults",(e=>e.makeFetchMoreResults())),Ml=e=>Al("search/queryError",((t,r)=>t.makeQueryError({query:r.query?.q||tl().q,aq:r.advancedSearchQueries?.aq||ts().aq,cq:r.advancedSearchQueries?.cq||ts().cq,dq:r.advancedSearchQueries?.dq||ts().dq,errorType:e.type,errorMessage:e.message})));var El=()=>kl("analytics/productListing/load",(e=>e.makeInterfaceLoad()),(e=>new ul(e)));Nt("productlisting/setUrl",(e=>Ei(e,{url:new ee({required:!0,url:!0})})));Nt("productlisting/setAdditionalFields",(e=>Ei(e,{additionalFields:new ie({required:!0,each:new ee({required:!0,emptyAllowed:!1})})})));var Pl=Sr("productlisting/fetch",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:i})=>{let a=t(),{apiClient:o}=i,u=await o.getProducts(await Dl(a));return qi(u)?(r(Ml(u.error)),n(u.error)):{response:u.success,analyticsAction:El()}})),Dl=async e=>{let t=$l(e),r=await Kc(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:e.productListing?.url,...e.configuration.analytics.enabled&&r?{clientId:r}:{},...e.productListing.additionalFields?.length?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&Fl(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...t.length&&{facets:{requests:t}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(e.sort?.by||"relevance")!=="relevance"&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function Fl(e){return e.debug}function $l(e){return Xc(Ul(e),e.facetOrder??[])}function Ul(e){return[...es(e.facetSet??{}),...es(e.numericFacetSet??{}),...es(e.dateFacetSet??{}),...es(e.categoryFacetSet??{})]}var Ql={q:new ee,enableQuerySyntax:new G,aq:new ee,cq:new ee,firstResult:new H({min:0}),numberOfResults:new H({min:0}),sortCriteria:new ee,f:new re,fExcluded:new re,cf:new re,nf:new re,df:new re,debug:new G,sf:new re,tab:new ee,af:new re};var Vl=Nt("searchParameters/restore",(e=>Ei(e,Ql)));var _l=Nt("facet/updateFacetAutoSelection",(e=>Ei(e,{allow:new G({required:!0})})));var Nl=class extends gl{constructor(e){super(e);this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].cache[r];return null}get results(){return this.activeInstantResultCache?.results}get queryText(){return this.activeInstantResultQuery??tl().q}get responseTime(){return this.activeInstantResultCache?.duration??nl().duration}get numberOfResults(){return this.activeInstantResultCache?.totalCountFiltered??nl().response.totalCountFiltered}getSearchUID(){return this.activeInstantResultCache?.searchUid||super.getSearchUID()}};var Ll=()=>Al("analytics/instantResult/searchboxAsYouType",(e=>e.makeSearchboxAsYouType()),(e=>new Nl(e))),zl=()=>({actionCause:"searchboxAsYouType"});var Bl={id:xi},Yl={...Bl,q:ki};Nt("instantResults/register",(e=>Ei(e,Bl)));var Hl=Nt("instantResults/updateQuery",(e=>Ei(e,Yl)));Nt("instantResults/clearExpired",(e=>Ei(e,Bl)));var Wl=new H({required:!0,min:0}),Kl=Nt("pagination/registerNumberOfResults",(e=>Ei(e,Wl))),Gl=Nt("pagination/updateNumberOfResults",(e=>Ei(e,Wl))),Jl=Nt("pagination/registerPage",(e=>Ei(e,Wl))),Zl=Nt("pagination/updatePage",(e=>Ei(e,Wl))),Xl=Nt("pagination/nextPage"),ed=Nt("pagination/previousPage");var td=Nt("query/updateQuery",(e=>Ei(e,{q:new ee,enableQuerySyntax:new G})));var rd=(e,t,r)=>({analytics:{clientId:t.clientId,clientTimestamp:(new Date).toISOString(),documentReferrer:t.referrer,documentLocation:t.location,originContext:e.originContext,...r&&{actionCause:r.actionCause},...r&&{customData:r.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.deviceId&&{deviceId:e.deviceId},...vl()&&{pageId:vl()},...e.trackingId&&{trackingId:e.trackingId},capture:!0,source:wa(e)}});var nd=(e,t,r)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:t.referrer,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:t.clientId},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&rd(e.configuration.analytics,t,r),...e.excerptLength&&!Y(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var id=async(e,t)=>{let r=e.analyticsMode==="next";return{analytics:{clientId:await Kc(e),clientTimestamp:(new Date).toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...vl()&&{pageId:vl()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:wa(e)}}}};var ad=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await Kc(e.configuration.analytics),actionsHistory:Gc.getHistory()},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await id(e.configuration.analytics,t),...e.excerptLength&&!Y(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var od=d(x()),ud=d(A());var cd=d(x()),sd=d(k());cd.default.extend(sd.default);var ld="YYYY/MM/DD@HH:mm:ss",dd="1401-01-01";function fd(e,t){let r=(0,cd.default)(e,t);return!r.isValid()&&!t?(0,cd.default)(e,ld):r}function hd(e){return e.format(ld)}function pd(e){return hd(fd(e))===e}function gd(e,t){let r=fd(e,t);if(!r.isValid()){let r=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",n=` with the format "${t}"`;throw new Error(`Could not parse the provided date "${e}"${t?n:r}`)}yd(r)}function yd(e){if(e.isBefore(dd))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}od.default.extend(ud.default);var vd=["past","now","next"],md=["minute","hour","day","week","month","quarter","year"],wd=e=>{let t=e==="now";return{amount:new H({required:!t,min:1}),unit:new ee({required:!t,constrainTo:md}),period:new ee({required:!0,constrainTo:vd})}};function bd(e){if(typeof e=="string"&&!Cd(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?Ad(e):e;new N(wd(t.period)).validate(t);let r=Id(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);yd(r)}function Sd(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function Id(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,od.default)().subtract(r,n);case"next":return(0,od.default)().add(r,n);case"now":return(0,od.default)()}}function qd(e){return hd(Id(Ad(e)))}function Od(e){return e.toLocaleLowerCase().split("-")}function Cd(e){let[t,r,n]=Od(e);if(t==="now")return!0;if(!vd.includes(t)||!md.includes(n))return!1;let i=parseInt(r);return!(isNaN(i)||i<=0)}function xd(e){return!!e&&typeof e=="object"&&"period"in e}function Ad(e){let[t,r,n]=Od(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function kd(e){return bd(e),Ad(e)}function jd(e){return e.type==="dateRange"}function Rd(e){return`start${e}`}function Td(e){return`end${e}`}var Md=()=>({dateFacetValueMap:{}});function Ed(e,t,r){let n=e.start,i=e.end;return Cd(n)&&(n=qd(n),r.dateFacetValueMap[t][Rd(n)]=e.start),Cd(i)&&(i=qd(i),r.dateFacetValueMap[t][Td(i)]=e.end),{...e,start:n,end:i}}function Pd(e,t){if(jd(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map((e=>Ed(e,r,t)))}}return e}function Dd(e){let t=Md();return{request:{...e,facets:e.facets?.map((e=>Pd(e,t)))},mappings:t}}function Fd(e,t,r){return{...e,start:r.dateFacetValueMap[t][Rd(e.start)]||e.start,end:r.dateFacetValueMap[t][Td(e.end)]||e.end}}function $d(e,t){return e.facetId in t.dateFacetValueMap}function Ud(e,t){return $d(e,t)?{...e,values:e.values.map((r=>Fd(r,e.facetId,t)))}:e}function Qd(e,t){return"success"in e?{success:{...e.success,facets:e.success.facets?.map((e=>Ud(e,t)))}}:e}var Vd=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),_d=(e,t)=>{let r=Nd(e);return r&&r.organizationId===t?r:null},Nd=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return t?.groups?t.groups:null};var Ld=e=>e.success!==void 0,zd=e=>e.error!==void 0;Nt("didYouMean/enable");Nt("didYouMean/disable");Nt("didYouMean/automaticCorrections/disable");Nt("didYouMean/automaticCorrections/enable");var Bd=Nt("didYouMean/correction",(e=>Ei(e,xi)));Nt("didYouMean/automaticCorrections/mode",(e=>Ei(e,new ee({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0}))));var Yd=()=>Al("analytics/didyoumean/automatic",(e=>e.makeDidYouMeanAutomatic()));var Hd=()=>({actionCause:"didyoumeanAutomatic"});function Wd(){return{contextValues:{}}}var Kd=()=>!1;function Gd(){return{contextValues:{}}}function Jd(){return{enabled:!0}}function Zd(){return{freezeFacetOrder:!1,facets:{}}}function Xd(){return[]}function ef(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function tf(){return{}}function rf(){return{}}function nf(){return{}}function af(e){return{context:e.context||Wd(),dictionaryFieldContext:e.dictionaryFieldContext||Gd(),facetSet:e.facetSet||Us(),numericFacetSet:e.numericFacetSet||Fs(),dateFacetSet:e.dateFacetSet||Ps(),categoryFacetSet:e.categoryFacetSet||Ms(),automaticFacetSet:e.automaticFacetSet??js(),pagination:e.pagination||ef(),query:e.query||tl(),tabSet:e.tabSet||nf(),advancedSearchQueries:e.advancedSearchQueries||ts(),staticFilterSet:e.staticFilterSet||rf(),querySet:e.querySet||tf(),sortCriteria:e.sortCriteria||hl(),pipeline:e.pipeline||ml(),searchHub:e.searchHub||ks(),facetOptions:e.facetOptions||Zd(),facetOrder:e.facetOrder??Xd(),debug:e.debug??Kd()}}new re({values:{undoneQuery:ki},options:{required:!0}});var of=()=>Al("analytics/trigger/query",((e,t)=>t.triggers?.queryModification.newQuery?e.makeTriggerQuery():null));var uf=Nt("trigger/query/ignore",(e=>Ei(e,new ee({emptyAllowed:!0,required:!0})))),cf=Nt("trigger/query/modification",(e=>Ei(e,new re({values:{originalQuery:Ai,modification:Ai}}))));var sf=async(e,t)=>{let r=vf(e),n=lf(e),i=df(e),a=await ad(e,t),o=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return Dd({...a,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:o(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:i}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function lf(e){return Xc(hf(e),e.facetOrder??[])}function df(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map((e=>e.response)).map(ff).filter((e=>e.currentValues.length>0)):void 0}function ff(e){let{field:t,label:r,values:n}=e,i=n.filter((e=>e.state==="selected"));return{field:t,label:r,currentValues:i}}function hf(e){return pf(e).filter((({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0))}function pf(e){return[...gf(e.facetSet??{}),...yf(e.numericFacetSet??{}),...yf(e.dateFacetSet??{}),...es(e.categoryFacetSet??{})]}function gf(e){return es(e).map((e=>e.sortCriteria==="alphanumericDescending"?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e))}function yf(e){return es(e).map((e=>{let t=e.currentValues.some((({state:e})=>e!=="idle"));return e.generateAutomaticRanges&&!t?{...e,currentValues:[]}:e}))}function vf(e){let t=e.advancedSearchQueries?.cq.trim()||"",r=Object.values(e.tabSet||{}).find((e=>e.isActive))?.expression.trim()||"",n=mf(e);return[t,r,...n].filter((e=>!!e)).join(" AND ")}function mf(e){return Object.values(e.staticFilterSet||{}).map((e=>{let t=e.values.filter((e=>e.state==="selected"&&!!e.expression.trim())),r=t.map((e=>e.expression)).join(" OR ");return t.length>1?`(${r})`:r}))}var wf=class{constructor(e,t=(e=>{this.dispatch(td({q:e}))})){this.config=e;this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){let n=(new Date).getTime(),i=Qd(await this.extra.apiClient.search(t,r),e),a=(new Date).getTime()-n,o=this.getState().query?.q||"";return{response:i,duration:a,queryExecuted:o,requestExecuted:t}}async process(e){return this.processQueryErrorOrContinue(e)??await this.processQueryCorrectionsOrContinue(e)??await this.processQueryTriggersOrContinue(e)??this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return zd(e.response)?(this.dispatch(Ml(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:i}=t.didYouMean,{results:a,queryCorrections:o,queryCorrection:u}=r;if(!n||!i)return null;let c=a.length===0&&o&&o.length!==0,s=!Y(u)&&!Y(u.correctedQuery);if(!c&&!s)return null;let l=c?await this.processLegacyDidYouMeanAutoCorrection(e):this.processModernDidYouMeanAutoCorrection(e);return this.dispatch(bo(af(this.getState()))),l}async processLegacyDidYouMeanAutoCorrection(e){let t=this.getCurrentQuery(),r=this.getSuccessResponse(e);if(!r.queryCorrections)return null;let{correctedQuery:n}=r.queryCorrections[0],i=await this.automaticallyRetryQueryWithCorrection(n);return zd(i.response)?(this.dispatch(Ml(i.response.error)),this.rejectWithValue(i.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(e),this.dispatch(bo(af(this.getState()))),{...i,response:{...i.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:t,analyticsAction:Yd()})}processModernDidYouMeanAutoCorrection(e){let t=this.getSuccessResponse(e),{correctedQuery:r,originalQuery:n}=t.queryCorrection;return this.onUpdateQueryForCorrection(r),{...e,response:{...t},queryExecuted:r,automaticallyCorrected:!0,originalQuery:n,analyticsAction:Yd()}}logOriginalAnalyticsQueryBeforeAutoCorrection(e){let t=this.getState(),r=this.getSuccessResponse(e);this.analyticsAction&&this.analyticsAction()(this.dispatch,(()=>this.getStateAfterResponse(e.queryExecuted,e.duration,t,r)),this.extra)}async processQueryTriggersOrContinue(e){let t=this.getSuccessResponse(e);if(!t)return null;let r=t.triggers.find((e=>e.type==="query"))?.content||"";if(!r)return null;if(this.getState().triggers?.queryModification.queryToIgnore===r)return this.dispatch(uf("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let n=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(r);return zd(i.response)?(this.dispatch(Ml(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(bo(af(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:n,analyticsAction:of()})}getStateAfterResponse(e,t,r,n){return{...r,query:{q:e,enableQuerySyntax:r.query?.enableQuerySyntax??tl().enableQuerySyntax},search:{...nl(),duration:t,response:n,results:n.results}}}processSuccessResponse(e){return this.dispatch(bo(af(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return Ld(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=await this.fetchFromAPI(await sf(this.getState()),{origin:"mainSearch"});return this.dispatch(Bd(e)),t}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(cf({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await sf(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){let e=this.getState();return e.query?.q!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};Sr("search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;Ei(e,{q:new ee,enableQuerySyntax:new G,clearFilters:new G}),e.clearFilters&&(r(ga()),r(ya())),r(_l({allow:!0})),r(td({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(Zl(1))}));var bf=Sr("search/executeSearch",(async(e,t)=>{let r=t.getState();return await Mf(r,t,e)})),Sf=Sr("search/fetchPage",(async(e,t)=>{let r=t.getState();return await jf(r,t,e)})),If=Sr("search/fetchMoreResults",(async(e,t)=>{let r=t.getState();return await Rf(t,r)})),qf=Sr("search/fetchFacetValues",(async(e,t)=>{let r=t.getState();return await Tf(t,e,r)}));Sr("search/fetchInstantResults",(async(e,t)=>kf(e,t)));var Of=async(e,t)=>{let r=await sf(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},r},Cf=async(e,t,r)=>{let n=await ad(e);return Dd({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},xf=async(e,t)=>{let r=await sf(e,t);return r.request.numberOfResults=0,r},Af=e=>{e.configuration.analytics.enabled&&Gc.addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})};async function kf(e,t){Ei(e,{id:xi,q:xi,maxResultsPerQuery:new H({required:!0,min:1}),cacheTimeout:new H});let{q:r,maxResultsPerQuery:n}=e,i=t.getState(),a=new wf({...t,analyticsAction:Ll()},(r=>{t.dispatch(Hl({q:r,id:e.id}))})),o=await Cf(i,r,n),u=await a.fetchFromAPI(o,{origin:"instantResults",disableAbortWarning:!0}),c=await a.process(u);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,analyticsAction:c.analyticsAction,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c}async function jf(e,t,r){Af(e);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:o}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),u=new wf({...t,analyticsAction:r}),c=await sf(e,o),s=await u.fetchFromAPI(c,{origin:"mainSearch"});return await u.process(s)}async function Rf(e,t){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:i}=e.extra,{description:a}=await Tl().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:i}),o=new wf({...e,analyticsAction:Tl()}),u=await Of(t,a),c=await o.fetchFromAPI(u,{origin:"mainSearch"});return await o.process(c)}async function Tf(e,t,r){let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=e.extra,{description:o}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),u=new wf({...e,analyticsAction:t}),c=await xf(r,o),s=await u.fetchFromAPI(c,{origin:"facetValues"});return await u.process(s)}async function Mf(e,t,r){Af(e);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:o}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),u=await sf(e,o),c=new wf({...t,analyticsAction:r}),s=await c.fetchFromAPI(u,{origin:"mainSearch"});return await c.process(s)}var Ef=async(e,t,r)=>{let n=_f(e),i=Pf(e),a=Df(e),o=e.configuration.analytics.analyticsMode==="legacy"?await ad(e,r):nd(e,t,r),u=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return Dd({...o,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...n&&{cq:n},...i.length&&{facets:i},...e.pagination&&{numberOfResults:u(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:a}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function Pf(e){return Xc($f(e),e.facetOrder??[])}function Df(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map((e=>e.response)).map(Ff).filter((e=>e.currentValues.length>0)):void 0}function Ff(e){let{field:t,label:r,values:n}=e,i=n.filter((e=>e.state==="selected"));return{field:t,label:r,currentValues:i}}function $f(e){return Uf(e).filter((({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0))}function Uf(e){return[...Qf(e.facetSet??{}),...Vf(e.numericFacetSet??{}),...Vf(e.dateFacetSet??{}),...es(e.categoryFacetSet??{})]}function Qf(e){return es(e).map((e=>e.sortCriteria==="alphanumericDescending"?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e))}function Vf(e){return es(e).map((e=>{let t=e.currentValues.some((({state:e})=>e!=="idle"));return e.generateAutomaticRanges&&!t?{...e,currentValues:[]}:e}))}function _f(e){let t=e.advancedSearchQueries?.cq.trim()||"",r=Object.values(e.tabSet||{}).find((e=>e.isActive))?.expression.trim()||"",n=Nf(e);return[t,r,...n].filter((e=>!!e)).join(" AND ")}function Nf(e){return Object.values(e.staticFilterSet||{}).map((e=>{let t=e.values.filter((e=>e.state==="selected"&&!!e.expression.trim())),r=t.map((e=>e.expression)).join(" OR ");return t.length>1?`(${r})`:r}))}var Lf=class{constructor(e,t=(e=>{this.dispatch(td({q:e}))})){this.config=e;this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){let n=(new Date).getTime(),i=Qd(await this.extra.apiClient.search(t,r),e),a=(new Date).getTime()-n,o=this.getState().query?.q||"";return{response:i,duration:a,queryExecuted:o,requestExecuted:t}}async process(e){return this.processQueryErrorOrContinue(e)??await this.processQueryCorrectionsOrContinue(e)??await this.processQueryTriggersOrContinue(e)??this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return zd(e.response)?(this.dispatch(Ml(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:i}=t.didYouMean,{results:a,queryCorrections:o,queryCorrection:u}=r;if(!n||!i)return null;let c=a.length===0&&o&&o.length!==0,s=!Y(u)&&!Y(u.correctedQuery);if(!c&&!s)return null;let l=c?await this.processLegacyDidYouMeanAutoCorrection(e):this.processModernDidYouMeanAutoCorrection(e);return this.dispatch(bo(af(this.getState()))),l}async processLegacyDidYouMeanAutoCorrection(e){let t=this.getCurrentQuery(),r=this.getSuccessResponse(e);if(!r.queryCorrections)return null;let{correctedQuery:n}=r.queryCorrections[0],i=await this.automaticallyRetryQueryWithCorrection(n);return zd(i.response)?(this.dispatch(Ml(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(bo(af(this.getState()))),{...i,response:{...i.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:t})}processModernDidYouMeanAutoCorrection(e){let t=this.getSuccessResponse(e),{correctedQuery:r,originalQuery:n}=t.queryCorrection;return this.onUpdateQueryForCorrection(r),{...e,response:{...t},queryExecuted:r,automaticallyCorrected:!0,originalQuery:n}}async processQueryTriggersOrContinue(e){let t=this.getSuccessResponse(e);if(!t)return null;let r=t.triggers.find((e=>e.type==="query"))?.content||"";if(!r)return null;if(this.getState().triggers?.queryModification.queryToIgnore===r)return this.dispatch(uf("")),null;let n=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(r);return zd(i.response)?(this.dispatch(Ml(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(bo(af(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:n})}processSuccessResponse(e){return this.dispatch(bo(af(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(e){return Ld(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=this.getState(),{actionCause:r}=Hd(),n=await this.fetchFromAPI(await Ef(t,this.extra.navigatorContext,{actionCause:r}),{origin:"mainSearch"});return this.dispatch(Bd(e)),n}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(cf({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await Ef(this.getState(),this.extra.navigatorContext),{origin:"mainSearch"})}getCurrentQuery(){let e=this.getState();return e.query?.q!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};Sr("search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;Ei(e,{q:new ee,enableQuerySyntax:new G,clearFilters:new G}),e.clearFilters&&(r(ga()),r(ya())),r(_l({allow:!0})),r(td({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(Zl(1))}));var zf=Sr("search/executeSearch",(async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Mf(r,t,e.legacy);Kf(r);let n=Gf(e.next),i=await Ef(r,t.extra.navigatorContext,n),a=new Lf({...t,analyticsAction:n}),o=await a.fetchFromAPI(i,{origin:"mainSearch"});return await a.process(o)}));Sr("search/fetchPage",(async(e,t)=>{let r=t.getState();if(Kf(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return jf(r,t,e.legacy);let n=new Lf({...t,analyticsAction:e.next}),i=await Ef(r,t.extra.navigatorContext,e.next),a=await n.fetchFromAPI(i,{origin:"mainSearch"});return await n.process(a)}));Sr("search/fetchMoreResults",(async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Rf(t,r);let n=wl("browseResults",t.getState),i=new Lf({...t,analyticsAction:n}),a=await Yf(r,t.extra.navigatorContext,n),o=await i.fetchFromAPI(a,{origin:"mainSearch"});return await i.process(o)}));var Bf=Sr("search/fetchFacetValues",(async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Mf(r,t,e.legacy);let n=Gf(e.next),i=new Lf({...t,analyticsAction:n}),a=await Wf(r,t.extra.navigatorContext,n),o=await i.fetchFromAPI(a,{origin:"facetValues"});return await i.process(o)}));Sr("search/fetchInstantResults",(async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return kf(e,t);Ei(e,{id:xi,q:xi,maxResultsPerQuery:new H({required:!0,min:1}),cacheTimeout:new H});let{q:n,maxResultsPerQuery:i}=e,a=Gf(zl()),o=await Hf(r,t.extra.navigatorContext,n,i,a),u=new Lf({...t,analyticsAction:a},(r=>{t.dispatch(Hl({q:r,id:e.id}))})),c=await u.fetchFromAPI(o,{origin:"instantResults",disableAbortWarning:!0}),s=await u.process(c);return"response"in s?{results:s.response.results,searchUid:s.response.searchUid,totalCountFiltered:s.response.totalCountFiltered,duration:s.duration}:s}));var Yf=async(e,t,r)=>{let n=await Ef(e,t,r);return n.request={...n.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},n},Hf=async(e,t,r,n,i)=>{let a=nd(e,t,i);return Dd({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:n,q:r})},Wf=async(e,t,r)=>{let n=await Ef(e,t,r);return n.request.numberOfResults=0,n},Kf=e=>{e.configuration.analytics.enabled&&Gc.addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})},Gf=e=>({actionCause:e.actionCause,type:e.actionCause});function Jf(e,t){let{facetId:r,criterion:n}=t,i=e[r]?.request;i&&(i.sortCriteria=n)}function Zf(e){e&&(e.currentValues=e.currentValues.map((e=>({...e,state:"idle"}))),e.preventAutoSelect=!0)}function Xf(e,t){e&&(e.numberOfValues=t)}var eh=new ee({regex:/^[a-zA-Z0-9-_]+$/}),th=new ee({required:!0});new ie({each:new ee});new ee;new G;var rh=new G,nh=new H({min:0}),ih=new H({min:1}),ah=new G({required:!0}),oh=new re,uh=new ee,ch={captions:oh,numberOfValues:ih,query:uh};new re({values:ch});var sh=new re({options:{required:!1},values:{type:new ee({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new ie({required:!0,max:25,each:new ee({emptyAllowed:!1,required:!0})})}});new G;var lh=new ie({min:1,max:25,required:!1,each:new ee({emptyAllowed:!1,required:!0})});var dh={value:xi,numberOfResults:new H({min:0}),state:xi};var fh={facetId:Ja,field:new ee({required:!0,emptyAllowed:!0}),filterFacetCount:new G({required:!1}),injectionDepth:new H({required:!1,min:0}),numberOfValues:new H({required:!1,min:1}),sortCriteria:new L({required:!1}),resultsMustMatch:new L({required:!1}),allowedValues:sh,customSort:lh},hh=Nt("facet/register",(e=>Ei(e,fh))),ph=Nt("facet/toggleSelectValue",(e=>Ei(e,{facetId:Ja,selection:new re({values:dh})}))),gh=Nt("facet/toggleExcludeValue",(e=>Ei(e,{facetId:Ja,selection:new re({values:dh})}))),yh=Nt("facet/deselectAll",(e=>Ei(e,Ja))),vh=Nt("facet/updateSortCriterion",(e=>Ei(e,{facetId:Ja,criterion:new L({required:!0})}))),mh=Nt("facet/updateNumberOfValues",(e=>Ei(e,{facetId:Ja,numberOfValues:new H({required:!0,min:1})}))),wh=Nt("facet/updateIsFieldExpanded",(e=>Ei(e,{facetId:Ja,isFieldExpanded:new G({required:!0})}))),bh=Nt("facet/updateFreezeCurrentValues",(e=>Ei(e,{facetId:Ja,freezeCurrentValues:new G({required:!0})})));ir(Us(),(e=>{e.addCase(hh,((e,t)=>{let{facetId:r}=t.payload;r in e||(e[r]=$s(Oh(t.payload)))})).addCase(So.fulfilled,((e,t)=>{if(t.payload&&Object.keys(t.payload.facetSet).length!==0)return t.payload.facetSet})).addCase(Vl,((e,t)=>{let r=t.payload.f||{},n=t.payload.fExcluded||{};Object.keys(e).forEach((t=>{let{request:i}=e[t],a=r[t]||[],o=n[t]||[],u=a.length+o.length,c=i.currentValues.filter((e=>!a.includes(e.value)&&!o.includes(e.value)));i.currentValues=[...a.map(xh),...o.map(Ah),...c.map(kh)],i.preventAutoSelect=u>0,i.numberOfValues=Math.max(u,i.numberOfValues)}))})).addCase(ph,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i)return;i.preventAutoSelect=!0;let a=i.currentValues.find((e=>e.value===n.value));if(!a){Sh(i,n);return}let o=a.state==="selected";a.state=o?"idle":"selected",i.freezeCurrentValues=!0})).addCase(gh,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i)return;i.preventAutoSelect=!0;let a=i.currentValues.find((e=>e.value===n.value));if(!a){Sh(i,n);return}let o=a.state==="excluded";a.state=o?"idle":"excluded",i.freezeCurrentValues=!0})).addCase(bh,((e,t)=>{let{facetId:r,freezeCurrentValues:n}=t.payload,i=e[r]?.request;i&&(i.freezeCurrentValues=n)})).addCase(yh,((e,t)=>{Zf(e[t.payload]?.request)})).addCase(ga,(e=>{Object.values(e).filter((e=>e.hasBreadcrumbs)).forEach((({request:e})=>Zf(e)))})).addCase(ya,(e=>{Object.values(e).filter((e=>!e.hasBreadcrumbs)).forEach((({request:e})=>Zf(e)))})).addCase(_l,((e,t)=>Object.values(e).forEach((e=>{e.request.preventAutoSelect=!t.payload.allow})))).addCase(vh,((e,t)=>{Jf(e,t.payload)})).addCase(mh,((e,t)=>{let{facetId:r,numberOfValues:n}=t.payload;Xf(e[r]?.request,n)})).addCase(wh,((e,t)=>{let{facetId:r,isFieldExpanded:n}=t.payload,i=e[r]?.request;i&&(i.isFieldExpanded=n)})).addCase(zf.fulfilled,((e,t)=>{t.payload.response.facets.forEach((t=>Ih(e[t.facetId]?.request,t)))})).addCase(Pl.fulfilled,((e,t)=>{(t.payload.response?.facets?.results||[]).forEach((t=>Ih(e[t.facetId]?.request,t)))})).addCase(Bf.fulfilled,((e,t)=>{t.payload.response.facets.forEach((t=>Ih(e[t.facetId]?.request,t)))})).addCase(ho,((e,t)=>{let{facetId:r,value:n}=t.payload,i=e[r]?.request;if(!i)return;let{rawValue:a}=n,{currentValues:o}=i,u=o.find((e=>e.value===a));if(u){u.state="selected";return}let c=xh(a);Sh(i,c),i.freezeCurrentValues=!0,i.preventAutoSelect=!0})).addCase(po,((e,t)=>{let{facetId:r,value:n}=t.payload,i=e[r]?.request;if(!i)return;let{rawValue:a}=n,{currentValues:o}=i,u=o.find((e=>e.value===a));if(u){u.state="excluded";return}let c=Ah(a);Sh(i,c),i.freezeCurrentValues=!0,i.preventAutoSelect=!0})).addCase(vo,((e,t)=>{if(!(t.payload in e))return;let{request:r}=e[t.payload];Zf(r)}))}));function Sh(e,t){let{currentValues:r}=e,n=r.findIndex((e=>e.state==="idle")),i=n===-1?r.length:n,a=r.slice(0,i),o=r.slice(i+1);e.currentValues=[...a,t,...o],e.numberOfValues=e.currentValues.length}function Ih(e,t){e&&(e.currentValues=t.values.map(Ch),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var qh={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function Oh(e){return{...qh,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function Ch(e){let{value:t,state:r}=e;return{value:t,state:r}}function xh(e){return{value:e,state:"selected"}}function Ah(e){return{value:e,state:"excluded"}}function kh(e){return{...e,state:"idle"}}var jh={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function Rh(e,t){let{request:r}=t,{facetId:n}=r;if(n in e)return;let i=Qh(r);r.numberOfValues=i,e[n]=t}function Th(e,t,r){let n=e[t]?.request;n&&(n.currentValues=r,n.numberOfValues=Qh(n))}function Mh(e,t,r){let n=e[t]?.request;if(!n)return;let i=$h(n.currentValues,r);if(!i)return;let a=i.state==="selected";i.state=a?"idle":"selected",n.preventAutoSelect=!0}function Eh(e,t,r){let n=e[t]?.request;if(!n)return;let i=$h(n.currentValues,r);if(!i)return;let a=i.state==="excluded";i.state=a?"idle":"excluded",n.preventAutoSelect=!0}function Ph(e,t){let r=e[t]?.request;r&&r.currentValues.forEach((e=>e.state="idle"))}function Dh(e,t){Object.entries(e).forEach((([e,{request:r}])=>{let n=t[e]||[];r.currentValues.forEach((e=>{let t=!!$h(n,e);return e.state=t?"selected":"idle",e}));let i=n.filter((e=>!$h(r.currentValues,e))),a=r.currentValues;a.push(...i),r.numberOfValues=Math.max(r.numberOfValues,a.length)}))}function Fh(e,t,r){t.forEach((t=>{let n=t.facetId,i=e[n]?.request;if(!i)return;let a=r(t.values);i.currentValues=a,i.preventAutoSelect=!1}))}function $h(e,t){let{start:r,end:n}=t;return e.find((e=>e.start===r&&e.end===n))}function Uh(e,t){let{start:r,end:n,endInclusive:i}=t;return e.find((e=>e.start===r&&e.end===n&&e.endInclusive===i))}function Qh(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}function Vh(e){let t=_h(e.start,e),r=_h(e.end,e),n=e.endInclusive??!1,i=e.state??"idle";return{start:t,end:r,endInclusive:n,state:i}}function _h(e,t){let{dateFormat:r}=t;return xd(e)?(bd(e),Sd(e)):typeof e=="string"&&Cd(e)?(bd(e),e):(gd(e,r),hd(fd(e,r)))}var Nh=Nt("rangeFacet/updateSortCriterion",(e=>Ei(e,{facetId:Ja,criterion:new L({required:!0})})));var Lh={state:xi,start:new H({required:!0}),end:new H({required:!0}),endInclusive:new G({required:!0}),numberOfResults:new H({required:!0,min:0})},zh={start:xi,end:xi,endInclusive:new G({required:!0}),state:xi,numberOfResults:new H({required:!0,min:0})},Bh=e=>({facetId:Ja,selection:typeof e.start=="string"?new re({values:zh}):new re({values:Lh})});var Yh={start:xi,end:xi,endInclusive:new G({required:!0}),state:xi},Hh={facetId:Ja,field:xi,currentValues:new ie({required:!1,each:new re({values:Yh})}),generateAutomaticRanges:new G({required:!0}),filterFacetCount:new G({required:!1}),injectionDepth:new H({required:!1,min:0}),numberOfValues:new H({required:!1,min:1}),sortCriteria:new L({required:!1}),rangeAlgorithm:new L({required:!1})};function Wh(e){return Cd(e)?qd(e):e}function Kh(e){e.currentValues&&e.currentValues.forEach((e=>{let{start:t,end:r}=Vh(e);if(fd(Wh(t)).isAfter(fd(Wh(r))))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)}))}var Gh=Nt("dateFacet/register",(e=>{try{return Mi(e,Hh),Kh(e),{payload:e,error:null}}catch(t){return{payload:e,error:Ti(t)}}})),Jh=Nt("dateFacet/toggleSelectValue",(e=>Ei(e,{facetId:Ja,selection:new re({values:zh})}))),Zh=Nt("dateFacet/toggleExcludeValue",(e=>Ei(e,{facetId:Ja,selection:new re({values:zh})}))),Xh=Nt("dateFacet/updateFacetValues",(e=>{try{return Mi(e,{facetId:Ja,values:new ie({each:new re({values:zh})})}),Kh({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Ti(t)}}})),ep=Nh,tp=yh;ir(Ps(),(e=>{e.addCase(Gh,((e,t)=>{let{payload:r}=t,n=rp(r);Rh(e,Es(n))})).addCase(So.fulfilled,((e,t)=>t.payload?.dateFacetSet??e)).addCase(Vl,((e,t)=>{let r=t.payload.df||{};Dh(e,r)})).addCase(Jh,((e,t)=>{let{facetId:r,selection:n}=t.payload;Mh(e,r,n)})).addCase(Zh,((e,t)=>{let{facetId:r,selection:n}=t.payload;Eh(e,r,n)})).addCase(Xh,((e,t)=>{let{facetId:r,values:n}=t.payload;Th(e,r,n)})).addCase(tp,((e,t)=>{Ph(e,t.payload)})).addCase(ga,(e=>{Object.keys(e).forEach((t=>{Ph(e,t)}))})).addCase(ep,((e,t)=>{Jf(e,t.payload)})).addCase(zf.fulfilled,((e,t)=>{let r=t.payload.response.facets;Fh(e,r,np)})).addCase(Pl.fulfilled,((e,t)=>{let r=t.payload.response?.facets?.results||[];Fh(e,r,np)})).addCase(vo,((e,t)=>{Ph(e,t.payload)}))}));function rp(e){return{...jh,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function np(e){return e.map((e=>{let{numberOfResults:t,...r}=e;return r}))}var ip={state:xi,start:new H({required:!0}),end:new H({required:!0}),endInclusive:new G({required:!0})},ap={facetId:Ja,field:xi,currentValues:new ie({required:!1,each:new re({values:ip})}),generateAutomaticRanges:new G({required:!0}),filterFacetCount:new G({required:!1}),injectionDepth:new H({required:!1,min:0}),numberOfValues:new H({required:!1,min:1}),sortCriteria:new L({required:!1}),rangeAlgorithm:new L({required:!1})};function op(e){e.currentValues&&e.currentValues.forEach((({start:e,end:t})=>{if(e>t)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${t}`)}))}var up=Nt("numericFacet/register",(e=>{try{return Ei(e,ap),op(e),{payload:e,error:null}}catch(t){return{payload:e,error:Ti(t)}}})),cp=Nt("numericFacet/toggleSelectValue",(e=>Ei(e,{facetId:Ja,selection:new re({values:Lh})}))),sp=Nt("numericFacet/toggleExcludeValue",(e=>Ei(e,{facetId:Ja,selection:new re({values:Lh})}))),lp=Nt("numericFacet/updateFacetValues",(e=>{try{return Mi(e,{facetId:Ja,values:new ie({each:new re({values:Lh})})}),op({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Ti(t)}}})),dp=Nh,fp=yh;ir(Fs(),(e=>{e.addCase(up,((e,t)=>{let{payload:r}=t,n=hp(r);Rh(e,Ds(n))})).addCase(So.fulfilled,((e,t)=>t.payload?.numericFacetSet??e)).addCase(Vl,((e,t)=>{let r=t.payload.nf||{};Dh(e,r)})).addCase(cp,((e,t)=>{let{facetId:r,selection:n}=t.payload;Mh(e,r,n)})).addCase(sp,((e,t)=>{let{facetId:r,selection:n}=t.payload;Eh(e,r,n)})).addCase(lp,((e,t)=>{let{facetId:r,values:n}=t.payload;Th(e,r,n)})).addCase(fp,((e,t)=>{Ph(e,t.payload)})).addCase(ga,(e=>{Object.keys(e).forEach((t=>{Ph(e,t)}))})).addCase(dp,((e,t)=>{Jf(e,t.payload)})).addCase(zf.fulfilled,((e,t)=>{let r=t.payload.response.facets;Fh(e,r,pp)})).addCase(Pl.fulfilled,((e,t)=>{let r=t.payload.response?.facets?.results||[];Fh(e,r,pp)})).addCase(vo,((e,t)=>{Ph(e,t.payload)}))}));function hp(e){return{...jh,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function pp(e){return e.map((e=>{let{numberOfResults:t,...r}=e;return r}))}var gp={f:new re,cf:new re,nf:new re,df:new re,sortCriteria:new re,page:new H({min:0}),perPage:new H({min:1})};var yp=Nt("commerce/productListingParameters/restore",(e=>Ei(e,gp)));var vp=Sr("commerce/productListing/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:i}})=>{let a=t(),o=await n.getProductListing(ba(a,i));return qi(o)?r(o.error):{response:o.success}})),mp=Sr("commerce/productListing/fetchMoreProducts",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:i}})=>{let a=t();if(!Jr(a))return null;let o=Nr(a),u=Gr(a)/o,c=await n.getProductListing({...ba(a,i),page:u});return qi(c)?r(c.error):{response:c.success}})),wp={child:new re({options:{required:!0},values:{permanentid:new ee({required:!0})}})},bp=Nt("commerce/productListing/promoteChildToParent",(e=>Ei(e,wp)));var Sp={q:new ee,...gp};var Ip=Nt("commerce/searchParameters/restore",(e=>Ei(e,Sp)));var qp=Nt("commerce/facets/categoryFacet/updateNumberOfValues",(e=>Ei(e,{facetId:xi,numberOfValues:new H({required:!1,min:1})}))),Op=Nt("commerce/facets/categoryFacet/toggleSelectValue",(e=>{try{return Mi(e.facetId,xi),Xa(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Ti(t)}}}));var Cp=Nt("commerce/facets/dateFacet/toggleSelectValue",(e=>Ei(e,{facetId:xi,selection:new re({values:zh})}))),xp=Nt("commerce/facets/dateFacet/toggleExcludeValue",(e=>Ei(e,{facetId:xi,selection:new re({values:zh})}))),Ap=Nt("commerce/facets/dateFacet/updateValues",(e=>{try{return Mi(e,{facetId:xi,values:new ie({each:new re({values:zh})})}),Kh({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Ti(t)}}}));var kp=(e,t,r,n)=>{let i=`*${t.categoryFacetSearchSet[e].options.query}*`,a=t.commerceFacetSet[e]?.request,o=a&&jp(a)?a&&Rp(a):[],u=o.length?[o]:[],c=t.commerceQuery?.query,{url:s,accessToken:l,organizationId:d,trackingId:f,language:h,country:p,currency:g,clientId:y,context:v,...m}=ba(t,n);return{url:s,accessToken:l,organizationId:d,facetId:e,facetQuery:i,ignorePaths:u,trackingId:f,language:h,country:p,currency:g,clientId:y,context:v,query:c,...!r&&{...m,query:""}}};function jp(e){return e.type==="hierarchical"}var Rp=e=>{let t=[],r=e.values[0];for(;r;)t.push(r.value),r=r.children[0];return t};var Tp=(e,t,r,n)=>{let i=`*${t.facetSearchSet[e].options.query}*`,a=t.commerceQuery?.query,{url:o,accessToken:u,organizationId:c,trackingId:s,language:l,country:d,currency:f,clientId:h,context:p,...g}=ba(t,n);return{url:o,accessToken:u,organizationId:c,facetId:e,facetQuery:i,trackingId:s,language:l,country:d,currency:f,clientId:h,context:p,query:a,...!r&&{...g,query:""}}};var Mp=e=>async({facetId:t,facetSearchType:r},{getState:n,extra:{validatePayload:i,navigatorContext:a,apiClient:o}})=>{let u=n();i(t,xi);let c=Dp(u,t)||Fp(u,t)?Tp(t,u,e,a):kp(t,u,e,a),s=await o.facetSearch(c,r);return{facetId:t,response:s}},Ep=Sr("commerce/facetSearch/executeSearch",Mp(!1)),Pp=Sr("commerce/facetSearch/facetFieldSuggest",Mp(!0)),Dp=(e,t)=>"facetSearchSet"in e&&e.facetSearchSet[t]!==void 0&&e.commerceFacetSet[t]!==void 0,Fp=(e,t)=>"fieldSuggestionsOrder"in e?e.fieldSuggestionsOrder.some((e=>e.facetId===t&&e.type==="regular")):!1;var $p=Nt("commerce/facets/numericFacet/toggleSelectValue",(e=>Ei(e,{facetId:xi,selection:new re({values:Lh})}))),Up=Nt("commerce/facets/numericFacet/toggleExcludeValue",(e=>Ei(e,{facetId:xi,selection:new re({values:Lh})}))),Qp=Nt("commerce/facets/numericFacet/updateValues",(e=>{try{return Mi(e,{facetId:xi,values:new ie({each:new re({values:Lh})})}),op({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Ti(t)}}}));var Vp=Nt("commerce/facets/regularFacet/toggleExcludeValue",(e=>Ei(e,{facetId:xi,selection:new re({values:dh})}))),_p=Nt("commerce/facets/regularFacet/toggleSelectValue",(e=>Ei(e,{facetId:xi,selection:new re({values:dh})})));function Np(e,t){let{facetId:r,numberOfValues:n}=t,i=e[r]?.request.values[0];if(i){for(;i.children.length&&i?.state!=="selected";)i=i.children[0];i.retrieveCount=n}}function Lp(e,t){for(let t of Object.keys(e))delete e[t];t.payload.f&&zp(e,t.payload.f),t.payload.nf&&Bp(e,t.payload.nf,"numericalRange"),t.payload.df&&Bp(e,t.payload.df,"dateRange"),t.payload.cf&&Yp(e,t.payload.cf)}function zp(e,t){let r=Object.entries(t);for(let[t,n]of r)e[t]={request:{...Hp(t),type:"regular",values:n.map((e=>({...Wp(),value:e})))}}}function Bp(e,t,r){let n=Object.entries(t);for(let[t,i]of n)e[t]={request:{...Hp(t),type:r,values:i.map((e=>{let t={start:e.start,end:e.end,endInclusive:e.endInclusive,...Wp()};switch(r){case"dateRange":return t;case"numericalRange":return t}}))}}}function Yp(e,t){let r=Object.entries(t);for(let[t,n]of r)e[t]={request:{...Hp(t),type:"hierarchical",values:[],delimitingCharacter:"|"}},Gp(e[t].request,n,10)}function Hp(e){return{facetId:e,field:e,numberOfValues:10,isFieldExpanded:!1,preventAutoSelect:!1,initialNumberOfValues:10}}function Wp(){return{state:"selected",isAutoSelected:!1,isSuggested:!1,numberOfResults:10,moreValuesAvailable:!0}}function Kp(e){return{state:"selected",value:e}}function Gp(e,t,r){e.values=Jp(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function Jp(e,t){if(!e.length)return[];let r=Zp(e[0],t),n=r;for(let r of e.splice(1)){let e=Zp(r,t);n.children.push(e),n=e}return n.state="selected",[r]}function Zp(e,t){return{children:[],state:"idle",value:e,retrieveCount:t}}function Xp(){return{}}var eg=ir(Xp(),(e=>{e.addCase(vp.fulfilled,ag).addCase(La.fulfilled,ag).addCase(Pp.fulfilled,og).addCase(_p,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i||!tg(i))return;i.preventAutoSelect=!0;let a=i.values.find((e=>e.value===n.value));if(!a){hg(i,n);return}sg(a,"select"),i.freezeCurrentValues=!0})).addCase($p,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i||!rg(i))return;i.preventAutoSelect=!0;let a=Uh(i.values,n);if(!a){hg(i,n);return}if(sg(a,"select"),i.interval==="continuous"&&a.state==="idle"){i.values=[];return}})).addCase(Cp,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i||!ng(i))return;i.preventAutoSelect=!0;let a=Uh(i.values,n);if(!a){hg(i,n);return}sg(a,"select")})).addCase(Op,((e,t)=>{let{facetId:r,selection:n,retrieveCount:i}=t.payload,a=e[r]?.request;if(!a||!ig(a))return;let{path:o}=n,u=o.slice(0,o.length-1),c=cg(a,u,i);if(c.length){let e=c[0];e.state="selected",e.children=[];return}let s=Zp(n.value,i);s.state="selected",c.push(s),a.numberOfValues=1})).addCase(Vp,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i||!tg(i))return;i.preventAutoSelect=!0;let a=i.values.find((e=>e.value===n.value));if(!a){hg(i,n);return}sg(a,"exclude"),i.freezeCurrentValues=!0})).addCase(Up,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i||!rg(i))return;i.preventAutoSelect=!0;let a=Uh(i.values,n);if(!a){hg(i,n);return}if(sg(a,"exclude"),i.interval==="continuous"&&a.state==="idle"){i.values=[];return}})).addCase(xp,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i||!ng(i))return;i.preventAutoSelect=!0;let a=Uh(i.values,n);if(!a){hg(i,n);return}sg(a,"exclude")})).addCase(qp,((e,t)=>{let{facetId:r,numberOfValues:n}=t.payload,i=e[r]?.request;if(i){if(!i.values.length)return Xf(i,n);Np(e,t.payload)}})).addCase(ho,((e,t)=>{let{facetId:r,value:n}=t.payload,i=e[r]?.request;if(!i||!tg(i))return;let{rawValue:a}=n;i.freezeCurrentValues=!0,i.preventAutoSelect=!0;let o=i.values.find((e=>e.value===a));if(!o){hg(i,Kp(a));return}sg(o,"select")})).addCase(po,((e,t)=>{let{facetId:r,value:n}=t.payload,i=e[r]?.request;if(!i||!tg(i))return;let{rawValue:a}=n;i.freezeCurrentValues=!0,i.preventAutoSelect=!0;let o=i.values.find((e=>e.value===a));if(!o){hg(i,{state:"excluded",value:a});return}sg(o,"exclude")})).addCase(uo,((e,t)=>{let{facetId:r,value:n}=t.payload,i=e[r];if(!i||!ig(i?.request))return;let a=[...n.path,n.rawValue];Gp(i.request,a,i.request.initialNumberOfValues)})).addCase(Qp,((e,t)=>{let{facetId:r,values:n}=t.payload,i=e[r]?.request;!i||!rg(i)||(i.values=pp(n),i.numberOfValues=n.length)})).addCase(Ap,((e,t)=>{let{facetId:r,values:n}=t.payload,i=e[r]?.request;!i||!ng(i)||(i.values=np(n),i.numberOfValues=n.length)})).addCase(Ca,((e,t)=>{let{facetId:r,numberOfValues:n}=t.payload,i=e[r]?.request;i&&(i.numberOfValues=n)})).addCase(xa,((e,t)=>{let{facetId:r,isFieldExpanded:n}=t.payload,i=e[r]?.request;i&&(i.isFieldExpanded=n)})).addCase(Ra,((e,t)=>Object.values(e).forEach((e=>{e.request.preventAutoSelect=!t.payload.allow})))).addCase(ja,((e,t)=>{let{facetId:r,freezeCurrentValues:n}=t.payload,i=e[r]?.request;i&&(i.freezeCurrentValues=n)})).addCase(ka,((e,t)=>{let{facetId:r}=t.payload,n=e[r]?.request;n&&ug(n)})).addCase(Aa,pg).addCase(sa,gg).addCase(la,gg).addCase(Ip,Lp).addCase(yp,Lp)}));function tg(e){return e.type==="regular"}function rg(e){return e.type==="numericalRange"}function ng(e){return e.type==="dateRange"}function ig(e){return e.type==="hierarchical"}function ag(e,t){let r=new Set(Object.keys(e)),n=t.payload.response.facets;for(let t of n)lg(e,t,r);for(let t of r)delete e[t]}function og(e,t){let r=t.payload.facetId,n=e[r]?.request;n||(e[r]={request:{}},n=e[r].request,n.initialNumberOfValues=10)}function ug(e){e.type==="hierarchical"?(e.numberOfValues=e.initialNumberOfValues,e.values=[],e.preventAutoSelect=!0):e.values.forEach((e=>e.state="idle"))}function cg(e,t,r){let n=e.values;for(let e of t){let t=n[0];(!t||e!==t.value)&&(t=Zp(e,r),n.length=0,n.push(t)),t.state="idle",n=t.children}return n}function sg(e,t){switch(e.state){case"idle":e.state=t==="exclude"?"excluded":"selected";break;case"excluded":e.state=t==="exclude"?"idle":"selected";break;case"selected":e.state=t==="exclude"?"excluded":"idle";break}}function lg(e,t,r){let n=t.facetId??t.field,i=e[n]?.request;i?r.delete(n):(e[n]={request:{}},i=e[n].request,i.initialNumberOfValues=t.numberOfValues),i.facetId=n,i.displayName=t.displayName,i.numberOfValues=t.numberOfValues,i.field=t.field,i.type=t.type,i.values=dg(t)??[],i.freezeCurrentValues=!1,i.preventAutoSelect=!1,t.type==="hierarchical"&&ig(i)?i.delimitingCharacter=t.delimitingCharacter:t.type==="numericalRange"&&(i.interval=t.interval,t.domain&&(i.domain={min:t.domain.min,max:t.domain.max,increment:t.domain.increment}))}function dg(e){switch(e.type){case"numericalRange":return pp(e.values);case"dateRange":return np(e.values);case"hierarchical":return e.values.every((e=>e.state==="idle"&&e.children.length===0))?[]:e.values.map(fg);case"regular":return e.values.map(Ch);default:return}}function fg(e){let t=e.children.every((e=>e.state==="idle"&&e.children.length===0))?[]:e.children.map(fg),{state:r,value:n}=e;return{children:t,state:r,value:n,retrieveCount:to}}function hg(e,t){let{values:r}=e,n=r.findIndex((e=>e.state==="idle")),i=n===-1?r.length:n,a=r.slice(0,i),o=r.slice(i+1);e.values=[...a,t,...o],e.numberOfValues=e.values.length}function pg(e){Object.values(e).forEach((e=>ug(e.request)))}function gg(e){Object.values(e).forEach((e=>{e.request.values=[]}))}var yg={slotId:xi,productId:new ee({required:!1,emptyAllowed:!1})},vg=new N(yg);var mg=Pt(((e,t)=>e.recommendations&&e.recommendations[t]?.products.length||0),(e=>e)),wg=Pt(((e,t)=>({total:Br(e,t),current:mg(e,t)})),(({current:e,total:t})=>e<t)),bg=Pt(((e,t)=>e.recommendations?e.recommendations[t]?.isLoading:!1),(e=>Y(e)?!1:e));var Sg=(e,t,r,n)=>{let i=Sa(t,r,e);return{...i,context:{...i.context,...n?{product:{productId:n}}:{},purchased:Ji(t.cart)},slotId:e}},Ig=Sr("commerce/recommendations/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:i}})=>{let{slotId:a,productId:o}=e,u=Sg(a,t(),i,o),c=await n.getRecommendations(u);return qi(c)?r(c.error):{response:c.success}})),qg=Sr("commerce/recommendations/fetchMore",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:i}})=>{let a=e.slotId,o=t();if(wg(o,a))return null;let u=Lr(o,a),c=mg(o,a)/u,s={...Sg(a,o,i),page:c},l=await n.getRecommendations(s);return qi(l)?r(l.error):{response:l.success}})),Og=Nt("commerce/recommendations/registerSlot",(e=>Ei(e,yg))),Cg={child:new re({options:{required:!0},values:{permanentid:new ee({required:!0})}}),...yg},xg=Nt("commerce/recommendations/promoteChildToParent",(e=>Ei(e,Cg)));var Ag=Nt("commerce/sort/apply",(e=>Ei(e,{by:new oe({enum:sn,required:!0})})));var kg=ir(un(),(e=>{e.addCase(Fa,((e,t)=>{let r=jg(e,t.payload?.slotId);r&&r.page<r.totalPages-1&&++r.page})).addCase($a,((e,t)=>{let r=jg(e,t.payload?.slotId);r&&r.page>0&&--r.page})).addCase(Da,((e,t)=>{let r=jg(e,t.payload.slotId);r&&t.payload.page>=0&&t.payload.page<r.totalPages&&(r.page=t.payload.page)})).addCase(Ea,((e,t)=>{let r=jg(e,t.payload.slotId);r&&(r.perPage=t.payload.pageSize)})).addCase(vp.fulfilled,((e,t)=>{e.principal=t.payload.response.pagination})).addCase(La.fulfilled,((e,t)=>{e.principal=t.payload.response.pagination})).addCase(Ig.fulfilled,((e,t)=>{e.recommendations[t.meta.arg.slotId]=t.payload.response.pagination})).addCase(Ua,((e,t)=>{let r=t.payload.slotId;r in e.recommendations||(e.recommendations[r]=cn())})).addCase(Aa,Rg).addCase(ka,Rg).addCase(_p,Rg).addCase(Vp,Rg).addCase($p,Rg).addCase(Up,Rg).addCase(Cp,Rg).addCase(xp,Rg).addCase(Op,Rg).addCase(Ag,Rg).addCase(sa,Rg).addCase(la,Rg).addCase(Ip,Tg).addCase(yp,Tg)}));function jg(e,t){return t?e.recommendations[t]:e.principal}function Rg(e){e.principal.page=cn().page}function Tg(e,t){t.payload.page&&(e.principal.page=t.payload.page),t.payload.perPage&&(e.principal.perPage=t.payload.perPage)}var Mg=()=>({error:null,isLoading:!1,requestId:"",responseId:"",facets:[],products:[]});var Eg=ir(Mg(),(e=>{e.addCase(vp.rejected,((e,t)=>{Pg(e,t.payload)})).addCase(mp.rejected,((e,t)=>{Pg(e,t.payload)})).addCase(vp.fulfilled,((e,t)=>{let r=$g(t.payload);Dg(e,t.payload.response),e.products=t.payload.response.products.map(((e,t)=>Ug(e,r+t+1)))})).addCase(mp.fulfilled,((e,t)=>{if(!t.payload)return;let r=$g(t.payload);Dg(e,t.payload.response),e.products=e.products.concat(t.payload.response.products.map(((e,t)=>Ug(e,r+t+1))))})).addCase(vp.pending,((e,t)=>{Fg(e,t.meta.requestId)})).addCase(mp.pending,((e,t)=>{Fg(e,t.meta.requestId)})).addCase(bp,((e,t)=>{let{products:r}=e,n,i=r.findIndex((e=>(n=e.children.find((e=>e.permanentid===t.payload.child.permanentid)),!!n)));if(i===-1||n===void 0)return;let a=r[i].position,{children:o,totalNumberOfChildren:u}=r[i],c={...n,children:o,totalNumberOfChildren:u,position:a};r.splice(i,1,c)}))}));function Pg(e,t){e.error=t||null,e.isLoading=!1}function Dg(e,t){e.error=null,e.facets=t.facets,e.responseId=t.responseId,e.isLoading=!1}function Fg(e,t){e.isLoading=!0,e.requestId=t}function $g(e){let t=e.response.pagination;return t.page*t.perPage}function Ug(e,t){let r=e.children.some((t=>t.permanentid===e.permanentid));if(e.children.length===0||r)return{...e,position:t};let{children:n,totalNumberOfChildren:i,...a}=e;return{...e,children:[a,...n],position:t}}var Qg=Nt("commerce/querySuggest/clear",(e=>Ei(e,{id:xi}))),Vg=Sr("commerce/querySuggest/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:i,navigatorContext:a}})=>{i(e,{id:xi});let o=t(),u=Lg(e.id,o,a),c=await n.querySuggest(u);return qi(c)?r(c.error):{id:e.id,query:u.query,...c.success}})),_g=Nt("commerce/querySuggest/register",(e=>Ei(e,{id:xi,count:new H({min:0})}))),Ng=Nt("commerce/querySuggest/selectSuggestion",(e=>Ei(e,{id:xi,expression:ki}))),Lg=(e,t,r)=>{let{view:n,...i}=t.commerceContext;return{accessToken:t.configuration.accessToken,url:t.configuration.platformUrl,organizationId:t.configuration.organizationId,trackingId:t.configuration.analytics.trackingId,query:t.querySet[e],...i,clientId:r.clientId,context:{...r.userAgent?{user:{userAgent:r.userAgent}}:{},view:{...n,...r.referrer?{referrer:r.referrer}:{}},capture:t.configuration.analytics.enabled,cart:Gi(t.cart),source:wa(t.configuration.analytics)}}};var zg=ir(On(),(e=>{e.addCase(Qa,((e,t)=>({...e,...t.payload}))).addCase(Ip,((e,t)=>{e.query=t.payload.q??""})).addCase(Ng,((e,t)=>{e.query=t.payload.expression}))}));var Bg=()=>({}),Yg=()=>({headline:"",error:null,isLoading:!1,responseId:"",products:[]});var Hg=ir(Bg(),(e=>{e.addCase(Og,((e,t)=>{let r=t.payload.slotId;r in e||(e[r]=Wg())})).addCase(Ig.rejected,((e,t)=>{Kg(e,t.meta.arg.slotId,t.payload)})).addCase(qg.rejected,((e,t)=>{Kg(e,t.meta.arg.slotId,t.payload)})).addCase(Ig.fulfilled,((e,t)=>{let r=t.meta.arg.slotId,n=t.payload.response;Gg(e,r,n);let i=e[r];if(!i)return;let a=Zg(t.payload);i.products=n.products.map(((e,t)=>Xg(e,a+t+1)))})).addCase(qg.fulfilled,((e,t)=>{if(!t.payload)return;let r=t.meta.arg.slotId,n=t.payload.response;Gg(e,r,n);let i=e[r];if(!i)return;let a=Zg(t.payload);i.products=i.products.concat(n.products.map(((e,t)=>Xg(e,a+t+1))))})).addCase(Ig.pending,((e,t)=>{Jg(e,t.meta.arg.slotId)})).addCase(qg.pending,((e,t)=>{Jg(e,t.meta.arg.slotId)})).addCase(xg,((e,t)=>{let r=e[t.payload.slotId];if(!r)return;let{products:n}=r,i,a=n.findIndex((e=>(i=e.children.find((e=>e.permanentid===t.payload.child.permanentid)),!!i)));if(a===-1||i===void 0)return;let o=n[a].position,{children:u,totalNumberOfChildren:c}=n[a],s={...i,children:u,totalNumberOfChildren:c,position:o};n.splice(a,1,s)}))}));function Wg(e){return{...Yg(),...e}}function Kg(e,t,r){let n=e[t];n&&(n.error=r??null,n.isLoading=!1)}function Gg(e,t,r){let n=e[t];n&&(n.error=null,n.headline=r.headline,n.responseId=r.responseId,n.isLoading=!1)}function Jg(e,t){let r=e[t];r&&(r.isLoading=!0)}function Zg(e){let t=e.response.pagination;return t.page*t.perPage}function Xg(e,t){let r=e.children.some((t=>t.permanentid===e.permanentid));if(e.children.length===0||r)return{...e,position:t};let{children:n,totalNumberOfChildren:i,...a}=e;return{...e,children:[a,...n],position:t}}var ey=()=>({error:null,isLoading:!1,requestId:"",responseId:"",products:[],facets:[],queryExecuted:""});var ty=ir(ey(),(e=>{e.addCase(La.rejected,((e,t)=>{ry(e,t.payload)})).addCase(za.rejected,((e,t)=>{ry(e,t.payload)})).addCase(La.fulfilled,((e,t)=>{let r=ay(t.payload);iy(e,t.payload.response,t.payload.queryExecuted),e.products=t.payload.response.products.map(((e,t)=>oy(e,r+t+1)))})).addCase(za.fulfilled,((e,t)=>{if(!t.payload)return;let r=ay(t.payload);iy(e,t.payload.response,t.payload.queryExecuted),e.products=e.products.concat(t.payload.response.products.map(((e,t)=>oy(e,r+t+1))))})).addCase(La.pending,((e,t)=>{ny(e,t.meta.requestId)})).addCase(za.pending,((e,t)=>{ny(e,t.meta.requestId)})).addCase(Wa,((e,t)=>{let{products:r}=e,n,i=r.findIndex((e=>(n=e.children.find((e=>e.permanentid===t.payload.child.permanentid)),!!n)));if(i===-1||n===void 0)return;let a=r[i].position,{children:o,totalNumberOfChildren:u}=r[i],c={...n,children:o,totalNumberOfChildren:u,position:a};r.splice(i,1,c)}))}));function ry(e,t){e.error=t||null,e.isLoading=!1}function ny(e,t){e.isLoading=!0,e.requestId=t}function iy(e,t,r){e.error=null,e.facets=t.facets,e.responseId=t.responseId,e.isLoading=!1,e.queryExecuted=r??""}function ay(e){let t=e.response.pagination;return t.page*t.perPage}function oy(e,t){let r=e.children.some((t=>t.permanentid===e.permanentid));if(e.children.length===0||r)return{...e,position:t};let{children:n,totalNumberOfChildren:i,...a}=e;return{...e,children:[a,...n],position:t}}var uy=ir(pn(),(e=>{e.addCase(Ag,((e,t)=>{e.appliedSort=t.payload})).addCase(vp.fulfilled,cy).addCase(La.fulfilled,cy).addCase(sa,pn).addCase(la,pn).addCase(Ip,ly).addCase(yp,ly)}));function cy(e,t){let r=t.payload.response;e.appliedSort=sy(r.sort.appliedSort),e.availableSorts=r.sort.availableSorts.map(sy)}var sy=e=>e.sortCriteria==="relevance"?dn():{by:"fields",fields:(e.fields||[]).map((({field:e,direction:t,displayName:r})=>({name:e,direction:t,displayName:r})))};function ly(e,t){t.payload.sortCriteria&&(e.appliedSort=t.payload.sortCriteria)}function dy(e){return e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore},e}function fy(e,t){let r=[],n=[],i=[],a=[];return t.forEach((e=>{switch(e.type){case"redirect":r.push(e.content);break;case"query":n.push(e.content);break;case"execute":i.push({functionName:e.content.name,params:e.content.params});break;case"notify":a.push(e.content);break}})),e.redirectTo=r[0]??"",e.query=e.queryModification.newQuery,e.executions=i,e.notifications=a,e}function hy(e,t){return e.queryModification={...t,queryToIgnore:""},e}function py(e,t){return e.queryModification.queryToIgnore=t,e}var gy=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});var yy=ir(gy(),(e=>e.addCase(La.pending,dy).addCase(La.fulfilled,((e,t)=>fy(e,t.payload.response.triggers))).addCase(_a,((e,t)=>hy(e,t.payload))).addCase(Va,((e,t)=>py(e,t.payload.q)))));var vy=ir(Xd(),(e=>{e.addCase(zf.fulfilled,my).addCase(vp.fulfilled,my).addCase(La.fulfilled,my).addCase(Ip,wy).addCase(yp,wy).addCase(So.fulfilled,((e,t)=>t.payload?.facetOrder??e))}));function my(e,t){return t.payload.response.facets.map((e=>e.facetId))}function wy(e,t){return[...Object.keys(t.payload.f??{}),...Object.keys(t.payload.nf??{}),...Object.keys(t.payload.df??{}),...Object.keys(t.payload.cf??{})]}function by(e,t,r){let{facetId:n}=t;if(e[n])return;let i=!1,a={...Ty,...t},o=r();e[n]={options:a,isLoading:i,response:o,initialNumberOfValues:a.numberOfValues,requestId:""}}function Sy(e,t){let{facetId:r,...n}=t,i=e[r];i&&(i.options={...i.options,...n})}function Iy(e,t,r){let n=e[t];n&&(n.requestId=r,n.isLoading=!0)}function qy(e,t){let r=e[t];r&&(r.isLoading=!1)}function Oy(e,t,r){let{facetId:n,response:i}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,a.response=i)}function Cy(e,t,r){let{facetId:n,response:i}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,"success"in i&&(a.response=i.success))}function xy(e,t,r,n){let{facetId:i,response:a}=t,o=e[i];if(!o)by(e,{facetId:i},n),o=e[i];else if(o.requestId!==r)return;o.isLoading=!1,"success"in a&&(o.response=a.success)}function Ay(e,t,r,n){if(t.fieldSuggestionsFacets)for(let i of t.fieldSuggestionsFacets)i.facetId in e||i.type!=="regular"||(e[i.facetId]={options:{...Ty,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:Ty.numberOfValues,requestId:r})}function ky(e,t,r,n){if(t.fieldSuggestionsFacets)for(let i of t.fieldSuggestionsFacets)i.facetId in e||i.type!=="hierarchical"||(e[i.facetId]={options:{...Ty,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:Ty.numberOfValues,requestId:r})}function jy(e,t,r){let{facetId:n}=t,i=e[n];i&&(i.requestId="",i.isLoading=!1,i.response=r(),i.options.numberOfValues=i.initialNumberOfValues,i.options.query=Ty.query)}function Ry(e,t){Object.keys(e).forEach((r=>jy(e,{facetId:r},t)))}var Ty={captions:{},numberOfValues:10,query:""};var My=async(e,t,r,n)=>{let i=t.categoryFacetSearchSet[e].options,a=t.categoryFacetSet[e].request,{captions:o,query:u,numberOfValues:c}=i,{field:s,delimitingCharacter:l,basePath:d,filterFacetCount:f}=a,h=Ey(a),p=h.length?[h]:[],g=`*${u}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:d,captions:o,numberOfValues:c,query:g,field:s,delimitingCharacter:l,ignorePaths:p,filterFacetCount:f,type:"hierarchical",...n?{}:{searchContext:(await Ef(t,r)).request}}},Ey=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};var Py=async(e,t,r,n)=>{let{captions:i,query:a,numberOfValues:o}=t.facetSearchSet[e].options,{field:u,currentValues:c,filterFacetCount:s}=t.facetSet[e].request,l=c.filter((e=>e.state!=="idle")).map((e=>e.value)),d=`*${a}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:i,numberOfValues:o,query:d,field:u,ignoreValues:l,filterFacetCount:s,type:"specific",...n?{}:{searchContext:(await Ef(t,r)).request}}};var Dy=e=>async(t,{getState:r,extra:{apiClient:n,validatePayload:i,navigatorContext:a}})=>{let o=r(),u;i(t,xi),Uy(o,t)?u=await Py(t,o,a,e):u=await My(t,o,a,e);let c=await n.facetSearch(u);return{facetId:t,response:c}},Fy=Sr("facetSearch/executeSearch",Dy(!1));Sr("facetSearch/executeSearch",Dy(!0));var $y=Nt("facetSearch/clearResults",(e=>Ei(e,{facetId:Ja}))),Uy=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;function Qy(){return{}}var Vy=ir(Qy(),(e=>{e.addCase(co,((e,t)=>{let r=t.payload;by(e,r,_y)})).addCase(fo,((e,t)=>{Sy(e,t.payload)})).addCase(Ep.pending,((e,t)=>{let{facetId:r}=t.meta.arg;Iy(e,r,t.meta.requestId)})).addCase(Pp.pending,((e,t)=>{let{facetId:r}=t.meta.arg;Iy(e,r,t.meta.requestId)})).addCase(Fy.pending,((e,t)=>{let r=t.meta.arg;Iy(e,r,t.meta.requestId)})).addCase(Ep.rejected,((e,t)=>{let{facetId:r}=t.meta.arg;qy(e,r)})).addCase(Pp.rejected,((e,t)=>{let{facetId:r}=t.meta.arg;qy(e,r)})).addCase(Fy.rejected,((e,t)=>{let r=t.meta.arg;qy(e,r)})).addCase(Ep.fulfilled,((e,t)=>{Cy(e,t.payload,t.meta.requestId)})).addCase(Pp.fulfilled,((e,t)=>{xy(e,t.payload,t.meta.requestId,_y)})).addCase(Vg.fulfilled,((e,t)=>{ky(e,t.payload,t.meta.requestId,_y)})).addCase(Fy.fulfilled,((e,t)=>{Oy(e,t.payload,t.meta.requestId)})).addCase($y,((e,{payload:{facetId:t}})=>{jy(e,{facetId:t},_y)})).addCase(vp.fulfilled,(e=>Ry(e,_y))).addCase(La.fulfilled,(e=>Ry(e,_y))).addCase(zf.fulfilled,(e=>{Ry(e,_y)}))}));function _y(){return{moreValuesAvailable:!1,values:[]}}function Ny(){return{}}var Ly=ir(Ny(),(e=>{e.addCase(lo,((e,t)=>{let r=t.payload;by(e,r,zy)})).addCase(fo,((e,t)=>{Sy(e,t.payload)})).addCase(Ep.pending,((e,t)=>{let{facetId:r}=t.meta.arg;Iy(e,r,t.meta.requestId)})).addCase(Pp.pending,((e,t)=>{let{facetId:r}=t.meta.arg;Iy(e,r,t.meta.requestId)})).addCase(Fy.pending,((e,t)=>{let r=t.meta.arg;Iy(e,r,t.meta.requestId)})).addCase(Ep.rejected,((e,t)=>{let{facetId:r}=t.meta.arg;qy(e,r)})).addCase(Pp.rejected,((e,t)=>{let{facetId:r}=t.meta.arg;qy(e,r)})).addCase(Fy.rejected,((e,t)=>{let r=t.meta.arg;qy(e,r)})).addCase(Ep.fulfilled,((e,t)=>{Cy(e,t.payload,t.meta.requestId)})).addCase(Pp.fulfilled,((e,t)=>{xy(e,t.payload,t.meta.requestId,zy)})).addCase(Vg.fulfilled,((e,t)=>{Ay(e,t.payload,t.meta.requestId,zy)})).addCase(Fy.fulfilled,((e,t)=>{Oy(e,t.payload,t.meta.requestId)})).addCase($y,((e,{payload:t})=>{jy(e,t,zy)})).addCase(zf.fulfilled,(e=>{Ry(e,zy)})).addCase(vp.fulfilled,(e=>Ry(e,zy))).addCase(La.fulfilled,(e=>Ry(e,zy))).addCase(la,(e=>Ry(e,zy)))}));function zy(){return{moreValuesAvailable:!1,values:[]}}async function By(e,t){let r=e.getReader(),n;for(;!(n=await r.read()).done;)t(n.value)}function Yy(e){let t,r,n,i=!1;return function(a){t===void 0?(t=a,r=0,n=-1):t=Wy(t,a);let o=t.length,u=0;for(;r<o;){i&&(t[r]===10&&(u=++r),i=!1);let a=-1;for(;r<o&&a===-1;++r)switch(t[r]){case 58:n===-1&&(n=r-u);break;case 13:i=!0;case 10:a=r;break}if(a===-1)break;e(t.subarray(u,a),n),u=r,n=-1}u===o?t=void 0:u!==0&&(t=t.subarray(u),r-=u)}}function Hy(e,t,r){let n=Ky(),i=new TextDecoder;return function(a,o){if(a.length===0)r?.(n),n=Ky();else if(o>0){let r=i.decode(a.subarray(0,o)),u=o+(a[o+1]===32?2:1),c=i.decode(a.subarray(u));switch(r){case"data":n.data=n.data?n.data+`\n`+c:c;break;case"event":n.event=c;break;case"id":e(n.id=c);break;case"retry":let r=parseInt(c,10);isNaN(r)||t(n.retry=r);break}}}}function Wy(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function Ky(){return{data:"",event:"",id:"",retry:void 0}}var Gy=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Jy="text/event-stream",Zy=1e3,Xy="last-event-id";function ev(){}function tv(e,t){var{signal:r,headers:n,onopen:i,onmessage:a,onclose:o,onerror:u,openWhenHidden:c,fetch:s}=t,l=Gy(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise(((t,d)=>{let f=Object.assign({},n);f.accept||(f.accept=Jy);let h;function p(){h?.abort(),document.hidden||b()}!c&&ev()&&document.addEventListener("visibilitychange",p);let g=Zy,y=0;function v(){ev()&&document.removeEventListener("visibilitychange",p),clearTimeout(y),h?.abort()}r?.addEventListener("abort",(()=>{v(),t()}));let m=s??m,w=i??rv;async function b(){var r;h=typeof AbortController>"u"?null:new AbortController;try{let r=await m(e,Object.assign(Object.assign({},l),{headers:f,signal:h?.signal}));await w(r),await By(r.body,Yy(Hy((e=>{e?f[Xy]=e:delete f[Xy]}),(e=>{g=e}),a))),o?.(),v(),t()}catch(e){if(!h?.signal.aborted)try{let t=(r=u?.(e))!==null&&r!==void 0?r:g;clearTimeout(y),y=setTimeout(b,t)}catch(e){v(),d(e)}}}b()}))}function rv(e){let t=e.headers.get("content-type");if(!t?.startsWith(Jy))throw new Error(`Expected content-type to be ${Jy}, Actual: ${t}`)}Pt(((e,t)=>e.generatedAnswer?.citations?.find((e=>e.id===t))),(e=>e));Pt((e=>e.search?.response?.extendedResults?.generativeQuestionAnsweringId),(e=>e));Pt((e=>e.generatedAnswer?.fieldsToIncludeInCitations),(e=>e));Pt((e=>e.pipeline),(e=>e));Pt((e=>e.query),(e=>e));Pt((e=>e.searchHub),(e=>e));function nv(e){return{status:e,isUninitialized:e==="uninitialized",isLoading:e==="pending",isSuccess:e==="fulfilled",isError:e==="rejected"}}function iv(e){return new RegExp("(^|:)//").test(e)}var av=e=>e.replace(/\/$/,""),ov=e=>e.replace(/^\//,"");function uv(e,t){if(!e)return t;if(!t)return e;if(iv(t))return t;let r=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=av(e),t=ov(t),`${e}${r}${t}`}var cv=e=>[].concat(...e);function sv(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}function lv(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}var dv=he;function fv(e,t){if(e===t||!(dv(e)&&dv(t)||Array.isArray(e)&&Array.isArray(t)))return t;let r=Object.keys(t),n=Object.keys(e),i=r.length===n.length,a=Array.isArray(t)?[]:{};for(let n of r)a[n]=fv(e[n],t[n]),i&&(i=e[n]===a[n]);return i?e:a}var hv=(...e)=>fetch(...e),pv=e=>e.status>=200&&e.status<=299,gv=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function yv(e){if(!he(e))return e;let t={...e};for(let[e,r]of Object.entries(t))r===void 0&&delete t[e];return t}function vv({baseUrl:e,prepareHeaders:t=(e=>e),fetchFn:r=hv,paramsSerializer:n,isJsonContentType:i=gv,jsonContentType:a="application/json",jsonReplacer:o,timeout:u,responseHandler:c,validateStatus:s,...l}={}){return typeof fetch>"u"&&r===hv&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(f,h)=>{let{signal:p,getState:g,extra:y,endpoint:v,forced:m,type:w}=h,b,{url:S,headers:I=new Headers(l.headers),params:q=void 0,responseHandler:O=c??"json",validateStatus:C=s??pv,timeout:x=u,...A}=typeof f=="string"?{url:f}:f,k={...l,signal:p,...A};I=new Headers(yv(I)),k.headers=await t(I,{getState:g,extra:y,endpoint:v,forced:m,type:w})||I;let j=e=>typeof e=="object"&&(he(e)||Array.isArray(e)||typeof e.toJSON=="function");if(!k.headers.has("content-type")&&j(k.body)&&k.headers.set("content-type",a),j(k.body)&&i(k.headers)&&(k.body=JSON.stringify(k.body,o)),q){let e=~S.indexOf("?")?"&":"?",t=n?n(q):new URLSearchParams(yv(q));S+=e+t}S=uv(e,S);let R=new Request(S,k);b={request:new Request(S,k)};let T,M=!1,E=x&&setTimeout((()=>{M=!0,h.abort()}),x);try{T=await r(R)}catch(e){return{error:{status:M?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(e)},meta:b}}finally{E&&clearTimeout(E)}let P=T.clone();b.response=P;let D,F="";try{let e;if(await Promise.all([d(T,O).then((e=>D=e),(t=>e=t)),P.text().then((e=>F=e),(()=>{}))]),e)throw e}catch(e){return{error:{status:"PARSING_ERROR",originalStatus:T.status,data:F,error:String(e)},meta:b}}return C(T,D)?{data:D,meta:b}:{error:{status:T.status,data:D},meta:b}};async function d(e,t){if(typeof t=="function")return t(e);if(t==="content-type"&&(t=i(e.headers)?"json":"text"),t==="json"){let t=await e.text();return t.length?JSON.parse(t):null}return e.text()}}var mv=class{constructor(e,t=void 0){this.value=e,this.meta=t}};async function wv(e=0,t=5){let r=Math.min(e,t),n=~~((Math.random()+.4)*(300<<r));await new Promise((e=>setTimeout((t=>e(t)),n)))}function bv(e){throw Object.assign(new mv({error:e}),{throwImmediately:!0})}var Sv={},Iv=(e,t)=>async(r,n,i)=>{let a=[5,(t||Sv).maxRetries,(i||Sv).maxRetries].filter((e=>e!==void 0)),[o]=a.slice(-1),u={maxRetries:o,backoff:wv,retryCondition:(e,t,{attempt:r})=>r<=o,...t,...i},c=0;for(;;)try{let t=await e(r,n,i);if(t.error)throw new mv(t);return t}catch(e){if(c++,e.throwImmediately){if(e instanceof mv)return e.value;throw e}if(e instanceof mv&&!u.retryCondition(e.value.error,r,{attempt:c,baseQueryApi:n,extraOptions:i}))return e.value;await u.backoff(c,u.maxRetries)}},qv=Object.assign(Iv,{fail:bv}),Ov=Nt("__rtkq/focused"),Cv=Nt("__rtkq/unfocused"),xv=Nt("__rtkq/online"),Av=Nt("__rtkq/offline");function kv(e){return e.type==="query"}function jv(e){return e.type==="mutation"}function Rv(e,t,r,n,i,a){return Tv(e)?e(t,r,n,i).map(Mv).map(a):Array.isArray(e)?e.map(Mv).map(a):[]}function Tv(e){return typeof e=="function"}function Mv(e){return typeof e=="string"?{type:e}:e}function Ev(e){return e!=null}function Pv(e){let t=0;for(let r in e)t++;return t}function Dv(e,t){return e.catch(t)}var Fv=Symbol("forceQueryFn"),$v=e=>typeof e[Fv]=="function";function Uv({serializeQueryArgs:e,queryThunk:t,mutationThunk:r,api:n,context:i}){let a=new Map,o=new Map,{unsubscribeQueryResult:u,removeMutationResult:c,updateSubscriptionOptions:s}=n.internalActions;return{buildInitiateQuery:p,buildInitiateMutation:g,getRunningQueryThunk:l,getRunningMutationThunk:d,getRunningQueriesThunk:f,getRunningMutationsThunk:h};function l(t,r){return n=>{let o=i.endpointDefinitions[t],u=e({queryArgs:r,endpointDefinition:o,endpointName:t});return a.get(n)?.[u]}}function d(e,t){return e=>o.get(e)?.[t]}function f(){return e=>Object.values(a.get(e)||{}).filter(Ev)}function h(){return e=>Object.values(o.get(e)||{}).filter(Ev)}function p(r,i){let o=(c,{subscribe:l=!0,forceRefetch:d,subscriptionOptions:f,[Fv]:h,...p}={})=>(g,y)=>{let v=e({queryArgs:c,endpointDefinition:i,endpointName:r}),m=t({...p,type:"query",subscribe:l,forceRefetch:d,subscriptionOptions:f,endpointName:r,originalArgs:c,queryCacheKey:v,[Fv]:h}),w=n.endpoints[r].select(c),b=g(m),S=w(y());let{requestId:I,abort:q}=b,O=S.requestId!==I,C=a.get(g)?.[v],x=()=>w(y()),A=Object.assign(h?b.then(x):O&&!C?Promise.resolve(S):Promise.all([C,b]).then(x),{arg:c,requestId:I,subscriptionOptions:f,queryCacheKey:v,abort:q,async unwrap(){let e=await A;if(e.isError)throw e.error;return e.data},refetch:()=>g(o(c,{subscribe:!1,forceRefetch:!0})),unsubscribe(){l&&g(u({queryCacheKey:v,requestId:I}))},updateSubscriptionOptions(e){A.subscriptionOptions=e,g(s({endpointName:r,requestId:I,queryCacheKey:v,options:e}))}});if(!C&&!O&&!h){let e=a.get(g)||{};e[v]=A,a.set(g,e),A.then((()=>{delete e[v],Pv(e)||a.delete(g)}))}return A};return o}function g(e){return(t,{track:n=!0,fixedCacheKey:i}={})=>(a,u)=>{let s=r({type:"mutation",endpointName:e,originalArgs:t,track:n,fixedCacheKey:i}),l=a(s);let{requestId:d,abort:f,unwrap:h}=l,p=Dv(l.unwrap().then((e=>({data:e}))),(e=>({error:e}))),g=()=>{a(c({requestId:d,fixedCacheKey:i}))},y=Object.assign(p,{arg:l.arg,requestId:d,abort:f,unwrap:h,reset:g}),v=o.get(a)||{};return o.set(a,v),v[d]=y,y.then((()=>{delete v[d],Pv(v)||o.delete(a)})),i&&(v[i]=y,y.then((()=>{v[i]===y&&(delete v[i],Pv(v)||o.delete(a))}))),y}}}function Qv(e){return e}function Vv({reducerPath:e,baseQuery:t,context:{endpointDefinitions:r},serializeQueryArgs:n,api:i,assertTagType:a}){let o=(e,t,o,u)=>(c,s)=>{let l=r[e],d=n({queryArgs:t,endpointDefinition:l,endpointName:e});if(c(i.internalActions.queryResultPatched({queryCacheKey:d,patches:o})),!u)return;let f=i.endpoints[e].select(t)(s()),h=Rv(l.providesTags,f.data,void 0,t,{},a);c(i.internalActions.updateProvidedBy({queryCacheKey:d,providedTags:h}))},u=(e,t,r,n=!0)=>(a,o)=>{let u=i.endpoints[e].select(t)(o()),c={patches:[],inversePatches:[],undo:()=>a(i.util.patchQueryData(e,t,c.inversePatches,n))};if(u.status==="uninitialized")return c;let s;if("data"in u)if(xe(u.data)){let[e,t,n]=wt(u.data,r);c.patches.push(...t),c.inversePatches.push(...n),s=e}else s=r(u.data),c.patches.push({op:"replace",path:[],value:s}),c.inversePatches.push({op:"replace",path:[],value:u.data});return c.patches.length===0||a(i.util.patchQueryData(e,t,c.patches,n)),c},c=(e,t,r)=>n=>n(i.endpoints[e].initiate(t,{subscribe:!1,forceRefetch:!0,[Fv]:()=>({data:r})})),s=async(e,{signal:n,abort:i,rejectWithValue:a,fulfillWithValue:o,dispatch:u,getState:c,extra:s})=>{let d=r[e.endpointName];try{let r=Qv,a,f={signal:n,abort:i,dispatch:u,getState:c,extra:s,endpoint:e.endpointName,type:e.type,forced:e.type==="query"?l(e,c()):void 0},h=e.type==="query"?e[Fv]:void 0;if(h?a=h():d.query?(a=await t(d.query(e.originalArgs),f,d.extraOptions),d.transformResponse&&(r=d.transformResponse)):a=await d.queryFn(e.originalArgs,f,d.extraOptions,(e=>t(e,f,d.extraOptions))),a.error)throw new mv(a.error,a.meta);return o(await r(a.data,a.meta,e.originalArgs),{fulfilledTimeStamp:Date.now(),baseQueryMeta:a.meta,[Wt]:!0})}catch(t){let r=t;if(r instanceof mv){let t=Qv;d.query&&d.transformErrorResponse&&(t=d.transformErrorResponse);try{return a(await t(r.value,r.meta,e.originalArgs),{baseQueryMeta:r.meta,[Wt]:!0})}catch(e){r=e}}throw console.error(r),r}};function l(t,r){let n=r[e]?.queries?.[t.queryCacheKey],i=r[e]?.config.refetchOnMountOrArgChange,a=n?.fulfilledTimeStamp,o=t.forceRefetch??(t.subscribe&&i);return o?o===!0||(Number(new Date)-Number(a))/1e3>=o:!1}let d=Sr(`${e}/executeQuery`,s,{getPendingMeta(){return{startedTimeStamp:Date.now(),[Wt]:!0}},condition(t,{getState:n}){let i=n(),a=i[e]?.queries?.[t.queryCacheKey],o=a?.fulfilledTimeStamp,u=t.originalArgs,c=a?.originalArgs,s=r[t.endpointName];return $v(t)?!0:a?.status==="pending"?!1:l(t,i)||kv(s)&&s?.forceRefetch?.({currentArg:u,previousArg:c,endpointState:a,state:i})?!0:!o},dispatchConditionRejection:!0}),f=Sr(`${e}/executeMutation`,s,{getPendingMeta(){return{startedTimeStamp:Date.now(),[Wt]:!0}}}),h=e=>"force"in e,p=e=>"ifOlderThan"in e,g=(e,t,r)=>(n,a)=>{let o=h(r)&&r.force,u=p(r)&&r.ifOlderThan,c=(r=!0)=>{let n={forceRefetch:r,isPrefetch:!0};return i.endpoints[e].initiate(t,n)},s=i.endpoints[e].select(t)(a());if(o)n(c());else if(u){let e=s?.fulfilledTimeStamp;if(!e){n(c());return}(Number(new Date)-Number(new Date(e)))/1e3>=u&&n(c())}else n(c(!1))};function y(e){return t=>t?.meta?.arg?.endpointName===e}function v(e,t){return{matchPending:sr(fr(e),y(t)),matchFulfilled:sr(gr(e),y(t)),matchRejected:sr(hr(e),y(t))}}return{queryThunk:d,mutationThunk:f,prefetch:g,updateQueryData:u,upsertQueryData:c,patchQueryData:o,buildMatchThunkActions:v}}function _v(e,t,r,n){return Rv(r[e.meta.arg.endpointName][t],gr(e)?e.payload:void 0,pr(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,n)}function Nv(e,t,r){let n=e[t];n&&r(n)}function Lv(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function zv(e,t,r){let n=e[Lv(t)];n&&r(n)}var Bv={};function Yv({reducerPath:e,queryThunk:t,mutationThunk:r,context:{endpointDefinitions:n,apiUid:i,extractRehydrationInfo:a,hasRehydrationInfo:o},assertTagType:u,config:c}){let s=Nt(`${e}/resetApiState`),l=kr({name:`${e}/queries`,initialState:Bv,reducers:{removeQueryResult:{reducer(e,{payload:{queryCacheKey:t}}){delete e[t]},prepare:Kt()},queryResultPatched:{reducer(e,{payload:{queryCacheKey:t,patches:r}}){Nv(e,t,(e=>{e.data=bt(e.data,r.concat())}))},prepare:Kt()}},extraReducers(e){e.addCase(t.pending,((e,{meta:t,meta:{arg:r}})=>{var n;let i=$v(r);e[n=r.queryCacheKey]??(e[n]={status:"uninitialized",endpointName:r.endpointName}),Nv(e,r.queryCacheKey,(e=>{e.status="pending",e.requestId=i&&e.requestId?e.requestId:t.requestId,r.originalArgs!==void 0&&(e.originalArgs=r.originalArgs),e.startedTimeStamp=t.startedTimeStamp}))})).addCase(t.fulfilled,((e,{meta:t,payload:r})=>{Nv(e,t.arg.queryCacheKey,(e=>{if(e.requestId!==t.requestId&&!$v(t.arg))return;let{merge:i}=n[t.arg.endpointName];if(e.status="fulfilled",i)if(e.data!==void 0){let{fulfilledTimeStamp:n,arg:a,baseQueryMeta:o,requestId:u}=t,c=mt(e.data,(e=>i(e,r,{arg:a.originalArgs,baseQueryMeta:o,fulfilledTimeStamp:n,requestId:u})));e.data=c}else e.data=r;else e.data=n[t.arg.endpointName].structuralSharing??!0?fv(Ce(e.data)?je(e.data):e.data,r):r;delete e.error,e.fulfilledTimeStamp=t.fulfilledTimeStamp}))})).addCase(t.rejected,((e,{meta:{condition:t,arg:r,requestId:n},error:i,payload:a})=>{Nv(e,r.queryCacheKey,(e=>{if(!t){if(e.requestId!==n)return;e.status="rejected",e.error=a??i}}))})).addMatcher(o,((e,t)=>{let{queries:r}=a(t);for(let[t,n]of Object.entries(r))(n?.status==="fulfilled"||n?.status==="rejected")&&(e[t]=n)}))}}),d=kr({name:`${e}/mutations`,initialState:Bv,reducers:{removeMutationResult:{reducer(e,{payload:t}){let r=Lv(t);r in e&&delete e[r]},prepare:Kt()}},extraReducers(e){e.addCase(r.pending,((e,{meta:t,meta:{requestId:r,arg:n,startedTimeStamp:i}})=>{n.track&&(e[Lv(t)]={requestId:r,status:"pending",endpointName:n.endpointName,startedTimeStamp:i})})).addCase(r.fulfilled,((e,{payload:t,meta:r})=>{r.arg.track&&zv(e,r,(e=>{e.requestId===r.requestId&&(e.status="fulfilled",e.data=t,e.fulfilledTimeStamp=r.fulfilledTimeStamp)}))})).addCase(r.rejected,((e,{payload:t,error:r,meta:n})=>{n.arg.track&&zv(e,n,(e=>{e.requestId===n.requestId&&(e.status="rejected",e.error=t??r)}))})).addMatcher(o,((e,t)=>{let{mutations:r}=a(t);for(let[t,n]of Object.entries(r))(n?.status==="fulfilled"||n?.status==="rejected")&&t!==n?.requestId&&(e[t]=n)}))}}),f=kr({name:`${e}/invalidation`,initialState:Bv,reducers:{updateProvidedBy:{reducer(e,t){var r,n;let{queryCacheKey:i,providedTags:a}=t.payload;for(let t of Object.values(e))for(let e of Object.values(t)){let t=e.indexOf(i);t!==-1&&e.splice(t,1)}for(let{type:t,id:o}of a){let a=(r=e[t]??(e[t]={}))[n=o||"__internal_without_id"]??(r[n]=[]);a.includes(i)||a.push(i)}},prepare:Kt()}},extraReducers(e){e.addCase(l.actions.removeQueryResult,((e,{payload:{queryCacheKey:t}})=>{for(let r of Object.values(e))for(let e of Object.values(r)){let r=e.indexOf(t);r!==-1&&e.splice(r,1)}})).addMatcher(o,((e,t)=>{var r,n;let{provided:i}=a(t);for(let[t,a]of Object.entries(i))for(let[i,o]of Object.entries(a)){let a=(r=e[t]??(e[t]={}))[n=i||"__internal_without_id"]??(r[n]=[]);for(let e of o)a.includes(e)||a.push(e)}})).addMatcher(cr(gr(t),pr(t)),((e,t)=>{let r=_v(t,"providesTags",n,u),{queryCacheKey:i}=t.meta.arg;f.caseReducers.updateProvidedBy(e,f.actions.updateProvidedBy({queryCacheKey:i,providedTags:r}))}))}}),h=kr({name:`${e}/subscriptions`,initialState:Bv,reducers:{updateSubscriptionOptions(e,t){},unsubscribeQueryResult(e,t){},internal_getRTKQSubscriptions(){}}}),p=kr({name:`${e}/internalSubscriptions`,initialState:Bv,reducers:{subscriptionsUpdated:{reducer(e,t){return bt(e,t.payload)},prepare:Kt()}}}),g=kr({name:`${e}/config`,initialState:{online:sv(),focused:lv(),middlewareRegistered:!1,...c},reducers:{middlewareRegistered(e,{payload:t}){e.middlewareRegistered=e.middlewareRegistered==="conflict"||i!==t?"conflict":!0}},extraReducers:e=>{e.addCase(xv,(e=>{e.online=!0})).addCase(Av,(e=>{e.online=!1})).addCase(Ov,(e=>{e.focused=!0})).addCase(Cv,(e=>{e.focused=!1})).addMatcher(o,(e=>({...e})))}}),y=ye({queries:l.reducer,mutations:d.reducer,provided:f.reducer,subscriptions:p.reducer,config:g.reducer}),v=(e,t)=>y(s.match(t)?void 0:e,t),m={...g.actions,...l.actions,...h.actions,...p.actions,...d.actions,...f.actions,resetApiState:s};return{reducer:v,actions:m}}var Hv=Symbol.for("RTKQ/skipToken"),Wv={status:"uninitialized"},Kv=mt(Wv,(()=>{})),Gv=mt(Wv,(()=>{}));function Jv({serializeQueryArgs:e,reducerPath:t,createSelector:r}){let n=e=>Kv,i=e=>Gv;return{buildQuerySelector:u,buildMutationSelector:c,selectInvalidatedBy:s,selectCachedArgsForQuery:l};function a(e){return{...e,...nv(e.status)}}function o(e){return e[t]}function u(t,i){return u=>{let c=e({queryArgs:u,endpointDefinition:i,endpointName:t});return r(u===Hv?n:e=>o(e)?.queries?.[c]??Kv,a)}}function c(){return e=>{let t;return typeof e=="object"?t=Lv(e)??Hv:t=e,r(t===Hv?i:e=>o(e)?.mutations?.[t]??Gv,a)}}function s(e,r){let n=e[t],i=new Set;for(let e of r.map(Mv)){let t=n.provided[e.type];if(!t)continue;let r=(e.id!==void 0?t[e.id]:cv(Object.values(t)))??[];for(let e of r)i.add(e)}return cv(Array.from(i.values()).map((e=>{let t=n.queries[e];return t?[{queryCacheKey:e,endpointName:t.endpointName,originalArgs:t.originalArgs}]:[]})))}function l(e,r){return Object.values(e[t].queries).filter((e=>e?.endpointName===r&&e.status!=="uninitialized")).map((e=>e.originalArgs))}}var Zv=WeakMap?new WeakMap:void 0,Xv=({endpointName:e,queryArgs:t})=>{let r="",n=Zv?.get(t);if(typeof n=="string")r=n;else{let e=JSON.stringify(t,((e,t)=>(t=typeof t=="bigint"?{$bigint:t.toString()}:t,t=he(t)?Object.keys(t).sort().reduce(((e,r)=>(e[r]=t[r],e)),{}):t,t)));he(t)&&Zv?.set(t,e),r=e}return`${e}(${r})`};function em(...e){return function(t){let r=Mt((e=>t.extractRehydrationInfo?.(e,{reducerPath:t.reducerPath??"api"}))),n={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...t,extractRehydrationInfo:r,serializeQueryArgs(e){let r=Xv;if("serializeQueryArgs"in e.endpointDefinition){let t=e.endpointDefinition.serializeQueryArgs;r=e=>{let r=t(e);return typeof r=="string"?r:Xv({...e,queryArgs:r})}}else t.serializeQueryArgs&&(r=t.serializeQueryArgs);return r(e)},tagTypes:[...t.tagTypes||[]]},i={endpointDefinitions:{},batch(e){e()},apiUid:or(),extractRehydrationInfo:r,hasRehydrationInfo:Mt((e=>r(e)!=null))},a={injectEndpoints:u,enhanceEndpoints({addTagTypes:e,endpoints:t}){if(e)for(let t of e)n.tagTypes.includes(t)||n.tagTypes.push(t);if(t)for(let[e,r]of Object.entries(t))typeof r=="function"?r(i.endpointDefinitions[e]):Object.assign(i.endpointDefinitions[e]||{},r);return a}},o=e.map((e=>e.init(a,n,i)));function u(e){let t=e.endpoints({query:e=>({...e,type:"query"}),mutation:e=>({...e,type:"mutation"})});for(let[r,n]of Object.entries(t)){if(e.overrideExisting!==!0&&r in i.endpointDefinitions){if(e.overrideExisting==="throw")throw new Error(_r(39));continue}i.endpointDefinitions[r]=n;for(let e of o)e.injectEndpoint(r,n)}return a}return a.injectEndpoints({endpoints:t.endpoints})}}function tm(e){for(let t in e)return!1;return!0}var rm=2147483647/1e3-1,nm=({reducerPath:e,api:t,queryThunk:r,context:n,internalState:i})=>{let{removeQueryResult:a,unsubscribeQueryResult:o}=t.internalActions,u=cr(o.match,r.fulfilled,r.rejected);function c(e){let t=i.currentSubscriptions[e];return!!t&&!tm(t)}let s={},l=(r,i,a)=>{if(u(r)){let t=i.getState()[e],{queryCacheKey:n}=o.match(r)?r.payload:r.meta.arg;d(n,t.queries[n]?.endpointName,i,t.config)}if(t.util.resetApiState.match(r))for(let[e,t]of Object.entries(s))t&&clearTimeout(t),delete s[e];if(n.hasRehydrationInfo(r)){let t=i.getState()[e],{queries:a}=n.extractRehydrationInfo(r);for(let[e,r]of Object.entries(a))d(e,r?.endpointName,i,t.config)}};function d(e,t,r,i){let o=n.endpointDefinitions[t]?.keepUnusedDataFor??i.keepUnusedDataFor;if(o===1/0)return;let u=Math.max(0,Math.min(o,rm));if(!c(e)){let t=s[e];t&&clearTimeout(t),s[e]=setTimeout((()=>{c(e)||r.dispatch(a({queryCacheKey:e})),delete s[e]}),u*1e3)}}return l},im=({reducerPath:e,context:t,context:{endpointDefinitions:r},mutationThunk:n,queryThunk:i,api:a,assertTagType:o,refetchQuery:u,internalState:c})=>{let{removeQueryResult:s}=a.internalActions,l=cr(gr(n),pr(n)),d=cr(gr(n,i),hr(n,i)),f=[],h=(e,t)=>{l(e)?g(_v(e,"invalidatesTags",r,o),t):d(e)?g([],t):a.util.invalidateTags.match(e)&&g(Rv(e.payload,void 0,void 0,void 0,void 0,o),t)};function p(e){for(let t in e.queries)if(e.queries[t]?.status==="pending")return!0;for(let t in e.mutations)if(e.mutations[t]?.status==="pending")return!0;return!1}function g(r,n){let i=n.getState(),o=i[e];if(f.push(...r),o.config.invalidationBehavior==="delayed"&&p(o))return;let l=f;if(f=[],l.length===0)return;let d=a.util.selectInvalidatedBy(i,l);t.batch((()=>{let e=Array.from(d.values());for(let{queryCacheKey:t}of e){let e=o.queries[t],r=c.currentSubscriptions[t]??{};e&&(Pv(r)===0?n.dispatch(s({queryCacheKey:t})):e.status!=="uninitialized"&&n.dispatch(u(e,t)))}}))}return h},am=({reducerPath:e,queryThunk:t,api:r,refetchQuery:n,internalState:i})=>{let a={},o=(e,n)=>{(r.internalActions.updateSubscriptionOptions.match(e)||r.internalActions.unsubscribeQueryResult.match(e))&&c(e.payload,n),(t.pending.match(e)||t.rejected.match(e)&&e.meta.condition)&&c(e.meta.arg,n),(t.fulfilled.match(e)||t.rejected.match(e)&&!e.meta.condition)&&u(e.meta.arg,n),r.util.resetApiState.match(e)&&l()};function u({queryCacheKey:t},r){let o=r.getState()[e],c=o.queries[t],s=i.currentSubscriptions[t];if(!c||c.status==="uninitialized")return;let{lowestPollingInterval:l,skipPollingIfUnfocused:f}=d(s);if(!Number.isFinite(l))return;let h=a[t];h?.timeout&&(clearTimeout(h.timeout),h.timeout=void 0);let p=Date.now()+l;a[t]={nextPollTimestamp:p,pollingInterval:l,timeout:setTimeout((()=>{(o.config.focused||!f)&&r.dispatch(n(c,t)),u({queryCacheKey:t},r)}),l)}}function c({queryCacheKey:t},r){let n=r.getState()[e].queries[t],o=i.currentSubscriptions[t];if(!n||n.status==="uninitialized")return;let{lowestPollingInterval:c}=d(o);if(!Number.isFinite(c)){s(t);return}let l=a[t],f=Date.now()+c;(!l||f<l.nextPollTimestamp)&&u({queryCacheKey:t},r)}function s(e){let t=a[e];t?.timeout&&clearTimeout(t.timeout),delete a[e]}function l(){for(let e of Object.keys(a))s(e)}function d(e={}){let t=!1,r=Number.POSITIVE_INFINITY;for(let n in e)e[n].pollingInterval&&(r=Math.min(e[n].pollingInterval,r),t=e[n].skipPollingIfUnfocused||t);return{lowestPollingInterval:r,skipPollingIfUnfocused:t}}return o},om=({reducerPath:e,context:t,api:r,refetchQuery:n,internalState:i})=>{let{removeQueryResult:a}=r.internalActions,o=(e,t)=>{Ov.match(e)&&u(t,"refetchOnFocus"),xv.match(e)&&u(t,"refetchOnReconnect")};function u(r,o){let u=r.getState()[e],c=u.queries,s=i.currentSubscriptions;t.batch((()=>{for(let e of Object.keys(s)){let t=c[e],i=s[e];if(!i||!t)continue;(Object.values(i).some((e=>e[o]===!0))||Object.values(i).every((e=>e[o]===void 0))&&u.config[o])&&(Pv(i)===0?r.dispatch(a({queryCacheKey:e})):t.status!=="uninitialized"&&r.dispatch(n(t,e)))}}))}return o},um=new Error("Promise never resolved before cacheEntryRemoved."),cm=({api:e,reducerPath:t,context:r,queryThunk:n,mutationThunk:i,internalState:a})=>{let o=yr(n),u=yr(i),c=gr(n,i),s={},l=(r,a,o)=>{let u=d(r);if(n.pending.match(r)){let e=o[t].queries[u],n=a.getState()[t].queries[u];!e&&n&&f(r.meta.arg.endpointName,r.meta.arg.originalArgs,u,a,r.meta.requestId)}else if(i.pending.match(r))a.getState()[t].mutations[u]&&f(r.meta.arg.endpointName,r.meta.arg.originalArgs,u,a,r.meta.requestId);else if(c(r)){let e=s[u];e?.valueResolved&&(e.valueResolved({data:r.payload,meta:r.meta.baseQueryMeta}),delete e.valueResolved)}else if(e.internalActions.removeQueryResult.match(r)||e.internalActions.removeMutationResult.match(r)){let e=s[u];e&&(delete s[u],e.cacheEntryRemoved())}else if(e.util.resetApiState.match(r))for(let[e,t]of Object.entries(s))delete s[e],t.cacheEntryRemoved()};function d(t){return o(t)?t.meta.arg.queryCacheKey:u(t)?t.meta.arg.fixedCacheKey??t.meta.requestId:e.internalActions.removeQueryResult.match(t)?t.payload.queryCacheKey:e.internalActions.removeMutationResult.match(t)?Lv(t.payload):""}function f(t,n,i,a,o){let u=r.endpointDefinitions[t],c=u?.onCacheEntryAdded;if(!c)return;let l={},d=new Promise((e=>{l.cacheEntryRemoved=e})),f=Promise.race([new Promise((e=>{l.valueResolved=e})),d.then((()=>{throw um}))]);f.catch((()=>{})),s[i]=l;let h=e.endpoints[t].select(u.type==="query"?n:i),p=a.dispatch(((e,t,r)=>r)),g={...a,getCacheEntry:()=>h(a.getState()),requestId:o,extra:p,updateCachedData:u.type==="query"?r=>a.dispatch(e.util.updateQueryData(t,n,r)):void 0,cacheDataLoaded:f,cacheEntryRemoved:d},y=c(n,g);Promise.resolve(y).catch((e=>{if(e!==um)throw e}))}return l},sm=({api:e,context:t,queryThunk:r,mutationThunk:n})=>{let i=fr(r,n),a=hr(r,n),o=gr(r,n),u={};return(r,n)=>{if(i(r)){let{requestId:i,arg:{endpointName:a,originalArgs:o}}=r.meta,c=t.endpointDefinitions[a],s=c?.onQueryStarted;if(s){let t={},r=new Promise(((e,r)=>{t.resolve=e,t.reject=r}));r.catch((()=>{})),u[i]=t;let l=e.endpoints[a].select(c.type==="query"?o:i),d=n.dispatch(((e,t,r)=>r)),f={...n,getCacheEntry:()=>l(n.getState()),requestId:i,extra:d,updateCachedData:c.type==="query"?t=>n.dispatch(e.util.updateQueryData(a,o,t)):void 0,queryFulfilled:r};s(o,f)}}else if(o(r)){let{requestId:e,baseQueryMeta:t}=r.meta;u[e]?.resolve({data:r.payload,meta:t}),delete u[e]}else if(a(r)){let{requestId:e,rejectedWithValue:t,baseQueryMeta:n}=r.meta;u[e]?.reject({error:r.payload??r.error,isUnhandledError:!t,meta:n}),delete u[e]}}},lm=({api:e,context:{apiUid:t},reducerPath:r})=>(r,n)=>{e.util.resetApiState.match(r)&&n.dispatch(e.internalActions.middlewareRegistered(t))},dm=({api:e,queryThunk:t,internalState:r})=>{let n=`${e.reducerPath}/subscriptions`,i=null,a=null,{updateSubscriptionOptions:o,unsubscribeQueryResult:u}=e.internalActions,c=(r,n)=>{var i,a;if(o.match(n)){let{queryCacheKey:e,requestId:t,options:i}=n.payload;return r?.[e]?.[t]&&(r[e][t]=i),!0}if(u.match(n)){let{queryCacheKey:e,requestId:t}=n.payload;return r[e]&&delete r[e][t],!0}if(e.internalActions.removeQueryResult.match(n))return delete r[n.payload.queryCacheKey],!0;if(t.pending.match(n)){let{meta:{arg:e,requestId:t}}=n,a=r[i=e.queryCacheKey]??(r[i]={});return a[`${t}_running`]={},e.subscribe&&(a[t]=e.subscriptionOptions??a[t]??{}),!0}let c=!1;if(t.fulfilled.match(n)||t.rejected.match(n)){let e=r[n.meta.arg.queryCacheKey]||{},t=`${n.meta.requestId}_running`;c||(c=!!e[t]),delete e[t]}if(t.rejected.match(n)){let{meta:{condition:e,arg:t,requestId:i}}=n;if(e&&t.subscribe){let e=r[a=t.queryCacheKey]??(r[a]={});e[i]=t.subscriptionOptions??e[i]??{},c=!0}}return c},s=()=>r.currentSubscriptions,l={getSubscriptions:s,getSubscriptionCount:e=>{let t=s()[e]??{};return Pv(t)},isRequestSubscribed:(e,t)=>!!s()?.[e]?.[t]};return(o,u)=>{if(i||(i=JSON.parse(JSON.stringify(r.currentSubscriptions))),e.util.resetApiState.match(o))return i=r.currentSubscriptions={},a=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(o))return[!1,l];let s=c(r.currentSubscriptions,o),d=!0;if(s){a||(a=setTimeout((()=>{let t=JSON.parse(JSON.stringify(r.currentSubscriptions)),[,n]=wt(i,(()=>t));u.next(e.internalActions.subscriptionsUpdated(n)),i=t,a=null}),500));let c=typeof o.type=="string"&&!!o.type.startsWith(n),s=t.rejected.match(o)&&o.meta.condition&&!!o.meta.arg.subscribe;d=!c&&!s}return[d,!1]}};function fm(e){let{reducerPath:t,queryThunk:r,api:n,context:i}=e,{apiUid:a}=i,o={invalidateTags:Nt(`${t}/invalidateTags`)},u=e=>e.type.startsWith(`${t}/`),c=[lm,nm,im,am,cm,sm];return{middleware:r=>{let o=!1,l={...e,internalState:{currentSubscriptions:{}},refetchQuery:s,isThisApiSliceAction:u},d=c.map((e=>e(l))),f=dm(l),h=om(l);return e=>c=>{if(!we(c))return e(c);o||(o=!0,r.dispatch(n.internalActions.middlewareRegistered(a)));let s={...r,next:e},l=r.getState(),[p,g]=f(c,s,l),y;if(p?y=e(c):y=g,r.getState()[t]&&(h(c,s,l),u(c)||i.hasRehydrationInfo(c)))for(let e of d)e(c,s,l);return y}},actions:o};function s(e,t,n={}){return r({type:"query",endpointName:e.endpointName,originalArgs:e.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:t,...n})}}function hm(e,...t){return Object.assign(e,...t)}var pm=Symbol(),gm=({createSelector:e=Pt}={})=>({name:pm,init(t,{baseQuery:r,tagTypes:n,reducerPath:i,serializeQueryArgs:a,keepUnusedDataFor:o,refetchOnMountOrArgChange:u,refetchOnFocus:c,refetchOnReconnect:s,invalidationBehavior:l},d){yt();let f=e=>e;Object.assign(t,{reducerPath:i,endpoints:{},internalActions:{onOnline:xv,onOffline:Av,onFocus:Ov,onFocusLost:Cv},util:{}});let{queryThunk:h,mutationThunk:p,patchQueryData:g,updateQueryData:y,upsertQueryData:v,prefetch:m,buildMatchThunkActions:w}=Vv({baseQuery:r,reducerPath:i,context:d,api:t,serializeQueryArgs:a,assertTagType:f}),{reducer:b,actions:S}=Yv({context:d,queryThunk:h,mutationThunk:p,reducerPath:i,assertTagType:f,config:{refetchOnFocus:c,refetchOnReconnect:s,refetchOnMountOrArgChange:u,keepUnusedDataFor:o,reducerPath:i,invalidationBehavior:l}});hm(t.util,{patchQueryData:g,updateQueryData:y,upsertQueryData:v,prefetch:m,resetApiState:S.resetApiState}),hm(t.internalActions,S);let{middleware:I,actions:q}=fm({reducerPath:i,context:d,queryThunk:h,mutationThunk:p,api:t,assertTagType:f});hm(t.util,q),hm(t,{reducer:b,middleware:I});let{buildQuerySelector:O,buildMutationSelector:C,selectInvalidatedBy:x,selectCachedArgsForQuery:A}=Jv({serializeQueryArgs:a,reducerPath:i,createSelector:e});hm(t.util,{selectInvalidatedBy:x,selectCachedArgsForQuery:A});let{buildInitiateQuery:k,buildInitiateMutation:j,getRunningMutationThunk:R,getRunningMutationsThunk:T,getRunningQueriesThunk:M,getRunningQueryThunk:E}=Uv({queryThunk:h,mutationThunk:p,api:t,serializeQueryArgs:a,context:d});return hm(t.util,{getRunningMutationThunk:R,getRunningMutationsThunk:T,getRunningQueryThunk:E,getRunningQueriesThunk:M}),{name:pm,injectEndpoint(e,r){var n;let i=t;(n=i.endpoints)[e]??(n[e]={}),kv(r)?hm(i.endpoints[e],{name:e,select:O(e,r),initiate:k(e,r)},w(h,e)):jv(r)&&hm(i.endpoints[e],{name:e,select:C(),initiate:j(e)},w(p,e))}}}}),ym=em(gm());var vm=async(e,t,r)=>{let n=t.getState(),{accessToken:i,organizationId:a,platformUrl:o}=n.configuration,u={...e,headers:{...e?.headers||{},Authorization:`Bearer ${i}`}};try{return{data:vv({baseUrl:`${o}/rest/organizations/${a}`})(u,t,r)}}catch(e){return{error:e}}},mm=ym({reducerPath:"answer",baseQuery:qv(vm,{maxRetries:3}),endpoints:()=>({})});var wm=(e,t)=>{let{answerStyle:r,contentFormat:n}=t;e.answerStyle=r,e.contentFormat=n,e.isStreaming=!0,e.isLoading=!1},bm=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},Sm=(e,t)=>{e.citations=t.citations},Im=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},qm=(e,t)=>{e.error={message:t.errorMessage,code:t.code},e.isStreaming=!1,e.isLoading=!1,console.error(`${t.errorMessage} - code ${t.code}`)},Om=(e,t)=>{let r=JSON.parse(e.data);r.finishReason==="ERROR"&&r.errorMessage&&qm(t,r);let n=r.payload.length?JSON.parse(r.payload):{};switch(r.payloadType){case"genqa.headerMessageType":n.answerStyle&&n.contentFormat&&wm(t,n);break;case"genqa.messageType":n.textDelta&&bm(t,n);break;case"genqa.citationsType":n.citations&&Sm(t,n);break;case"genqa.endOfStreamType":n.answerGenerated&&Im(t,n);break}},Cm=mm.injectEndpoints({overrideExisting:!0,endpoints:e=>({getAnswer:e.query({queryFn:()=>({data:{answerStyle:void 0,contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!0,isLoading:!0}}),async onCacheEntryAdded(e,{getState:t,cacheDataLoaded:r,updateCachedData:n}){await r;let{configuration:i,generatedAnswer:a}=t(),{platformUrl:o,organizationId:u,accessToken:c}=i;await tv(`${o}/rest/organizations/${u}/answer/v1/configs/${a.answerConfigurationId}/generate`,{method:"POST",body:JSON.stringify(e),headers:{Authorization:`Bearer ${c}`,Accept:"application/json","Content-Type":"application/json","Accept-Encoding":"*"},fetch,onmessage:e=>{n((t=>{Om(e,t)}))},onerror:e=>{throw e}})}})})});var xm=()=>Ai,Am=()=>xi,km=Nt("configuration/updateBasicConfiguration",(e=>Ei(e,{accessToken:Ai,organizationId:Ai,platformUrl:Ai}))),jm=Nt("configuration/updateSearchConfiguration",(e=>Ei(e,{apiBaseUrl:Ai,pipeline:new ee({required:!1,emptyAllowed:!0}),searchHub:Ai,timezone:Ai,locale:Ai,authenticationProviders:new ie({required:!1,each:xi})}))),Rm={enabled:new G({default:!0}),originContext:xm(),originLevel2:xm(),originLevel3:xm(),apiBaseUrl:Ai,nextApiBaseUrl:Ai,runtimeEnvironment:new L,anonymous:new G({default:!1}),deviceId:Ai,userDisplayName:Ai,documentLocation:Ai,trackingId:Ai,analyticsMode:new ee({constrainTo:["legacy","next"],required:!1,default:"legacy"}),source:new re({options:{required:!1},values:ma.reduce(((e,t)=>(e[t]=Ri,e)),{})})},Tm=Nt("configuration/updateAnalyticsConfiguration",(e=>Ei(e,Rm))),Mm=Nt("configuration/analytics/disable"),Em=Nt("configuration/analytics/enable"),Pm=Nt("configuration/analytics/originlevel2",(e=>Ei(e,{originLevel2:Am()}))),Dm=Nt("configuration/analytics/originlevel3",(e=>Ei(e,{originLevel3:Am()})));var Fm=ir(va,(e=>e));function $m(){return typeof window<"u"&&typeof document<"u"}function Um(e){let t=e.payload?.analyticsAction;return Qm(e)&&!Y(t)}function Qm(e){return"type"in e}var Vm=e=>t=>r=>{let n;Um(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let i=t(r);return Qm(r)&&(r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r)),n!==void 0&&e.dispatch(n),i};var _m=d(j());var Nm=Nt("commerce/configuration/updateBasicConfiguration",(e=>Ei(e,{accessToken:Ai,organizationId:Ai,platformUrl:Ai}))),Lm=Nt("commerce/configuration/updateAnalyticsConfiguration",(e=>Ei(e,{enabled:Rm.enabled,source:Rm.source,trackingId:Rm.trackingId}))),zm=Nt("commerce/configuration/analytics/disable"),Bm=Nt("commerce/configuration/analytics/enable");Nt("tab/register",(e=>{let t=new re({values:{id:xi,expression:ki}});return Ei(e,t)}));var Ym=Nt("tab/updateActiveTab",(e=>Ei(e,xi)));var Hm=d(x()),Wm=d(R()),Km=d(T());Hm.default.extend(Km.default);Hm.default.extend(Wm.default);var Gm="/rest/search/v2",Jm="/rest/ua",Zm=()=>({organizationId:"",accessToken:"",platformUrl:si(),search:{apiBaseUrl:`${si()}${Gm}`,locale:"en-US",timezone:Hm.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${li()}${Jm}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy",source:{}},knowledge:{answerConfigurationId:""}});function Xm(e,t){if(Vd(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+Jm;let r=_d(e,t);return r?ci(t,r.environment).analytics:e}var ew=ir(Zm(),(e=>e.addCase(km,((e,t)=>{tw(e,t.payload)})).addCase(Nm,((e,t)=>{tw(e,t.payload)})).addCase(jm,((e,t)=>{t.payload.apiBaseUrl&&(e.search.apiBaseUrl=t.payload.apiBaseUrl),t.payload.locale&&(e.search.locale=t.payload.locale),t.payload.timezone&&(e.search.timezone=t.payload.timezone),t.payload.authenticationProviders&&(e.search.authenticationProviders=t.payload.authenticationProviders)})).addCase(Tm,((e,t)=>{Y(t.payload.enabled)||(e.analytics.enabled=t.payload.enabled),Y(t.payload.originContext)||(e.analytics.originContext=t.payload.originContext),Y(t.payload.originLevel2)||(e.analytics.originLevel2=t.payload.originLevel2),Y(t.payload.originLevel3)||(e.analytics.originLevel3=t.payload.originLevel3),Y(t.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=t.payload.apiBaseUrl),Y(t.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=t.payload.nextApiBaseUrl),Y(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),Y(t.payload.analyticsMode)||(e.analytics.analyticsMode=t.payload.analyticsMode),Y(t.payload.source)||(e.analytics.source=t.payload.source);let r=(0,_m.default)();r&&(e.analytics.analyticsMode="next",e.analytics.trackingId=r),Y(t.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.payload.runtimeEnvironment),Y(t.payload.anonymous)||(e.analytics.anonymous=t.payload.anonymous),Y(t.payload.deviceId)||(e.analytics.deviceId=t.payload.deviceId),Y(t.payload.userDisplayName)||(e.analytics.userDisplayName=t.payload.userDisplayName),Y(t.payload.documentLocation)||(e.analytics.documentLocation=t.payload.documentLocation)})).addCase(Lm,((e,t)=>{Y(t.payload.enabled)||(e.analytics.enabled=t.payload.enabled),Y(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),Y(t.payload.source)||(e.analytics.source=t.payload.source)})).addCase(Mm,(e=>{e.analytics.enabled=!1})).addCase(zm,(e=>{e.analytics.enabled=!1})).addCase(Em,(e=>{e.analytics.enabled=!0})).addCase(Bm,(e=>{e.analytics.enabled=!0})).addCase(Pm,((e,t)=>{e.analytics.originLevel2=t.payload.originLevel2})).addCase(Dm,((e,t)=>{e.analytics.originLevel3=t.payload.originLevel3})).addCase(Ym,((e,t)=>{e.analytics.originLevel2=t.payload})).addCase(Vl,((e,t)=>{e.analytics.originLevel2=t.payload.tab||e.analytics.originLevel2}))));function tw(e,t){t.accessToken&&(e.accessToken=t.accessToken),t.organizationId&&(e.organizationId=t.organizationId),t.platformUrl&&(e.platformUrl=t.platformUrl,e.search.apiBaseUrl=`${t.platformUrl}${Gm}`,e.analytics.apiBaseUrl=Xm(t.platformUrl,e.organizationId))}var rw=ew;function nw(e){return e.instantlyCallable}var iw=()=>e=>t=>e(nw(t)?t():t);var aw=e=>()=>t=>r=>{let n=r;if(!n.error)return t(r);let i=n.error;if(n.payload?.ignored||e.error(i.stack||i.message||i.name||"Error",`Action dispatch error ${n.type}`,r),n.error.name!=="SchemaValidationError")return t(r)},ow=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));var uw=e=>({referrer:document.referrer,userAgent:navigator.userAgent,location:window.location.href,clientId:e}),cw=()=>({referrer:null,userAgent:null,location:null,clientId:""});function sw(e,t){let r={...e},n,i=e=>(t,r)=>{let i=e(t,r);return n?n(i,r):i};return{get combinedReducer(){let e=Yn(Object.entries(t).filter((([e])=>!(e in r))).map((([e,t])=>[e,()=>t])));return i(ye({...e,...r}))},containsAll(e){return Object.keys(e).every((e=>e in r))},add(e){Object.keys(e).filter((e=>!(e in r))).forEach((t=>r[t]=e[t]))},addCrossReducer(e){n=e}}}function lw(e,t,r){var n,i,a;t===void 0&&(t=50),r===void 0&&(r={});var o=(n=r.isImmediate)!=null&&n,u=(i=r.callback)!=null&&i,c=r.maxWait,s=Date.now(),l=[];function d(){if(c!==void 0){var e=Date.now()-s;if(e+t>=c)return c-e}return t}var f=function(){var t=[].slice.call(arguments),r=this;return new Promise((function(n,i){var c=o&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout((function(){if(a=void 0,s=Date.now(),!o){var n=e.apply(r,t);u&&u(n),l.forEach((function(e){return(0,e.resolve)(n)})),l=[]}}),d()),c){var f=e.apply(r,t);return u&&u(f),n(f)}l.push({resolve:n,reject:i})}))};return f.cancel=function(e){a!==void 0&&clearTimeout(a),l.forEach((function(t){return(0,t.reject)(e)})),l=[]},f}function dw(e,t){let r=0,n=lw((()=>r=0),500);return i=>a=>async o=>{if(!(typeof o=="function"))return a(o);let u=await a(o);if(!fw(u))return u;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,n();let c=await hw(t);i.dispatch(km({accessToken:c})),i.dispatch(o)}}function fw(e){return e?.error?.name===(new ei).name}async function hw(e){try{return await e()}catch{return""}}function pw({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:i}){return tr({reducer:e,preloadedState:t,devTools:{stateSanitizer:e=>e.history?{...e,history:"<<OMIT>>"}:e,name:i,shouldHotReload:!1},middleware:e=>e({thunk:{extraArgument:n}}).prepend(...r).concat(ow(n.logger))})}var gw={configuration:rw,version:Fm};function yw(e,t){let r=e.organizationEndpoints?.analytics||void 0,{analyticsClientMiddleware:n,...i}=e.analytics??{},a={...i,nextApiBaseUrl:`${r}/rest/organizations/${e.organizationId}/events/v1`,apiBaseUrl:r};if(a.analyticsMode!=="next"&&Bn())return t.info("Analytics disabled since doNotTrack is active."),{...a,enabled:!1};if(a.analyticsMode==="next"&&!i.trackingId)throw new Ow('analytics.trackingId is required when analytics.analyticsMode="next"');return a}function vw(e,t){let r=mw(e,t),{accessToken:n,organizationId:i}=e.configuration,{organizationEndpoints:a}=e.configuration,o=a?.platform||e.configuration.platformUrl;Iw(e.configuration)&&r.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),Sw(e.configuration)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):qw(e.configuration)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${e.configuration.organizationEndpoints?.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(km({accessToken:n,organizationId:i,platformUrl:o}));let u=yw(e.configuration,r.logger);return u&&r.dispatch(Tm(u)),r}function mw(e,t){let{reducers:r}=e,n=sw({...gw,...r},e.preloadedState??{});e.crossReducer&&n.addCrossReducer(e.crossReducer);let i=t.logger,a=()=>{let e="";try{e=As(c.state).getMeta("").clientId}catch(e){i.warn("Error while obtaining clientID from relay",e)}return e},o={...t,get relay(){return As(c.state)},get navigatorContext(){return e.navigatorContextProvider?e.navigatorContextProvider():$m()?uw(a()):cw()}},u=ww(e,o,n),c={addReducers(e){n.containsAll(e)||(n.add(e),u.replaceReducer(n.combinedReducer))},dispatch:u.dispatch,subscribe:u.subscribe,enableAnalytics(){u.dispatch(Em())},disableAnalytics(){u.dispatch(Mm())},get state(){return u.getState()},get relay(){return As(this.state)},get navigatorContext(){return e.navigatorContextProvider?e.navigatorContextProvider():$m()?uw(a()):cw()},logger:i,store:u};return c}function ww(e,t,r){let{preloadedState:n,configuration:i}=e,a=i.name||"coveo-headless",o=bw(e,t.logger);return pw({preloadedState:n,reducer:r.combinedReducer,middlewares:o,thunkExtraArguments:t,name:a})}function bw(e,t){let{renewAccessToken:r}=e.configuration,n=dw(t,r);return[iw,n,aw(t),Vm].concat(Cm.middleware,e.middlewares||[])}function Sw(e){return z(e.organizationEndpoints)}function Iw(e){return!Y(e.platformUrl)||Y(e.organizationEndpoints?.platform)}function qw(e){let{platform:t}=e.organizationEndpoints;if(z(t))return!1;let r=Nd(t);return r&&r.organizationId!==e.organizationId}var Ow=class extends Error{constructor(e){super(e),this.name="InvalidEngineConfiguration"}};var Cw=d(E());function xw(e){return(0,Cw.default)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}function Aw(e,t){let r=kw(e),n=Mi,i=jw(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:i,logger:t}}function kw(e){let{analytics:t}=e,r=(e,t)=>t;return t?.analyticsClientMiddleware||r}function jw(e){return e.preprocessRequest||Ci}var Rw={organizationId:xi,accessToken:xi,platformUrl:new ee({required:!1,emptyAllowed:!1}),name:new ee({required:!1,emptyAllowed:!1}),analytics:new re({options:{required:!1},values:{enabled:new G({required:!1}),originContext:new ee({required:!1}),originLevel2:new ee({required:!1}),originLevel3:new ee({required:!1}),analyticsMode:new ee({constrainTo:["legacy","next"],required:!1})}})};var Tw=new N({...Rw,context:new re({options:{required:!0},values:ua}),cart:new re({values:Li}),environment:new ee({required:!1,constrainTo:["prod","hipaa","stg","dev"],emptyAllowed:!1,default:"prod"})});var Mw={productListing:Eg,recommendations:Hg,commerceSearch:ty,commercePagination:kg,commerceSort:uy,facetOrder:vy,facetSearchSet:Ly,categoryFacetSearchSet:Vy,commerceFacetSet:eg,commerceContext:fa,commerceQuery:zg,cart:Xi,didYouMean:Ga,triggers:yy};function Ew(e){let t=xw(e.loggerOptions);Pw(e.configuration,t);let r=Dw(e.configuration,t),n={...Aw(e.configuration,t),apiClient:r},i={...e,configuration:{...e.configuration,organizationEndpoints:{...ci(e.configuration.organizationId,e.configuration.environment),...e.configuration.organizationEndpoints}},reducers:Mw},a=vw(i,n),{state:o,...u}=a;return u.dispatch(sa(e.configuration.context)),e.configuration.cart!==void 0&&e.configuration.cart.items!==void 0&&u.dispatch(Bi(e.configuration.cart.items)),Q({...u,get[U](){return a.state},get configuration(){return a.state.configuration}})}function Pw(e,t){try{Tw.validate(e)}catch(e){throw t.error("Commerce engine configuration error",e),e}}function Dw(e,t){return new Oi({logger:t,preprocessRequest:e.preprocessRequest||Ci})}Sr("commerce/product/view",(async(e,{extra:t,getState:r})=>{let{relay:n}=t,i={currency:$i(r().commerceContext),product:e};n.emit("ec.productView",i)}));var Fw=Sr("commerce/product/click",(async(e,{extra:t,getState:r})=>{let{relay:n}=t,i={currency:$i(r().commerceContext),...e};n.emit("ec.productClick",i)}));var $w={id:xi,query:ki},Uw=Nt("querySet/register",(e=>Ei(e,$w))),Qw=Nt("querySet/update",(e=>Ei(e,$w)));var Vw=Nt("commerce/querySet/register",(e=>Ei(e,$w))),_w=Nt("commerce/querySet/update",(e=>Ei(e,$w)));var Nw={id:xi},Lw=Nt("querySuggest/register",(e=>Ei(e,{...Nw,count:new H({min:0})}))),zw=Nt("querySuggest/unregister",(e=>Ei(e,Nw))),Bw=Nt("querySuggest/selectSuggestion",(e=>Ei(e,{...Nw,expression:ki}))),Yw=Nt("querySuggest/clear",(e=>Ei(e,Nw))),Hw=Sr("querySuggest/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:i,navigatorContext:a}})=>{i(e,Nw);let o=e.id,u=await Ww(o,t(),a),c=await n.querySuggest(u);return zd(c)?r(c.error):{id:o,q:u.q,...c.success}})),Ww=async(e,t,r)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?Gc.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},tab:t.configuration.analytics.originLevel2,...t.configuration.analytics.enabled&&{visitorId:await Kc(t.configuration.analytics),...t.configuration.analytics.enabled&&t.configuration.analytics.analyticsMode==="legacy"?await id(t.configuration.analytics):rd(t.configuration.analytics,r)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});var Kw=ir(tf(),(e=>{e.addCase(Uw,((e,t)=>Xw(e,t.payload))).addCase(Vw,((e,t)=>Xw(e,t.payload))).addCase(Qw,((e,t)=>{let{id:r,query:n}=t.payload;Zw(e,r,n)})).addCase(_w,((e,t)=>{let{id:r,query:n}=t.payload;Zw(e,r,n)})).addCase(Bw,((e,t)=>{let{id:r,expression:n}=t.payload;Zw(e,r,n)})).addCase(Ng,((e,t)=>{let{id:r,expression:n}=t.payload;Zw(e,r,n)})).addCase(La.fulfilled,((e,t)=>{let{queryExecuted:r}=t.payload;Jw(e,r)})).addCase(zf.fulfilled,((e,t)=>{let{queryExecuted:r}=t.payload;Jw(e,r)})).addCase(Vl,Gw).addCase(Ip,Gw).addCase(So.fulfilled,((e,t)=>{if(t.payload)for(let[r,n]of Object.entries(t.payload.querySet))Zw(e,r,n)}))}));function Gw(e,t){Y(t.payload.q)||Jw(e,t.payload.q)}function Jw(e,t){Object.keys(e).forEach((r=>e[r]=t))}var Zw=(e,t,r)=>{t in e&&(e[t]=r)},Xw=(e,t)=>{let{id:r,query:n}=t;r in e||(e[r]=n)};function eb(e){return e.addReducers({querySetReducer:Kw}),{registerQuerySetQuery:Vw,updateQuerySetQuery:_w}}var tb=()=>({});var rb=ir(tb(),(e=>e.addCase(Lw,((e,t)=>{nb(e,t.payload)})).addCase(_g,((e,t)=>{nb(e,t.payload)})).addCase(zw,((e,t)=>{delete e[t.payload.id]})).addCase(Hw.pending,ab).addCase(Hw.fulfilled,((e,t)=>{let r=e[t.meta.arg.id];if(!r||t.meta.requestId!==r.currentRequestId)return;let{q:n}=t.payload;n&&r.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),r.responseId=t.payload.responseId,r.completions=t.payload.completions,r.isLoading=!1,r.error=null})).addCase(Hw.rejected,ob).addCase(Vg.pending,ab).addCase(Vg.fulfilled,((e,t)=>{let r=e[t.meta.arg.id];if(!r||t.meta.requestId!==r.currentRequestId)return;let{query:n}=t.payload;n&&r.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),r.responseId=t.payload.responseId,r.completions=t.payload.completions.map((e=>({expression:e.expression,highlighted:e.highlighted,score:0,executableConfidence:0}))),r.isLoading=!1,r.error=null})).addCase(Vg.rejected,ob).addCase(Yw,((e,t)=>{ub(e,t.payload)})).addCase(Qg,((e,t)=>{ub(e,t.payload)}))));function nb(e,t){let r=t.id;r in e||(e[r]=ib(t))}function ib(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}function ab(e,t){let r=e[t.meta.arg.id];r&&(r.currentRequestId=t.meta.requestId,r.isLoading=!0)}function ob(e,t){let r=e[t.meta.arg.id];r&&(r.error=t.payload||null,r.isLoading=!1)}function ub(e,t){let r=e[t.id];r&&(r.responseId="",r.completions=[],r.partialQueries=[])}function cb(e){return e.addReducers({querySuggest:rb}),{clearQuerySuggest:Qg,fetchQuerySuggestions:Vg,registerQuerySuggest:_g,selectQuerySuggestion:Ng}}function sb(e){return e.addReducers({query:zg}),{updateQuery:Qa}}var lb={id:xi},db={...lb,query:ki},fb=Nt("commerce/instantProducts/clearExpired",(e=>Ei(e,lb))),hb={child:new re({options:{required:!0},values:{permanentid:new ee({required:!0})}}),...db},pb=Nt("commerce/instantProducts/promoteChildToParent",(e=>Ei(e,hb))),gb=Nt("commerce/instantProducts/register",(e=>Ei(e,lb))),yb=Nt("commerce/instantProducts/updateQuery",(e=>Ei(e,db)));function vb(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}var mb=(e,t)=>{let{id:r}=e;if(!t[r])return t[r]={q:"",cache:{}},t},wb=(e,t)=>{let{q:r,id:n}=e;r&&(t[n].q=r)},bb=(e,t)=>{let{id:r}=e;Object.entries(t[r].cache).forEach((([e,n])=>{vb(n)&&delete t[r].cache[e]}))},Sb=(e,t,r)=>{for(let e in t)for(let r in t[e].cache)t[e].cache[r].isActive=!1;if(!Ob(e,t)){Cb(e,t,r);return}let n=Ob(e,t);n.isLoading=!0,n.isActive=!0,n.error=null},Ib=(e,t,r)=>{let{id:n,q:i,searchUid:a,cacheTimeout:o,totalCountFiltered:u,duration:c}=e;t[n].cache[i]={...Ob(e,t),...r,isActive:!0,searchUid:a,isLoading:!1,error:null,expiresAt:o?o+Date.now():0,totalCountFiltered:u,duration:c}},qb=(e,t)=>{let{id:r,q:n,error:i}=e;t[r].cache[n].error=i||null,t[r].cache[n].isLoading=!1,t[r].cache[n].isActive=!1},Ob=(e,t)=>{let{q:r,id:n}=e;return t[n].cache[r]||null},Cb=(e,t,r)=>{let{q:n,id:i}=e;t[i].cache[n]={isLoading:!0,error:null,expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0,...r}};function xb(){return{}}var Ab=ir(xb(),(e=>{e.addCase(gb,((e,t)=>{mb(t.payload,e)})).addCase(yb,((e,t)=>{wb({...t.payload,q:t.payload.query},e)})).addCase(fb,((e,t)=>{bb(t.payload,e)})).addCase(Ya.pending,((e,t)=>{Sb(t.meta.arg,e,{products:[]})})).addCase(Ya.fulfilled,((e,t)=>{let{response:{products:r,responseId:n,pagination:{totalEntries:i}}}=t.payload;Ib({duration:0,searchUid:n,totalCountFiltered:i,...t.meta.arg},e,{products:r.map(((e,t)=>kb(e,t+1)))})})).addCase(Ya.rejected,((e,t)=>{qb(t.meta.arg,e)})).addCase(pb,((e,t)=>{let r=e[t.payload.id].cache[t.payload.query];if(!r)return;let n=r.products,i,a=n.findIndex((e=>(i=e.children.find((e=>e.permanentid===t.payload.child.permanentid)),!!i)));if(a===-1||i===void 0)return;let o=n[a].position,{children:u,totalNumberOfChildren:c}=n[a],s={...i,children:u,totalNumberOfChildren:c,position:o},l=[...n];l.splice(a,1,s),r.products=l}))}));function kb(e,t){let r=e.children.some((t=>t.permanentid===e.permanentid));if(e.children.length===0||r)return{...e,position:t};let{children:n,totalNumberOfChildren:i,...a}=e;return{...e,children:[a,...n],position:t}}var jb={queries:new ie({required:!0,each:new ee({emptyAllowed:!1})}),maxLength:new H({required:!0,min:1,default:10})},Rb=Nt("recentQueries/registerRecentQueries",(e=>Ei(e,jb))),Tb=Nt("recentQueries/clearRecentQueries");function Mb(){return{queries:[],maxLength:10}}ir(Mb(),(e=>{e.addCase(Rb,Eb).addCase(Tb,Pb).addCase(zf.fulfilled,((e,t)=>{let r=t.payload.queryExecuted.trim(),n=t.payload.response.results;!r.length||!n.length||Db(r,e)}))}));function Eb(e,t){e.queries=t.payload.queries.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength}function Pb(e){e.queries=[]}function Db(e,t){t.queries=t.queries.filter((t=>t!==e));let r=t.queries.slice(0,t.maxLength-1);t.queries=[e,...r]}var Fb=Nt("commerce/recentQueries/clear"),$b=Nt("commerce/recentQueries/register",(e=>Ei(e,jb)));var Ub=ir(Mb(),(e=>{e.addCase($b,Eb).addCase(Fb,Pb).addCase(La.fulfilled,((e,t)=>{let r=t.payload.queryExecuted?.trim()||"",n=t.payload.response.products;!r.length||!n.length||Db(r,e)}))}));function Qb(e){return e.type==="redirect"}var Vb=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(Qb);return e.length?e[0].content:null}};var _b=Nt("standaloneSearchBox/register",(e=>Ei(e,{id:xi,redirectionUrl:xi}))),Nb=Nt("standaloneSearchBox/reset",(e=>Ei(e,{id:xi}))),Lb=Nt("standaloneSearchBox/updateAnalyticsToSearchFromLink",(e=>Ei(e,{id:xi}))),zb=Nt("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),Bb=Sr("standaloneSearchBox/fetchRedirect",(async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:i,validatePayload:a,navigatorContext:o}})=>{a(e,{id:new ee({emptyAllowed:!1})});let u=await Hb(r(),o),c=await i.plan(u);if(zd(c))return n(c.error);let{redirectionUrl:s}=new Vb(c.success);return s&&t(Yb(s)),s||""})),Yb=e=>Al("analytics/standaloneSearchBox/redirect",(t=>t.makeTriggerRedirect({redirectedTo:e}))),Hb=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await Kc(e.configuration.analytics)},...e.configuration.analytics.enabled&&e.configuration.analytics.analyticsMode==="legacy"?await id(e.configuration.analytics):rd(e.configuration.analytics,t),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});function Wb(){return{}}ir(Wb(),(e=>e.addCase(_b,((e,t)=>{let{id:r,redirectionUrl:n}=t.payload;r in e||(e[r]=Kb(n))})).addCase(Nb,((e,t)=>{let{id:r}=t.payload,n=e[r];if(n){e[r]=Kb(n.defaultRedirectionUrl);return}})).addCase(Bb.pending,((e,t)=>{let r=e[t.meta.arg.id];r&&(r.isLoading=!0)})).addCase(Bb.fulfilled,((e,t)=>{let r=t.payload,n=e[t.meta.arg.id];n&&(n.redirectTo=r||n.defaultRedirectionUrl,n.isLoading=!1)})).addCase(Bb.rejected,((e,t)=>{let r=e[t.meta.arg.id];r&&(r.isLoading=!1)})).addCase(Lb,((e,t)=>{let r=e[t.payload.id];r&&(r.analytics.cause="searchFromLink")})).addCase(zb,((e,t)=>{let r=e[t.payload.id];r&&(r.analytics.cause="omniboxFromLink",r.analytics.metadata=t.payload.metadata)}))));function Kb(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var Gb=Sr("commerce/standaloneSearchBox/fetchRedirect",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:i}})=>{Ei(e,{id:new ee({emptyAllowed:!1})});let a=t(),o=Xb(a,i),u=await n.plan(o);if(qi(u))return r(u.error);let c=u.success.triggers.filter(Qb);return c.length?c[0].content:""})),Jb=Nt("commerce/standaloneSearchBox/register",(e=>Ei(e,{id:xi,redirectionUrl:xi}))),Zb=Nt("commerce/standaloneSearchBox/reset",(e=>Ei(e,{id:xi}))),Xb=(e,t)=>({query:e.commerceQuery.query,...Sa(e,t)});function eS(e,t={}){if(!tS(e));let r=Hi(e),{dispatch:n}=e,i=()=>e[U];return t.options&&(Di(e,ca,t.options,"buildContext"),n(sa(t.options))),{...r,get state(){return i().commerceContext},setLanguage:e=>n(sa({...i().commerceContext,language:e})),setCountry:e=>n(sa({...i().commerceContext,country:e})),setCurrency:e=>n(sa({...i().commerceContext,currency:e})),setView:e=>n(la(e))}}function tS(e){return e.addReducers({commerceContext:fa}),!0}ir(Zd(),(e=>{e.addCase(go,((e,t)=>({...e,...t.payload}))).addCase(zf.fulfilled,(e=>{e.freezeFacetOrder=!1})).addCase(zf.rejected,(e=>{e.freezeFacetOrder=!1})).addCase(So.fulfilled,((e,t)=>t.payload?.facetOptions??e)).addCase(ro,((e,t)=>{e.facets[t.payload.facetId]=Jd()})).addCase(hh,((e,t)=>{e.facets[t.payload.facetId]=Jd()})).addCase(Gh,((e,t)=>{e.facets[t.payload.facetId]=Jd()})).addCase(up,((e,t)=>{e.facets[t.payload.facetId]=Jd()})).addCase(yo,((e,t)=>{e.facets[t.payload].enabled=!0})).addCase(vo,((e,t)=>{e.facets[t.payload].enabled=!1})).addCase(Vl,((e,t)=>{[...Object.keys(t.payload.f??{}),...Object.keys(t.payload.fExcluded??{}),...Object.keys(t.payload.cf??{}),...Object.keys(t.payload.nf??{}),...Object.keys(t.payload.df??{})].forEach((t=>{t in e||(e.facets[t]=Jd()),e.facets[t].enabled=!0}))}))}));var rS=Nt("rangeFacet/executeToggleSelect",(e=>Ei(e,Bh(e.selection)))),nS=Nt("rangeFacet/executeToggleExclude",(e=>Ei(e,Bh(e.selection))));var iS={facetId:Ja,selection:new re({values:zh})};Sr("dateFacet/executeToggleSelect",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,iS),t(Jh(e)),t(rS(e)),t(go())}));Sr("dateFacet/executeToggleExclude",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,iS),t(Zh(e)),t(nS(e)),t(go())}));function aS(e,t){let r=t.payload??null;r&&(e.response=nl().response,e.results=[],e.questionAnswer=rl()),e.error=r,e.isLoading=!1}function oS(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function uS(e,t){oS(e,t),e.results=t.payload.response.results,e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function cS(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}ir(nl(),(e=>{e.addCase(bf.rejected,((e,t)=>aS(e,t))),e.addCase(If.rejected,((e,t)=>aS(e,t))),e.addCase(Sf.rejected,((e,t)=>aS(e,t))),e.addCase(bf.fulfilled,((e,t)=>{uS(e,t)})),e.addCase(If.fulfilled,((e,t)=>{oS(e,t),e.results=[...e.results,...t.payload.response.results]})),e.addCase(Sf.fulfilled,((e,t)=>{oS(e,t),e.results=t.payload.response.results})),e.addCase(qf.fulfilled,((e,t)=>{e.response.facets=t.payload.response.facets,e.response.searchUid=t.payload.response.searchUid})),e.addCase(bf.pending,cS),e.addCase(If.pending,cS),e.addCase(Sf.pending,cS)}));var sS=["idle","selected","excluded"];var lS=["ascending","descending"],dS=["even","equiprobable"];var fS={start:new ee,end:new ee,endInclusive:new G,state:new ee({constrainTo:sS})};new N({facetId:eh,field:th,generateAutomaticRanges:ah,filterFacetCount:rh,injectionDepth:nh,numberOfValues:ih,currentValues:new ie({each:new re({values:fS})}),sortCriteria:new ee({constrainTo:lS}),rangeAlgorithm:new ee({constrainTo:dS})});var hS={facetId:Ja,selection:new re({values:Lh})};Sr("numericFacet/executeToggleSelect",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,hS),t(cp(e)),t(rS(e)),t(go())}));Sr("numericFacet/executeToggleExclude",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,hS),t(sp(e)),t(nS(e)),t(go())}));var pS=["allValues","atLeastOneValue"];var gS={start:new H,end:new H,endInclusive:new G,state:new ee({constrainTo:sS})};new N({facetId:eh,field:th,generateAutomaticRanges:ah,filterFacetCount:rh,injectionDepth:nh,numberOfValues:ih,currentValues:new ie({each:new re({values:gS})}),sortCriteria:new ee({constrainTo:lS}),resultsMustMatch:new ee({constrainTo:pS}),rangeAlgorithm:new ee({constrainTo:dS})});function yS(e){return{endInclusive:!1,state:"idle",...e}}var vS="..",mS="...",wS=/^(f|fExcluded|cf|nf|df|sf|af)-(.+)$/,bS={f:!0,fExcluded:!0,cf:!0,sf:!0,af:!0,nf:!0,df:!0},SS="&",IS="=";function qS(e){return e in bS}function OS(e){let t=e in{nf:!0,df:!0};return qS(e)&&t}var CS=e=>t=>Object.entries(t).map(e).filter((e=>e)).join(SS);function xS(e,t){return`${e}${IS}${encodeURIComponent(t)}`}function AS(e){return jS(e)?RS(e,(e=>typeof e=="string")):!1}function kS(e){return jS(e)?RS(e,(e=>jS(e)&&"start"in e&&"end"in e)):!1}function jS(e){return!!(e&&typeof e=="object")}function RS(e,t){return Object.entries(e).filter((e=>{let r=e[1];return!Array.isArray(r)||!r.every(t)})).length===0}function TS(e,t){return Object.entries(t).map((([t,r])=>`${e}-${t}${IS}${r.map((e=>encodeURIComponent(e))).join(",")}`)).join(SS)}function MS(e,t){return Object.entries(t).map((([t,r])=>{let n=r.map((({start:e,end:t,endInclusive:r})=>`${e}${r?mS:vS}${t}`)).join(",");return`${e}-${t}${IS}${n}`})).join(SS)}function ES(e){let[t,...r]=e.split(IS),n=r.join(IS);return[t,n]}function PS(e){let[t,r]=e,n=wS.exec(t);if(!n)return e;let i=n[1],a=n[2],o=r.split(","),u=DS(i,o),c={[a]:u};return[i,JSON.stringify(c)]}function DS(e,t){return e==="nf"?FS(t):e==="df"?US(t):t}function FS(e){return e.map((e=>{let{startAsString:t,endAsString:r,isEndInclusive:n}=VS(e);return{start:parseFloat(t),end:parseFloat(r),endInclusive:n}})).filter((({start:e,end:t})=>Number.isFinite(e)&&Number.isFinite(t))).map((({start:e,end:t,endInclusive:r})=>yS({start:e,end:t,state:"selected",endInclusive:r})))}function $S(e){try{return pd(e)?(gd(e,ld),!0):Cd(e)?(bd(e),!0):!1}catch{return!1}}function US(e){return e.map((e=>{let{isEndInclusive:t,startAsString:r,endAsString:n}=VS(e);return{start:r,end:n,endInclusive:t}})).filter((({start:e,end:t})=>$S(e)&&$S(t))).map((({start:e,end:t,endInclusive:r})=>Vh({start:e,end:t,state:"selected",endInclusive:r})))}function QS(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach((e=>{let[t,n]=e;r[t]=n.map((e=>te(e)?decodeURIComponent(e):e))})),r}function VS(e){let t=e.indexOf(mS)!==-1,[r,n]=e.split(t?mS:vS);return{isEndInclusive:t,startAsString:r,endAsString:n}}var _S=" ",NS=",",LS={serialize:YS,deserialize:XS},zS={serialize:YS,deserialize:XS},BS={f:!0,cf:!0,nf:!0,df:!0};function YS(e){return CS(HS)(e)}function HS(e){let[t,r]=e;return GS(t)?t==="sortCriteria"?JS(r)?WS(t,r):"":eI(t)&&!OS(t)?AS(r)?TS(t,r):"":t==="nf"||t==="df"?kS(r)?MS(t,r):"":xS(t,r):""}function WS(e,t){return xS(e,KS(t))}function KS(e){return e?e.by==="relevance"?"relevance":e.fields.map((e=>`${e.name}${_S}${e.direction}`)).join(NS):""}function GS(e){return ZS(e)||eI(e)}function JS(e){return!jS(e)||!("by"in e)?!1:e.by==="relevance"?!0:e.by==="fields"&&"fields"in e&&Nn(e.fields)?e.fields.every((e=>jS(e)&&"name"in e&&typeof e.name=="string"&&("direction"in e&&(e.direction==="asc"||e.direction==="desc")||!("direction"in e)))):!1}function ZS(e){return e in{q:!0,sortCriteria:!0,page:!0,perPage:!0}}function XS(e){return e.split(SS).map(ES).map(PS).filter(tI).map(rI).reduce(((e,t)=>{let[r,n]=t;if(eI(r)){let t={...e[r],...n};return{...e,[r]:t}}if(r==="sortCriteria"){let t=nI(n);return{...e,[r]:t}}return{...e,[r]:n}}),{})}function eI(e){return e in BS}function tI(e){let t=GS(e[0]),r=e.length===2;return t&&r}function rI(e){let[t,r]=e;return t==="page"||t==="perPage"?[t,parseInt(r)]:eI(t)?[t,QS(r)]:[t,decodeURIComponent(r)]}function nI(e){if(e==="relevance")return dn();let t=e.split(NS);if(t.length)return t.reduce(((e,t)=>{let r=t.trim().split(_S);if(r.length!==2)return e;let n=r[0].toLowerCase(),i=r[1].toLowerCase();return{...e,fields:[...e.fields,{name:n,direction:i}]}}),fn([]))}var iI=Pt((e=>e.queryCorrection.correctedQuery!==""||e.wasCorrectedTo!==""),(e=>e));function aI(e){if(!oI(e));let t=Hi(e),r=()=>e[U].didYouMean,n=()=>iI(r());return{...t,get state(){let e=r();return{originalQuery:e.originalQuery,wasCorrectedTo:e.wasCorrectedTo,queryCorrection:e.queryCorrection,hasQueryCorrection:n(),wasAutomaticallyCorrected:n()}}}}function oI(e){return e.addReducers({didYouMean:Ga}),!0}var uI="hierarchical",cI={regular:{toggleSelectActionCreator:_p,toggleExcludeActionCreator:Vp},numericalRange:{toggleSelectActionCreator:$p,toggleExcludeActionCreator:Up},dateRange:{toggleSelectActionCreator:Cp,toggleExcludeActionCreator:xp},[uI]:{toggleSelectActionCreator:ka}};function sI(e,t){if(!lI(e));let r=Hi(e),{dispatch:n}=e,i=e=>({facetId:e.facetId,facetDisplayName:e.displayName,field:e.field,type:e.type,values:e.type==="hierarchical"?o(e):a(e)}),a=e=>e.values.filter((e=>e.state!=="idle")).map((r=>({value:r,deselect:()=>{r.state==="selected"?(n(cI[e.type].toggleSelectActionCreator({facetId:e.facetId,selection:r})),n(ja({facetId:e.facetId,freezeCurrentValues:!1})),n(t.fetchProductsActionCreator())):r.state==="excluded"&&e.type!==uI&&(n(cI[e.type].toggleExcludeActionCreator({facetId:e.facetId,selection:r})),n(ja({facetId:e.facetId,freezeCurrentValues:!1})),n(t.fetchProductsActionCreator()))}}))),o=e=>{let r=nn(e.values),i=r.length>0?r[r.length-1]:void 0;return i===void 0?[]:[{value:i,deselect:()=>{n(cI.hierarchical.toggleSelectActionCreator(e.facetId)),n(t.fetchProductsActionCreator())}}]},u=Pt((e=>e.facetOrder),(r=>{let n=r.map((r=>t.facetResponseSelector(e[U],r))).filter((e=>e!==void 0&&e.values.length>0&&e.values.some((e=>e.state!=="idle")))).map(i)??[];return{facetBreadcrumbs:n,hasBreadcrumbs:n.length>0}}));return{...r,deselectAll:()=>{n(Aa()),n(t.fetchProductsActionCreator())},get state(){return u(e[U])}}}function lI(e){return e.addReducers({facetOrder:vy,commerceFacetSet:eg}),!0}function dI(e,t){if(!fI(e));let{dispatch:r}=e,n=Hi(e),i=t.options.facetId,a=()=>e[U].commerceFacetSet[i]?.request,o=()=>t.options.facetResponseSelector(e[U],i),u=()=>t.options.isFacetLoadingResponseSelector(e[U]),c=()=>a()?.values?.filter((e=>e.state!=="idle")).length??0;return{...n,toggleSelect:e=>{r(t.options.toggleSelectActionCreator({selection:e,facetId:i})),r(t.options.fetchProductsActionCreator())},toggleExclude:n=>{if(!t.options.toggleExcludeActionCreator){e.logger.warn("No toggle exclude action creator provided; calling #toggleExclude had no effect.");return}r(t.options.toggleExcludeActionCreator({selection:n,facetId:i})),r(t.options.fetchProductsActionCreator())},toggleSingleSelect:function(e){e.state==="idle"&&r(ka({facetId:i})),this.toggleSelect(e)},toggleSingleExclude:function(n){if(!t.options.toggleExcludeActionCreator){e.logger.warn("No toggle exclude action creator provided; calling #toggleSingleExclude had no effect.");return}n.state==="idle"&&r(ka({facetId:i})),this.toggleExclude(n)},isValueSelected:e=>e.state==="selected",isValueExcluded:e=>e.state==="excluded",deselectAll(){r(ka({facetId:i})),r(t.options.fetchProductsActionCreator())},showMoreValues(){let e=a()?.numberOfValues??0,n=a()?.initialNumberOfValues??0,o=n-e%n,u=e+o;r(Ca({facetId:i,numberOfValues:u})),r(xa({facetId:i,isFieldExpanded:!0})),r(t.options.fetchProductsActionCreator())},showLessValues(){let e=a()?.initialNumberOfValues??0,n=Math.max(e,c());r(Ca({facetId:i,numberOfValues:n})),r(xa({facetId:i,isFieldExpanded:!1})),r(t.options.fetchProductsActionCreator())},get state(){let e=o(),t=e?.moreValuesAvailable??!1,r=e?.values??[],n=r.some((e=>e.state!=="idle"));return{facetId:i,type:e?.type??"regular",field:e?.field??"",displayName:e?.displayName??"",values:r,isLoading:u(),canShowMoreValues:t,canShowLessValues:hI(a()),hasActiveValues:n}}}}function fI(e){return e.addReducers({commerceFacetSet:eg}),!0}var hI=e=>{if(!e)return!1;let t=e.initialNumberOfValues,r=!!e.values.find((e=>e.state==="idle"));return(t??0)<(e.numberOfValues??0)&&r};function pI(e,t){let r=e.dispatch,{options:n,getFacetSearch:i,executeFacetSearchActionCreator:a,executeFieldSuggestActionCreator:o}=t,{facetId:u}=n;return{updateText(e){r(fo({facetId:u,query:e,numberOfValues:i().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:e,options:n}=i();r(fo({facetId:u,numberOfValues:n.numberOfValues+e})),r(t.isForFieldSuggestions?o(u):a(u))},search(){r(t.isForFieldSuggestions?o(u):a(u))},clear(){r($y({facetId:u}))},updateCaptions(e){r(fo({facetId:u,captions:e}))},get state(){let{response:e,isLoading:t,options:r}=i(),{query:n}=r,a=e.values;return{...e,values:a,isLoading:t,query:n}}}}function gI(e,t){let{dispatch:r}=e,n={...Ty,...t.options},{facetId:i}=n,a=()=>"state"in e?e.state.categoryFacetSearchSet[i]:e[U].categoryFacetSearchSet[i];r(co(n));let o=pI(e,{options:n,getFacetSearch:a,isForFieldSuggestions:t.isForFieldSuggestions,executeFacetSearchActionCreator:t.executeFacetSearchActionCreator,executeFieldSuggestActionCreator:t.executeFieldSuggestActionCreator});return{...o,select(e){r(uo({facetId:i,value:e})),t.select(e)},get state(){return o.state}}}function yI(e,t){if(!vI(e));let{showMoreResults:r,updateCaptions:n,...i}=gI(e,{...t,executeFacetSearchActionCreator:e=>Ep({facetId:e,facetSearchType:t.options.type}),executeFieldSuggestActionCreator:e=>Pp({facetId:e,facetSearchType:t.options.type})});return i}function vI(e){return e.addReducers({categoryFacetSearchSet:Vy}),!0}function mI(e,t){let r=dI(e,{options:{...t,toggleSelectActionCreator:Op}}),{deselectAll:n,isValueSelected:i,subscribe:a,toggleSelect:o}=r,{dispatch:u}=e,c=()=>r.state.facetId,s=yI(e,{options:{facetId:c(),...t.facetSearch},select:()=>{u(t.fetchProductsActionCreator())},isForFieldSuggestions:!1}),{state:l,...d}=s,f=Pt((e=>e.categoryFacetSearchSet[c()]),(e=>({isLoading:e.isLoading,moreValuesAvailable:e.response.moreValuesAvailable,query:e.options.query,values:e.response.values})));return{deselectAll:n,isValueSelected:i,subscribe:a,toggleSelect:o,showMoreValues(){let{facetId:e}=t,{activeValue:r,values:n}=this.state,i=(r?.children.length??n.length)+to;u(qp({facetId:e,numberOfValues:i})),u(t.fetchProductsActionCreator())},showLessValues(){let{facetId:e}=t;u(qp({facetId:e,numberOfValues:to})),u(t.fetchProductsActionCreator())},facetSearch:d,get state(){let t=nn(r.state.values),n=t.length?t[t.length-1]:void 0,i=n?n.children.length>to:!1,a=n?.moreValuesAvailable??r.state.canShowMoreValues??!1,o=!!n;return{...r.state,activeValue:n,canShowLessValues:i,canShowMoreValues:a,hasActiveValues:o,selectedValueAncestry:t,facetSearch:f(e[U])}},type:"hierarchical"}}function wI(e,t){let r=dI(e,{options:{...t,toggleSelectActionCreator:Cp,toggleExcludeActionCreator:xp}}),{dispatch:n}=e,{facetId:i,fetchProductsActionCreator:a}=t;return{...r,setRanges(e){n(Ap({facetId:i,values:e.map((e=>({...e,numberOfResults:0})))})),n(a())},get state(){return r.state},type:"dateRange"}}function bI(e,t){if(!SI(e));let r=Hi(e),n=Pt([e=>e.facetOrder,e=>e.commerceFacetSet],((e,t)=>e.map((e=>i(t,e))))),i=Pt(((e,t)=>({facetId:t,type:e[t].request.type})),(({type:r,facetId:n})=>{switch(r){case"dateRange":return t.buildDateFacet(e,{facetId:n});case"hierarchical":return t.buildCategoryFacet(e,{facetId:n});case"numericalRange":return t.buildNumericFacet(e,{facetId:n});case"regular":return t.buildRegularFacet(e,{facetId:n})}}));return{...r,get facets(){return n(e[U])},get state(){return e[U].facetOrder}}}function SI(e){return e.addReducers({facetOrder:vy,commerceFacetSet:eg}),!0}function II(e,t){let r=dI(e,{options:{...t,toggleSelectActionCreator:$p,toggleExcludeActionCreator:Up}}),{dispatch:n}=e,{facetId:i,fetchProductsActionCreator:a}=t;return{...r,setRanges(e){n(Qp({facetId:i,values:e.map((e=>({...e,numberOfResults:0})))})),n(a())},get state(){let n=t.facetResponseSelector(e[U],i);if(n?.type==="numericalRange"&&n.domain){let{min:e,max:t}=n.domain;return{...r.state,domain:{min:e,max:t}}}return{...r.state}},type:"numericalRange"}}function qI(e,t){let{dispatch:r}=e,{options:n,select:i,exclude:a,isForFieldSuggestions:o,executeFacetSearchActionCreator:u,executeFieldSuggestActionCreator:c}=t,{facetId:s}=n,l=()=>"state"in e?e.state.facetSearchSet[s]:e[U].facetSearchSet[s];r(lo(n));let d=pI(e,{options:n,getFacetSearch:l,isForFieldSuggestions:o,executeFacetSearchActionCreator:u,executeFieldSuggestActionCreator:c});return{...d,select(e){r(ho({facetId:s,value:e})),i(e)},exclude(e){r(po({facetId:s,value:e})),a(e)},singleSelect(e){r(yh(s)),r(ho({facetId:s,value:e})),i(e)},singleExclude(e){r(yh(s)),r(po({facetId:s,value:e})),a(e)},get state(){let{values:e}=d.state;return{...d.state,values:e.map((({count:e,displayValue:t,rawValue:r})=>({count:e,displayValue:t,rawValue:r})))}}}}function OI(e,t){if(!CI(e));let{showMoreResults:r,updateCaptions:n,...i}=qI(e,{...t,executeFacetSearchActionCreator:e=>Ep({facetId:e,facetSearchType:t.options.type}),executeFieldSuggestActionCreator:e=>Pp({facetId:e,facetSearchType:t.options.type})});return{...i}}function CI(e){return e.addReducers({facetSearchSet:Ly}),!0}function xI(e,t){let r=dI(e,{options:{...t,toggleSelectActionCreator:_p,toggleExcludeActionCreator:Vp}}),n=()=>r.state.facetId,{dispatch:i}=e,a=OI(e,{options:{facetId:n(),...t.facetSearch},select:()=>{i(t.fetchProductsActionCreator())},exclude:()=>{i(t.fetchProductsActionCreator())},isForFieldSuggestions:!1}),{state:o,...u}=a,c=Pt((e=>e.facetSearchSet[n()]),(e=>({facetSearch:{isLoading:e.isLoading,moreValuesAvailable:e.response.moreValuesAvailable,query:e.options.query,values:e.response.values}})));return{...r,facetSearch:u,get state(){return{...r.state,...c(e[U])}},type:"regular"}}function AI(e,t,r){if(!kI(e));let n=1e3,i={selectionDelay:n,debounceWait:n,...t.options},a;return{select:lw(r,i.debounceWait,{isImmediate:!0}),beginDelayedSelect(){a=setTimeout(r,i.selectionDelay)},cancelPendingSelect(){a&&clearTimeout(a)}}}function kI(e){return e.addReducers({configuration:rw}),!0}function jI(e,t){let r=!1,n=()=>{let e=(e,t,r)=>`- Could not retrieve '${e}' analytics property from field${t.length>1?"s":""} '${t.join("', '")}'; fell back to ${r}.`,r=[],{ec_name:n,ec_promo_price:i,ec_price:a,ec_product_id:o}=t.options.product;if(n||r.push(e("name",["ec_gender"],"permanentid")),!i&&!a&&r.push(e("price",["ec_promo_price","ec_price"],"NaN")),o||r.push(e("productId",["ec_product_id"],"permanentid")),r.length!==0)return`Some required analytics properties could not be retrieved from the expected fields for product with permanentid '${t.options.product.permanentid}':\n\n${r.join(`\n`)}\n\nReview the configuration of the above 'ec_'-prefixed fields in your index, and make sure they contain the correct metadata.`};return{...AI(e,t,(()=>{r||(r=!0,e.dispatch(Fw({product:{name:t.options.product.ec_name??t.options.product.permanentid,price:t.options.product.ec_promo_price??t.options.product.ec_price??NaN,productId:t.options.product.ec_product_id??t.options.product.permanentid},position:t.options.product.position,responseId:t.responseIdSelector(e[U])})))})),warningMessage:n()}}var RI=new N({pageSize:new H({min:1,max:1e3,required:!1})});function TI(e,t){if(!MI(e));let r=Hi(e),{dispatch:n}=e;Di(e,RI,t.options,"buildCorePagination");let i=t.options?.slotId;t.options?.pageSize&&n(Ea({slotId:i,pageSize:t.options.pageSize})),i&&n(Ua({slotId:i}));let a=Pt((e=>i?e.commercePagination.recommendations[i]:e.commercePagination.principal),(({perPage:e,...t})=>({pageSize:e??0,...t})));return{...r,get state(){return a(e[U])},selectPage(e){n(Da({slotId:i,page:e})),n(t.fetchProductsActionCreator())},nextPage(){n(Fa({slotId:i})),n(t.fetchProductsActionCreator())},previousPage(){n($a({slotId:i})),n(t.fetchProductsActionCreator())},setPageSize(e){n(Ea({slotId:i,pageSize:e})),n(t.fetchProductsActionCreator())},fetchMoreProducts(){n(t.fetchMoreProductsActionCreator())}}}function MI(e){return e.addReducers({commercePagination:kg}),!0}var EI=Object.getOwnPropertyNames,PI=Object.getOwnPropertySymbols,DI=Object.prototype.hasOwnProperty;function FI(e,t){return function(r,n,i){return e(r,n,i)&&t(r,n,i)}}function $I(e){return function(t,r,n){if(!t||!r||typeof t!="object"||typeof r!="object")return e(t,r,n);var i=n.cache,a=i.get(t),o=i.get(r);if(a&&o)return a===r&&o===t;i.set(t,r),i.set(r,t);var u=e(t,r,n);return i.delete(t),i.delete(r),u}}function UI(e){return EI(e).concat(PI(e))}var QI=Object.hasOwn||function(e,t){return DI.call(e,t)};function VI(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var _I="_owner",NI=Object.getOwnPropertyDescriptor,LI=Object.keys;function zI(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function BI(e,t){return VI(e.getTime(),t.getTime())}function YI(e,t,r){if(e.size!==t.size)return!1;for(var n={},i=e.entries(),a=0,o,u;(o=i.next())&&!o.done;){for(var c=t.entries(),s=!1,l=0;(u=c.next())&&!u.done;){var d=o.value,f=d[0],h=d[1],p=u.value,g=p[0],y=p[1];!s&&!n[l]&&(s=r.equals(f,g,a,l,e,t,r)&&r.equals(h,y,f,g,e,t,r))&&(n[l]=!0),l++}if(!s)return!1;a++}return!0}function HI(e,t,r){var n=LI(e),i=n.length;if(LI(t).length!==i)return!1;for(var a;i-- >0;)if(a=n[i],a===_I&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!QI(t,a)||!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function WI(e,t,r){var n=UI(e),i=n.length;if(UI(t).length!==i)return!1;for(var a,o,u;i-- >0;)if(a=n[i],a===_I&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!QI(t,a)||!r.equals(e[a],t[a],a,a,e,t,r)||(o=NI(e,a),u=NI(t,a),(o||u)&&(!o||!u||o.configurable!==u.configurable||o.enumerable!==u.enumerable||o.writable!==u.writable)))return!1;return!0}function KI(e,t){return VI(e.valueOf(),t.valueOf())}function GI(e,t){return e.source===t.source&&e.flags===t.flags}function JI(e,t,r){if(e.size!==t.size)return!1;for(var n={},i=e.values(),a,o;(a=i.next())&&!a.done;){for(var u=t.values(),c=!1,s=0;(o=u.next())&&!o.done;)!c&&!n[s]&&(c=r.equals(a.value,o.value,a.value,o.value,e,t,r))&&(n[s]=!0),s++;if(!c)return!1}return!0}function ZI(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var XI="[object Arguments]",eq="[object Boolean]",tq="[object Date]",rq="[object Map]",nq="[object Number]",iq="[object Object]",aq="[object RegExp]",oq="[object Set]",uq="[object String]",cq=Array.isArray,sq=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,lq=Object.assign,dq=Object.prototype.toString.call.bind(Object.prototype.toString);function fq(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,i=e.areObjectsEqual,a=e.arePrimitiveWrappersEqual,o=e.areRegExpsEqual,u=e.areSetsEqual,c=e.areTypedArraysEqual;return function(e,s,l){if(e===s)return!0;if(e==null||s==null||typeof e!="object"||typeof s!="object")return e!==e&&s!==s;var d=e.constructor;if(d!==s.constructor)return!1;if(d===Object)return i(e,s,l);if(cq(e))return t(e,s,l);if(sq!=null&&sq(e))return c(e,s,l);if(d===Date)return r(e,s,l);if(d===RegExp)return o(e,s,l);if(d===Map)return n(e,s,l);if(d===Set)return u(e,s,l);var f=dq(e);return f===tq?r(e,s,l):f===aq?o(e,s,l):f===rq?n(e,s,l):f===oq?u(e,s,l):f===iq?typeof e.then!="function"&&typeof s.then!="function"&&i(e,s,l):f===XI?i(e,s,l):f===eq||f===nq||f===uq?a(e,s,l):!1}}function hq(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?WI:zI,areDatesEqual:BI,areMapsEqual:n?FI(YI,WI):YI,areObjectsEqual:n?WI:HI,arePrimitiveWrappersEqual:KI,areRegExpsEqual:GI,areSetsEqual:n?FI(JI,WI):JI,areTypedArraysEqual:n?WI:ZI};if(r&&(i=lq({},i,r(i))),t){var a=$I(i.areArraysEqual),o=$I(i.areMapsEqual),u=$I(i.areObjectsEqual),c=$I(i.areSetsEqual);i=lq({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:u,areSetsEqual:c})}return i}function pq(e){return function(t,r,n,i,a,o,u){return e(t,r,u)}}function gq(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,a=e.strict;if(n)return function(e,o){var u=n(),c=u.cache,s=c===void 0?t?new WeakMap:void 0:c,l=u.meta;return r(e,o,{cache:s,equals:i,meta:l,strict:a})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(e,t){return r(e,t,o)}}yq();yq({strict:!0});yq({circular:!0});yq({circular:!0,strict:!0});yq({createInternalComparator:function(){return VI}});yq({strict:!0,createInternalComparator:function(){return VI}});yq({circular:!0,createInternalComparator:function(){return VI}});yq({circular:!0,createInternalComparator:function(){return VI},strict:!0});function yq(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,i=e.createState,a=e.strict,o=a===void 0?!1:a,u=hq(e),c=fq(u),s=n?n(c):pq(c);return gq({circular:r,comparator:c,createState:i,equals:s,strict:o})}function vq(e,t){return e.length!==t.length?!1:e.every((e=>t.findIndex((t=>mq(e,t)))!==-1))}var mq=yq({createCustomConfig:e=>({...e,areArraysEqual:vq})});var wq=e=>new N({parameters:new re({options:{required:!0},values:e})});function bq(e,t){let{dispatch:r}=e,n=Hi(e);return Pi(e,wq(t.parametersDefinition),t.initialState,"buildCoreParameterManager"),r(t.restoreActionCreator(t.initialState.parameters)),{...n,synchronize(n){let i=t.activeParametersSelector(e[U]),a=t.enrichParameters(e[U],i),o=t.enrichParameters(e[U],n);mq(a,o)||(r(t.restoreActionCreator(n)),r(t.fetchProductsActionCreator()))},get state(){return{parameters:t.activeParametersSelector(e[U])}}}}function Sq(e,t){if(!t)return;let r=new N({criterion:hn});Pi(e,r,t,"buildSort")}function Iq(e,t){if(!qq(e));let{dispatch:r}=e,n=Hi(e);Sq(e,t.initialState);let i=t.initialState?.criterion;return i&&r(Ag(i)),{...n,get state(){return e[U].commerceSort},sortBy(e){r(Ag(e)),r(t.fetchProductsActionCreator())},isSortedBy(e){return JSON.stringify(this.state.appliedSort)===JSON.stringify(e)},isAvailable(e){return this.state.availableSorts.some((t=>JSON.stringify(t)===JSON.stringify(e)))}}}function qq(e){return e.addReducers({commerceSort:uy}),!0}var Oq=(e,t)=>{let r=Hi(e),{options:{numberOfProductsSelector:n,responseIdSelector:i,isLoadingSelector:a,errorSelector:o,pageSelector:u,perPageSelector:c,totalEntriesSelector:s,enrichSummary:l}}=t,d=()=>e[U],f=()=>u(d()),h=()=>c(d()),p=()=>s(d()),g=()=>!!i(d()),y=()=>g()&&p()>0,v=()=>y()?f()*h()+1:0,m=()=>y()?v()+(n(d())-1):0;return{...r,get state(){return{firstRequestExecuted:g(),firstProduct:v(),lastProduct:m(),totalNumberOfProducts:p(),hasProducts:y(),isLoading:a(d()),hasError:o(d())!==null,...l?l(d()):{}}}}};var Cq=new H({min:1,default:8,required:!1}),xq=new H({min:1,max:20,default:5,required:!1}),Aq={desiredCount:xq,numberOfValues:Cq};Nt("automaticFacet/setOptions",(e=>Ei(e,Aq)));Nt("automaticFacet/deselectAll",(e=>Ei(e,Ja)));var kq=xi,jq=Nt("automaticFacet/toggleSelectValue",(e=>Ei(e,{field:kq,selection:new re({values:dh})})));ir(ef(),(e=>{e.addCase(Kl,((e,t)=>{let r=Tq(e),n=t.payload;e.defaultNumberOfResults=e.numberOfResults=n,e.firstResult=Eq(r,n)})).addCase(Gl,((e,t)=>{e.numberOfResults=t.payload,e.firstResult=0})).addCase(Ym,(e=>{e.firstResult=0})).addCase(Jl,((e,t)=>{let r=t.payload;e.firstResult=Eq(r,e.numberOfResults)})).addCase(Zl,((e,t)=>{let r=t.payload;e.firstResult=Eq(r,e.numberOfResults)})).addCase(ed,(e=>{let t=Tq(e),r=Math.max(t-1,1);e.firstResult=Eq(r,e.numberOfResults)})).addCase(Xl,(e=>{let t=Tq(e),r=Mq(e),n=Math.min(t+1,r);e.firstResult=Eq(n,e.numberOfResults)})).addCase(So.fulfilled,((e,t)=>{t.payload&&(e.numberOfResults=t.payload.pagination.numberOfResults,e.firstResult=t.payload.pagination.firstResult)})).addCase(Vl,((e,t)=>{e.firstResult=t.payload.firstResult??e.firstResult,e.numberOfResults=t.payload.numberOfResults??e.defaultNumberOfResults})).addCase(zf.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.totalCountFiltered})).addCase(Pl.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.pagination.totalCount})).addCase(yh,(e=>{Rq(e)})).addCase(Zh,(e=>{Rq(e)})).addCase(gh,(e=>{Rq(e)})).addCase(sp,(e=>{Rq(e)})).addCase(po,(e=>{Rq(e)})).addCase(ph,(e=>{Rq(e)})).addCase(io,(e=>{Rq(e)})).addCase(no,(e=>{Rq(e)})).addCase(uo,(e=>{Rq(e)})).addCase(Jh,(e=>{Rq(e)})).addCase(cp,(e=>{Rq(e)})).addCase(ga,(e=>{Rq(e)})).addCase(Xh,(e=>{Rq(e)})).addCase(lp,(e=>{Rq(e)})).addCase(ho,(e=>{Rq(e)})).addCase(jq,(e=>{Rq(e)}))}));function Rq(e){e.firstResult=ef().firstResult}function Tq(e){let{firstResult:t,numberOfResults:r}=e;return Pq(t,r)}function Mq(e){let{totalCountFiltered:t,numberOfResults:r}=e;return Dq(t,r)}function Eq(e,t){return(e-1)*t}function Pq(e,t){return Math.round(e/t)+1}function Dq(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}new N({parameters:new re({options:{required:!0},values:Ql})});var Fq=new N({fragment:new ee});function $q(e,t){let r;function n(){r=t.requestIdSelector(e[U])}function i(){return r!==t.requestIdSelector(e[U])}Pi(e,Fq,t.initialState,"buildUrlManager");let a=Hi(e),o=t.initialState.fragment;n();let u=t.parameterManagerBuilder(e,{initialState:{parameters:t.serializer.deserialize(o)}});return{...a,subscribe(r){let a=()=>{let e=this.state.fragment;!Uq(t.serializer.deserialize,o,e)&&i()&&(o=e,r()),n()};return a(),e.subscribe(a)},get state(){return{fragment:t.serializer.serialize(u.state.parameters)}},synchronize(e){o=e;let r=t.serializer.deserialize(e);u.synchronize(r)}}}function Uq(e,t,r){if(t===r)return!0;let n=e(t),i=e(r);return mq(n,i)}function Qq(e,t){return{..._q(e,{...t,facetSearchType:"SEARCH"}),didYouMean(){return aI(e)}}}function Vq(e,t){return _q(e,{...t,facetSearchType:"LISTING"})}function _q(e,t){let{fetchProductsActionCreator:r,facetResponseSelector:n,isFacetLoadingResponseSelector:i,requestIdSelector:a,serializer:o,parametersDefinition:u,activeParametersSelector:c,restoreActionCreator:s,enrichParameters:l,facetSearchType:d}=t;return{...Nq(e,t),sort(t){return Iq(e,{...t,fetchProductsActionCreator:r})},facetGenerator(){let t={fetchProductsActionCreator:r,facetResponseSelector:n,isFacetLoadingResponseSelector:i,facetSearch:{type:d}};return bI(e,{buildRegularFacet:(r,n)=>xI(e,{...n,...t}),buildNumericFacet:(r,n)=>II(e,{...n,...t}),buildDateFacet:(r,n)=>wI(e,{...n,...t}),buildCategoryFacet:(r,n)=>mI(e,{...n,...t})})},breadcrumbManager(){return sI(e,{facetResponseSelector:n,fetchProductsActionCreator:r})},urlManager(t){return $q(e,{...t,requestIdSelector:a,parameterManagerBuilder:(e,t)=>this.parameterManager(t),serializer:o})},parameterManager(t){return bq(e,{...t,parametersDefinition:u,activeParametersSelector:c,restoreActionCreator:s,fetchProductsActionCreator:r,enrichParameters:l})}}}function Nq(e,t){let{responseIdSelector:r,isLoadingSelector:n,errorSelector:i,numberOfProductsSelector:a,fetchProductsActionCreator:o,fetchMoreProductsActionCreator:u,slotId:c,pageSelector:s,perPageSelector:l,totalEntriesSelector:d,enrichSummary:f}=t;return{interactiveProduct(t){return jI(e,{...t,responseIdSelector:r})},pagination(t){return TI(e,{...t,options:{...t?.options,slotId:c},fetchProductsActionCreator:o,fetchMoreProductsActionCreator:u})},summary(){return Oq(e,{options:{responseIdSelector:r,isLoadingSelector:n,errorSelector:i,numberOfProductsSelector:a,pageSelector:s,perPageSelector:l,totalEntriesSelector:d,enrichSummary:f}})}}}function Lq(e,t){return!!t&&t.facetId in e.commerceFacetSet}var zq=(e,t)=>{let r=e.commerceSearch.facets.find((e=>e.facetId===t));if(Lq(e,r))return r},Bq=e=>e.commerceSearch.isLoading;function Yq(e){if(!Hq(e));let t=Hi(e),{dispatch:r}=e,n=()=>e[U],i=Qq(e,{responseIdSelector:Cn,fetchProductsActionCreator:La,fetchMoreProductsActionCreator:za,facetResponseSelector:zq,isFacetLoadingResponseSelector:Bq,requestIdSelector:xn,serializer:LS,parametersDefinition:Sp,restoreActionCreator:Ip,activeParametersSelector:Pn,enrichParameters:Dn,isLoadingSelector:jn,errorSelector:Rn,pageSelector:Yr,perPageSelector:Nr,totalEntriesSelector:zr,numberOfProductsSelector:An,enrichSummary:Fn});return{...t,...i,get state(){return n().commerceSearch},promoteChildToParent(e){r(Wa({child:e}))},executeFirstSearch(){Cn(n())===""&&r(La())}}}function Hq(e){return e.addReducers({commerceContext:fa,configuration:rw,commerceSearch:ty,commerceQuery:zg}),!0}var Wq=(e,t)=>{let r=e.productListing.facets.find((e=>e.facetId===t));if(Lq(e,r))return r},Kq=e=>e.productListing.isLoading;function Gq(e){if(!Jq(e));let t=Hi(e),{dispatch:r}=e,n=()=>e[U],i=Vq(e,{responseIdSelector:Wr,fetchProductsActionCreator:vp,fetchMoreProductsActionCreator:mp,facetResponseSelector:Wq,isFacetLoadingResponseSelector:Kq,requestIdSelector:Kr,serializer:zS,parametersDefinition:gp,activeParametersSelector:yn,restoreActionCreator:yp,enrichParameters:vn,isLoadingSelector:Zr,errorSelector:Xr,pageSelector:Yr,perPageSelector:Nr,totalEntriesSelector:zr,numberOfProductsSelector:Gr});return{...t,...i,get state(){let{products:e,error:t,isLoading:r,responseId:i}=n().productListing;return{products:e,error:t,isLoading:r,responseId:i}},promoteChildToParent(e){r(bp({child:e}))},refresh:()=>r(vp()),executeFirstRequest(){Wr(n())===""&&r(vp())}}}function Jq(e){return e.addReducers({productListing:Eg,commerceContext:fa,configuration:rw}),!0}function Zq(e,t){if(!Xq(e));Pi(e,vg,t.options,"buildRecommendations");let r=Hi(e),{dispatch:n}=e,{slotId:i,productId:a}=t.options;n(Og({slotId:i}));let o=Pt((e=>e.recommendations[i]),(e=>e)),u=Nq(e,{slotId:i,responseIdSelector:e=>e.recommendations[i].responseId,fetchProductsActionCreator:()=>Ig({slotId:i}),fetchMoreProductsActionCreator:()=>qg({slotId:i}),isLoadingSelector:e=>bg(e,i),errorSelector:e=>e.recommendations[i].error,pageSelector:e=>Hr(e,i),perPageSelector:e=>Lr(e,i),totalEntriesSelector:e=>Br(e,i),numberOfProductsSelector:e=>mg(e,i)});return{...r,...u,promoteChildToParent(e){n(xg({child:e,slotId:i}))},get state(){return o(e[U])},refresh:()=>n(Ig({slotId:i,productId:a}))}}function Xq(e){return e.addReducers({recommendations:Hg}),!0}ir(tl(),(e=>e.addCase(td,((e,t)=>({...e,...t.payload}))).addCase(Bd,((e,t)=>{e.q=t.payload})).addCase(Bw,((e,t)=>{e.q=t.payload.expression})).addCase(So.fulfilled,((e,t)=>t.payload?.query??e)).addCase(Vl,((e,t)=>{e.q=t.payload.q??e.q,e.enableQuerySyntax=t.payload.enableQuerySyntax??e.enableQuerySyntax}))));var eO={open:new ee,close:new ee},tO={id:xi,numberOfSuggestions:new H({min:0}),enableQuerySyntax:new G,highlightOptions:new re({values:{notMatchDelimiters:new re({values:eO}),exactMatchDelimiters:new re({values:eO}),correctionDelimiters:new re({values:eO})}}),clearFilters:new G};new N(tO);function rO(e,t){return e?e.completions.map((e=>({highlightedValue:Kn(e.highlighted,t),rawValue:e.expression}))):[]}var nO={clearFilters:!0},{id:iO,highlightOptions:aO,clearFilters:oO}=tO,uO={id:iO,highlightOptions:aO,clearFilters:oO},cO=new N(uO);function sO(e,t={}){if(!lO(e));let r=Hi(e),{dispatch:n}=e,i=()=>e[U],a=t.options?.id||_n("search_box"),o={id:a,highlightOptions:{...t.options?.highlightOptions},...nO,...t.options};Di(e,cO,o,"buildSearchBox"),n(Vw({id:a,query:i().commerceQuery.query??""})),n(_g({id:a}));let u=()=>i().querySet[o.id],c=async()=>{let e={query:u(),clearFilters:o.clearFilters};n(Ba(e)),n(La())};return{...r,updateText(e){n(_w({id:a,query:e})),this.showSuggestions()},clear(){n(_w({id:a,query:""})),n(Qg({id:a}))},showSuggestions(){n(Vg({id:a}))},selectSuggestion(e){n(Ng({id:a,expression:e})),c().then((()=>{n(Qg({id:a}))}))},submit(){c(),n(Qg({id:a}))},get state(){let e=i().querySuggest[o.id],t=rO(e,o.highlightOptions),r=e?e.isLoading:!1;return{value:u(),suggestions:t,isLoading:i().commerceSearch.isLoading,isLoadingSuggestions:r}}}}function lO(e){return e.addReducers({commerceQuery:zg,querySuggest:rb,configuration:rw,querySet:Kw,commerceSearch:ty}),!0}var dO={queries:[]},fO={maxLength:10,clearFilters:!0},hO=new N({queries:new ie({required:!0})}),pO=new N({maxLength:new H({required:!0,min:1}),clearFilters:new G});function gO(e,t){Di(e,pO,t?.options,"buildRecentQueriesList"),Pi(e,hO,t?.initialState,"buildRecentQueriesList")}function yO(e,t){if(!vO(e));let r=Hi(e),{dispatch:n}=e,i=()=>e[U],a={...fO,...t?.options},o={...dO,...t?.initialState};gO(e,{options:a,initialState:o});let u={queries:o.queries,maxLength:a.maxLength};return n($b(u)),{...r,get state(){let e=i();return{...e.recentQueries,analyticsEnabled:e.configuration.analytics.enabled}},clear(){n(Fb())},executeRecentQuery(e){let t=new H({required:!0,min:0,max:this.state.queries.length}).validate(e);if(t)throw new Error(t);let r={query:this.state.queries[e],clearFilters:a.clearFilters};n(Ba(r)),n(La())}}}function vO(e){return e.addReducers({search:ty,recentQueries:Ub}),!0}var mO={searchBoxId:Ai,cacheTimeout:new H},wO=new N(mO);function bO(e,t){if(!SO(e));let r=Hi(e),{dispatch:n}=e,i=()=>e[U],a={searchBoxId:t.options.searchBoxId||_n("instant-products-"),cacheTimeout:t.options.cacheTimeout||6e4};Di(e,wO,a,"buildInstantProducts");let o=a.searchBoxId;n(gb({id:o}));let u=()=>i().instantProducts[o],c=e=>u().cache[e],s=()=>u().q,l=()=>{let e=c(s());return e?e.isLoading?[]:e.products:[]};return{...r,updateQuery(e){if(!e)return;let t=c(e);(!t||!t.isLoading&&(t.error||vb(t)))&&n(Ya({id:o,q:e,cacheTimeout:a.cacheTimeout})),n(yb({id:o,query:e}))},clearExpired(){n(fb({id:o}))},promoteChildToParent(e){n(pb({child:e,id:o,query:s()}))},interactiveProduct(t){return jI(e,{...t,responseIdSelector:()=>u().cache[s()].searchUid})},get state(){let e=s(),t=c(e);return{query:e,isLoading:t?.isLoading||!1,error:t?.error||null,products:l()}}}}function SO(e){return e.addReducers({instantProducts:Ab}),!0}function IO(){return{}}var qO=ir(IO(),(e=>e.addCase(Jb,((e,t)=>{let{id:r,redirectionUrl:n}=t.payload;r in e||(e[r]=OO(n))})).addCase(Zb,((e,t)=>{let{id:r}=t.payload,n=e[r];if(n){e[r]=OO(n.defaultRedirectionUrl);return}})).addCase(Gb.pending,((e,t)=>{let r=e[t.meta.arg.id];r&&(r.isLoading=!0)})).addCase(Gb.fulfilled,((e,t)=>{let r=t.payload,n=e[t.meta.arg.id];n&&(n.redirectTo=r||n.defaultRedirectionUrl,n.isLoading=!1)})).addCase(Gb.rejected,((e,t)=>{let r=e[t.meta.arg.id];r&&(r.isLoading=!1)}))));function OO(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1}}var CO=new N({...uO,redirectionUrl:new ee({required:!0,emptyAllowed:!1})});function xO(e,t){if(!AO(e));let{dispatch:r}=e,n=()=>e[U],i=t.options.id||_n("standalone_search_box"),a={id:i,highlightOptions:{...t.options.highlightOptions},...nO,...t.options};Di(e,CO,a,"buildStandaloneSearchBox");let o=sO(e,{options:a});return r(Jb({id:i,redirectionUrl:a.redirectionUrl})),{...o,updateText(e){o.updateText(e)},selectSuggestion(e){r(Ng({id:i,expression:e})),this.submit()},afterRedirection(){r(Zb({id:i}))},submit(){r(Qa({query:this.state.value})),r(Gb({id:i}))},get state(){let e=n().commerceStandaloneSearchBoxSet[i];return{...o.state,redirectTo:e.redirectTo}}}}function AO(e){return e.addReducers({commerceQuery:zg,commerceStandaloneSearchBoxSet:qO,configuration:rw,querySuggest:rb}),!0}var kO=new N({content:new L({required:!0}),conditions:new L({required:!0}),priority:new H({required:!1,default:0,min:0}),fields:new ie({required:!1,each:xi})});function jO(){let e=[],t=e=>{let t=kO.validate(e);if(!e.conditions.every((e=>e instanceof Function)))throw new _("Each template condition should be a function that takes a Result or Product as an argument and returns a boolean");return t};return{registerTemplates(...r){r.forEach((r=>{let n={...t(r),fields:r.fields||[]};e.push(n)})),e.sort(((e,t)=>t.priority-e.priority))},selectTemplate(t){let r=e.find((e=>e.conditions.every((e=>e(t)))));return r?r.content:null}}}function RO(){return jO()}var TO=(e,t)=>{let r=e;return Y(r[t])?Y(e.additionalFields[t])?null:e.additionalFields[t]:r[t]},MO=e=>t=>e.every((e=>!Y(TO(t,e)))),EO=e=>t=>e.every((e=>Y(TO(t,e)))),PO=(e,t)=>r=>{let n=FO(e,r);return t.some((e=>n.some((t=>`${t}`.toLowerCase()===e.toLowerCase()))))},DO=(e,t)=>r=>{let n=FO(e,r);return t.every((e=>n.every((t=>`${t}`.toLowerCase()!==e.toLowerCase()))))},FO=(e,t)=>{let r=TO(t,e);return ae(r)?r:[r]},$O={getProductProperty:TO,fieldsMustBeDefined:MO,fieldsMustNotBeDefined:EO,fieldMustMatch:PO,fieldMustNotMatch:DO};function UO(e){if(!QO(e));let t=Hi(e),{dispatch:r}=e,n=()=>e[U],i=()=>n().triggers.queryModification.newQuery,a=()=>n().triggers.queryModification.originalQuery;return{...t,get state(){return{newQuery:i(),originalQuery:a(),wasQueryModified:i()!==""}},undo(){r(Va({q:i()})),r(Qa({query:a()})),r(La())}}}function QO(e){return e.addReducers({triggers:yy,query:zg}),!0}function VO(){return[]}ir(VO(),(e=>{e.addCase(Vg.fulfilled,((e,t)=>t.payload.fieldSuggestionsFacets??[]))}));D();
/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */export{RO as B,cb as E,UO as J,kd as L,eS as M,bO as N,xO as Q,Vn as R,Zq as S,sb as U,$O as W,sO as a,Ew as b,ci as c,F as d,Yq as f,yO as q,eb as s,Gq as y};
//# sourceMappingURL=p-0e432c2f.js.map