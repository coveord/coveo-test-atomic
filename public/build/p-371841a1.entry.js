import{r as t,d as e,h as i}from"./p-00525453.js";import{c as s}from"./p-7e7b1a62.js";import{B as a}from"./p-c58ca89b.js";import{I as n}from"./p-e8da8696.js";import{p as r}from"./p-4585d9b6.js";import"./p-4dcb66f1.js";import"./p-1580513b.js";import"./p-b0ede3ce.js";import"./p-2431fb41.js";import"./p-e9c4f463.js";const d="[part='input-form']{display:grid;grid-template-areas:'label-start label-end .'\n    'input-start input-end apply-button';grid-template-columns:1fr 1fr auto}[part='label-start']{grid-area:label-start}[part='label-end']{grid-area:label-end}[part='input-start']{grid-area:input-start}[part='input-end']{grid-area:input-end}[part='input-apply-button']{grid-area:apply-button}";const p=d;const l=class{constructor(i){t(this,i);this.applyInput=e(this,"atomic/numberInputApply",7);this.start=undefined;this.end=undefined;this.bindings=undefined;this.label=undefined;this.range=undefined;this.facet=undefined}connectedCallback(){var t,e;this.start=(t=this.range)===null||t===void 0?void 0:t.start;this.end=(e=this.range)===null||e===void 0?void 0:e.end}apply(){if(!this.startRef.validity.valid||!this.endRef.validity.valid){return}this.applyInput.emit({start:this.start,end:this.end});this.facet.setRanges([{start:this.start,end:this.end,endInclusive:true,state:"selected"}])}get absoluteMinimum(){const{field:t}=this.facet.state;const e=["ec_price","ec_promo_price"].includes(t);return e?0:Number.MIN_SAFE_INTEGER}get minimumInputValue(){return s(this.start)?this.absoluteMinimum:this.start}get maximumInputValue(){return s(this.end)?Number.MAX_SAFE_INTEGER:this.end}render(){var t,e;const{facetId:s}=this.facet.state;const n=this.bindings.i18n.t(this.label);const r=this.bindings.i18n.t("min");const d=this.bindings.i18n.t("max");const p=this.bindings.i18n.t("number-input-minimum",{label:n});const l=this.bindings.i18n.t("number-input-maximum",{label:n});const u=this.bindings.i18n.t("apply");const c=this.bindings.i18n.t("number-input-apply",{label:n});const h="p-2.5 input-primary placeholder-neutral-dark min-w-0 mr-1";const o="text-neutral-dark text-sm";const b="any";return i("form",{key:"a743097a3d662457453d5b722478f02085581b1c",class:"mt-4 px-2 gap-y-0.5",part:"input-form",onSubmit:t=>{t.preventDefault();this.apply();return false}},i("label",{key:"11d6ee801d69366cf04bde8b8bbcfb2d0b64443a",part:"label-start",class:o,htmlFor:`${s}_start`},r),i("input",{key:"9ea7d3dec3650cadedde932450a9dd25f3562ca3",part:"input-start",id:`${s}_start`,type:"number",step:b,ref:t=>this.startRef=t,class:h,"aria-label":p,required:true,min:this.absoluteMinimum,max:this.maximumInputValue,value:(t=this.range)===null||t===void 0?void 0:t.start,onInput:t=>this.start=t.target.valueAsNumber}),i("label",{key:"fbcbcf16aadd7d0b17e6288e39f0abec3e78d441",part:"label-end",class:o,htmlFor:`${s}_end`},d),i("input",{key:"45f3ba2780117f6fbe7bee9ddee39f45cf95ce82",part:"input-end",id:`${s}_end`,type:"number",step:b,ref:t=>this.endRef=t,class:h,"aria-label":l,required:true,min:this.minimumInputValue,max:Number.MAX_SAFE_INTEGER,value:(e=this.range)===null||e===void 0?void 0:e.end,onInput:t=>this.end=t.target.valueAsNumber}),i(a,{key:"60883361f78b274aca48bb3e8c416e8af8848d5b",style:"outline-primary",type:"submit",part:"input-apply-button",class:"p-2.5 flex-none truncate",ariaLabel:c,text:u}))}};l.style=p;const u=class{constructor(i){t(this,i);this.applyInput=e(this,"atomic/dateInputApply",7);this.start=undefined;this.end=undefined;this.bindings=undefined;this.rangeGetter=undefined;this.rangeSetter=undefined;this.facetId=undefined;this.label=undefined;this.min=undefined;this.max=undefined}connectedCallback(){const t=this.rangeGetter();this.start=t?r(t.start).toDate():undefined;this.end=t?r(t.end).toDate():undefined}apply(){if(!this.startRef.validity.valid||!this.endRef.validity.valid){return}this.applyInput.emit({start:this.start,end:this.end});const t=n({start:this.start,end:this.end.setHours(23,59,59,999)});this.rangeSetter(t)}formattedDateValue(t){if(!t){return""}return r(t).format("YYYY-MM-DD")}render(){const t=this.bindings.i18n.t(this.label);const e=this.bindings.i18n.t("start");const s=this.bindings.i18n.t("end");const n=this.bindings.i18n.t("date-input-start",{label:t});const d=this.bindings.i18n.t("date-input-end",{label:t});const p=this.bindings.i18n.t("apply");const l=this.bindings.i18n.t("date-input-apply",{label:t});const u="input-primary p-2.5";const c="text-neutral-dark self-center";const h="yyyy-mm-dd";const o="^(1[4-9]\\d{2}|2\\d{3})-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$";const b=this.rangeGetter();return i("form",{key:"f6fc7caf8d5ad41fd6166f2a832726dd741d147c",class:"grid gap-2 grid-cols-min-1fr mt-4 px-2",onSubmit:t=>{t.preventDefault();this.apply();return false}},i("label",{key:"b7c8f24e8b46177d568b8c638d98d7cc86536da0",part:"input-label",class:c,htmlFor:`${this.facetId}_start`},e,":"),i("input",{key:"647e67f30190b09a14d1cb380f0a03cee1195d20",id:`${this.facetId}_start`,part:"input-start",type:"date",ref:t=>this.startRef=t,class:u,"aria-label":n,placeholder:h,pattern:o,required:true,min:this.min||this.formattedDateValue("1401-01-01"),max:this.end?this.formattedDateValue(this.end):this.max,value:this.formattedDateValue(b===null||b===void 0?void 0:b.start),onInput:t=>this.start=r(t.target.value).toDate()}),i("label",{key:"4af747c6ac7695ec6a2a8b8cf4c77bc52b431d2c",part:"input-label",class:c,htmlFor:`${this.facetId}_end`},s,":"),i("input",{key:"d2fa994dce6b0bf18d8f9632dc38835951aded7d",id:`${this.facetId}_end`,part:"input-end",type:"date",ref:t=>this.endRef=t,class:u,"aria-label":d,placeholder:h,pattern:o,required:true,min:this.min||this.formattedDateValue(this.start),max:this.max,value:this.formattedDateValue(b===null||b===void 0?void 0:b.end),onInput:t=>this.end=r(t.target.value).toDate()}),i(a,{key:"795a0308911f723e36d729123e22ed9ec195c510",style:"outline-primary",type:"submit",part:"input-apply-button",class:"p-2.5 col-span-2 truncate",ariaLabel:l,text:p}))}};export{l as atomic_commerce_facet_number_input,u as atomic_facet_date_input};
//# sourceMappingURL=p-371841a1.entry.js.map