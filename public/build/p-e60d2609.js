import{K as e}from"./p-e8da8696.js";import{h as t}from"./p-00525453.js";import{e as n,f as o,b as r}from"./p-effc0f7e.js";import{t as i}from"./p-4328fcc3.js";import{i as s}from"./p-65c3e61f.js";function a(e){if(s(e)){return"section"}if(!o(e)){return"metadata"}if(r(e)&&e.tagName.toLowerCase()===i){return"table-column-definition"}return"other"}function c(e){return n(Array.from(e),(e=>a(e)))}class l{constructor({host:e,setError:t,validParents:n,allowEmpty:o=false}){this.matchConditions=[];this.host=e;this.validateTemplate(e,t,n,o)}validateTemplate(e,t,n,o=true){var r;const i=n.map((e=>e.toUpperCase())).includes(((r=e.parentElement)===null||r===void 0?void 0:r.nodeName)||"");const s=e.nodeName.toLowerCase();if(!i){t(new Error(`The "${s}" component has to be the child of one of the following: ${n.map((e=>`"${e.toLowerCase()}"`)).join(", ")}.`));return}const a=e.querySelector("template");if(!a){t(new Error(`The "${s}" component has to contain a "template" element as a child.`));return}if(!o&&!a.innerHTML.trim()){t(new Error(`The "template" tag inside "${s}" cannot be empty.`));return}if(a.content.querySelector("script")){console.warn('Any "script" tags defined inside of "template" elements are not supported and will not be executed when the results are rendered.',e)}const{section:l,other:f}=c(a.content.childNodes);if((l===null||l===void 0?void 0:l.length)&&(f===null||f===void 0?void 0:f.length)){console.warn("Result templates should only contain section elements or non-section elements. Future updates could unpredictably affect this result template.",e,{sectionNodes:l,otherNodes:f})}}getTemplate(e,t){if(t){return null}return{conditions:e.concat(this.matchConditions),content:f(this.host).content,priority:1}}renderIfError(e){if(e){return t("atomic-component-error",{element:this.host,error:e})}}}function f(e){return e.querySelector("template")}function u(t,n){const o=[];for(const n in t){o.push(e.fieldMustMatch(n,t[n]))}for(const t in n){o.push(e.fieldMustNotMatch(t,n[t]))}return o}function m(t,n){const o=[];if(t){const n=t.split(",");o.push(e.fieldsMustBeDefined(n))}if(n){const t=n.split(",");o.push(e.fieldsMustNotBeDefined(t))}return o}export{l as R,m as a,u as m};
//# sourceMappingURL=p-e60d2609.js.map