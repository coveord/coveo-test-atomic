{"version":3,"names":["CategoryFacetAllCategoryButton","i18n","onClick","allCategories","t","h","Button","style","part","icon","LeftArrow","class","CategoryFacetValueLink","displayValue","numberOfResults","isParent","isSelected","searchQuery","isLeafValue","setRef","children","partNames","push","FacetValueLink","join","buttonRef","btn","subList","FacetValueLabelHighlight","CategoryFacetChildValueLink","props","CategoryFacetChildrenAsTreeContainer","className","CategoryFacetParentAsTreeContainer","isTopLevel","CategoryFacetParentButton","field","facetValue","getFieldValueCaption","value","ariaLabel","count","ariaPressed","CategoryFacetParentValueLink","CategoryFacetSearchResultsContainer","_","SEPARATOR","ELLIPSIS","PATH_MAX_LENGTH","CategoryFacetSearchValue","toLocaleString","language","inLabel","localizedPath","path","length","map","child","parent","ellipsedPath","firstPart","slice","lastParts","concat","renderPath","index","key","text","CategoryFacetTreeValueContainer"],"sources":["src/components/common/facets/category-facet/all-categories-button.tsx","src/components/common/facets/category-facet/value-link.tsx","src/components/common/facets/category-facet/child-value-link.tsx","src/components/common/facets/category-facet/children-as-tree-container.tsx","src/components/common/facets/category-facet/parent-as-tree-container.tsx","src/components/common/facets/category-facet/parent-button.tsx","src/components/common/facets/category-facet/parent-value-link.tsx","src/components/common/facets/category-facet/search-results-container.tsx","src/components/common/facets/category-facet/search-value.tsx","src/components/common/facets/category-facet/value-as-tree-container.tsx"],"sourcesContent":["import {FunctionalComponent, h} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport LeftArrow from '../../../../images/arrow-left-rounded.svg';\nimport {Button} from '../../button';\n\ninterface CategoryFacetAllCategoryButtonProps {\n  i18n: i18n;\n  onClick(): void;\n}\n\nexport const CategoryFacetAllCategoryButton: FunctionalComponent<\n  CategoryFacetAllCategoryButtonProps\n> = ({i18n, onClick}) => {\n  const allCategories = i18n.t('all-categories');\n  return (\n    <Button\n      style=\"text-neutral\"\n      part=\"all-categories-button\"\n      onClick={() => {\n        onClick();\n      }}\n    >\n      <atomic-icon\n        aria-hidden=\"true\"\n        icon={LeftArrow}\n        part=\"back-arrow\"\n      ></atomic-icon>\n      <span class=\"truncate\">{allCategories}</span>\n    </Button>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport {FacetValueLabelHighlight} from '../facet-value-label-highlight/facet-value-label-highlight';\nimport {FacetValueLink} from '../facet-value-link/facet-value-link';\n\nexport interface CategoryFacetValueLinkProps {\n  displayValue: string;\n  numberOfResults: number;\n  i18n: i18n;\n  onClick: () => void;\n  isParent: boolean;\n  isSelected: boolean;\n  searchQuery: string;\n  isLeafValue: boolean;\n  setRef: (el?: HTMLButtonElement) => void;\n}\n\nexport const CategoryFacetValueLink: FunctionalComponent<\n  CategoryFacetValueLinkProps\n> = (\n  {\n    displayValue,\n    numberOfResults,\n    i18n,\n    onClick,\n    isParent,\n    isSelected,\n    searchQuery,\n    isLeafValue,\n    setRef,\n  },\n  children\n) => {\n  const partNames = [];\n  if (isParent) {\n    partNames.push('active-parent');\n  } else {\n    partNames.push(`value-link${isSelected ? ' value-link-selected' : ''}`);\n  }\n\n  if (isLeafValue) {\n    partNames.push('leaf-value');\n  } else {\n    partNames.push('node-value');\n  }\n\n  return (\n    <FacetValueLink\n      displayValue={displayValue}\n      numberOfResults={numberOfResults}\n      isSelected={isSelected}\n      i18n={i18n}\n      onClick={() => {\n        onClick();\n      }}\n      searchQuery={searchQuery}\n      part={partNames.join(' ')}\n      class=\"contents\"\n      buttonRef={(btn) => setRef(btn)}\n      subList={children}\n    >\n      <FacetValueLabelHighlight\n        displayValue={displayValue}\n        isSelected={isSelected}\n      ></FacetValueLabelHighlight>\n    </FacetValueLink>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {\n  CategoryFacetValueLink,\n  CategoryFacetValueLinkProps,\n} from './value-link';\n\ninterface CategoryFacetChildValueLinkProps\n  extends Omit<CategoryFacetValueLinkProps, 'isParent'> {}\n\nexport const CategoryFacetChildValueLink: FunctionalComponent<\n  CategoryFacetChildValueLinkProps\n> = (props, children) => {\n  return (\n    <CategoryFacetValueLink {...props} isParent={false}>\n      {children}\n    </CategoryFacetValueLink>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\n\ninterface CategoryFacetChildrenAsTreeContainerProps {\n  className?: string;\n}\nexport const CategoryFacetChildrenAsTreeContainer: FunctionalComponent<\n  CategoryFacetChildrenAsTreeContainerProps\n> = ({className}, children) => {\n  return (\n    <ul part=\"values\" class={className ?? ''}>\n      {children}\n    </ul>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\n\nexport interface CategoryFacetParentAsTreeContainerProps {\n  isTopLevel: boolean;\n  className?: string;\n}\nexport const CategoryFacetParentAsTreeContainer: FunctionalComponent<\n  CategoryFacetParentAsTreeContainerProps\n> = ({isTopLevel, className}, children) => {\n  return (\n    <ul class={className ?? ''} part={`${isTopLevel ? '' : 'sub-'}parents`}>\n      {children}\n    </ul>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport LeftArrow from '../../../../images/arrow-left-rounded.svg';\nimport {getFieldValueCaption} from '../../../../utils/field-utils';\nimport {Button} from '../../button';\n\ninterface CategoryFacetParentButtonProps {\n  i18n: i18n;\n  field: string;\n  facetValue: {value: string; numberOfResults: number};\n  onClick: () => void;\n}\nexport const CategoryFacetParentButton: FunctionalComponent<\n  CategoryFacetParentButtonProps\n> = ({field, facetValue, i18n, onClick}) => {\n  const displayValue = getFieldValueCaption(field, facetValue.value, i18n);\n  const ariaLabel = i18n.t('facet-value', {\n    value: displayValue,\n    count: facetValue.numberOfResults,\n  });\n\n  return (\n    <Button\n      style=\"text-neutral\"\n      part=\"parent-button\"\n      ariaPressed=\"false\"\n      onClick={() => {\n        onClick();\n      }}\n      ariaLabel={ariaLabel}\n    >\n      <atomic-icon\n        icon={LeftArrow}\n        part=\"back-arrow\"\n        class=\"back-arrow\"\n      ></atomic-icon>\n      <span class=\"truncate\">{displayValue}</span>\n    </Button>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {\n  CategoryFacetValueLink,\n  CategoryFacetValueLinkProps,\n} from './value-link';\n\ninterface CategoryFacetParentValueLinkProps\n  extends Omit<CategoryFacetValueLinkProps, 'isParent' | 'isSelected'> {}\n\nexport const CategoryFacetParentValueLink: FunctionalComponent<\n  CategoryFacetParentValueLinkProps\n> = (props, children) => {\n  return (\n    <CategoryFacetValueLink {...props} isParent isSelected>\n      {children}\n    </CategoryFacetValueLink>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\n\nexport const CategoryFacetSearchResultsContainer: FunctionalComponent = (\n  _,\n  children\n) => {\n  return (\n    <ul part=\"search-results\" class=\"mt-3\">\n      {children}\n    </ul>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\nimport {i18n} from 'i18next';\nimport {getFieldValueCaption} from '../../../../utils/field-utils';\nimport {Button} from '../../button';\nimport {FacetValueLabelHighlight} from '../facet-value-label-highlight/facet-value-label-highlight';\n\ninterface CategoryFacetSearchValueProps {\n  value: {count: number; path: string[]; displayValue: string};\n  i18n: i18n;\n  field: string;\n  onClick(): void;\n  searchQuery: string;\n}\n\nconst SEPARATOR = '/';\nconst ELLIPSIS = '...';\nconst PATH_MAX_LENGTH = 3;\n\nexport const CategoryFacetSearchValue: FunctionalComponent<\n  CategoryFacetSearchValueProps\n> = ({value, field, i18n, onClick, searchQuery}) => {\n  const count = value.count.toLocaleString(i18n.language);\n  const inLabel = i18n.t('in');\n  const allCategories = i18n.t('all-categories');\n  const localizedPath = value.path.length\n    ? value.path.map((value) => getFieldValueCaption(field, value, i18n))\n    : [allCategories];\n  const ariaLabel = i18n.t('under', {\n    child: i18n.t('facet-value', {\n      numberOfResults: value.count,\n      value: value.displayValue,\n    }),\n    parent: localizedPath.join(', '),\n  });\n\n  function ellipsedPath(path: string[]) {\n    if (path.length <= PATH_MAX_LENGTH) {\n      return path;\n    }\n    const firstPart = path.slice(0, 1);\n    const lastParts = path.slice(-PATH_MAX_LENGTH + 1);\n    return firstPart.concat(ELLIPSIS, ...lastParts);\n  }\n\n  function renderPath(path: string[]) {\n    if (!path.length) {\n      return <span class=\"truncate\">{`${inLabel} ${allCategories}`}</span>;\n    }\n\n    return [\n      <span class=\"mr-0.5\">{inLabel}</span>,\n      ellipsedPath(path).map((value, index) => [\n        index > 0 && <span class=\"mx-0.5\">{SEPARATOR}</span>,\n        <span class={value === ELLIPSIS ? '' : 'truncate flex-1 max-w-max'}>\n          {value}\n        </span>,\n      ]),\n    ];\n  }\n\n  return (\n    <li key={value.displayValue}>\n      <Button\n        style=\"text-neutral\"\n        part=\"search-result\"\n        onClick={() => onClick()}\n        class=\"w-full flex flex-col px-2 py-2.5 truncate group no-outline\"\n        aria-label={ariaLabel}\n      >\n        <div class=\"w-full flex\">\n          <FacetValueLabelHighlight\n            displayValue={value.displayValue}\n            isSelected={false}\n            searchQuery={searchQuery}\n          ></FacetValueLabelHighlight>\n          <span part=\"value-count\" class=\"value-count\">\n            {i18n.t('between-parentheses', {\n              text: count,\n            })}\n          </span>\n        </div>\n        <div\n          part=\"search-result-path\"\n          class=\"flex w-full text-neutral-dark mt-1 group-focus:text-primary group-hover:text-primary\"\n        >\n          {renderPath(localizedPath)}\n        </div>\n      </Button>\n    </li>\n  );\n};\n","import {FunctionalComponent, h} from '@stencil/core';\n\nexport const CategoryFacetTreeValueContainer: FunctionalComponent = (\n  _,\n  children\n) => {\n  return <li class=\"contents\">{children}</li>;\n};\n"],"mappings":"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"}